"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},requirejs,_require,define;!function(global){function commentReplace(e,t,r,i){return i||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var r;for(r=0;r<e.length&&(!e[r]||!t(e[r],r,e));r+=1);}}function eachReverse(e,t){if(e){var r;for(r=e.length-1;r>-1&&(!e[r]||!t(e[r],r,e));r-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var r;for(r in e)if(hasProp(e,r)&&t(e[r],r))break}function mixin(e,t,r,i){return t&&eachProp(t,function(t,n){(r||!hasProp(e,n))&&(!i||"object"!==("undefined"==typeof t?"undefined":_typeof(t))||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[n]=t:(e[n]||(e[n]={}),mixin(e[n],t,r,i)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,r,i){var n=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return n.requireType=e,n.requireModules=i,r&&(n.originalError=r),n}function newContext(e){function t(e){var t,r;for(t=0;t<e.length;t++)if(r=e[t],"."===r)e.splice(t,1),t-=1;else if(".."===r){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function r(e,r,i){var n,a,o,s,c,l,u,d,h,m,p,v,g=r&&r.split("/"),f=E.map,b=f&&f["*"];if(e&&(e=e.split("/"),u=e.length-1,E.nodeIdCompat&&jsSuffixRegExp.test(e[u])&&(e[u]=e[u].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&g&&(v=g.slice(0,g.length-1),e=v.concat(e)),t(e),e=e.join("/")),i&&f&&(g||b)){o=e.split("/");e:for(s=o.length;s>0;s-=1){if(l=o.slice(0,s).join("/"),g)for(c=g.length;c>0;c-=1)if(a=getOwn(f,g.slice(0,c).join("/")),a&&(a=getOwn(a,l))){d=a,h=s;break e}!m&&b&&getOwn(b,l)&&(m=getOwn(b,l),p=s)}!d&&m&&(d=m,h=p),d&&(o.splice(0,h,d),e=o.join("/"))}return n=getOwn(E.pkgs,e),n?n:e}function i(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===P.contextName?(t.parentNode.removeChild(t),!0):void 0})}function n(e){var t=getOwn(E.paths,e);return t&&isArray(t)&&t.length>1?(t.shift(),P.require.undef(e),P.makeRequire(null,{skipMap:!0})([e]),!0):void 0}function a(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function o(e,t,i,n){var o,s,c,l,u=null,d=t?t.name:null,h=e,m=!0,p="";return e||(m=!1,e="_@r"+(O+=1)),l=a(e),u=l[0],e=l[1],u&&(u=r(u,d,n),s=getOwn(C,u)),e&&(u?p=s&&s.normalize?s.normalize(e,function(e){return r(e,d,n)}):-1===e.indexOf("!")?r(e,d,n):e:(p=r(e,d,n),l=a(p),u=l[0],p=l[1],i=!0,o=P.nameToUrl(p))),c=!u||s||i?"":"_unnormalized"+(A+=1),{prefix:u,name:p,parentMap:t,unnormalized:!!c,url:o,originalName:h,isDefine:m,id:(u?u+"!"+p:p)+c}}function s(e){var t=e.id,r=getOwn(I,t);return r||(r=I[t]=new P.Module(e)),r}function c(e,t,r){var i=e.id,n=getOwn(I,i);!hasProp(C,i)||n&&!n.defineEmitComplete?(n=s(e),n.error&&"error"===t?r(n.error):n.on(t,r)):"defined"===t&&r(C[i])}function l(e,t){var r=e.requireModules,i=!1;t?t(e):(each(r,function(t){var r=getOwn(I,t);r&&(r.error=e,r.events.error&&(i=!0,r.emit("error",e)))}),i||req.onError(e))}function u(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(P.defQueueMap[t]=!0),V.push(e)}),globalDefQueue=[])}function d(e){delete I[e],delete k[e]}function h(e,t,r){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,each(e.depMaps,function(i,n){var a=i.id,o=getOwn(I,a);!o||e.depMatched[n]||r[a]||(getOwn(t,a)?(e.defineDep(n,C[a]),e.check()):h(o,t,r))}),r[i]=!0)}function m(){var e,t,r=1e3*E.waitSeconds,a=r&&P.startTime+r<(new Date).getTime(),o=[],s=[],c=!1,u=!0;if(!b){if(b=!0,eachProp(k,function(e){var r=e.map,l=r.id;if(e.enabled&&(r.isDefine||s.push(e),!e.error))if(!e.inited&&a)n(l)?(t=!0,c=!0):(o.push(l),i(l));else if(!e.inited&&e.fetched&&r.isDefine&&(c=!0,!r.prefix))return u=!1}),a&&o.length)return e=makeError("timeout","Load timeout for modules: "+o,null,o),e.contextName=P.contextName,l(e);u&&each(s,function(e){h(e,{},{})}),a&&!t||!c||!isBrowser&&!isWebWorker||T||(T=setTimeout(function(){T=0,m()},50)),b=!1}}function p(e){hasProp(C,e[0])||s(o(e[0],null,!0)).init(e[1],e[2])}function v(e,t,r,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(r,t,!1)}function g(e){var t=e.currentTarget||e.srcElement;return v(t,P.onScriptLoad,"load","onreadystatechange"),v(t,P.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function f(){var e;for(u();V.length;){if(e=V.shift(),null===e[0])return l(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));p(e)}P.defQueueMap={}}var b,y,P,S,T,E={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},I={},k={},w={},V=[],C={},D={},B={},O=1,A=1;return S={require:function(e){return e.require?e.require:e.require=P.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?C[e.map.id]=e.exports:e.exports=C[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(E.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},y=function(e){this.events=getOwn(w,e.id)||{},this.map=e,this.shim=getOwn(E.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},y.prototype={init:function(e,t,r,i){i=i||{},this.inited||(this.factory=t,r?this.on("error",r):this.events.error&&(r=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=r,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,P.startTime=(new Date).getTime();var e=this.map;return this.shim?void P.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;D[e]||(D[e]=!0,P.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,r=this.map.id,i=this.depExports,n=this.exports,a=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(a)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{n=P.execCb(r,a,i,n)}catch(o){e=o}else n=P.execCb(r,a,i,n);if(this.map.isDefine&&void 0===n&&(t=this.module,t?n=t.exports:this.usingExports&&(n=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",l(this.error=e)}else n=a;if(this.exports=n,this.map.isDefine&&!this.ignore&&(C[r]=n,req.onResourceLoad)){var s=[];each(this.depMaps,function(e){s.push(e.normalizedMap||e)}),req.onResourceLoad(P,this.map,s)}d(r),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(P.defQueueMap,r)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,i=o(e.prefix);this.depMaps.push(i),c(i,"defined",bind(this,function(i){var n,a,u,h=getOwn(B,this.map.id),m=this.map.name,p=this.map.parentMap?this.map.parentMap.name:null,v=P.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(m=i.normalize(m,function(e){return r(e,p,!0)})||""),a=o(e.prefix+"!"+m,this.map.parentMap),c(a,"defined",bind(this,function(e){this.map.normalizedMap=a,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),u=getOwn(I,a.id),void(u&&(this.depMaps.push(a),this.events.error&&u.on("error",bind(this,function(e){this.emit("error",e)})),u.enable()))):h?(this.map.url=P.nameToUrl(h),void this.load()):(n=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),n.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(I,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&d(e.map.id)}),l(e)}),n.fromText=bind(this,function(r,i){var a=e.name,c=o(a),u=useInteractive;i&&(r=i),u&&(useInteractive=!1),s(c),hasProp(E.config,t)&&(E.config[a]=E.config[t]);try{req.exec(r)}catch(d){return l(makeError("fromtexteval","fromText eval for "+t+" failed: "+d,d,[t]))}u&&(useInteractive=!0),this.depMaps.push(c),P.completeLoad(a),v([a],n)}),void i.load(e.name,v,n,E))})),P.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){k[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var r,i,n;if("string"==typeof e){if(e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,n=getOwn(S,e.id))return void(this.depExports[t]=n(this));this.depCount+=1,c(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?c(e,"error",bind(this,this.errback)):this.events.error&&c(e,"error",bind(this,function(e){this.emit("error",e)}))}r=e.id,i=I[r],hasProp(S,r)||!i||i.enabled||P.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(I,e.id);t&&!t.enabled&&P.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var r=this.events[e];r||(r=this.events[e]=[]),r.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},P={config:E,contextName:e,registry:I,defined:C,urlFetched:D,defQueue:V,defQueueMap:{},Module:y,makeModuleMap:o,nextTick:req.nextTick,onError:l,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,r){return(-1===r.indexOf("?")?"?":"&")+t}}var r=E.shim,i={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){i[t]?(E[t]||(E[t]={}),mixin(E[t],e,!0,!0)):E[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(B[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=P.makeShimExports(e)),r[t]=e}),E.shim=r),e.packages&&each(e.packages,function(e){var t,r;e="string"==typeof e?{name:e}:e,r=e.name,t=e.location,t&&(E.paths[r]=e.location),E.pkgs[r]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(I,function(e,t){e.inited||e.map.unnormalized||(e.map=o(t,null,!0))}),(e.deps||e.callback)&&P.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function a(r,i,c){var u,d,h;return n.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof r?isFunction(i)?l(makeError("requireargs","Invalid require call"),c):t&&hasProp(S,r)?S[r](I[t.id]):req.get?req.get(P,r,t,a):(d=o(r,t,!1,!0),u=d.id,hasProp(C,u)?C[u]:l(makeError("notloaded",'Module name "'+u+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(f(),P.nextTick(function(){f(),h=s(o(null,t)),h.skipMap=n.skipMap,h.init(r,i,c,{enabled:!0}),m()}),a)}return n=n||{},mixin(a,{isBrowser:isBrowser,toUrl:function(e){var i,n=e.lastIndexOf("."),a=e.split("/")[0],o="."===a||".."===a;return-1!==n&&(!o||n>1)&&(i=e.substring(n,e.length),e=e.substring(0,n)),P.nameToUrl(r(e,t&&t.id,!0),i,!0)},defined:function(e){return hasProp(C,o(e,t,!1,!0).id)},specified:function(e){return e=o(e,t,!1,!0).id,hasProp(C,e)||hasProp(I,e)}}),t||(a.undef=function(e){u();var r=o(e,t,!0),n=getOwn(I,e);n.undefed=!0,i(e),delete C[e],delete D[r.url],delete w[e],eachReverse(V,function(t,r){t[0]===e&&V.splice(r,1)}),delete P.defQueueMap[e],n&&(n.events.defined&&(w[e]=n.events),d(e))}),a},enable:function(e){var t=getOwn(I,e.id);t&&s(e).enable()},completeLoad:function(e){var t,r,i,a=getOwn(E.shim,e)||{},o=a.exports;for(u();V.length;){if(r=V.shift(),null===r[0]){if(r[0]=e,t)break;t=!0}else r[0]===e&&(t=!0);p(r)}if(P.defQueueMap={},i=getOwn(I,e),!t&&!hasProp(C,e)&&i&&!i.inited){if(!(!E.enforceDefine||o&&getGlobal(o)))return n(e)?void 0:l(makeError("nodefine","No define call for "+e,null,[e]));p([e,a.deps||[],a.exportsFn])}m()},nameToUrl:function(e,t,r){var i,n,a,o,s,c,l,u=getOwn(E.pkgs,e);if(u&&(e=u),l=getOwn(B,e))return P.nameToUrl(l,t,r);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(i=E.paths,n=e.split("/"),a=n.length;a>0;a-=1)if(o=n.slice(0,a).join("/"),c=getOwn(i,o)){isArray(c)&&(c=c[0]),n.splice(0,a,c);break}s=n.join("/"),s+=t||(/^data\:|^blob\:|\?/.test(s)||r?"":".js"),s=("/"===s.charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":E.baseUrl)+s}return E.urlArgs&&!/^blob\:/.test(s)?s+E.urlArgs(e,s):s},load:function(e,t){req.load(P,e,t)},execCb:function(e,t,r,i){return t.apply(i,r)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=g(e);P.completeLoad(t.id)}},onScriptError:function(e){var t=g(e);if(!n(t.id)){var r=[];return eachProp(I,function(e,i){0!==i.indexOf("_@r")&&each(e.depMaps,function(e){return e.id===t.id?(r.push(i),!0):void 0})}),l(makeError("scripterror",'Script error for "'+t.id+(r.length?'", needed by: '+r.join(", "):'"'),e,[t.id]))}}},P.require=P.makeRequire(),P}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.2.0",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof _require||isFunction(_require)||(cfg=_require,_require=void 0),req=requirejs=function(e,t,r,i){var n,a,o=defContextName;return isArray(e)||"string"==typeof e||(a=e,isArray(t)?(e=t,t=r,r=i):e=[]),a&&a.context&&(o=a.context),n=getOwn(contexts,o),n||(n=contexts[o]=req.s.newContext(o)),a&&n.configure(a),n.require(e,t,r)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},_require||(_require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,r){var i=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return i.type=e.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i},req.load=function(e,t,r){var i,n=e&&e.config||{};if(isBrowser)return i=req.createNode(n,t,r),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=r,n.onNodeCreated&&n.onNodeCreated(i,n,t,r),currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{setTimeout(function(){},0),importScripts(r),e.completeLoad(t)}catch(a){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+r,a,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,r){var i,n;"string"!=typeof e&&(r=t,t=e,e=null),isArray(t)||(r=t,t=null),!t&&isFunction(r)&&(t=[],r.length&&(r.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,r){t.push(r)}),t=(1===r.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript(),i&&(e||(e=i.getAttribute("data-requiremodule")),n=contexts[i.getAttribute("data-requirecontext")])),n?(n.defQueue.push([e,t,r]),n.defQueueMap[e]=!0):globalDefQueue.push([e,t,r])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(void 0),define("VbBuildOptions",function(){var e=parseInt("1522926693986",10),t=new Date(e);return{build:{timestamp:e,date:t.toString()},environment:"production",chosenTemplateOption:"v2",chosenPlaybackOption:"v2",chosenTriggerOption:!0,chosenTriggerClassName:"social-links",chosenPublisherName:"corrigansports"}}),define("VbConstants",function(){return{URL_PARAM_SHORT_ID:"vib",URL_PARAM_PLAYER_IDENTIFIER:"vibPlayer",TIMESTAMP_ELEMENT_WIDTH:42,MAX_TIME_TO_LOOP_HIGHLIGHTS:30,VB_SELECTOR_ATTRIBUTE:"data-vb-selector",IMPACT_TOOLTIP_MAX_WIDTH:82}}),define("VbEnvironmentConfig",["VbBuildOptions"],function(e){return{staging:{vibbifyURL:"https://"+e.chosenPublisherName+".vibby.com/",serverURL:"https://"+e.chosenPublisherName+".vibby.com/",vibbyURL:"https://staging.vibby.com/"},preproduction:{vibbifyURL:"https://vibbify.vibby.com/",serverURL:"https://vibbify.vibby.com/",vibbyURL:"https://www.vibby.com/"},production:{vibbifyURL:"https://vibbify-prod.vibby.com/",serverURL:"https://vibbify-prod.vibby.com/",vibbyURL:"https://www.vibby.com/"},localhost:{vibbifyURL:"http://localhost:8888/",serverURL:"http://localhost:8888/",vibbyURL:"http://localhost:3000/"}}}),define("VbConfiguration",["VbBuildOptions","VbEnvironmentConfig","InitRequireJsConfig","VbPublisherConfig","VbPlaybackConfig"],function(e,t,r,i,n){var a=e.environment,o=t[e.environment];return r(o.serverURL),{ENV:a,CONFIG:o,build:e.build,templateVersion:e.chosenTemplateOption,playbackVersion:e.chosenPlaybackOption,playbackURL:n.getPlaybackURL(e.chosenPlaybackOption,o.vibbyURL),triggerOption:e.chosenTriggerOption,triggerClassName:e.chosenTriggerClassName,publisher:{name:e.chosenPublisherName,domains:i.domains,configuration:i.configurations[e.chosenPublisherName]}}}),define("VbPlaybackConfig",["VbConstants"],function(e){function t(t,r){var i={v1:r+"v/",v2:window.location.href+"?"+e.URL_PARAM_SHORT_ID+"="};return i[t]}return{getPlaybackURL:t}}),define("VbPublisherConfig",function(){return{domains:{playground:"playground.vibby.com",corrigan:"video.corrigansports.com"},configurations:{playground:{protocol:"https",domain:"com",startOnWindowLoad:!0},corrigansports:{protocol:"https",domain:"com",startOnWindowLoad:!1},igorignjatovic:{protocol:"https",domain:"com",startOnWindowLoad:!0}}}}),define("InitRequireJsConfig",function(){return function(e){requirejs.config({baseUrl:e+"static",paths:{ClipboardJS:["libs/clipboard.min"]}})}}),define("VbCreateProviders",["VbDomManipulation"],function(e){var t={};return t.containersToAppendBtns=[],t.createBCProvider=function(e){e.forEach(function(e,r){e.className+=" vibby-bc-"+r+" ",t.containersToAppendBtns.push({element:e,providerInstance:r,provider:"bc"})})},t.createJWProvider=function(e){e.forEach(function(e,r){e.className+=" vibby-jw-"+r+" ",t.containersToAppendBtns.push({element:e,providerInstance:r,provider:"jw"})})},t.createVimeoProvider=function(r){r.forEach(function(r,i){r.className+=" vibby-vimeo-"+i+" ";var n=e.getDomElementsByTagName("iframe")[i],a=$f(n);t.containersToAppendBtns.push({element:r,providerInstance:i,provider:"vimeo",froogaloop:a})})},t.createHtml5VideoProvider=function(e){e.forEach(function(e,r){e.className+=" vibby-html5-video-"+r+" ",t.containersToAppendBtns.push({element:e,providerInstance:r,provider:"html5-video"})})},t}),define("VbDeviceManager",[],function(){var e={};return e.getBrowserName=function(){return-1!==(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))?"opera":-1!==navigator.userAgent.indexOf("Chrome")?"chrome":-1!==navigator.userAgent.indexOf("Safari")?"safari":-1!==navigator.userAgent.indexOf("Firefox")?"firefox":-1!==navigator.userAgent.indexOf("MSIE")||document.documentMode?"ie":"unknown"},e}),define("VbHttpRequest",["VbConfiguration"],function(e){var t={},r=new XMLHttpRequest;return t.isInProcess=!1,t.newRequest=function(e,i){r.open(e.method,e.url,!0),r.withCredentials=!1,t.isInProcess=!0,e.toBackend?(r.withCredentials=!0,r.setRequestHeader("Content-Type","application/json")):e.body&&r.setRequestHeader("Content-Type","application/json"),e.body?r.send(JSON.stringify(e.body)):r.send(),r.onload=function(){200===r.status?i&&i(r.responseText):200!==r.status&&(console.log("Http request failed. Returned status of "+r.status),i&&i(!1)),t.isInProcess=!1}},t.fetchTemplate=function(r,i){t.newRequest({method:"GET",toBackend:!1,url:e.CONFIG.serverURL+"static/"+r},i)},t}),define("VbImpactUtils",["VbProgressBar"],function(e){var t={};return t.getImpactPositionFromStartPointAndCurrentTime=function(e,t,r){var i=e/r*100,n=t/r*100,a=n-i,o=a>=1?a:0,s={left:i,width:o};return i>n&&(s.left=n,s.width=Math.abs(a)>=1?Math.abs(a):0),s},t.calculateDurationFromImpacts=function(r){var i=t.returnImpactDuration(r.providersHighlightsTime),n=setInterval(function(){if(r.selector){var t=r.selector.selectOne("vib-duration");e.numberToTime(i,t),clearInterval(n)}},100)},t.setImpactStyle=function(e,r){var i=r.startSec,n=r.endSec,a=r.duration,o=t.getImpactPositionFromStartPointAndCurrentTime(i,n,a);e.style.width=o.width+"%",e.style.left=o.left+"%"},t.returnImpactDuration=function(e){return e.reduce(function(e,t){return e+(t.endSec-t.startSec)},0)},t.updateVibDuration=function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=r.providerContainer.querySelectorAll(".cc-vib-duration-time"),a=t.returnImpactDuration(r.providersHighlightsTime);i&&(a+=Math.abs(r.getCurrentTime()-r.impactStartSec)),n&&n[0]&&e.numberToTime(a,n[0])},t.getRelativeValue=function(e,t){return e/t},t.sanitizeValue=function(e,t){var r=t.min,i=t.max;return r>e?r:e>i?i:e},t.sanitizeHighlightBorders=function(e){var t=e.startSec,r=e.endSec;return t>r?(e.endSec=t,e.startSec=r,!0):!1},t}),define("VbProviderUtils",["VbBtns","VbShare","VbCreateProviders","VbConstants","VbDomManipulation","VbUrlUtils"],function(e,t,r,i,n,a){var o={},s=void 0,c=!1;return o.initializeProviders=function(){var e=n.getDomQuerySelectorForSrc("iframe","video"),t=n.getDomElementsByTagName("video");e.length>0&&o.initializeProvidersFromIframe(),t.length>0&&o.initializeProvidersFromVideoTag()},o.initializeProvidersFromIframe=function(){o.addFroogaloopScript(),s.addEventListener("load",function e(){r.createVimeoProvider(n.getDomQuerySelectorForClass("div","video")),s.removeEventListener("load",e)})},o.initializeProvidersFromVideoTag=function(){r.createBCProvider(n.getDomQuerySelectorForClass("div","bc-player")),r.createJWProvider(n.getDomQuerySelectorForClass("div","jwplayer")),r.createHtml5VideoProvider(n.getDomQuerySelectorForClass("div","player-container"))},o.addFroogaloopScript=function(){s=n.createDomElement("script"),s.src="https://f.vimeocdn.com/js/froogaloop2.min.js";var e=n.getDomElementsByTagName("script")[0];e.parentNode.insertBefore(s,e)},o.checkForUrlParamsAndCreateBtnsInProviderDom=function(r){var i=a.inWatchMode(),n=a.getStoryIdAndPlayerInstanceFromUrlParams();i?i&&r.instance===n.playerInstance&&e.createToggleSmartPlayInProviderDom(r):(e.createButtonInProviderDom(r),c||(c=!0,t.createShareTemplateInProviderDom(r)))},o.createSelectorForProvider=function(e){var t=function(e){return"["+i.VB_SELECTOR_ATTRIBUTE+'="'+e+'"]'};return{selectOne:function(r){return e.querySelector(t(r))}}},o}),define("VbShareVib",["VbStorage","VbHttpRequest","VbConfiguration","VbDomManipulation","VbConstants"],function(e,t,r,i,n){var a={},o={};return o.vibIdFromUrlRegex=new RegExp("/?"+n.URL_PARAM_SHORT_ID+"=(.{9})"),o.handleShareVib=function(t){t.pauseProviderVideo();var n=e.getProviderInstance(t.instance);a.body=n,a.toBackend=!0;var s=e.getAnonUserId();a.body.anonUserId=s;var c=i.getDomQuerySelectorForVbElements("share-modal");c.style.display="flex",c.style.alignItems="center",n.storyId?(a.method="PUT",a.url=r.CONFIG.serverURL+"api/data/publisher/story/"+n.storyId,a.firstTime=!1):(a.method="POST",a.url=r.CONFIG.serverURL+"api/data/publisher/story",a.firstTime=!0),o.populateShareModal(c,t.instance)},o.populateShareModal=function(n,o){t.newRequest(a,function(t){if(t){t=JSON.parse(t),e.setAnonUserId(t.anonUserId),a.firstTime&&e.saveStoryToVbStorage(t,o),n.querySelector(".share input").value=e.getVideoAttributeData(o,"shareUrl");var s=n.querySelector("#vb-preview-embed");s.setAttribute("src",r.CONFIG.vibbyURL+"embed/vib?vib="+t.shortId),s.setAttribute("frameborder",0),s.setAttribute("scrolling","no"),s.setAttribute("seamless","yes"),s.setAttribute("style","overflow: hidden; width: 100%; max-width: 770px; height: 272px;"),s.setAttribute("allowfullscreen","")}else{var c=i.fetchDomElement(".share-error");c.innerText="Couldn't create a story from this website. Please report to website owner.",c.style.display="block"}})},o.urlContainsPublishersDomain=function(e){var t=!0,i=!1,n=void 0;try{for(var a,o=Object.keys(r.publisher.domains)[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;if(e.includes(r.publisher.domains[s]))return!0}}catch(c){i=!0,n=c}finally{try{!t&&o["return"]&&o["return"]()}finally{if(i)throw n}}return!1},o}),define("VbStorage",["VbConfiguration","VbConstants"],function(e,t){var r={firstTime:"firstTime",finishedWalkthrough:"vb-finishedWalkthrough",seenTooltip:"seenTooltip"},i={providerInstances:{}},n={};return n.getProviderInstance=function(e){return i.providerInstances[e]?i.providerInstances[e]:null},n.setProviderInstance=function(e,t){i.providerInstances[e]=t},n.removeProviderInstance=function(e){delete i.providerInstances[e]},n.clearProviderInstancesData=function(){localStorage.getItem(r.firstTime)?i.providerInstances={}:localStorage.setItem(r.firstTime,!0)},n.saveAllDataToVbStorage=function(e,t){var r=n.getVideoData(e);r.impacts=t,n.setVideoData(e,r)},n.getVideoData=function(e){return n.getProviderInstance(e)},n.getVideoAttributeData=function(e,t){return n.getProviderInstance(e)[t]},n.setVideoData=function(e,t){n.setProviderInstance(e,t)},n.saveVideoUrlInVbStorage=function(e){if(!n.getProviderInstance(e.instance)){var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");n.setVideoData(e.instance,{videoOriginalSource:window.location.href,videoUrl:e.generateUrl(),videoTitle:e.getProviderVideoTitle(),videoThumbnail:e.getProviderThumbnailImage(),videoDuration:e.getVideoDuration(),videoProvider:e.getVideoProvider(),videoOrigin:t})}},n.saveStoryToVbStorage=function(r,i){var a=n.getVideoData(i);e.publisher.configuration?a.twitterShareUrl=e.publisher.configuration.protocol+"://"+e.publisher.name+"."+e.publisher.configuration.domain+"/?"+t.URL_PARAM_SHORT_ID+"="+r.shortId:a.twitterShareUrl=""+e.playbackURL+r.shortId+"&"+t.URL_PARAM_PLAYER_IDENTIFIER+"="+i,a.storyId=r._id,a.shareUrl=""+e.playbackURL+r.shortId+"&"+t.URL_PARAM_PLAYER_IDENTIFIER+"="+i,n.setVideoData(i,a)},n.setFinishWalkthroughFlag=function(){localStorage.setItem(r.finishedWalkthrough,!0)},n.didFinishWalkthrough=function(){return!!JSON.parse(localStorage.getItem(r.finishedWalkthrough))},n.getAnonUserId=function(){return localStorage.getItem("vbAnonUserId")},n.setAnonUserId=function(e){e&&localStorage.setItem("vbAnonUserId",e)},n.getTooltipSeenFlag=function(){return localStorage.getItem(r.seenTooltip)},n.setTooltipSeenFlag=function(){return localStorage.setItem(r.seenTooltip,!0)},n}),define("VbStoryUtils",["VbHttpRequest","VbImpactUtils","VbConstants","VbConfiguration","VbUrlUtils"],function(e,t,r,i,n){var a={};return a.checkForStoryIdUrlParam=function(r,a){var o={},s=n.getStoryIdAndPlayerInstanceFromUrlParams();s.shortId&&s.shortId.length>0&&s.playerInstance===r.instance?(o.method="GET",o.toBackend=!0,o.url=i.CONFIG.serverURL+"api/data/story/"+s.shortId,e.newRequest(o,function(e){e=JSON.parse(e),r.providersHighlightsTime=e.impacts,t.calculateDurationFromImpacts(r),a({storyExists:!0,impacts:e.impacts,player:s.playerInstance})})):a({storyExists:!1})},a.calculateSmartCurrentTime=function(e,t,r){var i=e[t];if(i.startSec>r||r>i.endSec)return-1;for(var n=r-i.startSec,a=0;t>a;a++)n+=e[a].endSec-e[a].startSec;return n},a}),define("VbUrlUtils",["VbConstants","VbConfiguration"],function(e,t){var r={};return r.removeVibbyParamsFromUrl=function(){var r=window.location.href.split(e.URL_PARAM_SHORT_ID+"=")[0];window.history.replaceState({},"",r),"v2"===t.templateVersion&&(t.playbackURL=""+r+e.URL_PARAM_SHORT_ID+"=")},r.inWatchMode=function(){return window.location.href.includes(e.URL_PARAM_SHORT_ID)&&window.location.href.includes(e.URL_PARAM_PLAYER_IDENTIFIER)},r.inCreateMode=function(){return!r.inWatchMode()},r.getStoryIdAndPlayerInstanceFromUrlParams=function(){var t=window.location,r=t.search.split(e.URL_PARAM_SHORT_ID+"=")[1];return r?{shortId:r.split("&")[0],playerInstance:t.search.split(e.URL_PARAM_PLAYER_IDENTIFIER+"=")[1]}:{}},r}),define("VbBtnListeners",["VbProgressBar","VbPlayback","VbWalkthrough","VbStorage","VbShareVib","VbUrlUtils","VbDomManipulation","VbConfiguration","VbConstants","ClipboardJS"],function(e,t,r,i,n,a,o,s,c,l){var u={},d="Check out this highlights";u.shareBtnListener=function(e,t){e.addEventListener("click",function(){n.handleShareVib(t)})},u.createHighlightBtnsListener=function(e,t){e.addEventListener("click",function(){var e=t.selector.selectOne("create-btn-text");t.mode.create?t.mode.create&&(t.mode.create=!1,t.providerContainer.firstChild.classList.remove("vb-recording"),e.innerHTML="Start highlight",t.handleProviderCreateHighlightStop()):(t.mode.create=!0,
t.providerContainer.firstChild.classList.add("vb-recording"),t.handleProviderCreateHighlightStart(),e.innerHTML="Stop highlight",t.playProviderVideo())})},u.seekBtnsListener=function(t,r){t.addEventListener("click",function(t){var i=r.container.getBoundingClientRect().left,n=e.getRelativeTimeToSeek(t.clientX-i,r);r.seekOnProgressBar(n)})},u.watchPlaybackBtnListener=function(e,r){e.addEventListener("click",function(){var e=r.selector.selectOne("watch-btn-text");r.mode.watchHighlights?(r.mode.watchHighlights=!1,r.selector.selectOne("watch-full-sign").style.display="none",r.selector.selectOne("watch-highlights-sign").style.display="initial",e.innerHTML="Watch Highlights",t.startWatchFull()):r.mode.watchHighlights||(r.mode.watchHighlights=!0,r.selector.selectOne("watch-full-sign").style.display="initial",r.selector.selectOne("watch-highlights-sign").style.display="none",e.innerHTML="Watch Full",t.continueSmartPlay(r.getCurrentTime()))})},u.createNewVibBtnListener=function(e,t){e.addEventListener("click",function(){i.clearProviderInstancesData(),a.removeVibbyParamsFromUrl(),t.setCreateStep()})},u.setProgressBarHoverListeners=function(t,r){t.addEventListener("mouseenter",function(){return e.displayTimestamp(r)}),t.addEventListener("mouseleave",function(){return e.hideTimestamp(r)}),t.addEventListener("mousemove",function(t){return e.setTimestampPosition(t,r)})},u.setTriggerBtnListener=function(e,t){e.addEventListener("click",function r(){e.removeEventListener("click",r),t()})},u.setFinishWalkthroughBtnListener=function(e,t){e.addEventListener("click",function(){r.removeOverlay(t.container),t.playProviderVideo(),r.currentStep===r.stepsInformation.length-1?i.setFinishWalkthroughFlag():r.currentStep===r.stepsInformation.length-2&&r.nextWalkthroughStep(t)})},u.setImpactTooltipEnteredListener=function(e,t){e.addEventListener("mouseenter",function(){t.tooltip.highlightElement=e,t.tooltip.hovered=!0})},u.setImpactTooltipLeaveListener=function(t,r){t.addEventListener("mouseleave",function(t){e.hideHighlightTooltip(r),r.tooltip.hovered=!1})},u.setDeleteImpactBtnListener=function(t,r){t.addEventListener("click",function(){var t=r.providersHighlightsTime.find(function(e){return e.order===r.tooltip.selectedHighlightOrder});e.hideHighlightTooltip(r),r.removeVibbyProgress(t)})},u.setImpactHoveredListener=function(t,r){t.addEventListener("mouseenter",function(t){if(!r.mode.create){var i=t.target,n=r.providersHighlightsTime.find(function(e){return e.highlightElement===i});e.showHighlightTooltip(r,i),r.tooltip.hovered=!0,r.tooltip.selectedHighlightOrder=n.order}})},u.setImpactNotHoveredListener=function(t,r){t.addEventListener("mouseleave",function(){r.tooltip.hovered=!1,setTimeout(function(){r.tooltip.hovered||e.hideHighlightTooltip(r)},350)})},u.setOpenFacebookShareBtnListener=function(e,t){t.addEventListener("click",function(){h(e,"https://www.facebook.com/sharer/sharer.php?u=SHARE_URL")})},u.setOpenTwitterShareBtnListener=function(e,t){t.addEventListener("click",function(){h(e,"https://twitter.com/intent/tweet?text=SHARE_MSG: SHARE_URL",d)})},u.setOpenRedditShareBtnListener=function(e,t){t.addEventListener("click",function(){h(e,"https://www.reddit.com/submit?url=SHARE_URL&title=SHARE_MSG",d)})},u.setCloseBtnEventListener=function(e){var t=o.getDomQuerySelectorForVbElements("share-modal"),r=o.getDomQuerySelectorForVbElements("share-error-text");e.addEventListener("click",function(){r.innerText="",r.style.display="none",t.style.display="none",o.getDomQuerySelectorForVbElements("share-preview-embed").src=o.getDomQuerySelectorForVbElements("share-preview-embed").src})},u.setClipboardListeners=function(e,t){var r=o.getDomQuerySelectorForVbElements("share-link"),n=o.getDomQuerySelectorForVbElements("share-link-input"),a=new l(r,{text:function(){return i.getVideoAttributeData(e.instance,"shareUrl")}});r.addEventListener("click",function(e){e.stopPropagation(),n.focus(),n.select()}),a.on("success",function(){return r.classList.add("--copied")}),a.on("error",function(){return r.classList.remove("--copied")}),t.addEventListener("click",function(){r.classList.remove("--copied")})};var h=function(e,t,r){var n=i.getVideoAttributeData(e.instance,"shareUrl"),a=t.replace(new RegExp("SHARE_URL","g"),""+n);r&&(a=a.replace(new RegExp("SHARE_MSG","g"),""+r)),window.open(a)};return u}),define("VbBtnFunctionality",["VbDivCalculations","VbStorage","VbConstants"],function(e,t,r){var i={};return i.addNewHighlight=function(e,r){var i={startSec:e.startSec,endSec:e.endSec,order:r.impactsOrder};return r.providersHighlightsTime.push(i),r.impactsOrder+=1,t.saveAllDataToVbStorage(r.instance,r.providersHighlightsTime),i},i.removeHighlight=function(e,i){var n=e.providersHighlightsTime,a=n.findIndex(function(e){return e.order===i});n.splice(a,1),e.impactsOrder--,n.forEach(function(t){t.order>i&&(t.order--,t.highlightElement.setAttribute(r.VB_SELECTOR_ATTRIBUTE,e.instance+"-impactDiv"+t.order))}),t.saveAllDataToVbStorage(e.instance,n)},i.handleExtendingSameHighlight=function(e,t){i.handleOverlappingHighlights({startSec:e.startSec,endSec:e.endSec},t)},i.handleOverlappingHighlights=function(e,r){var n=e.startSec,a=e.endSec,o=r.providersHighlightsTime,s=i.getAllOverlapping({startSec:n,endSec:a},o);s.oldImpacts.length>0&&o.length>1&&s.newImpact.impactOrders.length>1&&(i.setHighlightsTime(s.newImpact,r),i.mergeAndResize(s.newImpact,r.getVideoDuration(),r),t.saveAllDataToVbStorage(r.instance,o))},i.setHighlightsTime=function(e,t){var r=e.impactOrders,i=0;r.forEach(function(r,n){0===n?(t.providersHighlightsTime[r-1].startSec=e.startSec,t.providersHighlightsTime[r-1].endSec=e.endSec):(t.providersHighlightsTime.splice(r-1-i,1),i++,t.impactsOrder--)})},i.mergeAndResize=function(t,i,n){var a=t.impactOrders;a.forEach(function(r,a){if(0===a){var o=t.endSec-t.startSec,s=n.selector.selectOne(n.instance+"-impactDiv"+r);s.style.width=e.getDivWidth(i,t.endSec,o)+"%",s.style.left=e.getDivPositionLeft(i,t.endSec,o)+"%"}else{var c=n.selector.selectOne(n.instance+"-impactDiv"+r);c&&c.remove()}}),n.providersHighlightsTime.forEach(function(e,t){e.order=t+1,e.highlightElement.setAttribute(r.VB_SELECTOR_ATTRIBUTE,n.instance+"-impactDiv"+e.order)})},i.getAllOverlapping=function(e,t){var r=[],i=e.startSec,n=e.endSec,a=[];return t.forEach(function(t){e.startSec<=t.endSec&&t.startSec<=e.endSec&&(r.push(t),i=Math.min(i,t.startSec),n=Math.max(n,t.endSec),a.push(t.order))}),{newImpact:{startSec:i,endSec:n,impactOrders:a},oldImpacts:r}},i}),define("VbBtns",["VbConfiguration","VbBtnListeners","require","VbProgressBar","VbDomManipulation","VbHttpRequest","VbTriggerBtn"],function(e,t,r,i,n,a,o){var s="",c={};return c.createButtonInProviderDom=function(t){var r=setInterval(function(){a.isInProcess||(s="createHighlightTemplate_"+e.templateVersion+".html",c.appendBtns("create-mode",t),clearInterval(r))},200)},c.createToggleSmartPlayInProviderDom=function(e){e.mode.watchHighlights=!0;var t=setInterval(function(){a.isInProcess||(s="togglePlaybackTemplate.html",e.playbackMode=!0,c.appendBtns("playback-mode",e),clearInterval(t))},200)},c.appendBtns=function(t,o){a.fetchTemplate(s,function(a){if(a){var s=o.container,l=n.createDomElement("div",a),u=l.cloneNode(!0);u.id="createHighlightBtnDiv-"+o.instance,u.className+="vb-container vb-"+e.templateVersion,u.setAttribute("data-vb-selector",o.instance+"-"+o._id),o.providerContainer=u,o.selector=r("VbProviderUtils").createSelectorForProvider(o.providerContainer),i.attachImpactTooltip(o),n.appendDomElement(s,u),c.getBtnsAndAddListeners(o,t),c.disableShareBtn(o),c.disableCreateHighlightBtn(o),c.disableWatchFullBtn(o)}})},c.disableShareBtn=function(e){var t=e.providerContainer&&e.selector.selectOne("share-btn");t&&(t.style.pointerEvents="none",t.style.opacity="0.4")},c.enableShareBtn=function(e){var r=e.providerContainer&&e.selector.selectOne("share-btn");r&&(r.style.pointerEvents="initial",r.style.opacity="1",t.shareBtnListener(r,e))},c.disableCreateHighlightBtn=function(e){var t=e.providerContainer&&e.selector.selectOne("create-btn");t&&(t.setAttribute("disabled",!0),t.style.pointerEvents="none",t.style.opacity="0.4")},c.enableCreateHighlightBtn=function(e){var t=e.providerContainer&&e.selector.selectOne("create-btn");return t?(t.setAttribute("disabled",!1),t.style.pointerEvents="initial",t.style.opacity="1",!0):!1},c.disableWatchFullBtn=function(e){var t=e.providerContainer&&e.selector.selectOne("watch-btn");t&&(t.setAttribute("disabled",!0),t.style.pointerEvents="none",t.style.opacity="0.4")},c.enableWatchFullBtn=function(e){var t=e.providerContainer&&e.selector.selectOne("watch-btn");return t?(t.setAttribute("disabled",!1),t.style.pointerEvents="initial",t.style.opacity="1",!0):!1},c.getBtnsAndAddListeners=function(r,n){i.attachProgressBarListeners(r);var a="v2"===e.templateVersion?r.selector.selectOne("progress-bar"):[];if(t.seekBtnsListener(a,r),"create-mode"===n){var o=r.selector.selectOne("create-btn");t.createHighlightBtnsListener(o,r)}else if("playback-mode"===n){var s=r.selector.selectOne("watch-btn"),c=r.selector.selectOne("create-new-btn");t.watchPlaybackBtnListener(s,r),t.createNewVibBtnListener(c,r),r.attachHighlightElementsWatchMode()}},c.createTriggerBtn=function(r){var i=document.getElementsByClassName(e.triggerClassName)[0];o.createTriggerButtonInProviderDom(i).then(function(){var i=document.getElementsByClassName("trigger-"+e.triggerClassName)[0];t.setTriggerBtnListener(i,r)})},c}),define("VbDivCalculations",function(){function e(e){var r=0,i=0,n=0;return 2===e.length?(i=e[0],n=e[1],t=parseInt(60*i)+parseInt(n)):3===e.length?(r=e[0],i=e[1],n=e[2],t=parseInt(60*r*60)+parseInt(60*i)+parseInt(n)):void 0}var t=0,r={};return r.getDivWidth=function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,n=void 0,a="object"===("undefined"==typeof r?"undefined":_typeof(r))?e(r):r,o="object"===("undefined"==typeof t?"undefined":_typeof(t))?e(t):t;return n=0>a-i?a/o*100:(a-(a-i))/o*100,.5>n?.55:n},r.getDivPositionLeft=function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2,n="object"===("undefined"==typeof r?"undefined":_typeof(r))?e(r):r,a="object"===("undefined"==typeof t?"undefined":_typeof(t))?e(t):t,o=i?i:30,s=(n-o)/a*100;return s>0?s:0},r.returnChildDivByClass=function(e,t){if(e)for(var r=0;r<e.childNodes.length;r++)if(e.childNodes[r].className===t)return e.childNodes[r]},r}),define("VbDomManipulation",["VbConstants","VbDivCalculations","VbImpactUtils"],function(e,t,r){var i={};return i.fetchDomElement=function(e){return document.querySelector(e)},i.createDomElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=document.createElement(e);return n.id=r,n.className+=i,n.innerHTML=t,n},i.createHighlightElement=function(e){var r=i.createDomElement("div","","","impact-div");r.setAttribute("data-vb-selector",e.instance+"-impactDiv"+e.impactsOrder),r.style.width=t.getDivWidth(e.getVideoDuration(),e.getCurrentTime())+"%",r.style.left=t.getDivPositionLeft(e.getVideoDuration(),e.getCurrentTime())+"%";var n=i.createDomElement("div","","","resize resize-left"),a=i.createDomElement("div","","","resize resize-right");return i.appendDomElement(r,n),i.appendDomElement(r,a),r},i.createHighlightElementsWatchMode=function(e){e.providersHighlightsTime.forEach(function(t){var n=i.createDomElement("div","","","impact-div");n.setAttribute("data-vb-selector",e.instance+"-impactDiv"+t.order);var a={startSec:t.startSec,endSec:t.endSec,duration:e.getVideoDuration()};r.setImpactStyle(n,a),n.style.background="#BBE1FF",i.appendDomElement(e.getDivToAppendImpact(),n)})},i.appendCss=function(e){var t=i.createDomElement("link");t.href=e,t.type="text/css",t.rel="stylesheet",i.appendDomElement(i.getDomElementsByTagName("head")[0],t)},i.getDomElementsByClassName=function(e){return document.getElementsByClassName(e)},i.getDomElementsByTagName=function(e){return document.getElementsByTagName(e)},i.appendDomElement=function(e,t){return e.appendChild(t)},i.getDomQuerySelectorForClass=function(e,t){return document.querySelectorAll(e+'[class*="'+t+'"]')},i.getDomQuerySelectorForVbElements=function(t){return document.querySelector("["+e.VB_SELECTOR_ATTRIBUTE+'="'+t+'"]')},i.getDomQuerySelectorForSrc=function(e,t){return document.querySelectorAll(e+'[src*="'+t+'"]')},i}),define("VbImpactResize",["VbBtnListeners","VbImpactUtils","VbBtnFunctionality","VbStorage"],function(e,t,r,i){var n={};return n.attachHighlightElementHandlers=function(n,a){function o(e){function o(e){e.preventDefault();var r=n.providerContainer.getBoundingClientRect(),i=r.right-r.left,o=t.sanitizeValue(e.clientX-r.left,{min:0,max:i}),c=n.providersHighlightsTime.find(function(e){return e.highlightElement===a}),l=t.getRelativeValue(o,i);c[s]=l*n.getVideoDuration();var u=t.sanitizeHighlightBorders(c);u&&(s="startSec"===s?"endSec":"startSec"),t.setImpactStyle(a,{startSec:c.startSec,endSec:c.endSec,duration:n.getVideoDuration()}),t.updateVibDuration(n),n.seekToSecond(c[s])}e.preventDefault(),e.stopPropagation();var s=e.target.classList.contains("resize-left")?"startSec":"endSec";n.pauseProviderVideo(),n.highlightResizeInProcess=!0,window.addEventListener("mousemove",o),window.addEventListener("mouseup",function c(e){e.preventDefault(),e.stopPropagation(),n.highlightResizeInProcess=!1;var t=n.providersHighlightsTime.find(function(e){return e.highlightElement===a});r.handleOverlappingHighlights(t,n),i.saveAllDataToVbStorage(n.instance,n.providersHighlightsTime),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",c)})}e.setImpactHoveredListener(a,n),e.setImpactNotHoveredListener(a,n);var s=a.querySelector(".resize-left"),c=a.querySelector(".resize-right");s.addEventListener("mousedown",o),c.addEventListener("mousedown",o)},n}),define("VbIntervalResume",function(){var e=function(){function e(t,r,i){_classCallCheck(this,e),this._duration=t,this._initialTimerDuration=this._duration/1e3,this._timer=0,this._callbackFunction=r,this._interval=null,this._intervalLoopDuration=i,this._timerDecreaseParam=this._intervalLoopDuration/1e3}return _createClass(e,[{key:"start",value:function(){var e=this;null===this._interval&&(this._interval=setInterval(function(){0===e._timer&&(e._callbackFunction(),e._timer=e._initialTimerDuration),e._timer-=e._timerDecreaseParam},this._intervalLoopDuration))}},{key:"pause",value:function(){null!==this._interval&&(clearInterval(this._interval),this._interval=null)}}]),e}();return e}),define("VbPlayback",["VbIntervalResume","VbConstants","VbConfiguration","VbHttpRequest","VbImpactUtils","VbStoryUtils","VbUrlUtils"],function(e,t,r,i,n,a,o){var s={},c=0,l=[];s.controlPlaybackInterval,s.smartPlayMode=!1,s.endTime=0,s.activeProvider={},s.startSmartPlayFromBeginning=!1;var u=5e3,d=1e3;return s.startSmartPlay=function(e){l=e,s.smartPlayMode=!0,s.seekAndPlay(),o.inWatchMode()&&s.intervalResume.start()},s.checkIfShouldStartSmartPlay=function(e){var t=o.inWatchMode(),r=o.getStoryIdAndPlayerInstanceFromUrlParams();s.activeProvider=e,t&&r.shortId&&!s.activeProvider.firstPlayEventFired&&a.checkForStoryIdUrlParam(s.activeProvider,function(e){e&&e.storyExists?(s.activeProvider.firstPlayEventFired=!0,s.startSmartPlay(e.impacts),s.activeProvider.attachHighlightElementsWatchMode()):s.activeProvider.firstPlayEventFired&&s.startSmartPlayFromBeginning&&s.activeProvider.mode.watchHighlights&&s.activeProvider.play()})},s.resetStartSmartPlay=function(){s.startSmartPlayFromBeginning=!1,c=0,s.seekAndPlay()},s.startWatchFull=function(){s.smartPlayMode=!1,clearInterval(s.controlPlaybackInterval)},s.seekAndPlay=function(e){s.endTime=l[c].endSec;var t=e?e:l[c].startSec;s.activeProvider.seekToSecond(t),s.controlPlayback()},s.controlPlayback=function(){return s.smartPlayMode?(s.controlPlaybackInterval&&clearInterval(s.controlPlaybackInterval),void(s.controlPlaybackInterval=setInterval(function(){var e=s.activeProvider.getCurrentTime();e>=s.endTime&&s.smartPlayMode&&(s.changeImpact(),clearInterval(s.controlPlaybackInterval))},200))):void clearInterval(s.controlPlaybackInterval)},s.continueSmartPlay=function(e){if(s.smartPlayMode=!0,e>=l[c].startSec&&e<=l[c].endSec)s.seekAndPlay(e);else for(var t=0;t<l.length;t++){if(e>l[t].endSec){c=t+1===l.length?0:t+1,s.seekAndPlay(l[c].startSec);break}c=0,s.seekAndPlay(l[c].startSec);break}},s.changeImpact=function(){c===l.length-1?n.returnImpactDuration(l)<t.MAX_TIME_TO_LOOP_HIGHLIGHTS?(c=0,s.seekAndPlay()):(s.startSmartPlayFromBeginning=!0,s.activeProvider.pauseProviderVideo()):(c+=1,s.seekAndPlay())},s.isInsideImpact=function(e){var t=l.filter(function(t){return e.toFixed(3)>=t.startSec.toFixed(3)&&e.toFixed(3)<=t.endSec.toFixed(3)});t.length>0?s.controlPlayback():(s.smartPlayMode=!1,s.activeProvider.selector.selectOne("watch-btn").click())},s.sendVideoViewEvent=function(){var e=l[c].videoId,t=l[c].storyShortId,n=s.activeProvider.getCurrentTime(),o=a.calculateSmartCurrentTime(l,c,n),u=window.location.href,d={};d.body={storyShortId:t,videoSec:Math.round(n),storySec:Math.round(o),parentUrl:u},d.method="POST",d.toBackend=!0,d.url=r.CONFIG.serverURL+"api/data/video/"+e+"/view",i.newRequest(d)},s.intervalResume=new e(u,s.sendVideoViewEvent,d),s}),define("VbProgressBar",["require","VbConstants","VbConfiguration"],function(e,t,r){var i={};return i.getTimeFromSeconds=function(e){var t=e%3600,r=Math.floor(t/60);r=10>r?"0"+r:r;var i=t%60,n=Math.round(i);return n=10>n?"0"+n:n,r+":"+n},i.numberToTime=function(e,t){t.innerHTML=i.getTimeFromSeconds(e)},i.getCurrentTimeProgress=function(e,t){var r=e/t.getVideoDuration()*i.getBarWidth(t),n=t.selector&&t.selector.selectOne("progress-bar-pointer");n&&(n.style.left=r+"px")},i.getBarWidth=function(e){var t=e.selector&&e.selector.selectOne("progress-bar");return t&&t.clientWidth},i.getRelativeTimeToSeek=function(e,t){var r=e/i.getBarWidth(t);return 0>r?r=0:r>1&&(r=1),r},i.getTimestampElement=function(e){return e.selector.selectOne("timestamp")},i.setTimestampPosition=function(e,r){var n=r.selector.selectOne("progress-bar"),a=e.clientX-n.getBoundingClientRect().left,o=i.getRelativeTimeToSeek(a,r),s=o*i.getBarWidth(r),c=i.getTimestampElement(r);s-=t.TIMESTAMP_ELEMENT_WIDTH/2,s>i.getBarWidth(r)-t.TIMESTAMP_ELEMENT_WIDTH&&(s=i.getBarWidth(r)-t.TIMESTAMP_ELEMENT_WIDTH),0>s&&(s=0);var l=r.getVideoDuration();c.style.left=s+"px",c.querySelector(".time").innerText=i.getTimeFromSeconds(o*l)},i.displayTimestamp=function(e){var t=i.getTimestampElement(e);t.classList.add("--show")},i.hideTimestamp=function(e){var t=i.getTimestampElement(e);t.classList.remove("--show")},i.attachProgressBarListeners=function(t){if("v1"!==r.templateVersion){var i=t.selector.selectOne("progress-bar");e("VbBtnListeners").setProgressBarHoverListeners(i,t)}},i.attachImpactTooltip=function(r){var i=r.selector.selectOne("impact-tooltip"),n=r.selector.selectOne("impact-tooltip-btn-delete");i&&(i.style.width=t.IMPACT_TOOLTIP_MAX_WIDTH+"px",e("VbBtnListeners").setImpactTooltipEnteredListener(i,r),e("VbBtnListeners").setImpactTooltipLeaveListener(i,r)),n&&e("VbBtnListeners").setDeleteImpactBtnListener(n,r)},i.showHighlightTooltip=function(r,n){var a=r.providerContainer.getBoundingClientRect().left,o=n.getBoundingClientRect(),s=o.right-o.left,c=o.left-a-t.IMPACT_TOOLTIP_MAX_WIDTH/2+s/2;c=e("VbImpactUtils").sanitizeValue(c,{min:0,max:i.getBarWidth(r)-t.IMPACT_TOOLTIP_MAX_WIDTH});var l=r.selector.selectOne("impact-tooltip");l.classList.add("--show"),l.style.left=c+"px"},i.hideHighlightTooltip=function(e){e.selector.selectOne("impact-tooltip").classList.remove("--show")},i}),define("VbShare",["VbDomManipulation","VbHttpRequest","VbBtnListeners"],function(e,t,r){var i={};return i.createShareTemplateInProviderDom=function(n){var a=setInterval(function(){t.isInProcess||(i.appendShare(n),clearInterval(a))},200),o=setInterval(function(){var t=e.getDomQuerySelectorForVbElements("close-share-btn");t&&(clearInterval(o),r.setCloseBtnEventListener(t))},100)},i.appendShare=function(i){t.fetchTemplate("shareTemplate.html",function(t){var n=e.getDomElementsByTagName("body")[0];if(t){var a=e.createDomElement("vb-div",t,"","share-modal-div");a.setAttribute("data-vb-selector","share-modal"),e.appendDomElement(n,a),r.setOpenFacebookShareBtnListener(i,e.getDomQuerySelectorForVbElements("share-facebook")),r.setOpenTwitterShareBtnListener(i,e.getDomQuerySelectorForVbElements("share-twitter")),r.setOpenRedditShareBtnListener(i,e.getDomQuerySelectorForVbElements("share-reddit")),r.setClipboardListeners(i,a)}})},i}),define("VbTriggerBtn",["VbHttpRequest","VbStorage"],function(e,t){var r={},i="triggerButton.html";return r.createTriggerButtonInProviderDom=function(t){return new Promise(function(i){var n=setInterval(function(){return e.isInProcess?void 0:(clearInterval(n),r.appendTrigger(t,i))},200)})},r.appendTrigger=function(r,n){e.fetchTemplate(i,function(e){if(e){r.insertAdjacentHTML("afterbegin",e);var i=document.getElementById("walkthroughTooltip");if(!i)return n(!0);t.getTooltipSeenFlag()?i.style="display:none":(setTimeout(function(){i.style="display:none"},7e3),t.setTooltipSeenFlag()),n(!0)}})},r}),define("VbWalkthrough",["VbDomManipulation","VbHttpRequest","VbStorage","require","VbDeviceManager"],function(e,t,r,i,n){var a={};return a.currentStep=-1,a.stepsInformation=[{infoText:"Start by selecting the<br> start point of your clip.",getElement:function(e){var t="walkthrough-create-btn";return e.selector.selectOne(t)}},{infoText:"Resize highlight by dragging on either edge.",getElement:function(e){var t=e.instance+"-impactDiv1";return e.selector.selectOne(t).firstChild}},{infoText:"Once you have created a clip you<br> can preview it before sharing.",getElement:function(e){var t="walkthrough-share-btn";return e.selector.selectOne(t)}}],a.nextWalkthroughStep=function(e){return a.currentStep++,a.currentStep>=a.stepsInformation.length?void a.removeOverlay(e.container):void a.showWalkthrough(e)},a.removeOverlay=function(e){e.firstChild.style="display: none"},a.showWalkthrough=function(t){t.pauseProviderVideo(),t.container.firstChild.className="walkthrough-container "+n.getBrowserName(),t.container.firstChild.style="display: block";var r=a.stepsInformation[a.currentStep].getElement(t),i=e.getDomQuerySelectorForVbElements("walkthrough-info-text");i.innerHTML=a.stepsInformation[a.currentStep].infoText,a.drawWalkthroughElementsOnElement(t.container,r)},a.drawWalkthroughElementsOnElement=function(t,r){var i=e.getDomQuerySelectorForVbElements("walkthrough-hole"),n=e.getDomQuerySelectorForVbElements("walkthrough-info"),a=r.getBoundingClientRect(),o=i.offsetParent.getBoundingClientRect(),s={top:a.top-20-o.top,left:a.left-15-o.left},c={top:s.top-135,left:s.left};i.style.top=s.top+"px",i.style.left=s.left+"px",n.style.top=c.top+"px",n.style.left=c.left+"px"},a.fetchAndAppendOverlay=function(r){t.fetchTemplate("walkthrough.html",function(t){if(t){var n=e.createDomElement("div",t);r.container.insertBefore(n,r.container.firstChild);var o=e.getDomQuerySelectorForVbElements("walkthrough-finish-btn");i("VbBtnListeners").setFinishWalkthroughBtnListener(o,r),setTimeout(function(){return a.nextWalkthroughStep(r)},0)}})},a.checkShouldShowWalkthrough=function(e){r.didFinishWalkthrough()||-1!==a.currentStep||a.fetchAndAppendOverlay(e)},a.createdHighlightWalkthrough=function(e){r.didFinishWalkthrough()||0!==a.currentStep||a.nextWalkthroughStep(e)},a}),define("Provider",["VbDomManipulation","VbDivCalculations","VbBtns","VbBtnFunctionality","VbWalkthrough","VbStorage","VbImpactResize","VbPlayback","VbShare"],function(e,t,r,i,n,a,o,s,c){var l=function(){function t(e){_classCallCheck(this,t),this.config=e,this.tooltip={},this.highlightResizeInProcess=!1}return _createClass(t,[{key:"handleProviderCreateHighlightStart",value:function(){r.disableShareBtn(this),this.newImpact={startSec:this.getCurrentTime(),endSec:this.getCurrentTime()+.1},this.addVibbyProgress(),a.saveVideoUrlInVbStorage(this)}},{key:"handleProviderCreateHighlightStop",value:function(){r.enableShareBtn(this);var e=this.selector.selectOne(this.instance+"-impactDiv"+this.impactsOrder);e.style.background="#BBE1FF",this.detachPlayerProgress(),this.checkImpactTimes();var t=this.addHighlight();t.highlightElement=e,this.calculateVibDuration(),n.createdHighlightWalkthrough(this),o.attachHighlightElementHandlers(this,e)}},{key:"checkImpactTimes",value:function(){var e=this.newImpact.startSec;this.newImpact.endSec=this.getCurrentTime(),this.newImpact.startSec>this.getCurrentTime()&&(this.newImpact.startSec=this.newImpact.endSec,this.newImpact.endSec=e)}},{key:"addHighlight",value:function(){var e=i.addNewHighlight(this.newImpact,this);return i.handleExtendingSameHighlight(this.newImpact,this),e}},{key:"addVibbyProgress",value:function(){var t=e.createHighlightElement(this);e.appendDomElement(this.getDivToAppendImpact(),t),this.attachPlayerProgress()}},{key:"removeVibbyProgress",value:function(e){if(e){var t=this.getDivToAppendImpact();t.removeChild(e.highlightElement),i.removeHighlight(this,e.order),this.calculateVibDuration(),0===this.providersHighlightsTime.length&&r.disableShareBtn(this)}}},{key:"setCreateStep",value:function(){this.providersHighlightsTime=[],this.createBtnEnabled=!1,this.providerContainer.remove(),this.mode.watchHighlights=!1,s.startWatchFull(),r.createButtonInProviderDom(this),c.createShareTemplateInProviderDom(this)}},{key:"getVideoDuration",value:function(){throw new Error("getVideoDuration is abstract method and must be implemented!")}},{key:"getCurrentTime",value:function(){throw new Error("getCurrentTime is abstract method and must be implemented!")}},{key:"getDivToAppendImpact",value:function(){throw new Error("getDivToAppendButton is abstract method and must be implemented!")}},{key:"generateUrl",value:function(){throw new Error("generateUrl is abstract method and must be implemented!")}},{key:"getProviderVideoTitle",value:function(){throw new Error("getProviderVideoTitle is abstract method and must be implemented!")}},{key:"getProviderThumbnailImage",value:function(){throw new Error("getProviderVideoTitle is abstract method and must be implemented!")}},{key:"pauseProviderVideo",value:function(){throw new Error("pauseProviderVideo is abstract method and must be implemented!")}},{key:"playProviderVideo",value:function(){throw new Error("pauseProviderVideo is abstract method and must be implemented!")}},{key:"getVideoProvider",value:function(){throw new Error("getVideoProvider is abstract method and must be implemented!")}},{key:"attachPlayerProgress",value:function(){throw new Error("attachPlayerProgress is abstract method and must be implemented!")}},{key:"detachPlayerProgress",value:function(){throw new Error("detachPlayerProgress is abstract method and must be implemented!")}},{key:"calculateVibDuration",value:function(){throw new Error("calculateVibDuration is abstract method and must be implemented!")}},{key:"seekOnProgressBar",value:function(){throw new Error("seekOnProgressBar is abstract method and must be implemented!")}},{key:"attachHighlightElementsWatchMode",value:function(){throw new Error("attachHighlightElementsWatchMode is abstract method and must be implemented!")}}]),t}();return l}),define("BrightCoveProvider",["Provider","VbProviderUtils","VbPlayback","VbDomManipulation","VbDivCalculations","VbConfiguration","VbWalkthrough","VbImpactUtils","VbStoryUtils","VbBtns","VbUrlUtils","VbProgressBar"],function(e,t,r,i,n,a,o,s,c,l,u,d){var h=function(e){function c(e){_classCallCheck(this,c);var r=_possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,a.CONFIG));return r.bcPlayer=r.getVideoElement(e.element),r.bcPlayer.setAttribute("playsinline",""),r._id=Math.random().toString(36).substring(7),r.instance="bc-"+e.providerInstance,r.index=e.providerInstance,r.impactsOrder=1,r.providersHighlightsTime=[],r.mode={create:!1,watchHighlights:!1},r.impactStartSec=0,r.firstPlayEventFired=!1,r.container=e.element.parentElement,r.shouldAddProgressToDiv=!1,r.createBtnEnabled=!1,r.watchFullBtnEnabled=!1,r.providerAttachListeners(),t.checkForUrlParamsAndCreateBtnsInProviderDom(r),r}return _inherits(c,e),_createClass(c,[{key:"providerAttachListeners",value:function(){var e=this,t=this;this.bcPlayer.addEventListener("timeupdate",function(){u.inWatchMode()||e.createBtnEnabled||(e.createBtnEnabled=l.enableCreateHighlightBtn(e),e.createBtnEnabled&&o.checkShouldShowWalkthrough(t)),"v1"===a.templateVersion||e.highlightResizeInProcess||d.getCurrentTimeProgress(e.bcPlayer.currentTime,e),e.shouldAddProgressToDiv&&t.increaseImpactWhileCreating()}),this.bcPlayer.addEventListener("seeked",function(){e.mode.watchHighlights&&(clearInterval(r.controlPlaybackInterval),r.isInsideImpact(e.bcPlayer.currentTime)),e.shouldAddProgressToDiv&&t.increaseImpactWhileCreating()}),this.bcPlayer.addEventListener("play",function(){u.inWatchMode()&&(r.checkIfShouldStartSmartPlay(t),r.intervalResume.start()),e.watchFullBtnEnabled=l.enableWatchFullBtn(e)}),this.bcPlayer.addEventListener("pause",function(){u.inWatchMode()&&r.intervalResume.pause()})}},{key:"attachPlayerProgress",value:function(){this.shouldAddProgressToDiv=!0,this.impactStartSec=this.bcPlayer.currentTime}},{key:"detachPlayerProgress",value:function(){this.shouldAddProgressToDiv=!1}},{key:"increaseImpactWhileCreating",value:function(){var e=this.selector.selectOne(this.instance+"-impactDiv"+this.impactsOrder);s.setImpactStyle(e,{startSec:this.impactStartSec,endSec:this.bcPlayer.currentTime,duration:this.bcPlayer.duration}),s.updateVibDuration(this,!0)}},{key:"getVideoDuration",value:function(){return this.bcPlayer.duration}},{key:"getCurrentTime",value:function(){return this.bcPlayer.currentTime}},{key:"calculateVibDuration",value:function(){s.calculateDurationFromImpacts(this)}},{key:"getVideoElement",value:function(e){return e.firstElementChild}},{key:"seekToSecond",value:function(e){this.bcPlayer.currentTime=e}},{key:"seekOnProgressBar",value:function(e){this.bcPlayer.currentTime=e*this.bcPlayer.duration}},{key:"getDivToAppendImpact",value:function(){return this.providerContainer.lastChild}},{key:"generateUrl",value:function(){var e=this.bcPlayer.getAttribute("data-video-id"),t=this.bcPlayer.getAttribute("data-account"),r=this.bcPlayer.getAttribute("data-player")+"_"+this.bcPlayer.getAttribute("data-embed");return"http://players.brightcove.net/"+t+"/"+r+"/index.html?videoId="+e}},{key:"getProviderVideoTitle",value:function(){var e=i.getDomQuerySelectorForClass("h1","video-title");if(this.bcPlayer&&this.bcPlayer.hasAttribute("data-video-name"))return this.bcPlayer.getAttribute("data-video-name");if(e&&e[0])return e[0].innerHTML;var t=n.returnChildDivByClass(this.container.firstChild,"vjs-dock-text"),r=n.returnChildDivByClass(t,"vjs-dock-title");return r?r.innerHTML:"My vib"}},{key:"getProviderThumbnailImage",value:function(){var e=i.getDomElementsByClassName("vibby-"+this.instance)[0],t=n.returnChildDivByClass(e,"vjs-poster"),r=t.style.backgroundImage;return r.substring(4,r.length-1).replace(/"/g,"")}},{key:"pauseProviderVideo",value:function(){this.bcPlayer.pause()}},{key:"playProviderVideo",value:function(){this.bcPlayer.play()}},{key:"getVideoProvider",value:function(){return"brightcove"}},{key:"attachHighlightElementsWatchMode",value:function(){i.createHighlightElementsWatchMode(this)}}]),c}(e);return h}),define("HTML5Provider",["Provider","VbProviderUtils","VbBtns","VbProgressBar","VbPlayback","VbUrlUtils","VbImpactUtils","VbDomManipulation","VbConfiguration"],function(e,t,r,i,n,a,o,s,c){var l=function(e){function l(e){_classCallCheck(this,l);var r=_possibleConstructorReturn(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c.CONFIG));return r._id=Math.random().toString(36).substring(7),r.instance="html5-video-"+e.providerInstance,r.index=e.providerInstance,r.impactsOrder=1,r.providersHighlightsTime=[],r.mode={create:!1,watchHighlights:!1},r.impactStartSec=0,r.currentTime=0,r.duration=0,r.firstPlayEventFired=!1,
r.container=e.element,r.videoElement=e.element.querySelector("video"),r.shouldAddProgressToDiv=!1,r.createBtnEnabled=!1,r.providerAttachListeners(),t.checkForUrlParamsAndCreateBtnsInProviderDom(r),r}return _inherits(l,e),_createClass(l,[{key:"providerAttachListeners",value:function(){var e=this;this.videoElement.addEventListener("timeupdate",function(t){e.createBtnEnabled||(e.createBtnEnabled=r.enableCreateHighlightBtn(e)),e.currentTime=e.videoElement.currentTime,e.duration=e.videoElement.duration,"v1"===c.templateVersion||e.highlightResizeInProcess||i.getCurrentTimeProgress(e.currentTime,e),e.shouldAddProgressToDiv&&e.increaseImpactWhileCreating()}),this.videoElement.addEventListener("seeked",function(t){e.currentTime=e.videoElement.currentTime,e.mode.watchHighlights&&(clearInterval(n.controlPlaybackInterval),n.isInsideImpact(e.currentTime)),e.shouldAddProgressToDiv&&e.increaseImpactWhileCreating()}),this.videoElement.addEventListener("play",function(t){a.inWatchMode()&&(n.checkIfShouldStartSmartPlay(vm),n.intervalResume.start()),e.createBtnEnabled=r.enableCreateHighlightBtn(e)}),this.videoElement.addEventListener("pause",function(e){a.inWatchMode()&&n.intervalResume.pause()})}},{key:"attachPlayerProgress",value:function(){this.shouldAddProgressToDiv=!0,this.impactStartSec=this.currentTime}},{key:"detachPlayerProgress",value:function(){this.shouldAddProgressToDiv=!1}},{key:"increaseImpactWhileCreating",value:function(){var e=this.selector.selectOne(this.instance+"-impactDiv"+this.impactsOrder);o.setImpactStyle(e,{startSec:this.impactStartSec,endSec:this.currentTime,duration:this.duration}),o.updateVibDuration(this,!0)}},{key:"getVideoDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"calculateVibDuration",value:function(){o.calculateDurationFromImpacts(this)}},{key:"seekToSecond",value:function(e){this.currentTime=e,this.videoElement.currentTime=e}},{key:"seekOnProgressBar",value:function(e){this.currentTime=e*this.duration}},{key:"getDivToAppendImpact",value:function(){return this.providerContainer.lastChild}},{key:"generateUrl",value:function(){var e=s.getDomElementsByClassName("vibby-"+this.instance)[0].getElementsByTagName("video")[0];return e.getAttribute("data-src")}},{key:"getProviderVideoTitle",value:function(){return"My vib"}},{key:"getProviderThumbnailImage",value:function(){return""}},{key:"pauseProviderVideo",value:function(){this.videoElement.pause()}},{key:"playProviderVideo",value:function(){this.videoElement.play()}},{key:"getVideoProvider",value:function(){return"html5-video"}}]),l}(e);return l}),define("JWProvider",["Provider"],function(e){var t=[],r=[],i={},n=function(e){function n(e){_classCallCheck(this,n);var a=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,CONFIG));return t["jw-counter-"+e]=0,r["jw-provider-"+e]="jw-"+e,i["jw-"+e]=[],a}return _inherits(n,e),_createClass(n,[{key:"getVideoDuration",value:function(e){var t=this.getProviderMainDiv(e),r=returnChildDivByClass(t,"jwvideo").firstChild;return r.duration>=0?r.duration:this.getTimeFromDom(e,"jwgroup jwright")}},{key:"getCurrentTime",value:function(e){var t=this.getProviderMainDiv(e),r=returnChildDivByClass(t,"jwvideo").firstChild;return r.currentTime>=0?r.currentTime:this.getTimeFromDom(e,"jwgroup jwleft")}},{key:"getProviderMainDiv",value:function(e){var t=getDomElementsByClassName("vibby-jw-"+e)[0];return returnChildDivByClass(t,"jwmain")}},{key:"getProviderControlsDiv",value:function(e){var t=returnChildDivByClass(this.getProviderMainDiv(e),"jwcontrols");return returnChildDivByClass(t,"jwcontrolbar")}},{key:"getDivToAppendImpact",value:function(e){var t=this.getProviderControlsDiv(e);return returnChildDivByClass(t,"jwgroup jwcenter")}},{key:"getTimeFromDom",value:function(e,t){var r=this.getProviderControlsDiv(e),i=returnChildDivByClass(r,t);return i.lastChild.innerHTML.split(":")}},{key:"increaseBtnCounter",value:function(e){return t["jw-counter-"+e]+=1,t["jw-counter-"+e]}},{key:"decreaseBtnCounter",value:function(e){return t["jw-counter-"+e]-=1,t["jw-counter-"+e]}},{key:"getProviderHighlightTimes",value:function(e){return i["jw-"+e]}},{key:"generateUrl",value:function(e){var t=this.getProviderMainDiv(e),r=returnChildDivByClass(t,"jwvideo").firstChild;return r.getAttribute("src")}},{key:"getProviderVideoTitle",value:function(e){var t=this.getProviderMainDiv(e);returnChildDivByClass(t,"jwvideo").firstChild;return"My vib"}},{key:"getProviderThumbnailImage",value:function(){return""}},{key:"pauseProviderVideo",value:function(e){var t=this.getProviderMainDiv(e),r=returnChildDivByClass(t,"jwvideo").firstChild;r.pause()}},{key:"playProviderVideo",value:function(e){var t=this.getProviderMainDiv(e),r=returnChildDivByClass(t,"jwvideo").firstChild;r.play()}},{key:"getVideoProvider",value:function(){return"custom"}}]),n}(e);return n}),define("VimeoProvider",["Provider","VbProviderUtils","VbPlayback","VbDomManipulation","VbConfiguration","VbImpactUtils","VbBtns","VbUrlUtils","VbProgressBar","VbWalkthrough"],function(e,t,r,i,n,a,o,s,c,l){var u=function(e){function u(e){_classCallCheck(this,u);var r=_possibleConstructorReturn(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,n.CONFIG));return r.vimeoPlayer=e.froogaloop,r._id=Math.random().toString(36).substring(7),r.instance="vimeo-"+e.providerInstance,r.index=e.providerInstance,r.impactsOrder=1,r.providersHighlightsTime=[],r.mode={create:!1,watchHighlights:!1},r.impactStartSec=0,r.currentTime=0,r.duration=0,r.firstPlayEventFired=!1,r.container=e.element,r.shouldAddProgressToDiv=!1,r.shouldAddHighlightsToDiv=!1,r.createBtnEnabled=!1,r.watchFullBtnEnabled=!1,r.providerAttachListeners(),t.checkForUrlParamsAndCreateBtnsInProviderDom(r),r}return _inherits(u,e),_createClass(u,[{key:"providerAttachListeners",value:function(){var e=this,t=this;this.vimeoPlayer.addEvent("playProgress",function(r){s.inWatchMode()||e.createBtnEnabled?s.inWatchMode()&&!e.watchFullBtnEnabled&&(e.watchFullBtnEnabled=o.enableWatchFullBtn(e)):(e.createBtnEnabled=o.enableCreateHighlightBtn(e),e.createBtnEnabled&&l.checkShouldShowWalkthrough(t)),e.currentTime=r.seconds,e.duration=r.duration,"v1"===n.templateVersion||e.highlightResizeInProcess||c.getCurrentTimeProgress(e.currentTime,e),e.shouldAddProgressToDiv&&t.increaseImpactWhileCreating(),e.shouldAddHighlightsToDiv&&(e.shouldAddHighlightsToDiv=!1,i.createHighlightElementsWatchMode(e))}),this.vimeoPlayer.addEvent("seek",function(i){e.currentTime=i.seconds,e.mode.watchHighlights&&(clearInterval(r.controlPlaybackInterval),r.isInsideImpact(i.seconds)),e.shouldAddProgressToDiv&&t.increaseImpactWhileCreating()}),this.vimeoPlayer.addEvent("pause",function(){s.inWatchMode()&&r.intervalResume.pause()}),this.vimeoPlayer.addEvent("play",function(){s.inWatchMode()&&(r.checkIfShouldStartSmartPlay(t),r.intervalResume.start()),e.watchFullBtnEnabled=o.enableWatchFullBtn(e),r.startSmartPlayFromBeginning&&e.mode.watchHighlights&&(e.vimeoPlayer.api("play"),r.resetStartSmartPlay())})}},{key:"attachPlayerProgress",value:function(){this.shouldAddProgressToDiv=!0,this.impactStartSec=this.currentTime}},{key:"detachPlayerProgress",value:function(){this.shouldAddProgressToDiv=!1}},{key:"increaseImpactWhileCreating",value:function(){var e=this.selector.selectOne(this.instance+"-impactDiv"+this.impactsOrder);a.setImpactStyle(e,{startSec:this.impactStartSec,endSec:this.currentTime,duration:this.duration}),a.updateVibDuration(this,!0)}},{key:"getVideoDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"calculateVibDuration",value:function(){a.calculateDurationFromImpacts(this)}},{key:"seekToSecond",value:function(e){this.currentTime=e,this.vimeoPlayer.api("seekTo",e)}},{key:"seekOnProgressBar",value:function(e){this.currentTime=e*this.duration,this.vimeoPlayer.api("seekTo",this.currentTime)}},{key:"getDivToAppendImpact",value:function(){return this.providerContainer.lastChild}},{key:"generateUrl",value:function(){var e=i.getDomElementsByClassName("vibby-"+this.instance)[0].getElementsByTagName("iframe")[0];return e.getAttribute("src")}},{key:"getProviderVideoTitle",value:function(){return"My vib"}},{key:"getProviderThumbnailImage",value:function(){return""}},{key:"pauseProviderVideo",value:function(){this.vimeoPlayer.api("pause")}},{key:"playProviderVideo",value:function(){this.vimeoPlayer.api("play")}},{key:"getVideoProvider",value:function(){return"vimeo"}},{key:"attachHighlightElementsWatchMode",value:function(){this.shouldAddHighlightsToDiv=!0}}]),u}(e);return u}),requirejs(["BrightCoveProvider","JWProvider","VimeoProvider","HTML5Provider","VbCreateProviders","VbProviderUtils","VbConstants","VbDomManipulation","VbConfiguration","VbStorage","VbUrlUtils","VbBtns"],function(e,t,r,i,n,a,o,s,c,l,u,d){function h(){u.inCreateMode()&&l.clearProviderInstancesData(),u.inWatchMode()||!c.triggerOption?v():d.createTriggerBtn(v)}var m="localhost"===c.ENV?"css":"min.css";s.appendCss(c.CONFIG.vibbifyURL+"static/vibbify_"+c.publisher.name+"."+m),a.initializeProviders(),window.location.href.indexOf("nba.com")>-1&&nlAdPlayerObj&&nlAdPlayerObj.adTimedOut();var p={};p.vibbifiedProviders=[];var v=function(){n.containersToAppendBtns.forEach(function(t){switch(t.provider){case"bc":return void p.vibbifiedProviders.push({container:t,provider:new e(t)});case"vimeo":return void p.vibbifiedProviders.push({container:t,provider:new r(t)});case"html5-video":return void p.vibbifiedProviders.push({container:t,provider:new i(t)})}})};!c.publisher.configuration||c.publisher.configuration.startOnWindowLoad?window.onload=function(){h()}:h(),window.vibbify=window.vibbify||{build:c.build}})();