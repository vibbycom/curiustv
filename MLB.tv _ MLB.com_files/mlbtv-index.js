/*
Do NOT edit this file!
This file will be deleted with the next Jenkins/Grunt build.
Build Date: Friday, February 23rd, 2018, 3:49:49 AM UTC
Version:fe8e8d778c55cc8c7deb21536aa95ad9d955583c_1519357790
Questions? contact Paolo Vaca 
*/

function Html5PlayerInterface(a,b){function c(a,b){if(this._log("Html5PlayerInterface._constr()"),!a)throw new Error("Html5PlayerInterface: playerStateManager argument cannot be null.");if(!b)throw new Error("Html5PlayerInterface: videoElement argument cannot be null.");this._playerStateManager=a,this._videoElement=b,this._eventListeners=[],this._registerVideoEventListeners(),this._resetPlayHeadTimes(),this._startPolling(),this._findCurrentState()}var d=this;d._lastPlayHeadTimeSpeeds=[],this._timerInterface=new Html5Timer,this._loggingInterface=new Html5Logging,this._addEventListener=function(a,b,c){"undefined"==typeof c&&(c=d._videoElement),d._eventListeners.push([a,b,c]),window.addEventListener?c.addEventListener(a,b,!1):c.attachEvent("on"+a,b)},this._removeEventListener=function(a,b,c){"undefined"==typeof c&&(c=d._videoElement),window.removeEventListener?c.removeEventListener(a,b,!1):c.detachEvent("on"+a,b)},this._registerVideoEventListeners=function(){d._addEventListener("ended",function(){d._receivedHtml5Event("ended")}),d._addEventListener("pause",function(){d._receivedHtml5Event("pause")}),d._addEventListener("playing",function(){d._receivedHtml5Event("playing")}),d._addEventListener("emptied",function(){d._receivedHtml5Event("emptied")}),d._addEventListener("stalled",function(){return d._videoElement.paused?void d._log("Ignored stalled event (player was paused)"):void 0}),d._addEventListener("waiting",function(){return d._videoElement.seeking?void d._log("Ignored waiting event (player was seeking)"):void d._receivedHtml5Event("waiting")}),d._addEventListener("error",function(){if(d._videoElement.error){var a=d._videoElement.error.code;d._reportHtml5Error(a)}}),d._addEventListener("loadedmetadata",d._loadedMetadata),d._addEventListener("seeking",function(){d.isSeekStarted||(d._log("player is seeeking"),d.isSeekStarted=!0,d._playerStateManager.setSeekStart(-1))}),d._addEventListener("seeked",function(){d._log("player is seeked"),d.isSeekStarted=!1,d._playerStateManager.setSeekEnd()}),d._monitorErrorsFromSourceElements()},this._monitorErrorsFromSourceElements=function(){if("undefined"!=typeof d._videoElement.children){var a=function(){d._log("Caught non-specific error from <source> element, reporting as ERR_UNKNOWN"),d._reportHtml5Error(0)};d._videoElement._sources=d._videoElement.children;for(var b=0;b<d._videoElement._sources.length;b++){var c=d._videoElement._sources[b];"SOURCE"==c.tagName&&d._addEventListener("error",a,c)}}},this._removeVideoEventHandlers=function(){for(var a=0;a<d._eventListeners.length;a++){var b=d._eventListeners[a];d._removeEventListener(b[0],b[1],b[2])}d._eventListeners=[]},this._findCurrentState=function(){d._prevReadyState=d._videoElement.readyState,0===d._videoElement.readyState?d._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.STOPPED):d._videoElement.ended?d._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.STOPPED):d._videoElement.paused||d._videoElement.seeking?d._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED):d._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PLAYING),d._videoElement.readyState>=d._videoElement.HAVE_METADATA&&d._loadedMetadata()},this._receivedHtml5Event=function(a){var b=d._convertHtml5EventToConvivaPlayerState(a);d._log("Received HTML5 event: "+a+". Mapped to Conviva player state: "+b),d._updateConvivaPlayerState(b)},this._updateConvivaPlayerState=function(a){d._playerStateManager.getPlayerState()!==a&&(d._log("Changing Conviva player state to: "+a),d._playerStateManager.setPlayerState(a),d._resetPlayHeadTimes(),d._playerStateRecentlyChanged=!0)},this._convertHtml5EventToConvivaPlayerState=function(a){switch(a){case"playing":return Conviva.PlayerStateManager.PlayerState.PLAYING;case"waiting":return Conviva.PlayerStateManager.PlayerState.BUFFERING;case"ended":case"stopped":return Conviva.PlayerStateManager.PlayerState.STOPPED;case"pause":return Conviva.PlayerStateManager.PlayerState.PAUSED;default:return Conviva.PlayerStateManager.PlayerState.UNKNOWN}},this._reportHtml5Error=function(a){var b;switch(a){case 1:b="MEDIA_ERR_ABORTED";break;case 2:b="MEDIA_ERR_NETWORK";break;case 3:b="MEDIA_ERR_DECODE";break;case 4:b="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:b="MEDIA_ERR_UNKNOWN"}d._log("Reporting error: code="+a+" message="+b);var c=Conviva.Client.ErrorSeverity.FATAL;d._playerStateManager.sendError(b,c)},this._loadedMetadata=function(){var a=d._videoElement.duration;isNaN(a)||a==1/0||d._playerStateManager.setDuration(a)},this._startPolling=function(){this._previousPosition=0,this._currentPosition=0,this._currentBufferLength=0,this._pollingTimerCancel=this._timerInterface.createTimer(this._poll,500,"Html5PlayerInterface._poll()")},this._poll=function(){d._pollPosition(),d._pollBufferLength(),d._inferPlayerStateFromPosition()},this._pollPosition=function(){d._previousPosition=d._currentPosition,d._currentPosition=d._videoElement.currentTime,now=Date.now(),d._lastPollTime>0&&now>d._lastPollTime&&(currentPhtSpeed=(d._currentPosition-d._previousPosition)/(now-d._lastPollTime)*1e3,d._lastPlayHeadTimeSpeeds.push(currentPhtSpeed)),d._lastPollTime=now,d._lastPlayHeadTimeSpeeds.length>Math.max(Html5PlayerInterface.PAUSED_STATE_ON_CONSTANT_PHT_POLL_COUNT,Html5PlayerInterface.PLAY_STATE_ON_MOVING_PHT_POLL_COUNT)&&d._lastPlayHeadTimeSpeeds.shift(),d._playerStateManager.setPlayheadTime(1e3*d._currentPosition)},this._pollBufferLength=function(){var a=d._videoElement.buffered;if(void 0!==a){for(var b=0,c=0;c<a.length;c++){var e=a.start(c),f=a.end(c);e<=d._currentPosition&&d._currentPosition<f&&(b+=f-d._currentPosition)}d._currentBufferLength=b,d._playerStateManager.setBufferLength(1e3*d._currentBufferLength)}},this._inferPlayerStateFromPosition=function(){var a=d._lastPlayHeadTimeSpeeds.length;if(a>=Math.min(Html5PlayerInterface.PLAY_STATE_ON_MOVING_PHT_POLL_COUNT,Html5PlayerInterface.PAUSED_STATE_ON_CONSTANT_PHT_POLL_COUNT)){for(var b=0,c=d._lastPlayHeadTimeSpeeds.slice(),e=0;e<c.length;e++){var f=c[e];b+=f}b/=a;var g=Html5PlayerInterface.PHT_PLAY_EXPECTED_SPEED,h=Html5PlayerInterface.PHT_PLAY_TOLERANCE,i=d._videoElement.playbackRate;!isNaN(i)&&i!=1/0&&i>0&&(isSafari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,isSafari&&.5>i&&(i=.5),g*=i,h*=i);var j=d._playerStateManager.getPlayerState();if(j!=Conviva.PlayerStateManager.PlayerState.PLAYING&&a>=Html5PlayerInterface.PLAY_STATE_ON_MOVING_PHT_POLL_COUNT&&Math.abs(b-g)<h)return d._log("Adjusting Conviva player state to: PLAYING"),void d._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PLAYING);if(j==Conviva.PlayerStateManager.PlayerState.PLAYING&&a>=Html5PlayerInterface.PAUSED_STATE_ON_CONSTANT_PHT_POLL_COUNT&&b==Html5PlayerInterface.PHT_PAUSED_EXPECTED_SPEED)return void(d._videoElement.paused?(d._log("Adjusting Conviva player state to: PAUSED"),d._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED)):d._videoElement.seeking||(d._log("Adjusting Conviva player state to: BUFFERING"),d._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.BUFFERING)))}},this._stopPolling=function(){this._pollingTimerCancel()},this._resetPlayHeadTimes=function(){d._lastPlayHeadTimeSpeeds=[],d._previousPosition=-1,d._lastPollTime=0},this.getPlayerStateManager=function(){return this._playerStateManager},this._log=function(a){var b="[Html5PlayerInterface] "+a;this._loggingInterface.consoleLog(b,Conviva.SystemSettings.LogLevel.DEBUG)},c.apply(this,arguments),this.cleanup=function(){this._log("Html5PlayerInterface.cleanup()"),this._stopPolling(),this._removeVideoEventHandlers(),this._videoElement=null,this._playerStateManager=null}}function Html5Http(){function a(){}a.apply(this,arguments),this.makeRequest=function(a,b,c,d,e,f){return this.makeRequestStandard.apply(this,arguments)},this.makeRequestStandard=function(a,b,c,d,e,f){var g=new XMLHttpRequest;return g.open(a,b,!0),d&&g.overrideMimeType&&(g.overrideMimeType=d),d&&g.setRequestHeader&&g.setRequestHeader("Content-Type",d),e>0&&(g.timeout=e,g.ontimeout=function(){g.ontimeout=g.onreadystatechange=null,f&&f(!1,"timeout after "+e+" ms")}),g.onreadystatechange=function(){4===g.readyState&&(g.ontimeout=g.onreadystatechange=null,200==g.status?f&&f(!0,g.responseText):f&&f(!1,"http status "+g.status))},g.send(c),null},this.release=function(){}}function Html5Logging(){function a(){}a.apply(this,arguments),this.consoleLog=function(a,b){"undefined"!=typeof console&&(console.log&&b===Conviva.SystemSettings.LogLevel.DEBUG||b===Conviva.SystemSettings.LogLevel.INFO?console.log(a):console.warn&&b===Conviva.SystemSettings.LogLevel.WARNING?console.warn(a):console.error&&b===Conviva.SystemSettings.LogLevel.ERROR&&console.error(a))},this.release=function(){}}function Html5Metadata(){function a(){}a.apply(this,arguments),this.getBrowserName=function(){return null},this.getBrowserVersion=function(){return null},this.getDeviceBrand=function(){return null},this.getDeviceManufacturer=function(){return null},this.getDeviceModel=function(){return null},this.getDeviceType=function(){return null},this.getDeviceVersion=function(){return null},this.getFrameworkName=function(){return"HTML5"},this.getFrameworkVersion=function(){return null},this.getOperatingSystemName=function(){return null},this.getOperatingSystemVersion=function(){return null},this.release=function(){}}function Html5Storage(){function a(){}a.apply(this,arguments),this.saveData=function(a,b,c,d){var e=a+"."+b;try{localStorage.setItem(e,c),d(!0,null)}catch(f){d(!1,f.toString())}},this.loadData=function(a,b,c){var d=a+"."+b;try{var e=localStorage.getItem(d);c(!0,e)}catch(f){c(!1,f.toString())}},this.release=function(){}}function Html5Time(){function a(){}a.apply(this,arguments),this.getEpochTimeMs=function(){var a=new Date;return a.getTime()},this.release=function(){}}function Html5Timer(){function a(){}a.apply(this,arguments),this.createTimer=function(a,b,c){var d=setInterval(a,b),e=function(){-1!==d&&(clearInterval(d),d=-1)};return e},this.release=function(){}}function _ConvivaRequire(){return{Html5SystemInterfaceFactory:Html5SystemInterfaceFactory,Html5PlayerInterface:Html5PlayerInterface}}!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=0)}([function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(1),e=(c.n(d),c(3)),f=(c.n(e),c(4));c.n(f)},function(a,b,c){(function(a){var b,b;!function c(a,d,e){function f(h,i){if(!d[h]){if(!a[h]){var j="function"==typeof b&&b;if(!i&&j)return b(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=d[h]={exports:{}};a[h][0].call(l.exports,function(b){var c=a[h][1][b];return f(c?c:b)},l,l.exports,c,a,d,e)}return d[h].exports}for(var g="function"==typeof b&&b,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(b,c,d){(function(a){"use strict";function c(a,b,c){a[b]||Object[d](a,b,{writable:!0,configurable:!0,value:c})}if(b(327),b(328),b(2),a._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");a._babelPolyfill=!0;var d="defineProperty";c(String.prototype,"padLeft","".padStart),c(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(a){[][a]&&c(Array,a,Function.call.bind([][a]))})}).call(this,"undefined"!=typeof a?a:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2,327:327,328:328}],2:[function(a,b,c){a(130),b.exports=a(23).RegExp.escape},{130:130,23:23}],3:[function(a,b,c){b.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},{}],4:[function(a,b,c){var d=a(18);b.exports=function(a,b){if("number"!=typeof a&&"Number"!=d(a))throw TypeError(b);return+a}},{18:18}],5:[function(a,b,c){var d=a(128)("unscopables"),e=Array.prototype;void 0==e[d]&&a(42)(e,d,{}),b.exports=function(a){e[d][a]=!0}},{128:128,42:42}],6:[function(a,b,c){b.exports=function(a,b,c,d){if(!(a instanceof b)||void 0!==d&&d in a)throw TypeError(c+": incorrect invocation!");return a}},{}],7:[function(a,b,c){var d=a(51);b.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}},{51:51}],8:[function(a,b,c){var d=a(119),e=a(114),f=a(118);b.exports=[].copyWithin||function(a,b){var c=d(this),g=f(c.length),h=e(a,g),i=e(b,g),j=arguments.length>2?arguments[2]:void 0,k=Math.min((void 0===j?g:e(j,g))-i,g-h),l=1;for(h>i&&i+k>h&&(l=-1,i+=k-1,h+=k-1);k-->0;)i in c?c[h]=c[i]:delete c[h],h+=l,i+=l;return c}},{114:114,118:118,119:119}],9:[function(a,b,c){var d=a(119),e=a(114),f=a(118);b.exports=function(a){for(var b=d(this),c=f(b.length),g=arguments.length,h=e(g>1?arguments[1]:void 0,c),i=g>2?arguments[2]:void 0,j=void 0===i?c:e(i,c);j>h;)b[h++]=a;return b}},{114:114,118:118,119:119}],10:[function(a,b,c){var d=a(39);b.exports=function(a,b){var c=[];return d(a,!1,c.push,c,b),c}},{39:39}],11:[function(a,b,c){var d=a(117),e=a(118),f=a(114);b.exports=function(a){return function(b,c,g){var h,i=d(b),j=e(i.length),k=f(g,j);if(a&&c!=c){for(;j>k;)if(h=i[k++],h!=h)return!0}else for(;j>k;k++)if((a||k in i)&&i[k]===c)return a||k||0;return!a&&-1}}},{114:114,117:117,118:118}],12:[function(a,b,c){var d=a(25),e=a(47),f=a(119),g=a(118),h=a(15);b.exports=function(a,b){var c=1==a,i=2==a,j=3==a,k=4==a,l=6==a,m=5==a||l,n=b||h;return function(b,h,o){for(var p,q,r=f(b),s=e(r),t=d(h,o,3),u=g(s.length),v=0,w=c?n(b,u):i?n(b,0):void 0;u>v;v++)if((m||v in s)&&(p=s[v],q=t(p,v,r),a))if(c)w[v]=q;else if(q)switch(a){case 3:return!0;case 5:return p;case 6:return v;case 2:w.push(p)}else if(k)return!1;return l?-1:j||k?k:w}}},{118:118,119:119,15:15,25:25,47:47}],13:[function(a,b,c){var d=a(3),e=a(119),f=a(47),g=a(118);b.exports=function(a,b,c,h,i){d(b);var j=e(a),k=f(j),l=g(j.length),m=i?l-1:0,n=i?-1:1;if(2>c)for(;;){if(m in k){h=k[m],m+=n;break}if(m+=n,i?0>m:m>=l)throw TypeError("Reduce of empty array with no initial value")}for(;i?m>=0:l>m;m+=n)m in k&&(h=b(h,k[m],m,j));return h}},{118:118,119:119,3:3,47:47}],14:[function(a,b,c){var d=a(51),e=a(49),f=a(128)("species");b.exports=function(a){var b;return e(a)&&(b=a.constructor,"function"!=typeof b||b!==Array&&!e(b.prototype)||(b=void 0),d(b)&&(b=b[f],null===b&&(b=void 0))),void 0===b?Array:b}},{128:128,49:49,51:51}],15:[function(a,b,c){var d=a(14);b.exports=function(a,b){return new(d(a))(b)}},{14:14}],16:[function(a,b,c){"use strict";var d=a(3),e=a(51),f=a(46),g=[].slice,h={},i=function(a,b,c){if(!(b in h)){for(var d=[],e=0;b>e;e++)d[e]="a["+e+"]";h[b]=Function("F,a","return new F("+d.join(",")+")")}return h[b](a,c)};b.exports=Function.bind||function(a){var b=d(this),c=g.call(arguments,1),h=function(){var d=c.concat(g.call(arguments));return this instanceof h?i(b,d.length,d):f(b,d,a)};return e(b.prototype)&&(h.prototype=b.prototype),h}},{3:3,46:46,51:51}],17:[function(a,b,c){var d=a(18),e=a(128)("toStringTag"),f="Arguments"==d(function(){return arguments}()),g=function(a,b){try{return a[b]}catch(c){}};b.exports=function(a){var b,c,h;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(c=g(b=Object(a),e))?c:f?d(b):"Object"==(h=d(b))&&"function"==typeof b.callee?"Arguments":h}},{128:128,18:18}],18:[function(a,b,c){var d={}.toString;b.exports=function(a){return d.call(a).slice(8,-1)}},{}],19:[function(a,b,c){"use strict";var d=a(72).f,e=a(71),f=a(93),g=a(25),h=a(6),i=a(39),j=a(55),k=a(57),l=a(100),m=a(29),n=a(66).fastKey,o=a(125),p=m?"_s":"size",q=function(a,b){var c,d=n(b);if("F"!==d)return a._i[d];for(c=a._f;c;c=c.n)if(c.k==b)return c};b.exports={getConstructor:function(a,b,c,j){var k=a(function(a,d){h(a,k,b,"_i"),a._t=b,a._i=e(null),a._f=void 0,a._l=void 0,a[p]=0,void 0!=d&&i(d,c,a[j],a)});return f(k.prototype,{clear:function(){for(var a=o(this,b),c=a._i,d=a._f;d;d=d.n)d.r=!0,d.p&&(d.p=d.p.n=void 0),delete c[d.i];a._f=a._l=void 0,a[p]=0},"delete":function(a){var c=o(this,b),d=q(c,a);if(d){var e=d.n,f=d.p;delete c._i[d.i],d.r=!0,f&&(f.n=e),e&&(e.p=f),c._f==d&&(c._f=e),c._l==d&&(c._l=f),c[p]--}return!!d},forEach:function(a){o(this,b);for(var c,d=g(a,arguments.length>1?arguments[1]:void 0,3);c=c?c.n:this._f;)for(d(c.v,c.k,this);c&&c.r;)c=c.p},has:function(a){return!!q(o(this,b),a)}}),m&&d(k.prototype,"size",{get:function(){return o(this,b)[p]}}),k},def:function(a,b,c){var d,e,f=q(a,b);return f?f.v=c:(a._l=f={i:e=n(b,!0),k:b,v:c,p:d=a._l,n:void 0,r:!1},a._f||(a._f=f),d&&(d.n=f),a[p]++,"F"!==e&&(a._i[e]=f)),a},getEntry:q,setStrong:function(a,b,c){j(a,b,function(a,c){this._t=o(a,b),this._k=c,this._l=void 0},function(){for(var a=this,b=a._k,c=a._l;c&&c.r;)c=c.p;return a._t&&(a._l=c=c?c.n:a._t._f)?"keys"==b?k(0,c.k):"values"==b?k(0,c.v):k(0,[c.k,c.v]):(a._t=void 0,k(1))},c?"entries":"values",!c,!0),l(b)}}},{100:100,125:125,25:25,29:29,39:39,55:55,57:57,6:6,66:66,71:71,72:72,93:93}],20:[function(a,b,c){var d=a(17),e=a(10);b.exports=function(a){return function(){if(d(this)!=a)throw TypeError(a+"#toJSON isn't generic");return e(this)}}},{10:10,17:17}],21:[function(a,b,c){"use strict";var d=a(93),e=a(66).getWeak,f=a(7),g=a(51),h=a(6),i=a(39),j=a(12),k=a(41),l=a(125),m=j(5),n=j(6),o=0,p=function(a){return a._l||(a._l=new q)},q=function(){this.a=[]},r=function(a,b){return m(a.a,function(a){return a[0]===b})};q.prototype={get:function(a){var b=r(this,a);return b?b[1]:void 0},has:function(a){return!!r(this,a)},set:function(a,b){var c=r(this,a);c?c[1]=b:this.a.push([a,b])},"delete":function(a){var b=n(this.a,function(b){return b[0]===a});return~b&&this.a.splice(b,1),!!~b}},b.exports={getConstructor:function(a,b,c,f){var j=a(function(a,d){h(a,j,b,"_i"),a._t=b,a._i=o++,a._l=void 0,void 0!=d&&i(d,c,a[f],a)});return d(j.prototype,{"delete":function(a){if(!g(a))return!1;var c=e(a);return c===!0?p(l(this,b))["delete"](a):c&&k(c,this._i)&&delete c[this._i]},has:function(a){if(!g(a))return!1;var c=e(a);return c===!0?p(l(this,b)).has(a):c&&k(c,this._i)}}),j},def:function(a,b,c){var d=e(f(b),!0);return d===!0?p(a).set(b,c):d[a._i]=c,a},ufstore:p}},{12:12,125:125,39:39,41:41,51:51,6:6,66:66,7:7,93:93}],22:[function(a,b,c){"use strict";var d=a(40),e=a(33),f=a(94),g=a(93),h=a(66),i=a(39),j=a(6),k=a(51),l=a(35),m=a(56),n=a(101),o=a(45);b.exports=function(a,b,c,p,q,r){var s=d[a],t=s,u=q?"set":"add",v=t&&t.prototype,w={},x=function(a){var b=v[a];f(v,a,"delete"==a?function(a){return r&&!k(a)?!1:b.call(this,0===a?0:a)}:"has"==a?function(a){return r&&!k(a)?!1:b.call(this,0===a?0:a)}:"get"==a?function(a){return r&&!k(a)?void 0:b.call(this,0===a?0:a)}:"add"==a?function(a){return b.call(this,0===a?0:a),this}:function(a,c){return b.call(this,0===a?0:a,c),this})};if("function"==typeof t&&(r||v.forEach&&!l(function(){(new t).entries().next()}))){var y=new t,z=y[u](r?{}:-0,1)!=y,A=l(function(){y.has(1)}),B=m(function(a){new t(a)}),C=!r&&l(function(){for(var a=new t,b=5;b--;)a[u](b,b);return!a.has(-0)});B||(t=b(function(b,c){j(b,t,a);var d=o(new s,b,t);return void 0!=c&&i(c,q,d[u],d),d}),t.prototype=v,v.constructor=t),(A||C)&&(x("delete"),x("has"),q&&x("get")),(C||z)&&x(u),r&&v.clear&&delete v.clear}else t=p.getConstructor(b,a,q,u),g(t.prototype,c),h.NEED=!0;return n(t,a),w[a]=t,e(e.G+e.W+e.F*(t!=s),w),r||p.setStrong(t,a,q),t}},{101:101,33:33,35:35,39:39,40:40,45:45,51:51,56:56,6:6,66:66,93:93,94:94}],23:[function(a,b,c){var d=b.exports={version:"2.5.0"};"number"==typeof __e&&(__e=d)},{}],24:[function(a,b,c){"use strict";var d=a(72),e=a(92);b.exports=function(a,b,c){b in a?d.f(a,b,e(0,c)):a[b]=c}},{72:72,92:92}],25:[function(a,b,c){var d=a(3);b.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},{3:3}],26:[function(a,b,c){"use strict";var d=a(35),e=Date.prototype.getTime,f=Date.prototype.toISOString,g=function(a){return a>9?a:"0"+a};b.exports=d(function(){return"0385-07-25T07:06:39.999Z"!=f.call(new Date(-5e13-1))})||!d(function(){f.call(new Date(NaN))})?function(){if(!isFinite(e.call(this)))throw RangeError("Invalid time value");var a=this,b=a.getUTCFullYear(),c=a.getUTCMilliseconds(),d=0>b?"-":b>9999?"+":"";return d+("00000"+Math.abs(b)).slice(d?-6:-4)+"-"+g(a.getUTCMonth()+1)+"-"+g(a.getUTCDate())+"T"+g(a.getUTCHours())+":"+g(a.getUTCMinutes())+":"+g(a.getUTCSeconds())+"."+(c>99?c:"0"+g(c))+"Z"}:f},{35:35}],27:[function(a,b,c){"use strict";var d=a(7),e=a(120),f="number";b.exports=function(a){if("string"!==a&&a!==f&&"default"!==a)throw TypeError("Incorrect hint");return e(d(this),a!=f)}},{120:120,7:7}],28:[function(a,b,c){b.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}},{}],29:[function(a,b,c){b.exports=!a(35)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{35:35}],30:[function(a,b,c){var d=a(51),e=a(40).document,f=d(e)&&d(e.createElement);b.exports=function(a){return f?e.createElement(a):{}}},{40:40,51:51}],31:[function(a,b,c){b.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],32:[function(a,b,c){var d=a(81),e=a(78),f=a(82);b.exports=function(a){var b=d(a),c=e.f;if(c)for(var g,h=c(a),i=f.f,j=0;h.length>j;)i.call(a,g=h[j++])&&b.push(g);return b}},{78:78,81:81,82:82}],33:[function(a,b,c){var d=a(40),e=a(23),f=a(42),g=a(94),h=a(25),i="prototype",j=function(a,b,c){var k,l,m,n,o=a&j.F,p=a&j.G,q=a&j.S,r=a&j.P,s=a&j.B,t=p?d:q?d[b]||(d[b]={}):(d[b]||{})[i],u=p?e:e[b]||(e[b]={}),v=u[i]||(u[i]={});p&&(c=b);for(k in c)l=!o&&t&&void 0!==t[k],m=(l?t:c)[k],n=s&&l?h(m,d):r&&"function"==typeof m?h(Function.call,m):m,t&&g(t,k,m,a&j.U),u[k]!=m&&f(u,k,n),r&&v[k]!=m&&(v[k]=m)};d.core=e,j.F=1,j.G=2,j.S=4,j.P=8,j.B=16,j.W=32,j.U=64,j.R=128,b.exports=j},{23:23,25:25,40:40,42:42,94:94}],34:[function(a,b,c){var d=a(128)("match");b.exports=function(a){var b=/./;try{"/./"[a](b)}catch(c){try{return b[d]=!1,!"/./"[a](b)}catch(e){}}return!0}},{128:128}],35:[function(a,b,c){b.exports=function(a){try{return!!a()}catch(b){return!0}}},{}],36:[function(a,b,c){"use strict";var d=a(42),e=a(94),f=a(35),g=a(28),h=a(128);b.exports=function(a,b,c){var i=h(a),j=c(g,i,""[a]),k=j[0],l=j[1];f(function(){var b={};return b[i]=function(){return 7},7!=""[a](b)})&&(e(String.prototype,a,k),d(RegExp.prototype,i,2==b?function(a,b){return l.call(a,this,b)}:function(a){return l.call(a,this)}))}},{128:128,28:28,35:35,42:42,94:94}],37:[function(a,b,c){"use strict";var d=a(7);b.exports=function(){var a=d(this),b="";return a.global&&(b+="g"),a.ignoreCase&&(b+="i"),a.multiline&&(b+="m"),a.unicode&&(b+="u"),a.sticky&&(b+="y"),b}},{7:7}],38:[function(a,b,c){"use strict";function d(a,b,c,j,k,l,m,n){for(var o,p,q=k,r=0,s=m?h(m,n,3):!1;j>r;){if(r in c){if(o=s?s(c[r],r,b):c[r],p=!1,f(o)&&(p=o[i],p=void 0!==p?!!p:e(o)),p&&l>0)q=d(a,b,o,g(o.length),q,l-1)-1;else{if(q>=9007199254740991)throw TypeError();a[q]=o}q++}r++}return q}var e=a(49),f=a(51),g=a(118),h=a(25),i=a(128)("isConcatSpreadable");b.exports=d},{118:118,128:128,25:25,49:49,51:51}],39:[function(a,b,c){var d=a(25),e=a(53),f=a(48),g=a(7),h=a(118),i=a(129),j={},k={},c=b.exports=function(a,b,c,l,m){var n,o,p,q,r=m?function(){return a}:i(a),s=d(c,l,b?2:1),t=0;if("function"!=typeof r)throw TypeError(a+" is not iterable!");if(f(r)){for(n=h(a.length);n>t;t++)if(q=b?s(g(o=a[t])[0],o[1]):s(a[t]),q===j||q===k)return q}else for(p=r.call(a);!(o=p.next()).done;)if(q=e(p,s,o.value,b),q===j||q===k)return q};c.BREAK=j,c.RETURN=k},{118:118,129:129,25:25,48:48,53:53,7:7}],40:[function(a,b,c){var d=b.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=d)},{}],41:[function(a,b,c){var d={}.hasOwnProperty;b.exports=function(a,b){return d.call(a,b)}},{}],42:[function(a,b,c){var d=a(72),e=a(92);b.exports=a(29)?function(a,b,c){return d.f(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}},{29:29,72:72,92:92}],43:[function(a,b,c){var d=a(40).document;b.exports=d&&d.documentElement},{40:40}],44:[function(a,b,c){b.exports=!a(29)&&!a(35)(function(){return 7!=Object.defineProperty(a(30)("div"),"a",{get:function(){return 7}}).a})},{29:29,30:30,35:35}],45:[function(a,b,c){var d=a(51),e=a(99).set;b.exports=function(a,b,c){var f,g=b.constructor;return g!==c&&"function"==typeof g&&(f=g.prototype)!==c.prototype&&d(f)&&e&&e(a,f),a}},{51:51,99:99}],46:[function(a,b,c){b.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)}},{}],47:[function(a,b,c){var d=a(18);b.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==d(a)?a.split(""):Object(a)}},{18:18}],48:[function(a,b,c){var d=a(58),e=a(128)("iterator"),f=Array.prototype;b.exports=function(a){return void 0!==a&&(d.Array===a||f[e]===a)}},{128:128,58:58}],49:[function(a,b,c){var d=a(18);b.exports=Array.isArray||function(a){return"Array"==d(a)}},{18:18}],50:[function(a,b,c){var d=a(51),e=Math.floor;b.exports=function(a){return!d(a)&&isFinite(a)&&e(a)===a}},{51:51}],51:[function(a,b,c){b.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},{}],52:[function(a,b,c){var d=a(51),e=a(18),f=a(128)("match");b.exports=function(a){var b;return d(a)&&(void 0!==(b=a[f])?!!b:"RegExp"==e(a))}},{128:128,18:18,51:51}],53:[function(a,b,c){var d=a(7);b.exports=function(a,b,c,e){try{return e?b(d(c)[0],c[1]):b(c)}catch(f){var g=a["return"];throw void 0!==g&&d(g.call(a)),f}}},{7:7}],54:[function(a,b,c){"use strict";var d=a(71),e=a(92),f=a(101),g={};a(42)(g,a(128)("iterator"),function(){return this}),b.exports=function(a,b,c){a.prototype=d(g,{next:e(1,c)}),f(a,b+" Iterator")}},{101:101,128:128,42:42,71:71,92:92}],55:[function(a,b,c){"use strict";var d=a(60),e=a(33),f=a(94),g=a(42),h=a(41),i=a(58),j=a(54),k=a(101),l=a(79),m=a(128)("iterator"),n=!([].keys&&"next"in[].keys()),o="@@iterator",p="keys",q="values",r=function(){return this};b.exports=function(a,b,c,s,t,u,v){j(c,b,s);var w,x,y,z=function(a){if(!n&&a in D)return D[a];switch(a){case p:return function(){return new c(this,a)};case q:return function(){return new c(this,a)}}return function(){return new c(this,a)}},A=b+" Iterator",B=t==q,C=!1,D=a.prototype,E=D[m]||D[o]||t&&D[t],F=E||z(t),G=t?B?z("entries"):F:void 0,H="Array"==b?D.entries||E:E;if(H&&(y=l(H.call(new a)),y!==Object.prototype&&y.next&&(k(y,A,!0),d||h(y,m)||g(y,m,r))),B&&E&&E.name!==q&&(C=!0,F=function(){return E.call(this)}),d&&!v||!n&&!C&&D[m]||g(D,m,F),i[b]=F,i[A]=r,t)if(w={values:B?F:z(q),keys:u?F:z(p),entries:G},v)for(x in w)x in D||f(D,x,w[x]);else e(e.P+e.F*(n||C),b,w);return w}},{101:101,128:128,33:33,41:41,42:42,54:54,58:58,60:60,79:79,94:94}],56:[function(a,b,c){var d=a(128)("iterator"),e=!1;try{var f=[7][d]();f["return"]=function(){e=!0},Array.from(f,function(){throw 2})}catch(g){}b.exports=function(a,b){if(!b&&!e)return!1;var c=!1;try{var f=[7],g=f[d]();g.next=function(){return{done:c=!0}},f[d]=function(){return g},a(f)}catch(h){}return c}},{128:128}],57:[function(a,b,c){b.exports=function(a,b){return{value:b,done:!!a}}},{}],58:[function(a,b,c){b.exports={}},{}],59:[function(a,b,c){var d=a(81),e=a(117);b.exports=function(a,b){for(var c,f=e(a),g=d(f),h=g.length,i=0;h>i;)if(f[c=g[i++]]===b)return c}},{117:117,81:81}],60:[function(a,b,c){b.exports=!1},{}],61:[function(a,b,c){var d=Math.expm1;b.exports=!d||d(10)>22025.465794806718||d(10)<22025.465794806718||-2e-17!=d(-2e-17)?function(a){return 0==(a=+a)?a:a>-1e-6&&1e-6>a?a+a*a/2:Math.exp(a)-1}:d},{}],62:[function(a,b,c){var d=a(65),e=Math.pow,f=e(2,-52),g=e(2,-23),h=e(2,127)*(2-g),i=e(2,-126),j=function(a){return a+1/f-1/f};b.exports=Math.fround||function(a){var b,c,e=Math.abs(a),k=d(a);return i>e?k*j(e/i/g)*i*g:(b=(1+g/f)*e,c=b-(b-e),c>h||c!=c?k*(1/0):k*c)}},{65:65}],63:[function(a,b,c){b.exports=Math.log1p||function(a){return(a=+a)>-1e-8&&1e-8>a?a-a*a/2:Math.log(1+a)}},{}],64:[function(a,b,c){b.exports=Math.scale||function(a,b,c,d,e){return 0===arguments.length||a!=a||b!=b||c!=c||d!=d||e!=e?NaN:a===1/0||a===-(1/0)?a:(a-b)*(e-d)/(c-b)+d}},{}],65:[function(a,b,c){b.exports=Math.sign||function(a){return 0==(a=+a)||a!=a?a:0>a?-1:1}},{}],66:[function(a,b,c){var d=a(124)("meta"),e=a(51),f=a(41),g=a(72).f,h=0,i=Object.isExtensible||function(){return!0},j=!a(35)(function(){return i(Object.preventExtensions({}))}),k=function(a){g(a,d,{value:{i:"O"+ ++h,w:{}}})},l=function(a,b){if(!e(a))return"symbol"==typeof a?a:("string"==typeof a?"S":"P")+a;if(!f(a,d)){if(!i(a))return"F";if(!b)return"E";k(a)}return a[d].i},m=function(a,b){if(!f(a,d)){if(!i(a))return!0;if(!b)return!1;k(a)}return a[d].w},n=function(a){return j&&o.NEED&&i(a)&&!f(a,d)&&k(a),a},o=b.exports={KEY:d,NEED:!1,fastKey:l,getWeak:m,onFreeze:n}},{124:124,35:35,41:41,51:51,72:72}],67:[function(a,b,c){var d=a(160),e=a(33),f=a(103)("metadata"),g=f.store||(f.store=new(a(266))),h=function(a,b,c){var e=g.get(a);if(!e){if(!c)return void 0;g.set(a,e=new d)}var f=e.get(b);if(!f){if(!c)return void 0;e.set(b,f=new d)}return f},i=function(a,b,c){var d=h(b,c,!1);return void 0===d?!1:d.has(a)},j=function(a,b,c){var d=h(b,c,!1);return void 0===d?void 0:d.get(a)},k=function(a,b,c,d){h(c,d,!0).set(a,b)},l=function(a,b){var c=h(a,b,!1),d=[];return c&&c.forEach(function(a,b){d.push(b)}),d},m=function(a){return void 0===a||"symbol"==typeof a?a:String(a)},n=function(a){e(e.S,"Reflect",a)};b.exports={store:g,map:h,has:i,get:j,set:k,keys:l,key:m,exp:n}},{103:103,160:160,266:266,33:33}],68:[function(a,b,c){var d=a(40),e=a(113).set,f=d.MutationObserver||d.WebKitMutationObserver,g=d.process,h=d.Promise,i="process"==a(18)(g);b.exports=function(){var a,b,c,j=function(){var d,e;for(i&&(d=g.domain)&&d.exit();a;){e=a.fn,a=a.next;try{e()}catch(f){throw a?c():b=void 0,f}}b=void 0,d&&d.enter()};if(i)c=function(){g.nextTick(j)};else if(f){var k=!0,l=document.createTextNode("");new f(j).observe(l,{characterData:!0}),c=function(){l.data=k=!k}}else if(h&&h.resolve){var m=h.resolve();c=function(){m.then(j)}}else c=function(){e.call(d,j)};return function(d){var e={fn:d,next:void 0};b&&(b.next=e),a||(a=e,c()),b=e}}},{113:113,18:18,40:40}],69:[function(a,b,c){"use strict";function d(a){var b,c;this.promise=new a(function(a,d){if(void 0!==b||void 0!==c)throw TypeError("Bad Promise constructor");b=a,c=d}),this.resolve=e(b),this.reject=e(c)}var e=a(3);b.exports.f=function(a){return new d(a)}},{3:3}],70:[function(a,b,c){"use strict";var d=a(81),e=a(78),f=a(82),g=a(119),h=a(47),i=Object.assign;b.exports=!i||a(35)(function(){var a={},b={},c=Symbol(),d="abcdefghijklmnopqrst";return a[c]=7,d.split("").forEach(function(a){b[a]=a}),7!=i({},a)[c]||Object.keys(i({},b)).join("")!=d})?function(a,b){for(var c=g(a),i=arguments.length,j=1,k=e.f,l=f.f;i>j;)for(var m,n=h(arguments[j++]),o=k?d(n).concat(k(n)):d(n),p=o.length,q=0;p>q;)l.call(n,m=o[q++])&&(c[m]=n[m]);return c}:i},{119:119,35:35,47:47,78:78,81:81,82:82}],71:[function(a,b,c){var d=a(7),e=a(73),f=a(31),g=a(102)("IE_PROTO"),h=function(){},i="prototype",j=function(){var b,c=a(30)("iframe"),d=f.length,e="<",g=">";for(c.style.display="none",a(43).appendChild(c),c.src="javascript:",b=c.contentWindow.document,b.open(),b.write(e+"script"+g+"document.F=Object"+e+"/script"+g),b.close(),j=b.F;d--;)delete j[i][f[d]];return j()};b.exports=Object.create||function(a,b){var c;
return null!==a?(h[i]=d(a),c=new h,h[i]=null,c[g]=a):c=j(),void 0===b?c:e(c,b)}},{102:102,30:30,31:31,43:43,7:7,73:73}],72:[function(a,b,c){var d=a(7),e=a(44),f=a(120),g=Object.defineProperty;c.f=a(29)?Object.defineProperty:function(a,b,c){if(d(a),b=f(b,!0),d(c),e)try{return g(a,b,c)}catch(h){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(a[b]=c.value),a}},{120:120,29:29,44:44,7:7}],73:[function(a,b,c){var d=a(72),e=a(7),f=a(81);b.exports=a(29)?Object.defineProperties:function(a,b){e(a);for(var c,g=f(b),h=g.length,i=0;h>i;)d.f(a,c=g[i++],b[c]);return a}},{29:29,7:7,72:72,81:81}],74:[function(a,b,c){"use strict";b.exports=a(60)||!a(35)(function(){var b=Math.random();__defineSetter__.call(null,b,function(){}),delete a(40)[b]})},{35:35,40:40,60:60}],75:[function(a,b,c){var d=a(82),e=a(92),f=a(117),g=a(120),h=a(41),i=a(44),j=Object.getOwnPropertyDescriptor;c.f=a(29)?j:function(a,b){if(a=f(a),b=g(b,!0),i)try{return j(a,b)}catch(c){}return h(a,b)?e(!d.f.call(a,b),a[b]):void 0}},{117:117,120:120,29:29,41:41,44:44,82:82,92:92}],76:[function(a,b,c){var d=a(117),e=a(77).f,f={}.toString,g="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],h=function(a){try{return e(a)}catch(b){return g.slice()}};b.exports.f=function(a){return g&&"[object Window]"==f.call(a)?h(a):e(d(a))}},{117:117,77:77}],77:[function(a,b,c){var d=a(80),e=a(31).concat("length","prototype");c.f=Object.getOwnPropertyNames||function(a){return d(a,e)}},{31:31,80:80}],78:[function(a,b,c){c.f=Object.getOwnPropertySymbols},{}],79:[function(a,b,c){var d=a(41),e=a(119),f=a(102)("IE_PROTO"),g=Object.prototype;b.exports=Object.getPrototypeOf||function(a){return a=e(a),d(a,f)?a[f]:"function"==typeof a.constructor&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?g:null}},{102:102,119:119,41:41}],80:[function(a,b,c){var d=a(41),e=a(117),f=a(11)(!1),g=a(102)("IE_PROTO");b.exports=function(a,b){var c,h=e(a),i=0,j=[];for(c in h)c!=g&&d(h,c)&&j.push(c);for(;b.length>i;)d(h,c=b[i++])&&(~f(j,c)||j.push(c));return j}},{102:102,11:11,117:117,41:41}],81:[function(a,b,c){var d=a(80),e=a(31);b.exports=Object.keys||function(a){return d(a,e)}},{31:31,80:80}],82:[function(a,b,c){c.f={}.propertyIsEnumerable},{}],83:[function(a,b,c){var d=a(33),e=a(23),f=a(35);b.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)}},{23:23,33:33,35:35}],84:[function(a,b,c){var d=a(81),e=a(117),f=a(82).f;b.exports=function(a){return function(b){for(var c,g=e(b),h=d(g),i=h.length,j=0,k=[];i>j;)f.call(g,c=h[j++])&&k.push(a?[c,g[c]]:g[c]);return k}}},{117:117,81:81,82:82}],85:[function(a,b,c){var d=a(77),e=a(78),f=a(7),g=a(40).Reflect;b.exports=g&&g.ownKeys||function(a){var b=d.f(f(a)),c=e.f;return c?b.concat(c(a)):b}},{40:40,7:7,77:77,78:78}],86:[function(a,b,c){var d=a(40).parseFloat,e=a(111).trim;b.exports=1/d(a(112)+"-0")!==-(1/0)?function(a){var b=e(String(a),3),c=d(b);return 0===c&&"-"==b.charAt(0)?-0:c}:d},{111:111,112:112,40:40}],87:[function(a,b,c){var d=a(40).parseInt,e=a(111).trim,f=a(112),g=/^[-+]?0[xX]/;b.exports=8!==d(f+"08")||22!==d(f+"0x16")?function(a,b){var c=e(String(a),3);return d(c,b>>>0||(g.test(c)?16:10))}:d},{111:111,112:112,40:40}],88:[function(a,b,c){"use strict";var d=a(89),e=a(46),f=a(3);b.exports=function(){for(var a=f(this),b=arguments.length,c=Array(b),g=0,h=d._,i=!1;b>g;)(c[g]=arguments[g++])===h&&(i=!0);return function(){var d,f=this,g=arguments.length,j=0,k=0;if(!i&&!g)return e(a,c,f);if(d=c.slice(),i)for(;b>j;j++)d[j]===h&&(d[j]=arguments[k++]);for(;g>k;)d.push(arguments[k++]);return e(a,d,f)}}},{3:3,46:46,89:89}],89:[function(a,b,c){b.exports=a(40)},{40:40}],90:[function(a,b,c){b.exports=function(a){try{return{e:!1,v:a()}}catch(b){return{e:!0,v:b}}}},{}],91:[function(a,b,c){var d=a(69);b.exports=function(a,b){var c=d.f(a),e=c.resolve;return e(b),c.promise}},{69:69}],92:[function(a,b,c){b.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},{}],93:[function(a,b,c){var d=a(94);b.exports=function(a,b,c){for(var e in b)d(a,e,b[e],c);return a}},{94:94}],94:[function(a,b,c){var d=a(40),e=a(42),f=a(41),g=a(124)("src"),h="toString",i=Function[h],j=(""+i).split(h);a(23).inspectSource=function(a){return i.call(a)},(b.exports=function(a,b,c,h){var i="function"==typeof c;i&&(f(c,"name")||e(c,"name",b)),a[b]!==c&&(i&&(f(c,g)||e(c,g,a[b]?""+a[b]:j.join(String(b)))),a===d?a[b]=c:h?a[b]?a[b]=c:e(a,b,c):(delete a[b],e(a,b,c)))})(Function.prototype,h,function(){return"function"==typeof this&&this[g]||i.call(this)})},{124:124,23:23,40:40,41:41,42:42}],95:[function(a,b,c){b.exports=function(a,b){var c=b===Object(b)?function(a){return b[a]}:b;return function(b){return String(b).replace(a,c)}}},{}],96:[function(a,b,c){b.exports=Object.is||function(a,b){return a===b?0!==a||1/a===1/b:a!=a&&b!=b}},{}],97:[function(a,b,c){"use strict";var d=a(33),e=a(3),f=a(25),g=a(39);b.exports=function(a){d(d.S,a,{from:function(a){var b,c,d,h,i=arguments[1];return e(this),b=void 0!==i,b&&e(i),void 0==a?new this:(c=[],b?(d=0,h=f(i,arguments[2],2),g(a,!1,function(a){c.push(h(a,d++))})):g(a,!1,c.push,c),new this(c))}})}},{25:25,3:3,33:33,39:39}],98:[function(a,b,c){"use strict";var d=a(33);b.exports=function(a){d(d.S,a,{of:function(){for(var a=arguments.length,b=Array(a);a--;)b[a]=arguments[a];return new this(b)}})}},{33:33}],99:[function(a,b,c){var d=a(51),e=a(7),f=function(a,b){if(e(a),!d(b)&&null!==b)throw TypeError(b+": can't set as prototype!")};b.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(b,c,d){try{d=a(25)(Function.call,a(75).f(Object.prototype,"__proto__").set,2),d(b,[]),c=!(b instanceof Array)}catch(e){c=!0}return function(a,b){return f(a,b),c?a.__proto__=b:d(a,b),a}}({},!1):void 0),check:f}},{25:25,51:51,7:7,75:75}],100:[function(a,b,c){"use strict";var d=a(40),e=a(72),f=a(29),g=a(128)("species");b.exports=function(a){var b=d[a];f&&b&&!b[g]&&e.f(b,g,{configurable:!0,get:function(){return this}})}},{128:128,29:29,40:40,72:72}],101:[function(a,b,c){var d=a(72).f,e=a(41),f=a(128)("toStringTag");b.exports=function(a,b,c){a&&!e(a=c?a:a.prototype,f)&&d(a,f,{configurable:!0,value:b})}},{128:128,41:41,72:72}],102:[function(a,b,c){var d=a(103)("keys"),e=a(124);b.exports=function(a){return d[a]||(d[a]=e(a))}},{103:103,124:124}],103:[function(a,b,c){var d=a(40),e="__core-js_shared__",f=d[e]||(d[e]={});b.exports=function(a){return f[a]||(f[a]={})}},{40:40}],104:[function(a,b,c){var d=a(7),e=a(3),f=a(128)("species");b.exports=function(a,b){var c,g=d(a).constructor;return void 0===g||void 0==(c=d(g)[f])?b:e(c)}},{128:128,3:3,7:7}],105:[function(a,b,c){"use strict";var d=a(35);b.exports=function(a,b){return!!a&&d(function(){b?a.call(null,function(){},1):a.call(null)})}},{35:35}],106:[function(a,b,c){var d=a(116),e=a(28);b.exports=function(a){return function(b,c){var f,g,h=String(e(b)),i=d(c),j=h.length;return 0>i||i>=j?a?"":void 0:(f=h.charCodeAt(i),55296>f||f>56319||i+1===j||(g=h.charCodeAt(i+1))<56320||g>57343?a?h.charAt(i):f:a?h.slice(i,i+2):(f-55296<<10)+(g-56320)+65536)}}},{116:116,28:28}],107:[function(a,b,c){var d=a(52),e=a(28);b.exports=function(a,b,c){if(d(b))throw TypeError("String#"+c+" doesn't accept regex!");return String(e(a))}},{28:28,52:52}],108:[function(a,b,c){var d=a(33),e=a(35),f=a(28),g=/"/g,h=function(a,b,c,d){var e=String(f(a)),h="<"+b;return""!==c&&(h+=" "+c+'="'+String(d).replace(g,"&quot;")+'"'),h+">"+e+"</"+b+">"};b.exports=function(a,b){var c={};c[a]=b(h),d(d.P+d.F*e(function(){var b=""[a]('"');return b!==b.toLowerCase()||b.split('"').length>3}),"String",c)}},{28:28,33:33,35:35}],109:[function(a,b,c){var d=a(118),e=a(110),f=a(28);b.exports=function(a,b,c,g){var h=String(f(a)),i=h.length,j=void 0===c?" ":String(c),k=d(b);if(i>=k||""==j)return h;var l=k-i,m=e.call(j,Math.ceil(l/j.length));return m.length>l&&(m=m.slice(0,l)),g?m+h:h+m}},{110:110,118:118,28:28}],110:[function(a,b,c){"use strict";var d=a(116),e=a(28);b.exports=function(a){var b=String(e(this)),c="",f=d(a);if(0>f||f==1/0)throw RangeError("Count can't be negative");for(;f>0;(f>>>=1)&&(b+=b))1&f&&(c+=b);return c}},{116:116,28:28}],111:[function(a,b,c){var d=a(33),e=a(28),f=a(35),g=a(112),h="["+g+"]",i="​",j=RegExp("^"+h+h+"*"),k=RegExp(h+h+"*$"),l=function(a,b,c){var e={},h=f(function(){return!!g[a]()||i[a]()!=i}),j=e[a]=h?b(m):g[a];c&&(e[c]=j),d(d.P+d.F*h,"String",e)},m=l.trim=function(a,b){return a=String(e(a)),1&b&&(a=a.replace(j,"")),2&b&&(a=a.replace(k,"")),a};b.exports=l},{112:112,28:28,33:33,35:35}],112:[function(a,b,c){b.exports="	\n\f\r   ᠎             　\u2028\u2029\ufeff"},{}],113:[function(a,b,c){var d,e,f,g=a(25),h=a(46),i=a(43),j=a(30),k=a(40),l=k.process,m=k.setImmediate,n=k.clearImmediate,o=k.MessageChannel,p=k.Dispatch,q=0,r={},s="onreadystatechange",t=function(){var a=+this;if(r.hasOwnProperty(a)){var b=r[a];delete r[a],b()}},u=function(a){t.call(a.data)};m&&n||(m=function(a){for(var b=[],c=1;arguments.length>c;)b.push(arguments[c++]);return r[++q]=function(){h("function"==typeof a?a:Function(a),b)},d(q),q},n=function(a){delete r[a]},"process"==a(18)(l)?d=function(a){l.nextTick(g(t,a,1))}:p&&p.now?d=function(a){p.now(g(t,a,1))}:o?(e=new o,f=e.port2,e.port1.onmessage=u,d=g(f.postMessage,f,1)):k.addEventListener&&"function"==typeof postMessage&&!k.importScripts?(d=function(a){k.postMessage(a+"","*")},k.addEventListener("message",u,!1)):d=s in j("script")?function(a){i.appendChild(j("script"))[s]=function(){i.removeChild(this),t.call(a)}}:function(a){setTimeout(g(t,a,1),0)}),b.exports={set:m,clear:n}},{18:18,25:25,30:30,40:40,43:43,46:46}],114:[function(a,b,c){var d=a(116),e=Math.max,f=Math.min;b.exports=function(a,b){return a=d(a),0>a?e(a+b,0):f(a,b)}},{116:116}],115:[function(a,b,c){var d=a(116),e=a(118);b.exports=function(a){if(void 0===a)return 0;var b=d(a),c=e(b);if(b!==c)throw RangeError("Wrong length!");return c}},{116:116,118:118}],116:[function(a,b,c){var d=Math.ceil,e=Math.floor;b.exports=function(a){return isNaN(a=+a)?0:(a>0?e:d)(a)}},{}],117:[function(a,b,c){var d=a(47),e=a(28);b.exports=function(a){return d(e(a))}},{28:28,47:47}],118:[function(a,b,c){var d=a(116),e=Math.min;b.exports=function(a){return a>0?e(d(a),9007199254740991):0}},{116:116}],119:[function(a,b,c){var d=a(28);b.exports=function(a){return Object(d(a))}},{28:28}],120:[function(a,b,c){var d=a(51);b.exports=function(a,b){if(!d(a))return a;var c,e;if(b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;if("function"==typeof(c=a.valueOf)&&!d(e=c.call(a)))return e;if(!b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;throw TypeError("Can't convert object to primitive value")}},{51:51}],121:[function(a,b,c){"use strict";if(a(29)){var d=a(60),e=a(40),f=a(35),g=a(33),h=a(123),i=a(122),j=a(25),k=a(6),l=a(92),m=a(42),n=a(93),o=a(116),p=a(118),q=a(115),r=a(114),s=a(120),t=a(41),u=a(17),v=a(51),w=a(119),x=a(48),y=a(71),z=a(79),A=a(77).f,B=a(129),C=a(124),D=a(128),E=a(12),F=a(11),G=a(104),H=a(141),I=a(58),J=a(56),K=a(100),L=a(9),M=a(8),N=a(72),O=a(75),P=N.f,Q=O.f,R=e.RangeError,S=e.TypeError,T=e.Uint8Array,U="ArrayBuffer",V="Shared"+U,W="BYTES_PER_ELEMENT",X="prototype",Y=Array[X],Z=i.ArrayBuffer,$=i.DataView,_=E(0),aa=E(2),ba=E(3),ca=E(4),da=E(5),ea=E(6),fa=F(!0),ga=F(!1),ha=H.values,ia=H.keys,ja=H.entries,ka=Y.lastIndexOf,la=Y.reduce,ma=Y.reduceRight,na=Y.join,oa=Y.sort,pa=Y.slice,qa=Y.toString,ra=Y.toLocaleString,sa=D("iterator"),ta=D("toStringTag"),ua=C("typed_constructor"),va=C("def_constructor"),wa=h.CONSTR,xa=h.TYPED,ya=h.VIEW,za="Wrong length!",Aa=E(1,function(a,b){return Fa(G(a,a[va]),b)}),Ba=f(function(){return 1===new T(new Uint16Array([1]).buffer)[0]}),Ca=!!T&&!!T[X].set&&f(function(){new T(1).set({})}),Da=function(a,b){var c=o(a);if(0>c||c%b)throw R("Wrong offset!");return c},Ea=function(a){if(v(a)&&xa in a)return a;throw S(a+" is not a typed array!")},Fa=function(a,b){if(!(v(a)&&ua in a))throw S("It is not a typed array constructor!");return new a(b)},Ga=function(a,b){return Ha(G(a,a[va]),b)},Ha=function(a,b){for(var c=0,d=b.length,e=Fa(a,d);d>c;)e[c]=b[c++];return e},Ia=function(a,b,c){P(a,b,{get:function(){return this._d[c]}})},Ja=function(a){var b,c,d,e,f,g,h=w(a),i=arguments.length,k=i>1?arguments[1]:void 0,l=void 0!==k,m=B(h);if(void 0!=m&&!x(m)){for(g=m.call(h),d=[],b=0;!(f=g.next()).done;b++)d.push(f.value);h=d}for(l&&i>2&&(k=j(k,arguments[2],2)),b=0,c=p(h.length),e=Fa(this,c);c>b;b++)e[b]=l?k(h[b],b):h[b];return e},Ka=function(){for(var a=0,b=arguments.length,c=Fa(this,b);b>a;)c[a]=arguments[a++];return c},La=!!T&&f(function(){ra.call(new T(1))}),Ma=function(){return ra.apply(La?pa.call(Ea(this)):Ea(this),arguments)},Na={copyWithin:function(a,b){return M.call(Ea(this),a,b,arguments.length>2?arguments[2]:void 0)},every:function(a){return ca(Ea(this),a,arguments.length>1?arguments[1]:void 0)},fill:function(a){return L.apply(Ea(this),arguments)},filter:function(a){return Ga(this,aa(Ea(this),a,arguments.length>1?arguments[1]:void 0))},find:function(a){return da(Ea(this),a,arguments.length>1?arguments[1]:void 0)},findIndex:function(a){return ea(Ea(this),a,arguments.length>1?arguments[1]:void 0)},forEach:function(a){_(Ea(this),a,arguments.length>1?arguments[1]:void 0)},indexOf:function(a){return ga(Ea(this),a,arguments.length>1?arguments[1]:void 0)},includes:function(a){return fa(Ea(this),a,arguments.length>1?arguments[1]:void 0)},join:function(a){return na.apply(Ea(this),arguments)},lastIndexOf:function(a){return ka.apply(Ea(this),arguments)},map:function(a){return Aa(Ea(this),a,arguments.length>1?arguments[1]:void 0)},reduce:function(a){return la.apply(Ea(this),arguments)},reduceRight:function(a){return ma.apply(Ea(this),arguments)},reverse:function(){for(var a,b=this,c=Ea(b).length,d=Math.floor(c/2),e=0;d>e;)a=b[e],b[e++]=b[--c],b[c]=a;return b},some:function(a){return ba(Ea(this),a,arguments.length>1?arguments[1]:void 0)},sort:function(a){return oa.call(Ea(this),a)},subarray:function(a,b){var c=Ea(this),d=c.length,e=r(a,d);return new(G(c,c[va]))(c.buffer,c.byteOffset+e*c.BYTES_PER_ELEMENT,p((void 0===b?d:r(b,d))-e))}},Oa=function(a,b){return Ga(this,pa.call(Ea(this),a,b))},Pa=function(a){Ea(this);var b=Da(arguments[1],1),c=this.length,d=w(a),e=p(d.length),f=0;if(e+b>c)throw R(za);for(;e>f;)this[b+f]=d[f++]},Qa={entries:function(){return ja.call(Ea(this))},keys:function(){return ia.call(Ea(this))},values:function(){return ha.call(Ea(this))}},Ra=function(a,b){return v(a)&&a[xa]&&"symbol"!=typeof b&&b in a&&String(+b)==String(b)},Sa=function(a,b){return Ra(a,b=s(b,!0))?l(2,a[b]):Q(a,b)},Ta=function(a,b,c){return!(Ra(a,b=s(b,!0))&&v(c)&&t(c,"value"))||t(c,"get")||t(c,"set")||c.configurable||t(c,"writable")&&!c.writable||t(c,"enumerable")&&!c.enumerable?P(a,b,c):(a[b]=c.value,a)};wa||(O.f=Sa,N.f=Ta),g(g.S+g.F*!wa,"Object",{getOwnPropertyDescriptor:Sa,defineProperty:Ta}),f(function(){qa.call({})})&&(qa=ra=function(){return na.call(this)});var Ua=n({},Na);n(Ua,Qa),m(Ua,sa,Qa.values),n(Ua,{slice:Oa,set:Pa,constructor:function(){},toString:qa,toLocaleString:Ma}),Ia(Ua,"buffer","b"),Ia(Ua,"byteOffset","o"),Ia(Ua,"byteLength","l"),Ia(Ua,"length","e"),P(Ua,ta,{get:function(){return this[xa]}}),b.exports=function(a,b,c,i){i=!!i;var j=a+(i?"Clamped":"")+"Array",l="get"+a,n="set"+a,o=e[j],r=o||{},s=o&&z(o),t=!o||!h.ABV,w={},x=o&&o[X],B=function(a,c){var d=a._d;return d.v[l](c*b+d.o,Ba)},C=function(a,c,d){var e=a._d;i&&(d=(d=Math.round(d))<0?0:d>255?255:255&d),e.v[n](c*b+e.o,d,Ba)},D=function(a,b){P(a,b,{get:function(){return B(this,b)},set:function(a){return C(this,b,a)},enumerable:!0})};t?(o=c(function(a,c,d,e){k(a,o,j,"_d");var f,g,h,i,l=0,n=0;if(v(c)){if(!(c instanceof Z||(i=u(c))==U||i==V))return xa in c?Ha(o,c):Ja.call(o,c);f=c,n=Da(d,b);var r=c.byteLength;if(void 0===e){if(r%b)throw R(za);if(g=r-n,0>g)throw R(za)}else if(g=p(e)*b,g+n>r)throw R(za);h=g/b}else h=q(c),g=h*b,f=new Z(g);for(m(a,"_d",{b:f,o:n,l:g,e:h,v:new $(f)});h>l;)D(a,l++)}),x=o[X]=y(Ua),m(x,"constructor",o)):f(function(){o(1)})&&f(function(){new o(-1)})&&J(function(a){new o,new o(null),new o(1.5),new o(a)},!0)||(o=c(function(a,c,d,e){k(a,o,j);var f;return v(c)?c instanceof Z||(f=u(c))==U||f==V?void 0!==e?new r(c,Da(d,b),e):void 0!==d?new r(c,Da(d,b)):new r(c):xa in c?Ha(o,c):Ja.call(o,c):new r(q(c))}),_(s!==Function.prototype?A(r).concat(A(s)):A(r),function(a){a in o||m(o,a,r[a])}),o[X]=x,d||(x.constructor=o));var E=x[sa],F=!!E&&("values"==E.name||void 0==E.name),G=Qa.values;m(o,ua,!0),m(x,xa,j),m(x,ya,!0),m(x,va,o),(i?new o(1)[ta]==j:ta in x)||P(x,ta,{get:function(){return j}}),w[j]=o,g(g.G+g.W+g.F*(o!=r),w),g(g.S,j,{BYTES_PER_ELEMENT:b}),g(g.S+g.F*f(function(){r.of.call(o,1)}),j,{from:Ja,of:Ka}),W in x||m(x,W,b),g(g.P,j,Na),K(j),g(g.P+g.F*Ca,j,{set:Pa}),g(g.P+g.F*!F,j,Qa),d||x.toString==qa||(x.toString=qa),g(g.P+g.F*f(function(){new o(1).slice()}),j,{slice:Oa}),g(g.P+g.F*(f(function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()})||!f(function(){x.toLocaleString.call([1,2])})),j,{toLocaleString:Ma}),I[j]=F?E:G,d||F||m(x,sa,G)}}else b.exports=function(){}},{100:100,104:104,11:11,114:114,115:115,116:116,118:118,119:119,12:12,120:120,122:122,123:123,124:124,128:128,129:129,141:141,17:17,25:25,29:29,33:33,35:35,40:40,41:41,42:42,48:48,51:51,56:56,58:58,6:6,60:60,71:71,72:72,75:75,77:77,79:79,8:8,9:9,92:92,93:93}],122:[function(a,b,c){"use strict";function d(a,b,c){var d,e,f,g=Array(c),h=8*c-b-1,i=(1<<h)-1,j=i>>1,k=23===b?P(2,-24)-P(2,-77):0,l=0,m=0>a||0===a&&0>1/a?1:0;for(a=O(a),a!=a||a===M?(e=a!=a?1:0,d=i):(d=Q(R(a)/S),a*(f=P(2,-d))<1&&(d--,f*=2),a+=d+j>=1?k/f:k*P(2,1-j),a*f>=2&&(d++,f/=2),d+j>=i?(e=0,d=i):d+j>=1?(e=(a*f-1)*P(2,b),d+=j):(e=a*P(2,j-1)*P(2,b),d=0));b>=8;g[l++]=255&e,e/=256,b-=8);for(d=d<<b|e,h+=b;h>0;g[l++]=255&d,d/=256,h-=8);return g[--l]|=128*m,g}function e(a,b,c){var d,e=8*c-b-1,f=(1<<e)-1,g=f>>1,h=e-7,i=c-1,j=a[i--],k=127&j;for(j>>=7;h>0;k=256*k+a[i],i--,h-=8);for(d=k&(1<<-h)-1,k>>=-h,h+=b;h>0;d=256*d+a[i],i--,h-=8);if(0===k)k=1-g;else{if(k===f)return d?NaN:j?-M:M;d+=P(2,b),k-=g}return(j?-1:1)*d*P(2,k-b)}function f(a){return a[3]<<24|a[2]<<16|a[1]<<8|a[0]}function g(a){return[255&a]}function h(a){return[255&a,a>>8&255]}function i(a){return[255&a,a>>8&255,a>>16&255,a>>24&255]}function j(a){return d(a,52,8)}function k(a){return d(a,23,4)}function l(a,b,c){A(a[F],b,{get:function(){return this[c]}})}function m(a,b,c,d){var e=+c,f=y(e);if(f+b>a[X])throw L(H);var g=a[W]._b,h=f+a[Y],i=g.slice(h,h+b);return d?i:i.reverse()}function n(a,b,c,d,e,f){var g=+c,h=y(g);if(h+b>a[X])throw L(H);for(var i=a[W]._b,j=h+a[Y],k=d(+e),l=0;b>l;l++)i[j+l]=k[f?l:b-l-1]}var o=a(40),p=a(29),q=a(60),r=a(123),s=a(42),t=a(93),u=a(35),v=a(6),w=a(116),x=a(118),y=a(115),z=a(77).f,A=a(72).f,B=a(9),C=a(101),D="ArrayBuffer",E="DataView",F="prototype",G="Wrong length!",H="Wrong index!",I=o[D],J=o[E],K=o.Math,L=o.RangeError,M=o.Infinity,N=I,O=K.abs,P=K.pow,Q=K.floor,R=K.log,S=K.LN2,T="buffer",U="byteLength",V="byteOffset",W=p?"_b":T,X=p?"_l":U,Y=p?"_o":V;if(r.ABV){if(!u(function(){I(1)})||!u(function(){new I(-1)})||u(function(){return new I,new I(1.5),new I(NaN),I.name!=D})){I=function(a){return v(this,I),new N(y(a))};for(var Z,$=I[F]=N[F],_=z(N),aa=0;_.length>aa;)(Z=_[aa++])in I||s(I,Z,N[Z]);q||($.constructor=I)}var ba=new J(new I(2)),ca=J[F].setInt8;ba.setInt8(0,2147483648),ba.setInt8(1,2147483649),(ba.getInt8(0)||!ba.getInt8(1))&&t(J[F],{setInt8:function(a,b){ca.call(this,a,b<<24>>24)},setUint8:function(a,b){ca.call(this,a,b<<24>>24)}},!0)}else I=function(a){v(this,I,D);var b=y(a);this._b=B.call(Array(b),0),this[X]=b},J=function(a,b,c){v(this,J,E),v(a,I,E);var d=a[X],e=w(b);if(0>e||e>d)throw L("Wrong offset!");if(c=void 0===c?d-e:x(c),e+c>d)throw L(G);this[W]=a,this[Y]=e,this[X]=c},p&&(l(I,U,"_l"),l(J,T,"_b"),l(J,U,"_l"),l(J,V,"_o")),t(J[F],{getInt8:function(a){return m(this,1,a)[0]<<24>>24},getUint8:function(a){return m(this,1,a)[0]},getInt16:function(a){var b=m(this,2,a,arguments[1]);return(b[1]<<8|b[0])<<16>>16},getUint16:function(a){var b=m(this,2,a,arguments[1]);return b[1]<<8|b[0]},getInt32:function(a){return f(m(this,4,a,arguments[1]))},getUint32:function(a){return f(m(this,4,a,arguments[1]))>>>0},getFloat32:function(a){return e(m(this,4,a,arguments[1]),23,4)},getFloat64:function(a){return e(m(this,8,a,arguments[1]),52,8)},setInt8:function(a,b){n(this,1,a,g,b)},setUint8:function(a,b){n(this,1,a,g,b)},setInt16:function(a,b){n(this,2,a,h,b,arguments[2])},setUint16:function(a,b){n(this,2,a,h,b,arguments[2])},setInt32:function(a,b){n(this,4,a,i,b,arguments[2])},setUint32:function(a,b){n(this,4,a,i,b,arguments[2])},setFloat32:function(a,b){n(this,4,a,k,b,arguments[2])},setFloat64:function(a,b){n(this,8,a,j,b,arguments[2])}});C(I,D),C(J,E),s(J[F],r.VIEW,!0),c[D]=I,c[E]=J},{101:101,115:115,116:116,118:118,123:123,29:29,35:35,40:40,42:42,6:6,60:60,72:72,77:77,9:9,93:93}],123:[function(a,b,c){for(var d,e=a(40),f=a(42),g=a(124),h=g("typed_array"),i=g("view"),j=!(!e.ArrayBuffer||!e.DataView),k=j,l=0,m=9,n="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");m>l;)(d=e[n[l++]])?(f(d.prototype,h,!0),f(d.prototype,i,!0)):k=!1;b.exports={ABV:j,CONSTR:k,TYPED:h,VIEW:i}},{124:124,40:40,42:42}],124:[function(a,b,c){var d=0,e=Math.random();b.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++d+e).toString(36))}},{}],125:[function(a,b,c){var d=a(51);b.exports=function(a,b){if(!d(a)||a._t!==b)throw TypeError("Incompatible receiver, "+b+" required!");return a}},{51:51}],126:[function(a,b,c){var d=a(40),e=a(23),f=a(60),g=a(127),h=a(72).f;b.exports=function(a){var b=e.Symbol||(e.Symbol=f?{}:d.Symbol||{});"_"==a.charAt(0)||a in b||h(b,a,{value:g.f(a)})}},{127:127,23:23,40:40,60:60,72:72}],127:[function(a,b,c){c.f=a(128)},{128:128}],128:[function(a,b,c){var d=a(103)("wks"),e=a(124),f=a(40).Symbol,g="function"==typeof f,h=b.exports=function(a){return d[a]||(d[a]=g&&f[a]||(g?f:e)("Symbol."+a))};h.store=d},{103:103,124:124,40:40}],129:[function(a,b,c){var d=a(17),e=a(128)("iterator"),f=a(58);b.exports=a(23).getIteratorMethod=function(a){return void 0!=a?a[e]||a["@@iterator"]||f[d(a)]:void 0}},{128:128,17:17,23:23,58:58}],130:[function(a,b,c){var d=a(33),e=a(95)(/[\\^$*+?.()|[\]{}]/g,"\\$&");d(d.S,"RegExp",{escape:function(a){return e(a)}})},{33:33,95:95}],131:[function(a,b,c){var d=a(33);d(d.P,"Array",{copyWithin:a(8)}),a(5)("copyWithin")},{33:33,5:5,8:8}],132:[function(a,b,c){"use strict";var d=a(33),e=a(12)(4);d(d.P+d.F*!a(105)([].every,!0),"Array",{every:function(a){return e(this,a,arguments[1])}})},{105:105,12:12,33:33}],133:[function(a,b,c){var d=a(33);d(d.P,"Array",{fill:a(9)}),a(5)("fill")},{33:33,5:5,9:9}],134:[function(a,b,c){"use strict";var d=a(33),e=a(12)(2);d(d.P+d.F*!a(105)([].filter,!0),"Array",{filter:function(a){return e(this,a,arguments[1])}})},{105:105,12:12,33:33}],135:[function(a,b,c){"use strict";var d=a(33),e=a(12)(6),f="findIndex",g=!0;f in[]&&Array(1)[f](function(){g=!1}),d(d.P+d.F*g,"Array",{findIndex:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),a(5)(f)},{12:12,33:33,5:5}],136:[function(a,b,c){"use strict";var d=a(33),e=a(12)(5),f="find",g=!0;f in[]&&Array(1)[f](function(){g=!1}),d(d.P+d.F*g,"Array",{find:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),a(5)(f)},{12:12,33:33,5:5}],137:[function(a,b,c){"use strict";var d=a(33),e=a(12)(0),f=a(105)([].forEach,!0);d(d.P+d.F*!f,"Array",{forEach:function(a){return e(this,a,arguments[1])}})},{105:105,12:12,33:33}],138:[function(a,b,c){"use strict";var d=a(25),e=a(33),f=a(119),g=a(53),h=a(48),i=a(118),j=a(24),k=a(129);e(e.S+e.F*!a(56)(function(a){Array.from(a)}),"Array",{from:function(a){var b,c,e,l,m=f(a),n="function"==typeof this?this:Array,o=arguments.length,p=o>1?arguments[1]:void 0,q=void 0!==p,r=0,s=k(m);if(q&&(p=d(p,o>2?arguments[2]:void 0,2)),void 0==s||n==Array&&h(s))for(b=i(m.length),c=new n(b);b>r;r++)j(c,r,q?p(m[r],r):m[r]);else for(l=s.call(m),c=new n;!(e=l.next()).done;r++)j(c,r,q?g(l,p,[e.value,r],!0):e.value);return c.length=r,c}})},{118:118,119:119,129:129,24:24,25:25,33:33,48:48,53:53,56:56}],139:[function(a,b,c){"use strict";var d=a(33),e=a(11)(!1),f=[].indexOf,g=!!f&&1/[1].indexOf(1,-0)<0;d(d.P+d.F*(g||!a(105)(f)),"Array",{indexOf:function(a){return g?f.apply(this,arguments)||0:e(this,a,arguments[1])}})},{105:105,11:11,33:33}],140:[function(a,b,c){var d=a(33);d(d.S,"Array",{isArray:a(49)})},{33:33,49:49}],141:[function(a,b,c){"use strict";var d=a(5),e=a(57),f=a(58),g=a(117);b.exports=a(55)(Array,"Array",function(a,b){this._t=g(a),this._i=0,this._k=b},function(){var a=this._t,b=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,e(1)):"keys"==b?e(0,c):"values"==b?e(0,a[c]):e(0,[c,a[c]])},"values"),f.Arguments=f.Array,d("keys"),d("values"),d("entries")},{117:117,5:5,55:55,57:57,58:58}],142:[function(a,b,c){"use strict";var d=a(33),e=a(117),f=[].join;d(d.P+d.F*(a(47)!=Object||!a(105)(f)),"Array",{join:function(a){return f.call(e(this),void 0===a?",":a)}})},{105:105,117:117,33:33,47:47}],143:[function(a,b,c){"use strict";var d=a(33),e=a(117),f=a(116),g=a(118),h=[].lastIndexOf,i=!!h&&1/[1].lastIndexOf(1,-0)<0;d(d.P+d.F*(i||!a(105)(h)),"Array",{lastIndexOf:function(a){if(i)return h.apply(this,arguments)||0;var b=e(this),c=g(b.length),d=c-1;for(arguments.length>1&&(d=Math.min(d,f(arguments[1]))),0>d&&(d=c+d);d>=0;d--)if(d in b&&b[d]===a)return d||0;return-1}})},{105:105,116:116,117:117,118:118,33:33}],144:[function(a,b,c){"use strict";var d=a(33),e=a(12)(1);d(d.P+d.F*!a(105)([].map,!0),"Array",{map:function(a){return e(this,a,arguments[1])}})},{105:105,12:12,33:33}],145:[function(a,b,c){"use strict";var d=a(33),e=a(24);d(d.S+d.F*a(35)(function(){function a(){}return!(Array.of.call(a)instanceof a)}),"Array",{of:function(){for(var a=0,b=arguments.length,c=new("function"==typeof this?this:Array)(b);b>a;)e(c,a,arguments[a++]);return c.length=b,c}})},{24:24,33:33,35:35}],146:[function(a,b,c){"use strict";var d=a(33),e=a(13);d(d.P+d.F*!a(105)([].reduceRight,!0),"Array",{reduceRight:function(a){return e(this,a,arguments.length,arguments[1],!0)}})},{105:105,13:13,33:33}],147:[function(a,b,c){"use strict";var d=a(33),e=a(13);d(d.P+d.F*!a(105)([].reduce,!0),"Array",{reduce:function(a){return e(this,a,arguments.length,arguments[1],!1)}})},{105:105,13:13,33:33}],148:[function(a,b,c){"use strict";var d=a(33),e=a(43),f=a(18),g=a(114),h=a(118),i=[].slice;d(d.P+d.F*a(35)(function(){e&&i.call(e)}),"Array",{slice:function(a,b){var c=h(this.length),d=f(this);if(b=void 0===b?c:b,"Array"==d)return i.call(this,a,b);for(var e=g(a,c),j=g(b,c),k=h(j-e),l=Array(k),m=0;k>m;m++)l[m]="String"==d?this.charAt(e+m):this[e+m];return l}})},{114:114,118:118,18:18,33:33,35:35,43:43}],149:[function(a,b,c){"use strict";var d=a(33),e=a(12)(3);d(d.P+d.F*!a(105)([].some,!0),"Array",{some:function(a){return e(this,a,arguments[1])}})},{105:105,12:12,33:33}],150:[function(a,b,c){"use strict";var d=a(33),e=a(3),f=a(119),g=a(35),h=[].sort,i=[1,2,3];d(d.P+d.F*(g(function(){i.sort(void 0)})||!g(function(){i.sort(null)})||!a(105)(h)),"Array",{sort:function(a){return void 0===a?h.call(f(this)):h.call(f(this),e(a))}})},{105:105,119:119,3:3,33:33,35:35}],151:[function(a,b,c){a(100)("Array")},{100:100}],152:[function(a,b,c){var d=a(33);d(d.S,"Date",{now:function(){return(new Date).getTime()}})},{33:33}],153:[function(a,b,c){var d=a(33),e=a(26);d(d.P+d.F*(Date.prototype.toISOString!==e),"Date",{toISOString:e})},{26:26,33:33}],154:[function(a,b,c){"use strict";var d=a(33),e=a(119),f=a(120);d(d.P+d.F*a(35)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(a){var b=e(this),c=f(b);return"number"!=typeof c||isFinite(c)?b.toISOString():null}})},{119:119,120:120,33:33,35:35}],155:[function(a,b,c){var d=a(128)("toPrimitive"),e=Date.prototype;d in e||a(42)(e,d,a(27))},{128:128,27:27,42:42}],156:[function(a,b,c){var d=Date.prototype,e="Invalid Date",f="toString",g=d[f],h=d.getTime;new Date(NaN)+""!=e&&a(94)(d,f,function(){var a=h.call(this);return a===a?g.call(this):e})},{94:94}],157:[function(a,b,c){var d=a(33);d(d.P,"Function",{bind:a(16)})},{16:16,33:33}],158:[function(a,b,c){"use strict";var d=a(51),e=a(79),f=a(128)("hasInstance"),g=Function.prototype;f in g||a(72).f(g,f,{value:function(a){if("function"!=typeof this||!d(a))return!1;if(!d(this.prototype))return a instanceof this;for(;a=e(a);)if(this.prototype===a)return!0;return!1}})},{128:128,51:51,72:72,79:79}],159:[function(a,b,c){var d=a(72).f,e=Function.prototype,f=/^\s*function ([^ (]*)/,g="name";g in e||a(29)&&d(e,g,{configurable:!0,get:function(){try{return(""+this).match(f)[1]}catch(a){return""}}})},{29:29,72:72}],160:[function(a,b,c){"use strict";var d=a(19),e=a(125),f="Map";b.exports=a(22)(f,function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{get:function(a){var b=d.getEntry(e(this,f),a);return b&&b.v},set:function(a,b){return d.def(e(this,f),0===a?0:a,b)}},d,!0)},{125:125,19:19,22:22}],161:[function(a,b,c){var d=a(33),e=a(63),f=Math.sqrt,g=Math.acosh;d(d.S+d.F*!(g&&710==Math.floor(g(Number.MAX_VALUE))&&g(1/0)==1/0),"Math",{acosh:function(a){return(a=+a)<1?NaN:a>94906265.62425156?Math.log(a)+Math.LN2:e(a-1+f(a-1)*f(a+1))}})},{33:33,63:63}],162:[function(a,b,c){function d(a){return isFinite(a=+a)&&0!=a?0>a?-d(-a):Math.log(a+Math.sqrt(a*a+1)):a}var e=a(33),f=Math.asinh;e(e.S+e.F*!(f&&1/f(0)>0),"Math",{asinh:d})},{33:33}],163:[function(a,b,c){var d=a(33),e=Math.atanh;d(d.S+d.F*!(e&&1/e(-0)<0),"Math",{atanh:function(a){return 0==(a=+a)?a:Math.log((1+a)/(1-a))/2}})},{33:33}],164:[function(a,b,c){var d=a(33),e=a(65);d(d.S,"Math",{cbrt:function(a){return e(a=+a)*Math.pow(Math.abs(a),1/3)}})},{33:33,65:65}],165:[function(a,b,c){var d=a(33);d(d.S,"Math",{clz32:function(a){return(a>>>=0)?31-Math.floor(Math.log(a+.5)*Math.LOG2E):32}})},{33:33}],166:[function(a,b,c){var d=a(33),e=Math.exp;d(d.S,"Math",{cosh:function(a){return(e(a=+a)+e(-a))/2}})},{33:33}],167:[function(a,b,c){var d=a(33),e=a(61);d(d.S+d.F*(e!=Math.expm1),"Math",{expm1:e})},{33:33,61:61}],168:[function(a,b,c){var d=a(33);d(d.S,"Math",{fround:a(62)})},{33:33,62:62}],169:[function(a,b,c){var d=a(33),e=Math.abs;d(d.S,"Math",{hypot:function(a,b){for(var c,d,f=0,g=0,h=arguments.length,i=0;h>g;)c=e(arguments[g++]),c>i?(d=i/c,f=f*d*d+1,i=c):c>0?(d=c/i,f+=d*d):f+=c;return i===1/0?1/0:i*Math.sqrt(f)}})},{33:33}],170:[function(a,b,c){var d=a(33),e=Math.imul;d(d.S+d.F*a(35)(function(){return-5!=e(4294967295,5)||2!=e.length}),"Math",{imul:function(a,b){var c=65535,d=+a,e=+b,f=c&d,g=c&e;return 0|f*g+((c&d>>>16)*g+f*(c&e>>>16)<<16>>>0)}})},{33:33,35:35}],171:[function(a,b,c){var d=a(33);d(d.S,"Math",{log10:function(a){return Math.log(a)*Math.LOG10E}})},{33:33}],172:[function(a,b,c){var d=a(33);d(d.S,"Math",{log1p:a(63)})},{33:33,63:63}],173:[function(a,b,c){var d=a(33);d(d.S,"Math",{log2:function(a){return Math.log(a)/Math.LN2}})},{33:33}],174:[function(a,b,c){var d=a(33);d(d.S,"Math",{sign:a(65)})},{33:33,65:65}],175:[function(a,b,c){var d=a(33),e=a(61),f=Math.exp;d(d.S+d.F*a(35)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(a){return Math.abs(a=+a)<1?(e(a)-e(-a))/2:(f(a-1)-f(-a-1))*(Math.E/2)}})},{33:33,35:35,61:61}],176:[function(a,b,c){var d=a(33),e=a(61),f=Math.exp;d(d.S,"Math",{tanh:function(a){var b=e(a=+a),c=e(-a);return b==1/0?1:c==1/0?-1:(b-c)/(f(a)+f(-a))}})},{33:33,61:61}],177:[function(a,b,c){var d=a(33);d(d.S,"Math",{trunc:function(a){return(a>0?Math.floor:Math.ceil)(a)}})},{33:33}],178:[function(a,b,c){"use strict";var d=a(40),e=a(41),f=a(18),g=a(45),h=a(120),i=a(35),j=a(77).f,k=a(75).f,l=a(72).f,m=a(111).trim,n="Number",o=d[n],p=o,q=o.prototype,r=f(a(71)(q))==n,s="trim"in String.prototype,t=function(a){var b=h(a,!1);if("string"==typeof b&&b.length>2){b=s?b.trim():m(b,3);var c,d,e,f=b.charCodeAt(0);if(43===f||45===f){if(c=b.charCodeAt(2),88===c||120===c)return NaN}else if(48===f){switch(b.charCodeAt(1)){
case 66:case 98:d=2,e=49;break;case 79:case 111:d=8,e=55;break;default:return+b}for(var g,i=b.slice(2),j=0,k=i.length;k>j;j++)if(g=i.charCodeAt(j),48>g||g>e)return NaN;return parseInt(i,d)}}return+b};if(!o(" 0o1")||!o("0b1")||o("+0x1")){o=function(a){var b=arguments.length<1?0:a,c=this;return c instanceof o&&(r?i(function(){q.valueOf.call(c)}):f(c)!=n)?g(new p(t(b)),c,o):t(b)};for(var u,v=a(29)?j(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;v.length>w;w++)e(p,u=v[w])&&!e(o,u)&&l(o,u,k(p,u));o.prototype=q,q.constructor=o,a(94)(d,n,o)}},{111:111,120:120,18:18,29:29,35:35,40:40,41:41,45:45,71:71,72:72,75:75,77:77,94:94}],179:[function(a,b,c){var d=a(33);d(d.S,"Number",{EPSILON:Math.pow(2,-52)})},{33:33}],180:[function(a,b,c){var d=a(33),e=a(40).isFinite;d(d.S,"Number",{isFinite:function(a){return"number"==typeof a&&e(a)}})},{33:33,40:40}],181:[function(a,b,c){var d=a(33);d(d.S,"Number",{isInteger:a(50)})},{33:33,50:50}],182:[function(a,b,c){var d=a(33);d(d.S,"Number",{isNaN:function(a){return a!=a}})},{33:33}],183:[function(a,b,c){var d=a(33),e=a(50),f=Math.abs;d(d.S,"Number",{isSafeInteger:function(a){return e(a)&&f(a)<=9007199254740991}})},{33:33,50:50}],184:[function(a,b,c){var d=a(33);d(d.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{33:33}],185:[function(a,b,c){var d=a(33);d(d.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{33:33}],186:[function(a,b,c){var d=a(33),e=a(86);d(d.S+d.F*(Number.parseFloat!=e),"Number",{parseFloat:e})},{33:33,86:86}],187:[function(a,b,c){var d=a(33),e=a(87);d(d.S+d.F*(Number.parseInt!=e),"Number",{parseInt:e})},{33:33,87:87}],188:[function(a,b,c){"use strict";var d=a(33),e=a(116),f=a(4),g=a(110),h=1..toFixed,i=Math.floor,j=[0,0,0,0,0,0],k="Number.toFixed: incorrect invocation!",l="0",m=function(a,b){for(var c=-1,d=b;++c<6;)d+=a*j[c],j[c]=d%1e7,d=i(d/1e7)},n=function(a){for(var b=6,c=0;--b>=0;)c+=j[b],j[b]=i(c/a),c=c%a*1e7},o=function(){for(var a=6,b="";--a>=0;)if(""!==b||0===a||0!==j[a]){var c=String(j[a]);b=""===b?c:b+g.call(l,7-c.length)+c}return b},p=function(a,b,c){return 0===b?c:b%2===1?p(a,b-1,c*a):p(a*a,b/2,c)},q=function(a){for(var b=0,c=a;c>=4096;)b+=12,c/=4096;for(;c>=2;)b+=1,c/=2;return b};d(d.P+d.F*(!!h&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0))||!a(35)(function(){h.call({})})),"Number",{toFixed:function(a){var b,c,d,h,i=f(this,k),j=e(a),r="",s=l;if(0>j||j>20)throw RangeError(k);if(i!=i)return"NaN";if(-1e21>=i||i>=1e21)return String(i);if(0>i&&(r="-",i=-i),i>1e-21)if(b=q(i*p(2,69,1))-69,c=0>b?i*p(2,-b,1):i/p(2,b,1),c*=4503599627370496,b=52-b,b>0){for(m(0,c),d=j;d>=7;)m(1e7,0),d-=7;for(m(p(10,d,1),0),d=b-1;d>=23;)n(1<<23),d-=23;n(1<<d),m(1,1),n(2),s=o()}else m(0,c),m(1<<-b,0),s=o()+g.call(l,j);return j>0?(h=s.length,s=r+(j>=h?"0."+g.call(l,j-h)+s:s.slice(0,h-j)+"."+s.slice(h-j))):s=r+s,s}})},{110:110,116:116,33:33,35:35,4:4}],189:[function(a,b,c){"use strict";var d=a(33),e=a(35),f=a(4),g=1..toPrecision;d(d.P+d.F*(e(function(){return"1"!==g.call(1,void 0)})||!e(function(){g.call({})})),"Number",{toPrecision:function(a){var b=f(this,"Number#toPrecision: incorrect invocation!");return void 0===a?g.call(b):g.call(b,a)}})},{33:33,35:35,4:4}],190:[function(a,b,c){var d=a(33);d(d.S+d.F,"Object",{assign:a(70)})},{33:33,70:70}],191:[function(a,b,c){var d=a(33);d(d.S,"Object",{create:a(71)})},{33:33,71:71}],192:[function(a,b,c){var d=a(33);d(d.S+d.F*!a(29),"Object",{defineProperties:a(73)})},{29:29,33:33,73:73}],193:[function(a,b,c){var d=a(33);d(d.S+d.F*!a(29),"Object",{defineProperty:a(72).f})},{29:29,33:33,72:72}],194:[function(a,b,c){var d=a(51),e=a(66).onFreeze;a(83)("freeze",function(a){return function(b){return a&&d(b)?a(e(b)):b}})},{51:51,66:66,83:83}],195:[function(a,b,c){var d=a(117),e=a(75).f;a(83)("getOwnPropertyDescriptor",function(){return function(a,b){return e(d(a),b)}})},{117:117,75:75,83:83}],196:[function(a,b,c){a(83)("getOwnPropertyNames",function(){return a(76).f})},{76:76,83:83}],197:[function(a,b,c){var d=a(119),e=a(79);a(83)("getPrototypeOf",function(){return function(a){return e(d(a))}})},{119:119,79:79,83:83}],198:[function(a,b,c){var d=a(51);a(83)("isExtensible",function(a){return function(b){return d(b)?a?a(b):!0:!1}})},{51:51,83:83}],199:[function(a,b,c){var d=a(51);a(83)("isFrozen",function(a){return function(b){return d(b)?a?a(b):!1:!0}})},{51:51,83:83}],200:[function(a,b,c){var d=a(51);a(83)("isSealed",function(a){return function(b){return d(b)?a?a(b):!1:!0}})},{51:51,83:83}],201:[function(a,b,c){var d=a(33);d(d.S,"Object",{is:a(96)})},{33:33,96:96}],202:[function(a,b,c){var d=a(119),e=a(81);a(83)("keys",function(){return function(a){return e(d(a))}})},{119:119,81:81,83:83}],203:[function(a,b,c){var d=a(51),e=a(66).onFreeze;a(83)("preventExtensions",function(a){return function(b){return a&&d(b)?a(e(b)):b}})},{51:51,66:66,83:83}],204:[function(a,b,c){var d=a(51),e=a(66).onFreeze;a(83)("seal",function(a){return function(b){return a&&d(b)?a(e(b)):b}})},{51:51,66:66,83:83}],205:[function(a,b,c){var d=a(33);d(d.S,"Object",{setPrototypeOf:a(99).set})},{33:33,99:99}],206:[function(a,b,c){"use strict";var d=a(17),e={};e[a(128)("toStringTag")]="z",e+""!="[object z]"&&a(94)(Object.prototype,"toString",function(){return"[object "+d(this)+"]"},!0)},{128:128,17:17,94:94}],207:[function(a,b,c){var d=a(33),e=a(86);d(d.G+d.F*(parseFloat!=e),{parseFloat:e})},{33:33,86:86}],208:[function(a,b,c){var d=a(33),e=a(87);d(d.G+d.F*(parseInt!=e),{parseInt:e})},{33:33,87:87}],209:[function(a,b,c){"use strict";var d,e,f,g,h=a(60),i=a(40),j=a(25),k=a(17),l=a(33),m=a(51),n=a(3),o=a(6),p=a(39),q=a(104),r=a(113).set,s=a(68)(),t=a(69),u=a(90),v=a(91),w="Promise",x=i.TypeError,y=i.process,z=i[w],A="process"==k(y),B=function(){},C=e=t.f,D=!!function(){try{var b=z.resolve(1),c=(b.constructor={})[a(128)("species")]=function(a){a(B,B)};return(A||"function"==typeof PromiseRejectionEvent)&&b.then(B)instanceof c}catch(d){}}(),E=h?function(a,b){return a===b||a===z&&b===g}:function(a,b){return a===b},F=function(a){var b;return m(a)&&"function"==typeof(b=a.then)?b:!1},G=function(a,b){if(!a._n){a._n=!0;var c=a._c;s(function(){for(var d=a._v,e=1==a._s,f=0,g=function(b){var c,f,g=e?b.ok:b.fail,h=b.resolve,i=b.reject,j=b.domain;try{g?(e||(2==a._h&&J(a),a._h=1),g===!0?c=d:(j&&j.enter(),c=g(d),j&&j.exit()),c===b.promise?i(x("Promise-chain cycle")):(f=F(c))?f.call(c,h,i):h(c)):i(d)}catch(k){i(k)}};c.length>f;)g(c[f++]);a._c=[],a._n=!1,b&&!a._h&&H(a)})}},H=function(a){r.call(i,function(){var b,c,d,e=a._v,f=I(a);if(f&&(b=u(function(){A?y.emit("unhandledRejection",e,a):(c=i.onunhandledrejection)?c({promise:a,reason:e}):(d=i.console)&&d.error&&d.error("Unhandled promise rejection",e)}),a._h=A||I(a)?2:1),a._a=void 0,f&&b.e)throw b.v})},I=function(a){if(1==a._h)return!1;for(var b,c=a._a||a._c,d=0;c.length>d;)if(b=c[d++],b.fail||!I(b.promise))return!1;return!0},J=function(a){r.call(i,function(){var b;A?y.emit("rejectionHandled",a):(b=i.onrejectionhandled)&&b({promise:a,reason:a._v})})},K=function(a){var b=this;b._d||(b._d=!0,b=b._w||b,b._v=a,b._s=2,b._a||(b._a=b._c.slice()),G(b,!0))},L=function(a){var b,c=this;if(!c._d){c._d=!0,c=c._w||c;try{if(c===a)throw x("Promise can't be resolved itself");(b=F(a))?s(function(){var d={_w:c,_d:!1};try{b.call(a,j(L,d,1),j(K,d,1))}catch(e){K.call(d,e)}}):(c._v=a,c._s=1,G(c,!1))}catch(d){K.call({_w:c,_d:!1},d)}}};D||(z=function(a){o(this,z,w,"_h"),n(a),d.call(this);try{a(j(L,this,1),j(K,this,1))}catch(b){K.call(this,b)}},d=function(a){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},d.prototype=a(93)(z.prototype,{then:function(a,b){var c=C(q(this,z));return c.ok="function"==typeof a?a:!0,c.fail="function"==typeof b&&b,c.domain=A?y.domain:void 0,this._c.push(c),this._a&&this._a.push(c),this._s&&G(this,!1),c.promise},"catch":function(a){return this.then(void 0,a)}}),f=function(){var a=new d;this.promise=a,this.resolve=j(L,a,1),this.reject=j(K,a,1)},t.f=C=function(a){return E(z,a)?new f(a):e(a)}),l(l.G+l.W+l.F*!D,{Promise:z}),a(101)(z,w),a(100)(w),g=a(23)[w],l(l.S+l.F*!D,w,{reject:function(a){var b=C(this),c=b.reject;return c(a),b.promise}}),l(l.S+l.F*(h||!D),w,{resolve:function(a){return a instanceof z&&E(a.constructor,this)?a:v(this,a)}}),l(l.S+l.F*!(D&&a(56)(function(a){z.all(a)["catch"](B)})),w,{all:function(a){var b=this,c=C(b),d=c.resolve,e=c.reject,f=u(function(){var c=[],f=0,g=1;p(a,!1,function(a){var h=f++,i=!1;c.push(void 0),g++,b.resolve(a).then(function(a){i||(i=!0,c[h]=a,--g||d(c))},e)}),--g||d(c)});return f.e&&e(f.v),c.promise},race:function(a){var b=this,c=C(b),d=c.reject,e=u(function(){p(a,!1,function(a){b.resolve(a).then(c.resolve,d)})});return e.e&&d(e.v),c.promise}})},{100:100,101:101,104:104,113:113,128:128,17:17,23:23,25:25,3:3,33:33,39:39,40:40,51:51,56:56,6:6,60:60,68:68,69:69,90:90,91:91,93:93}],210:[function(a,b,c){var d=a(33),e=a(3),f=a(7),g=(a(40).Reflect||{}).apply,h=Function.apply;d(d.S+d.F*!a(35)(function(){g(function(){})}),"Reflect",{apply:function(a,b,c){var d=e(a),i=f(c);return g?g(d,b,i):h.call(d,b,i)}})},{3:3,33:33,35:35,40:40,7:7}],211:[function(a,b,c){var d=a(33),e=a(71),f=a(3),g=a(7),h=a(51),i=a(35),j=a(16),k=(a(40).Reflect||{}).construct,l=i(function(){function a(){}return!(k(function(){},[],a)instanceof a)}),m=!i(function(){k(function(){})});d(d.S+d.F*(l||m),"Reflect",{construct:function(a,b){f(a),g(b);var c=arguments.length<3?a:f(arguments[2]);if(m&&!l)return k(a,b,c);if(a==c){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3])}var d=[null];return d.push.apply(d,b),new(j.apply(a,d))}var i=c.prototype,n=e(h(i)?i:Object.prototype),o=Function.apply.call(a,n,b);return h(o)?o:n}})},{16:16,3:3,33:33,35:35,40:40,51:51,7:7,71:71}],212:[function(a,b,c){var d=a(72),e=a(33),f=a(7),g=a(120);e(e.S+e.F*a(35)(function(){Reflect.defineProperty(d.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(a,b,c){f(a),b=g(b,!0),f(c);try{return d.f(a,b,c),!0}catch(e){return!1}}})},{120:120,33:33,35:35,7:7,72:72}],213:[function(a,b,c){var d=a(33),e=a(75).f,f=a(7);d(d.S,"Reflect",{deleteProperty:function(a,b){var c=e(f(a),b);return c&&!c.configurable?!1:delete a[b]}})},{33:33,7:7,75:75}],214:[function(a,b,c){"use strict";var d=a(33),e=a(7),f=function(a){this._t=e(a),this._i=0;var b,c=this._k=[];for(b in a)c.push(b)};a(54)(f,"Object",function(){var a,b=this,c=b._k;do if(b._i>=c.length)return{value:void 0,done:!0};while(!((a=c[b._i++])in b._t));return{value:a,done:!1}}),d(d.S,"Reflect",{enumerate:function(a){return new f(a)}})},{33:33,54:54,7:7}],215:[function(a,b,c){var d=a(75),e=a(33),f=a(7);e(e.S,"Reflect",{getOwnPropertyDescriptor:function(a,b){return d.f(f(a),b)}})},{33:33,7:7,75:75}],216:[function(a,b,c){var d=a(33),e=a(79),f=a(7);d(d.S,"Reflect",{getPrototypeOf:function(a){return e(f(a))}})},{33:33,7:7,79:79}],217:[function(a,b,c){function d(a,b){var c,h,k=arguments.length<3?a:arguments[2];return j(a)===k?a[b]:(c=e.f(a,b))?g(c,"value")?c.value:void 0!==c.get?c.get.call(k):void 0:i(h=f(a))?d(h,b,k):void 0}var e=a(75),f=a(79),g=a(41),h=a(33),i=a(51),j=a(7);h(h.S,"Reflect",{get:d})},{33:33,41:41,51:51,7:7,75:75,79:79}],218:[function(a,b,c){var d=a(33);d(d.S,"Reflect",{has:function(a,b){return b in a}})},{33:33}],219:[function(a,b,c){var d=a(33),e=a(7),f=Object.isExtensible;d(d.S,"Reflect",{isExtensible:function(a){return e(a),f?f(a):!0}})},{33:33,7:7}],220:[function(a,b,c){var d=a(33);d(d.S,"Reflect",{ownKeys:a(85)})},{33:33,85:85}],221:[function(a,b,c){var d=a(33),e=a(7),f=Object.preventExtensions;d(d.S,"Reflect",{preventExtensions:function(a){e(a);try{return f&&f(a),!0}catch(b){return!1}}})},{33:33,7:7}],222:[function(a,b,c){var d=a(33),e=a(99);e&&d(d.S,"Reflect",{setPrototypeOf:function(a,b){e.check(a,b);try{return e.set(a,b),!0}catch(c){return!1}}})},{33:33,99:99}],223:[function(a,b,c){function d(a,b,c){var i,m,n=arguments.length<4?a:arguments[3],o=f.f(k(a),b);if(!o){if(l(m=g(a)))return d(m,b,c,n);o=j(0)}return h(o,"value")?o.writable!==!1&&l(n)?(i=f.f(n,b)||j(0),i.value=c,e.f(n,b,i),!0):!1:void 0===o.set?!1:(o.set.call(n,c),!0)}var e=a(72),f=a(75),g=a(79),h=a(41),i=a(33),j=a(92),k=a(7),l=a(51);i(i.S,"Reflect",{set:d})},{33:33,41:41,51:51,7:7,72:72,75:75,79:79,92:92}],224:[function(a,b,c){var d=a(40),e=a(45),f=a(72).f,g=a(77).f,h=a(52),i=a(37),j=d.RegExp,k=j,l=j.prototype,m=/a/g,n=/a/g,o=new j(m)!==m;if(a(29)&&(!o||a(35)(function(){return n[a(128)("match")]=!1,j(m)!=m||j(n)==n||"/a/i"!=j(m,"i")}))){j=function(a,b){var c=this instanceof j,d=h(a),f=void 0===b;return!c&&d&&a.constructor===j&&f?a:e(o?new k(d&&!f?a.source:a,b):k((d=a instanceof j)?a.source:a,d&&f?i.call(a):b),c?this:l,j)};for(var p=(function(a){a in j||f(j,a,{configurable:!0,get:function(){return k[a]},set:function(b){k[a]=b}})}),q=g(k),r=0;q.length>r;)p(q[r++]);l.constructor=j,j.prototype=l,a(94)(d,"RegExp",j)}a(100)("RegExp")},{100:100,128:128,29:29,35:35,37:37,40:40,45:45,52:52,72:72,77:77,94:94}],225:[function(a,b,c){a(29)&&"g"!=/./g.flags&&a(72).f(RegExp.prototype,"flags",{configurable:!0,get:a(37)})},{29:29,37:37,72:72}],226:[function(a,b,c){a(36)("match",1,function(a,b,c){return[function(c){"use strict";var d=a(this),e=void 0==c?void 0:c[b];return void 0!==e?e.call(c,d):new RegExp(c)[b](String(d))},c]})},{36:36}],227:[function(a,b,c){a(36)("replace",2,function(a,b,c){return[function(d,e){"use strict";var f=a(this),g=void 0==d?void 0:d[b];return void 0!==g?g.call(d,f,e):c.call(String(f),d,e)},c]})},{36:36}],228:[function(a,b,c){a(36)("search",1,function(a,b,c){return[function(c){"use strict";var d=a(this),e=void 0==c?void 0:c[b];return void 0!==e?e.call(c,d):new RegExp(c)[b](String(d))},c]})},{36:36}],229:[function(a,b,c){a(36)("split",2,function(b,c,d){"use strict";var e=a(52),f=d,g=[].push,h="split",i="length",j="lastIndex";if("c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[i]||2!="ab"[h](/(?:ab)*/)[i]||4!="."[h](/(.?)(.?)/)[i]||"."[h](/()()/)[i]>1||""[h](/.?/)[i]){var k=void 0===/()??/.exec("")[1];d=function(a,b){var c=String(this);if(void 0===a&&0===b)return[];if(!e(a))return f.call(c,a,b);var d,h,l,m,n,o=[],p=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(a.sticky?"y":""),q=0,r=void 0===b?4294967295:b>>>0,s=new RegExp(a.source,p+"g");for(k||(d=new RegExp("^"+s.source+"$(?!\\s)",p));(h=s.exec(c))&&(l=h.index+h[0][i],!(l>q&&(o.push(c.slice(q,h.index)),!k&&h[i]>1&&h[0].replace(d,function(){for(n=1;n<arguments[i]-2;n++)void 0===arguments[n]&&(h[n]=void 0)}),h[i]>1&&h.index<c[i]&&g.apply(o,h.slice(1)),m=h[0][i],q=l,o[i]>=r)));)s[j]===h.index&&s[j]++;return q===c[i]?(m||!s.test(""))&&o.push(""):o.push(c.slice(q)),o[i]>r?o.slice(0,r):o}}else"0"[h](void 0,0)[i]&&(d=function(a,b){return void 0===a&&0===b?[]:f.call(this,a,b)});return[function(a,e){var f=b(this),g=void 0==a?void 0:a[c];return void 0!==g?g.call(a,f,e):d.call(String(f),a,e)},d]})},{36:36,52:52}],230:[function(a,b,c){"use strict";a(225);var d=a(7),e=a(37),f=a(29),g="toString",h=/./[g],i=function(b){a(94)(RegExp.prototype,g,b,!0)};a(35)(function(){return"/a/b"!=h.call({source:"a",flags:"b"})})?i(function(){var a=d(this);return"/".concat(a.source,"/","flags"in a?a.flags:!f&&a instanceof RegExp?e.call(a):void 0)}):h.name!=g&&i(function(){return h.call(this)})},{225:225,29:29,35:35,37:37,7:7,94:94}],231:[function(a,b,c){"use strict";var d=a(19),e=a(125),f="Set";b.exports=a(22)(f,function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{add:function(a){return d.def(e(this,f),a=0===a?0:a,a)}},d)},{125:125,19:19,22:22}],232:[function(a,b,c){"use strict";a(108)("anchor",function(a){return function(b){return a(this,"a","name",b)}})},{108:108}],233:[function(a,b,c){"use strict";a(108)("big",function(a){return function(){return a(this,"big","","")}})},{108:108}],234:[function(a,b,c){"use strict";a(108)("blink",function(a){return function(){return a(this,"blink","","")}})},{108:108}],235:[function(a,b,c){"use strict";a(108)("bold",function(a){return function(){return a(this,"b","","")}})},{108:108}],236:[function(a,b,c){"use strict";var d=a(33),e=a(106)(!1);d(d.P,"String",{codePointAt:function(a){return e(this,a)}})},{106:106,33:33}],237:[function(a,b,c){var d=a(33),e=a(118),f=a(107),g="endsWith",h=""[g];d(d.P+d.F*a(34)(g),"String",{endsWith:function(a){var b=f(this,a,g),c=arguments.length>1?arguments[1]:void 0,d=e(b.length),i=void 0===c?d:Math.min(e(c),d),j=String(a);return h?h.call(b,j,i):b.slice(i-j.length,i)===j}})},{107:107,118:118,33:33,34:34}],238:[function(a,b,c){"use strict";a(108)("fixed",function(a){return function(){return a(this,"tt","","")}})},{108:108}],239:[function(a,b,c){"use strict";a(108)("fontcolor",function(a){return function(b){return a(this,"font","color",b)}})},{108:108}],240:[function(a,b,c){"use strict";a(108)("fontsize",function(a){return function(b){return a(this,"font","size",b)}})},{108:108}],241:[function(a,b,c){var d=a(33),e=a(114),f=String.fromCharCode,g=String.fromCodePoint;d(d.S+d.F*(!!g&&1!=g.length),"String",{fromCodePoint:function(a){for(var b,c=[],d=arguments.length,g=0;d>g;){if(b=+arguments[g++],e(b,1114111)!==b)throw RangeError(b+" is not a valid code point");c.push(65536>b?f(b):f(((b-=65536)>>10)+55296,b%1024+56320))}return c.join("")}})},{114:114,33:33}],242:[function(a,b,c){var d=a(33),e=a(107),f="includes";d(d.P+d.F*a(34)(f),"String",{includes:function(a){return!!~e(this,a,f).indexOf(a,arguments.length>1?arguments[1]:void 0)}})},{107:107,33:33,34:34}],243:[function(a,b,c){"use strict";a(108)("italics",function(a){return function(){return a(this,"i","","")}})},{108:108}],244:[function(a,b,c){"use strict";var d=a(106)(!0);a(55)(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,b=this._t,c=this._i;return c>=b.length?{value:void 0,done:!0}:(a=d(b,c),this._i+=a.length,{value:a,done:!1})})},{106:106,55:55}],245:[function(a,b,c){"use strict";a(108)("link",function(a){return function(b){return a(this,"a","href",b)}})},{108:108}],246:[function(a,b,c){var d=a(33),e=a(117),f=a(118);d(d.S,"String",{raw:function(a){for(var b=e(a.raw),c=f(b.length),d=arguments.length,g=[],h=0;c>h;)g.push(String(b[h++])),d>h&&g.push(String(arguments[h]));return g.join("")}})},{117:117,118:118,33:33}],247:[function(a,b,c){var d=a(33);d(d.P,"String",{repeat:a(110)})},{110:110,33:33}],248:[function(a,b,c){"use strict";a(108)("small",function(a){return function(){return a(this,"small","","")}})},{108:108}],249:[function(a,b,c){var d=a(33),e=a(118),f=a(107),g="startsWith",h=""[g];d(d.P+d.F*a(34)(g),"String",{startsWith:function(a){var b=f(this,a,g),c=e(Math.min(arguments.length>1?arguments[1]:void 0,b.length)),d=String(a);return h?h.call(b,d,c):b.slice(c,c+d.length)===d}})},{107:107,118:118,33:33,34:34}],250:[function(a,b,c){"use strict";a(108)("strike",function(a){return function(){return a(this,"strike","","")}})},{108:108}],251:[function(a,b,c){"use strict";a(108)("sub",function(a){return function(){return a(this,"sub","","")}})},{108:108}],252:[function(a,b,c){"use strict";a(108)("sup",function(a){return function(){return a(this,"sup","","")}})},{108:108}],253:[function(a,b,c){"use strict";a(111)("trim",function(a){return function(){return a(this,3)}})},{111:111}],254:[function(a,b,c){"use strict";var d=a(40),e=a(41),f=a(29),g=a(33),h=a(94),i=a(66).KEY,j=a(35),k=a(103),l=a(101),m=a(124),n=a(128),o=a(127),p=a(126),q=a(59),r=a(32),s=a(49),t=a(7),u=a(117),v=a(120),w=a(92),x=a(71),y=a(76),z=a(75),A=a(72),B=a(81),C=z.f,D=A.f,E=y.f,F=d.Symbol,G=d.JSON,H=G&&G.stringify,I="prototype",J=n("_hidden"),K=n("toPrimitive"),L={}.propertyIsEnumerable,M=k("symbol-registry"),N=k("symbols"),O=k("op-symbols"),P=Object[I],Q="function"==typeof F,R=d.QObject,S=!R||!R[I]||!R[I].findChild,T=f&&j(function(){return 7!=x(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(a,b,c){var d=C(P,b);d&&delete P[b],D(a,b,c),d&&a!==P&&D(P,b,d)}:D,U=function(a){var b=N[a]=x(F[I]);return b._k=a,b},V=Q&&"symbol"==typeof F.iterator?function(a){return"symbol"==typeof a}:function(a){return a instanceof F},W=function(a,b,c){return a===P&&W(O,b,c),t(a),b=v(b,!0),t(c),e(N,b)?(c.enumerable?(e(a,J)&&a[J][b]&&(a[J][b]=!1),c=x(c,{enumerable:w(0,!1)})):(e(a,J)||D(a,J,w(1,{})),a[J][b]=!0),T(a,b,c)):D(a,b,c)},X=function(a,b){t(a);for(var c,d=r(b=u(b)),e=0,f=d.length;f>e;)W(a,c=d[e++],b[c]);return a},Y=function(a,b){return void 0===b?x(a):X(x(a),b)},Z=function(a){var b=L.call(this,a=v(a,!0));return this===P&&e(N,a)&&!e(O,a)?!1:b||!e(this,a)||!e(N,a)||e(this,J)&&this[J][a]?b:!0},$=function(a,b){if(a=u(a),b=v(b,!0),a!==P||!e(N,b)||e(O,b)){var c=C(a,b);return!c||!e(N,b)||e(a,J)&&a[J][b]||(c.enumerable=!0),c}},_=function(a){for(var b,c=E(u(a)),d=[],f=0;c.length>f;)e(N,b=c[f++])||b==J||b==i||d.push(b);return d},aa=function(a){for(var b,c=a===P,d=E(c?O:u(a)),f=[],g=0;d.length>g;)e(N,b=d[g++])&&(c?e(P,b):!0)&&f.push(N[b]);return f};Q||(F=function(){if(this instanceof F)throw TypeError("Symbol is not a constructor!");var a=m(arguments.length>0?arguments[0]:void 0),b=function(c){this===P&&b.call(O,c),e(this,J)&&e(this[J],a)&&(this[J][a]=!1),T(this,a,w(1,c))};return f&&S&&T(P,a,{configurable:!0,set:b}),U(a)},h(F[I],"toString",function(){return this._k}),z.f=$,A.f=W,a(77).f=y.f=_,a(82).f=Z,a(78).f=aa,f&&!a(60)&&h(P,"propertyIsEnumerable",Z,!0),o.f=function(a){return U(n(a))}),g(g.G+g.W+g.F*!Q,{Symbol:F});for(var ba="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ca=0;ba.length>ca;)n(ba[ca++]);for(var da=B(n.store),ea=0;da.length>ea;)p(da[ea++]);g(g.S+g.F*!Q,"Symbol",{"for":function(a){return e(M,a+="")?M[a]:M[a]=F(a)},keyFor:function(a){if(V(a))return q(M,a);throw TypeError(a+" is not a symbol!")},useSetter:function(){S=!0},useSimple:function(){S=!1}}),g(g.S+g.F*!Q,"Object",{create:Y,defineProperty:W,defineProperties:X,getOwnPropertyDescriptor:$,getOwnPropertyNames:_,getOwnPropertySymbols:aa}),G&&g(g.S+g.F*(!Q||j(function(){var a=F();return"[null]"!=H([a])||"{}"!=H({a:a})||"{}"!=H(Object(a))})),"JSON",{stringify:function(a){if(void 0!==a&&!V(a)){for(var b,c,d=[a],e=1;arguments.length>e;)d.push(arguments[e++]);return b=d[1],"function"==typeof b&&(c=b),(c||!s(b))&&(b=function(a,b){return c&&(b=c.call(this,a,b)),V(b)?void 0:b}),d[1]=b,H.apply(G,d)}}}),F[I][K]||a(42)(F[I],K,F[I].valueOf),l(F,"Symbol"),l(Math,"Math",!0),l(d.JSON,"JSON",!0)},{101:101,103:103,117:117,120:120,124:124,126:126,127:127,128:128,29:29,32:32,33:33,35:35,40:40,41:41,42:42,49:49,59:59,60:60,66:66,7:7,71:71,72:72,75:75,76:76,77:77,78:78,81:81,82:82,92:92,94:94}],255:[function(a,b,c){"use strict";var d=a(33),e=a(123),f=a(122),g=a(7),h=a(114),i=a(118),j=a(51),k=a(40).ArrayBuffer,l=a(104),m=f.ArrayBuffer,n=f.DataView,o=e.ABV&&k.isView,p=m.prototype.slice,q=e.VIEW,r="ArrayBuffer";d(d.G+d.W+d.F*(k!==m),{ArrayBuffer:m}),d(d.S+d.F*!e.CONSTR,r,{isView:function(a){return o&&o(a)||j(a)&&q in a}}),d(d.P+d.U+d.F*a(35)(function(){return!new m(2).slice(1,void 0).byteLength}),r,{slice:function(a,b){if(void 0!==p&&void 0===b)return p.call(g(this),a);for(var c=g(this).byteLength,d=h(a,c),e=h(void 0===b?c:b,c),f=new(l(this,m))(i(e-d)),j=new n(this),k=new n(f),o=0;e>d;)k.setUint8(o++,j.getUint8(d++));return f}}),a(100)(r)},{100:100,104:104,114:114,118:118,122:122,123:123,33:33,35:35,40:40,51:51,7:7}],256:[function(a,b,c){var d=a(33);d(d.G+d.W+d.F*!a(123).ABV,{DataView:a(122).DataView})},{122:122,123:123,33:33}],257:[function(a,b,c){a(121)("Float32",4,function(a){return function(b,c,d){return a(this,b,c,d)}})},{121:121}],258:[function(a,b,c){a(121)("Float64",8,function(a){return function(b,c,d){return a(this,b,c,d)}})},{121:121}],259:[function(a,b,c){a(121)("Int16",2,function(a){return function(b,c,d){return a(this,b,c,d)}})},{121:121}],260:[function(a,b,c){a(121)("Int32",4,function(a){return function(b,c,d){return a(this,b,c,d)}})},{121:121}],261:[function(a,b,c){a(121)("Int8",1,function(a){return function(b,c,d){return a(this,b,c,d)}})},{121:121}],262:[function(a,b,c){a(121)("Uint16",2,function(a){return function(b,c,d){return a(this,b,c,d)}})},{121:121}],263:[function(a,b,c){a(121)("Uint32",4,function(a){return function(b,c,d){return a(this,b,c,d)}})},{121:121}],264:[function(a,b,c){a(121)("Uint8",1,function(a){return function(b,c,d){return a(this,b,c,d)}})},{121:121}],265:[function(a,b,c){a(121)("Uint8",1,function(a){return function(b,c,d){return a(this,b,c,d)}},!0)},{121:121}],266:[function(a,b,c){"use strict";var d,e=a(12)(0),f=a(94),g=a(66),h=a(70),i=a(21),j=a(51),k=a(35),l=a(125),m="WeakMap",n=g.getWeak,o=Object.isExtensible,p=i.ufstore,q={},r=function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},s={get:function(a){if(j(a)){var b=n(a);return b===!0?p(l(this,m)).get(a):b?b[this._i]:void 0}},set:function(a,b){return i.def(l(this,m),a,b)}},t=b.exports=a(22)(m,r,s,i,!0,!0);k(function(){return 7!=(new t).set((Object.freeze||Object)(q),7).get(q)})&&(d=i.getConstructor(r,m),h(d.prototype,s),g.NEED=!0,e(["delete","has","get","set"],function(a){var b=t.prototype,c=b[a];f(b,a,function(b,e){if(j(b)&&!o(b)){this._f||(this._f=new d);var f=this._f[a](b,e);return"set"==a?this:f}return c.call(this,b,e)})}))},{12:12,125:125,21:21,22:22,35:35,51:51,66:66,70:70,94:94}],267:[function(a,b,c){"use strict";var d=a(21),e=a(125),f="WeakSet";a(22)(f,function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{add:function(a){return d.def(e(this,f),a,!0)}},d,!1,!0)},{125:125,21:21,22:22}],268:[function(a,b,c){"use strict";var d=a(33),e=a(38),f=a(119),g=a(118),h=a(3),i=a(15);d(d.P,"Array",{flatMap:function(a){var b,c,d=f(this);return h(a),b=g(d.length),c=i(d,0),e(c,d,d,b,0,1,a,arguments[1]),c}}),a(5)("flatMap")},{118:118,119:119,15:15,3:3,33:33,38:38,5:5}],269:[function(a,b,c){"use strict";var d=a(33),e=a(38),f=a(119),g=a(118),h=a(116),i=a(15);d(d.P,"Array",{flatten:function(){var a=arguments[0],b=f(this),c=g(b.length),d=i(b,0);return e(d,b,b,c,0,void 0===a?1:h(a)),d}}),a(5)("flatten")},{116:116,118:118,119:119,15:15,33:33,38:38,5:5}],270:[function(a,b,c){"use strict";var d=a(33),e=a(11)(!0);d(d.P,"Array",{includes:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),a(5)("includes")},{11:11,33:33,5:5}],271:[function(a,b,c){var d=a(33),e=a(68)(),f=a(40).process,g="process"==a(18)(f);d(d.G,{asap:function(a){var b=g&&f.domain;e(b?b.bind(a):a)}})},{18:18,33:33,40:40,68:68}],272:[function(a,b,c){var d=a(33),e=a(18);d(d.S,"Error",{isError:function(a){return"Error"===e(a)}})},{18:18,33:33}],273:[function(a,b,c){var d=a(33);d(d.G,{global:a(40)})},{33:33,40:40}],274:[function(a,b,c){a(97)("Map")},{97:97}],275:[function(a,b,c){a(98)("Map")},{98:98}],276:[function(a,b,c){var d=a(33);d(d.P+d.R,"Map",{toJSON:a(20)("Map")})},{20:20,33:33}],277:[function(a,b,c){var d=a(33);d(d.S,"Math",{clamp:function(a,b,c){return Math.min(c,Math.max(b,a))}})},{33:33}],278:[function(a,b,c){var d=a(33);d(d.S,"Math",{DEG_PER_RAD:Math.PI/180})},{33:33}],279:[function(a,b,c){var d=a(33),e=180/Math.PI;d(d.S,"Math",{degrees:function(a){return a*e}})},{33:33}],280:[function(a,b,c){var d=a(33),e=a(64),f=a(62);d(d.S,"Math",{fscale:function(a,b,c,d,g){return f(e(a,b,c,d,g))}})},{33:33,62:62,64:64}],281:[function(a,b,c){var d=a(33);d(d.S,"Math",{iaddh:function(a,b,c,d){var e=a>>>0,f=b>>>0,g=c>>>0;return f+(d>>>0)+((e&g|(e|g)&~(e+g>>>0))>>>31)|0}})},{33:33}],282:[function(a,b,c){var d=a(33);d(d.S,"Math",{imulh:function(a,b){var c=65535,d=+a,e=+b,f=d&c,g=e&c,h=d>>16,i=e>>16,j=(h*g>>>0)+(f*g>>>16);return h*i+(j>>16)+((f*i>>>0)+(j&c)>>16)}})},{33:33}],283:[function(a,b,c){var d=a(33);d(d.S,"Math",{isubh:function(a,b,c,d){var e=a>>>0,f=b>>>0,g=c>>>0;return f-(d>>>0)-((~e&g|~(e^g)&e-g>>>0)>>>31)|0}})},{33:33}],284:[function(a,b,c){var d=a(33);d(d.S,"Math",{RAD_PER_DEG:180/Math.PI})},{33:33}],285:[function(a,b,c){var d=a(33),e=Math.PI/180;d(d.S,"Math",{radians:function(a){return a*e}})},{33:33}],286:[function(a,b,c){var d=a(33);d(d.S,"Math",{scale:a(64)})},{33:33,64:64}],287:[function(a,b,c){var d=a(33);d(d.S,"Math",{signbit:function(a){return(a=+a)!=a?a:0==a?1/a==1/0:a>0}})},{33:33}],288:[function(a,b,c){var d=a(33);d(d.S,"Math",{umulh:function(a,b){var c=65535,d=+a,e=+b,f=d&c,g=e&c,h=d>>>16,i=e>>>16,j=(h*g>>>0)+(f*g>>>16);return h*i+(j>>>16)+((f*i>>>0)+(j&c)>>>16)}})},{33:33}],289:[function(a,b,c){"use strict";var d=a(33),e=a(119),f=a(3),g=a(72);a(29)&&d(d.P+a(74),"Object",{__defineGetter__:function(a,b){g.f(e(this),a,{get:f(b),enumerable:!0,configurable:!0})}})},{119:119,29:29,3:3,33:33,72:72,74:74}],290:[function(a,b,c){"use strict";var d=a(33),e=a(119),f=a(3),g=a(72);a(29)&&d(d.P+a(74),"Object",{__defineSetter__:function(a,b){g.f(e(this),a,{set:f(b),enumerable:!0,configurable:!0})}})},{119:119,29:29,3:3,33:33,72:72,74:74}],291:[function(a,b,c){var d=a(33),e=a(84)(!0);d(d.S,"Object",{entries:function(a){return e(a)}})},{33:33,84:84}],292:[function(a,b,c){var d=a(33),e=a(85),f=a(117),g=a(75),h=a(24);d(d.S,"Object",{getOwnPropertyDescriptors:function(a){for(var b,c,d=f(a),i=g.f,j=e(d),k={},l=0;j.length>l;)c=i(d,b=j[l++]),void 0!==c&&h(k,b,c);return k}})},{117:117,24:24,33:33,75:75,85:85}],293:[function(a,b,c){"use strict";var d=a(33),e=a(119),f=a(120),g=a(79),h=a(75).f;a(29)&&d(d.P+a(74),"Object",{__lookupGetter__:function(a){var b,c=e(this),d=f(a,!0);do if(b=h(c,d))return b.get;while(c=g(c))}})},{119:119,120:120,29:29,33:33,74:74,75:75,79:79}],294:[function(a,b,c){"use strict";var d=a(33),e=a(119),f=a(120),g=a(79),h=a(75).f;a(29)&&d(d.P+a(74),"Object",{__lookupSetter__:function(a){var b,c=e(this),d=f(a,!0);do if(b=h(c,d))return b.set;while(c=g(c))}})},{119:119,120:120,29:29,33:33,74:74,75:75,79:79}],295:[function(a,b,c){var d=a(33),e=a(84)(!1);d(d.S,"Object",{values:function(a){return e(a)}})},{33:33,84:84}],296:[function(a,b,c){"use strict";var d=a(33),e=a(40),f=a(23),g=a(68)(),h=a(128)("observable"),i=a(3),j=a(7),k=a(6),l=a(93),m=a(42),n=a(39),o=n.RETURN,p=function(a){return null==a?void 0:i(a)},q=function(a){var b=a._c;b&&(a._c=void 0,b())},r=function(a){return void 0===a._o},s=function(a){r(a)||(a._o=void 0,q(a))},t=function(a,b){j(a),this._c=void 0,this._o=a,a=new u(this);try{var c=b(a),d=c;null!=c&&("function"==typeof c.unsubscribe?c=function(){d.unsubscribe()}:i(c),this._c=c)}catch(e){return void a.error(e)}r(this)&&q(this)};t.prototype=l({},{unsubscribe:function(){s(this)}});var u=function(a){this._s=a};u.prototype=l({},{next:function(a){var b=this._s;if(!r(b)){var c=b._o;try{var d=p(c.next);if(d)return d.call(c,a)}catch(e){try{s(b)}finally{throw e}}}},error:function(a){var b=this._s;if(r(b))throw a;var c=b._o;b._o=void 0;try{var d=p(c.error);if(!d)throw a;a=d.call(c,a)}catch(e){try{q(b)}finally{throw e}}return q(b),a},complete:function(a){var b=this._s;if(!r(b)){var c=b._o;b._o=void 0;try{var d=p(c.complete);a=d?d.call(c,a):void 0}catch(e){try{q(b)}finally{throw e}}return q(b),a}}});var v=function(a){k(this,v,"Observable","_f")._f=i(a)};l(v.prototype,{subscribe:function(a){return new t(a,this._f)},forEach:function(a){var b=this;return new(f.Promise||e.Promise)(function(c,d){i(a);var e=b.subscribe({next:function(b){try{return a(b)}catch(c){d(c),e.unsubscribe()}},error:d,complete:c})})}}),l(v,{from:function(a){var b="function"==typeof this?this:v,c=p(j(a)[h]);if(c){var d=j(c.call(a));return d.constructor===b?d:new b(function(a){return d.subscribe(a)})}return new b(function(b){var c=!1;return g(function(){if(!c){try{if(n(a,!1,function(a){return b.next(a),c?o:void 0})===o)return}catch(d){if(c)throw d;return void b.error(d)}b.complete()}}),function(){c=!0}})},of:function(){for(var a=0,b=arguments.length,c=Array(b);b>a;)c[a]=arguments[a++];return new("function"==typeof this?this:v)(function(a){var b=!1;return g(function(){if(!b){for(var d=0;d<c.length;++d)if(a.next(c[d]),b)return;a.complete()}}),function(){b=!0}})}}),m(v.prototype,h,function(){
return this}),d(d.G,{Observable:v}),a(100)("Observable")},{100:100,128:128,23:23,3:3,33:33,39:39,40:40,42:42,6:6,68:68,7:7,93:93}],297:[function(a,b,c){var d=a(33),e=a(23),f=a(40),g=a(104),h=a(91);d(d.P+d.R,"Promise",{"finally":function(a){var b=g(this,e.Promise||f.Promise),c="function"==typeof a;return this.then(c?function(c){return h(b,a()).then(function(){return c})}:a,c?function(c){return h(b,a()).then(function(){throw c})}:a)}})},{104:104,23:23,33:33,40:40,91:91}],298:[function(a,b,c){"use strict";var d=a(33),e=a(69),f=a(90);d(d.S,"Promise",{"try":function(a){var b=e.f(this),c=f(a);return(c.e?b.reject:b.resolve)(c.v),b.promise}})},{33:33,69:69,90:90}],299:[function(a,b,c){var d=a(67),e=a(7),f=d.key,g=d.set;d.exp({defineMetadata:function(a,b,c,d){g(a,b,e(c),f(d))}})},{67:67,7:7}],300:[function(a,b,c){var d=a(67),e=a(7),f=d.key,g=d.map,h=d.store;d.exp({deleteMetadata:function(a,b){var c=arguments.length<3?void 0:f(arguments[2]),d=g(e(b),c,!1);if(void 0===d||!d["delete"](a))return!1;if(d.size)return!0;var i=h.get(b);return i["delete"](c),!!i.size||h["delete"](b)}})},{67:67,7:7}],301:[function(a,b,c){var d=a(231),e=a(10),f=a(67),g=a(7),h=a(79),i=f.keys,j=f.key,k=function(a,b){var c=i(a,b),f=h(a);if(null===f)return c;var g=k(f,b);return g.length?c.length?e(new d(c.concat(g))):g:c};f.exp({getMetadataKeys:function(a){return k(g(a),arguments.length<2?void 0:j(arguments[1]))}})},{10:10,231:231,67:67,7:7,79:79}],302:[function(a,b,c){var d=a(67),e=a(7),f=a(79),g=d.has,h=d.get,i=d.key,j=function(a,b,c){var d=g(a,b,c);if(d)return h(a,b,c);var e=f(b);return null!==e?j(a,e,c):void 0};d.exp({getMetadata:function(a,b){return j(a,e(b),arguments.length<3?void 0:i(arguments[2]))}})},{67:67,7:7,79:79}],303:[function(a,b,c){var d=a(67),e=a(7),f=d.keys,g=d.key;d.exp({getOwnMetadataKeys:function(a){return f(e(a),arguments.length<2?void 0:g(arguments[1]))}})},{67:67,7:7}],304:[function(a,b,c){var d=a(67),e=a(7),f=d.get,g=d.key;d.exp({getOwnMetadata:function(a,b){return f(a,e(b),arguments.length<3?void 0:g(arguments[2]))}})},{67:67,7:7}],305:[function(a,b,c){var d=a(67),e=a(7),f=a(79),g=d.has,h=d.key,i=function(a,b,c){var d=g(a,b,c);if(d)return!0;var e=f(b);return null!==e?i(a,e,c):!1};d.exp({hasMetadata:function(a,b){return i(a,e(b),arguments.length<3?void 0:h(arguments[2]))}})},{67:67,7:7,79:79}],306:[function(a,b,c){var d=a(67),e=a(7),f=d.has,g=d.key;d.exp({hasOwnMetadata:function(a,b){return f(a,e(b),arguments.length<3?void 0:g(arguments[2]))}})},{67:67,7:7}],307:[function(a,b,c){var d=a(67),e=a(7),f=a(3),g=d.key,h=d.set;d.exp({metadata:function(a,b){return function(c,d){h(a,b,(void 0!==d?e:f)(c),g(d))}}})},{3:3,67:67,7:7}],308:[function(a,b,c){a(97)("Set")},{97:97}],309:[function(a,b,c){a(98)("Set")},{98:98}],310:[function(a,b,c){var d=a(33);d(d.P+d.R,"Set",{toJSON:a(20)("Set")})},{20:20,33:33}],311:[function(a,b,c){"use strict";var d=a(33),e=a(106)(!0);d(d.P,"String",{at:function(a){return e(this,a)}})},{106:106,33:33}],312:[function(a,b,c){"use strict";var d=a(33),e=a(28),f=a(118),g=a(52),h=a(37),i=RegExp.prototype,j=function(a,b){this._r=a,this._s=b};a(54)(j,"RegExp String",function(){var a=this._r.exec(this._s);return{value:a,done:null===a}}),d(d.P,"String",{matchAll:function(a){if(e(this),!g(a))throw TypeError(a+" is not a regexp!");var b=String(this),c="flags"in i?String(a.flags):h.call(a),d=new RegExp(a.source,~c.indexOf("g")?c:"g"+c);return d.lastIndex=f(a.lastIndex),new j(d,b)}})},{118:118,28:28,33:33,37:37,52:52,54:54}],313:[function(a,b,c){"use strict";var d=a(33),e=a(109);d(d.P,"String",{padEnd:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0,!1)}})},{109:109,33:33}],314:[function(a,b,c){"use strict";var d=a(33),e=a(109);d(d.P,"String",{padStart:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0,!0)}})},{109:109,33:33}],315:[function(a,b,c){"use strict";a(111)("trimLeft",function(a){return function(){return a(this,1)}},"trimStart")},{111:111}],316:[function(a,b,c){"use strict";a(111)("trimRight",function(a){return function(){return a(this,2)}},"trimEnd")},{111:111}],317:[function(a,b,c){a(126)("asyncIterator")},{126:126}],318:[function(a,b,c){a(126)("observable")},{126:126}],319:[function(a,b,c){var d=a(33);d(d.S,"System",{global:a(40)})},{33:33,40:40}],320:[function(a,b,c){a(97)("WeakMap")},{97:97}],321:[function(a,b,c){a(98)("WeakMap")},{98:98}],322:[function(a,b,c){a(97)("WeakSet")},{97:97}],323:[function(a,b,c){a(98)("WeakSet")},{98:98}],324:[function(a,b,c){for(var d=a(141),e=a(81),f=a(94),g=a(40),h=a(42),i=a(58),j=a(128),k=j("iterator"),l=j("toStringTag"),m=i.Array,n={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},o=e(n),p=0;p<o.length;p++){var q,r=o[p],s=n[r],t=g[r],u=t&&t.prototype;if(u&&(u[k]||h(u,k,m),u[l]||h(u,l,r),i[r]=m,s))for(q in d)u[q]||f(u,q,d[q],!0)}},{128:128,141:141,40:40,42:42,58:58,81:81,94:94}],325:[function(a,b,c){var d=a(33),e=a(113);d(d.G+d.B,{setImmediate:e.set,clearImmediate:e.clear})},{113:113,33:33}],326:[function(a,b,c){var d=a(40),e=a(33),f=a(46),g=a(88),h=d.navigator,i=!!h&&/MSIE .\./.test(h.userAgent),j=function(a){return i?function(b,c){return a(f(g,[].slice.call(arguments,2),"function"==typeof b?b:Function(b)),c)}:a};e(e.G+e.B+e.F*i,{setTimeout:j(d.setTimeout),setInterval:j(d.setInterval)})},{33:33,40:40,46:46,88:88}],327:[function(a,b,c){a(254),a(191),a(193),a(192),a(195),a(197),a(202),a(196),a(194),a(204),a(203),a(199),a(200),a(198),a(190),a(201),a(205),a(206),a(157),a(159),a(158),a(208),a(207),a(178),a(188),a(189),a(179),a(180),a(181),a(182),a(183),a(184),a(185),a(186),a(187),a(161),a(162),a(163),a(164),a(165),a(166),a(167),a(168),a(169),a(170),a(171),a(172),a(173),a(174),a(175),a(176),a(177),a(241),a(246),a(253),a(244),a(236),a(237),a(242),a(247),a(249),a(232),a(233),a(234),a(235),a(238),a(239),a(240),a(243),a(245),a(248),a(250),a(251),a(252),a(152),a(154),a(153),a(156),a(155),a(140),a(138),a(145),a(142),a(148),a(150),a(137),a(144),a(134),a(149),a(132),a(147),a(146),a(139),a(143),a(131),a(133),a(136),a(135),a(151),a(141),a(224),a(230),a(225),a(226),a(227),a(228),a(229),a(209),a(160),a(231),a(266),a(267),a(255),a(256),a(261),a(264),a(265),a(259),a(262),a(260),a(263),a(257),a(258),a(210),a(211),a(212),a(213),a(214),a(217),a(215),a(216),a(218),a(219),a(220),a(221),a(223),a(222),a(270),a(268),a(269),a(311),a(314),a(313),a(315),a(316),a(312),a(317),a(318),a(292),a(295),a(291),a(289),a(290),a(293),a(294),a(276),a(310),a(275),a(309),a(321),a(323),a(274),a(308),a(320),a(322),a(273),a(319),a(272),a(277),a(278),a(279),a(280),a(281),a(283),a(282),a(284),a(285),a(286),a(288),a(287),a(297),a(298),a(299),a(300),a(302),a(301),a(304),a(303),a(305),a(306),a(307),a(271),a(296),a(326),a(325),a(324),b.exports=a(23)},{131:131,132:132,133:133,134:134,135:135,136:136,137:137,138:138,139:139,140:140,141:141,142:142,143:143,144:144,145:145,146:146,147:147,148:148,149:149,150:150,151:151,152:152,153:153,154:154,155:155,156:156,157:157,158:158,159:159,160:160,161:161,162:162,163:163,164:164,165:165,166:166,167:167,168:168,169:169,170:170,171:171,172:172,173:173,174:174,175:175,176:176,177:177,178:178,179:179,180:180,181:181,182:182,183:183,184:184,185:185,186:186,187:187,188:188,189:189,190:190,191:191,192:192,193:193,194:194,195:195,196:196,197:197,198:198,199:199,200:200,201:201,202:202,203:203,204:204,205:205,206:206,207:207,208:208,209:209,210:210,211:211,212:212,213:213,214:214,215:215,216:216,217:217,218:218,219:219,220:220,221:221,222:222,223:223,224:224,225:225,226:226,227:227,228:228,229:229,23:23,230:230,231:231,232:232,233:233,234:234,235:235,236:236,237:237,238:238,239:239,240:240,241:241,242:242,243:243,244:244,245:245,246:246,247:247,248:248,249:249,250:250,251:251,252:252,253:253,254:254,255:255,256:256,257:257,258:258,259:259,260:260,261:261,262:262,263:263,264:264,265:265,266:266,267:267,268:268,269:269,270:270,271:271,272:272,273:273,274:274,275:275,276:276,277:277,278:278,279:279,280:280,281:281,282:282,283:283,284:284,285:285,286:286,287:287,288:288,289:289,290:290,291:291,292:292,293:293,294:294,295:295,296:296,297:297,298:298,299:299,300:300,301:301,302:302,303:303,304:304,305:305,306:306,307:307,308:308,309:309,310:310,311:311,312:312,313:313,314:314,315:315,316:316,317:317,318:318,319:319,320:320,321:321,322:322,323:323,324:324,325:325,326:326}],328:[function(b,c,d){(function(a){!function(a){"use strict";function b(a,b,c,d){var f=b&&b.prototype instanceof e?b:e,g=Object.create(f.prototype),h=new n(d||[]);return g._invoke=j(a,c,h),g}function d(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(d){return{type:"throw",arg:d}}}function e(){}function f(){}function g(){}function h(a){["next","throw","return"].forEach(function(b){a[b]=function(a){return this._invoke(b,a)}})}function i(b){function c(a,e,f,g){var h=d(b[a],b,e);if("throw"!==h.type){var i=h.arg,j=i.value;return j&&"object"==typeof j&&s.call(j,"__await")?Promise.resolve(j.__await).then(function(a){c("next",a,f,g)},function(a){c("throw",a,f,g)}):Promise.resolve(j).then(function(a){i.value=a,f(i)},g)}g(h.arg)}function e(a,b){function d(){return new Promise(function(d,e){c(a,b,d,e)})}return f=f?f.then(d,d):d()}"object"==typeof a.process&&a.process.domain&&(c=a.process.domain.bind(c));var f;this._invoke=e}function j(a,b,c){var e=z;return function(f,g){if(e===B)throw new Error("Generator is already running");if(e===C){if("throw"===f)throw g;return p()}for(c.method=f,c.arg=g;;){var h=c.delegate;if(h){var i=k(h,c);if(i){if(i===D)continue;return i}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(e===z)throw e=C,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);e=B;var j=d(a,b,c);if("normal"===j.type){if(e=c.done?C:A,j.arg===D)continue;return{value:j.arg,done:c.done}}"throw"===j.type&&(e=C,c.method="throw",c.arg=j.arg)}}}function k(a,b){var c=a.iterator[b.method];if(c===q){if(b.delegate=null,"throw"===b.method){if(a.iterator["return"]&&(b.method="return",b.arg=q,k(a,b),"throw"===b.method))return D;b.method="throw",b.arg=new TypeError("The iterator does not provide a 'throw' method")}return D}var e=d(c,a.iterator,b.arg);if("throw"===e.type)return b.method="throw",b.arg=e.arg,b.delegate=null,D;var f=e.arg;return f?f.done?(b[a.resultName]=f.value,b.next=a.nextLoc,"return"!==b.method&&(b.method="next",b.arg=q),b.delegate=null,D):f:(b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,D)}function l(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]),2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]),this.tryEntries.push(b)}function m(a){var b=a.completion||{};b.type="normal",delete b.arg,a.completion=b}function n(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(l,this),this.reset(!0)}function o(a){if(a){var b=a[u];if(b)return b.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var c=-1,d=function e(){for(;++c<a.length;)if(s.call(a,c))return e.value=a[c],e.done=!1,e;return e.value=q,e.done=!0,e};return d.next=d}}return{next:p}}function p(){return{value:q,done:!0}}var q,r=Object.prototype,s=r.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},u=t.iterator||"@@iterator",v=t.asyncIterator||"@@asyncIterator",w=t.toStringTag||"@@toStringTag",x="object"==typeof c,y=a.regeneratorRuntime;if(y)return void(x&&(c.exports=y));y=a.regeneratorRuntime=x?c.exports:{},y.wrap=b;var z="suspendedStart",A="suspendedYield",B="executing",C="completed",D={},E={};E[u]=function(){return this};var F=Object.getPrototypeOf,G=F&&F(F(o([])));G&&G!==r&&s.call(G,u)&&(E=G);var H=g.prototype=e.prototype=Object.create(E);f.prototype=H.constructor=g,g.constructor=f,g[w]=f.displayName="GeneratorFunction",y.isGeneratorFunction=function(a){var b="function"==typeof a&&a.constructor;return b?b===f||"GeneratorFunction"===(b.displayName||b.name):!1},y.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,g):(a.__proto__=g,w in a||(a[w]="GeneratorFunction")),a.prototype=Object.create(H),a},y.awrap=function(a){return{__await:a}},h(i.prototype),i.prototype[v]=function(){return this},y.AsyncIterator=i,y.async=function(a,c,d,e){var f=new i(b(a,c,d,e));return y.isGeneratorFunction(c)?f:f.next().then(function(a){return a.done?a.value:f.next()})},h(H),H[w]="Generator",H[u]=function(){return this},H.toString=function(){return"[object Generator]"},y.keys=function(a){var b=[];for(var c in a)b.push(c);return b.reverse(),function d(){for(;b.length;){var c=b.pop();if(c in a)return d.value=c,d.done=!1,d}return d.done=!0,d}},y.values=o,n.prototype={constructor:n,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=q,this.done=!1,this.delegate=null,this.method="next",this.arg=q,this.tryEntries.forEach(m),!a)for(var b in this)"t"===b.charAt(0)&&s.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=q)},stop:function(){this.done=!0;var a=this.tryEntries[0],b=a.completion;if("throw"===b.type)throw b.arg;return this.rval},dispatchException:function(a){function b(b,d){return f.type="throw",f.arg=a,c.next=b,d&&(c.method="next",c.arg=q),!!d}if(this.done)throw a;for(var c=this,d=this.tryEntries.length-1;d>=0;--d){var e=this.tryEntries[d],f=e.completion;if("root"===e.tryLoc)return b("end");if(e.tryLoc<=this.prev){var g=s.call(e,"catchLoc"),h=s.call(e,"finallyLoc");if(g&&h){if(this.prev<e.catchLoc)return b(e.catchLoc,!0);if(this.prev<e.finallyLoc)return b(e.finallyLoc)}else if(g){if(this.prev<e.catchLoc)return b(e.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<e.finallyLoc)return b(e.finallyLoc)}}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;c>=0;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&s.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var e=d;break}}e&&("break"===a||"continue"===a)&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);var f=e?e.completion:{};return f.type=a,f.arg=b,e?(this.method="next",this.next=e.finallyLoc,D):this.complete(f)},complete:function(a,b){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&b&&(this.next=b),D},finish:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.finallyLoc===a)return this.complete(c.completion,c.afterLoc),m(c),D}},"catch":function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.tryLoc===a){var d=c.completion;if("throw"===d.type){var e=d.arg;m(c)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(a,b,c){return this.delegate={iterator:o(a),resultName:b,nextLoc:c},"next"===this.method&&(this.arg=q),D}}}("object"==typeof a?a:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,"undefined"!=typeof a?a:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])}).call(b,c(2))},function(a,b){var c;c=function(){return this}();try{c=c||Function("return this")()||(1,eval)("this")}catch(d){"object"==typeof window&&(c=window)}a.exports=c},function(a,b){!function(a){"use strict";function b(a){if("string"!=typeof a&&(a=String(a)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function c(a){return"string"!=typeof a&&(a=String(a)),a}function d(a){var b={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};return r.iterable&&(b[Symbol.iterator]=function(){return b}),b}function e(a){this.map={},a instanceof e?a.forEach(function(a,b){this.append(b,a)},this):Array.isArray(a)?a.forEach(function(a){this.append(a[0],a[1])},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function f(a){return a.bodyUsed?Promise.reject(new TypeError("Already read")):void(a.bodyUsed=!0)}function g(a){return new Promise(function(b,c){a.onload=function(){b(a.result)},a.onerror=function(){c(a.error)}})}function h(a){var b=new FileReader,c=g(b);return b.readAsArrayBuffer(a),c}function i(a){var b=new FileReader,c=g(b);return b.readAsText(a),c}function j(a){for(var b=new Uint8Array(a),c=new Array(b.length),d=0;d<b.length;d++)c[d]=String.fromCharCode(b[d]);return c.join("")}function k(a){if(a.slice)return a.slice(0);var b=new Uint8Array(a.byteLength);return b.set(new Uint8Array(a)),b.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(a){if(this._bodyInit=a,a)if("string"==typeof a)this._bodyText=a;else if(r.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(r.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else if(r.searchParams&&URLSearchParams.prototype.isPrototypeOf(a))this._bodyText=a.toString();else if(r.arrayBuffer&&r.blob&&t(a))this._bodyArrayBuffer=k(a.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!r.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(a)&&!u(a))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=k(a)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof a?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var a=f(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var a=f(this);if(a)return a;if(this._bodyBlob)return i(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(j(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(o)}),this.json=function(){return this.text().then(JSON.parse)},this}function m(a){var b=a.toUpperCase();return v.indexOf(b)>-1?b:a}function n(a,b){b=b||{};var c=b.body;if(a instanceof n){if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url,this.credentials=a.credentials,b.headers||(this.headers=new e(a.headers)),this.method=a.method,this.mode=a.mode,c||null==a._bodyInit||(c=a._bodyInit,a.bodyUsed=!0)}else this.url=String(a);if(this.credentials=b.credentials||this.credentials||"omit",(b.headers||!this.headers)&&(this.headers=new e(b.headers)),this.method=m(b.method||this.method||"GET"),this.mode=b.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&c)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(c)}function o(a){var b=new FormData;return a.trim().split("&").forEach(function(a){if(a){var c=a.split("="),d=c.shift().replace(/\+/g," "),e=c.join("=").replace(/\+/g," ");b.append(decodeURIComponent(d),decodeURIComponent(e))}}),b}function p(a){var b=new e;return a.split(/\r?\n/).forEach(function(a){var c=a.split(":"),d=c.shift().trim();if(d){var e=c.join(":").trim();b.append(d,e)}}),b}function q(a,b){b||(b={}),this.type="default",this.status="status"in b?b.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in b?b.statusText:"OK",this.headers=new e(b.headers),this.url=b.url||"",this._initBody(a)}if(!a.fetch){var r={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch(a){return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};if(r.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],t=function(a){return a&&DataView.prototype.isPrototypeOf(a)},u=ArrayBuffer.isView||function(a){return a&&s.indexOf(Object.prototype.toString.call(a))>-1};e.prototype.append=function(a,d){a=b(a),d=c(d);var e=this.map[a];this.map[a]=e?e+","+d:d},e.prototype["delete"]=function(a){delete this.map[b(a)]},e.prototype.get=function(a){return a=b(a),this.has(a)?this.map[a]:null},e.prototype.has=function(a){return this.map.hasOwnProperty(b(a))},e.prototype.set=function(a,d){this.map[b(a)]=c(d)},e.prototype.forEach=function(a,b){for(var c in this.map)this.map.hasOwnProperty(c)&&a.call(b,this.map[c],c,this)},e.prototype.keys=function(){var a=[];return this.forEach(function(b,c){a.push(c)}),d(a)},e.prototype.values=function(){var a=[];return this.forEach(function(b){a.push(b)}),d(a)},e.prototype.entries=function(){var a=[];return this.forEach(function(b,c){a.push([c,b])}),d(a)},r.iterable&&(e.prototype[Symbol.iterator]=e.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];n.prototype.clone=function(){return new n(this,{body:this._bodyInit})},l.call(n.prototype),l.call(q.prototype),q.prototype.clone=function(){return new q(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new e(this.headers),url:this.url})},q.error=function(){var a=new q(null,{status:0,statusText:""});return a.type="error",a};var w=[301,302,303,307,308];q.redirect=function(a,b){if(-1===w.indexOf(b))throw new RangeError("Invalid status code");return new q(null,{status:b,headers:{location:a}})},a.Headers=e,a.Request=n,a.Response=q,a.fetch=function(a,b){return new Promise(function(c,d){var e=new n(a,b),f=new XMLHttpRequest;f.onload=function(){var a={status:f.status,statusText:f.statusText,headers:p(f.getAllResponseHeaders()||"")};a.url="responseURL"in f?f.responseURL:a.headers.get("X-Request-URL");var b="response"in f?f.response:f.responseText;c(new q(b,a))},f.onerror=function(){d(new TypeError("Network request failed"))},f.ontimeout=function(){d(new TypeError("Network request failed"))},f.open(e.method,e.url,!0),"include"===e.credentials&&(f.withCredentials=!0),"responseType"in f&&r.blob&&(f.responseType="blob"),e.headers.forEach(function(a,b){f.setRequestHeader(b,a)}),f.send("undefined"==typeof e._bodyInit?null:e._bodyInit)})},a.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(a,b){!function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}return"function"==typeof window.CustomEvent?!1:(a.prototype=window.Event.prototype,void(window.CustomEvent=a))}()}]),define("media-polyfills",function(){}),define("../scripts/external-scripts",["media-polyfills"],function(){function a(a){var b=document.createElement("script");b.src=a,document.querySelector("body").appendChild(b)}for(var b in externalScripts)a(externalScripts[b])}),function(){function a(a,b){return a.set(b[0],b[1]),a}function b(a,b){return a.add(b),a}function c(a,b,c){var d=c.length;switch(d){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function d(a,b,c,d){for(var e=-1,f=a?a.length:0;++e<f;){var g=a[e];b(d,g,c(g),a)}return d}function e(a,b){for(var c=-1,d=a?a.length:0;++c<d&&b(a[c],c,a)!==!1;);return a}function f(a,b){for(var c=a?a.length:0;c--&&b(a[c],c,a)!==!1;);return a}function g(a,b){for(var c=-1,d=a?a.length:0;++c<d;)if(!b(a[c],c,a))return!1;return!0}function h(a,b){for(var c=-1,d=a?a.length:0,e=0,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f}function i(a,b){var c=a?a.length:0;return!!c&&r(a,b,0)>-1}function j(a,b,c){for(var d=-1,e=a?a.length:0;++d<e;)if(c(b,a[d]))return!0;return!1}function k(a,b){for(var c=-1,d=a?a.length:0,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function l(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function m(a,b,c,d){var e=-1,f=a?a.length:0;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function n(a,b,c,d){var e=a?a.length:0;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function o(a,b){for(var c=-1,d=a?a.length:0;++c<d;)if(b(a[c],c,a))return!0;return!1}function p(a,b,c){var d;return c(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d}function q(a,b,c,d){for(var e=a.length,f=c+(d?1:-1);d?f--:++f<e;)if(b(a[f],f,a))return f;return-1}function r(a,b,c){if(b!==b)return K(a,c);for(var d=c-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function s(a,b,c,d){for(var e=c-1,f=a.length;++e<f;)if(d(a[e],b))return e;return-1}function t(a,b){var c=a?a.length:0;return c?w(a,b)/c:va}function u(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function v(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function w(a,b){for(var c,d=-1,e=a.length;++d<e;){var f=b(a[d]);f!==V&&(c=c===V?f:c+f)}return c}function x(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function y(a,b){return k(b,function(b){return[b,a[b]]})}function z(a){return function(b){return a(b)}}function A(a,b){return k(b,function(b){return a[b]})}function B(a,b){return a.has(b)}function C(a,b){for(var c=-1,d=a.length;++c<d&&r(b,a[c],0)>-1;);return c}function D(a,b){for(var c=a.length;c--&&r(b,a[c],0)>-1;);return c}function E(a){return a&&a.Object===Object?a:null}function F(a,b){for(var c=a.length,d=0;c--;)a[c]===b&&d++;return d}function G(a){return xc[a]}function H(a){return yc[a]}function I(a){return"\\"+Ac[a]}function J(a,b){return null==a?V:a[b]}function K(a,b,c){for(var d=a.length,e=b+(c?1:-1);c?e--:++e<d;){var f=a[e];if(f!==f)return e}return-1}function L(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(c){}return b}function M(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}function N(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function O(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c];(g===b||g===$)&&(a[c]=$,f[e++]=c)}return f}function P(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}function Q(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=[a,a]}),c}function R(a){if(!a||!rc.test(a))return a.length;for(var b=pc.lastIndex=0;pc.test(a);)b++;return b}function S(a){return a.match(pc)}function T(a){return zc[a]}function U(E){function Eb(a){if(rh(a)&&!pl(a)&&!(a instanceof Hb)){if(a instanceof Gb)return a;if(Cj.call(a,"__wrapped__"))return lf(a)}return new Gb(a)}function Fb(){}function Gb(a,b){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=V}function Hb(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=wa,this.__views__=[]}function Ib(){var a=new Hb(this.__wrapped__);return a.__actions__=be(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=be(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=be(this.__views__),a}function Jb(){if(this.__filtered__){var a=new Hb(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function Kb(){var a=this.__wrapped__.value(),b=this.__dir__,c=pl(a),d=0>b,e=c?a.length:0,f=Pe(0,e,this.__views__),g=f.start,h=f.end,i=h-g,j=d?h:g-1,k=this.__iteratees__,l=k.length,m=0,n=$j(i,this.__takeCount__);if(!c||X>e||e==i&&n==i)return Kd(a,this.__actions__);var o=[];a:for(;i--&&n>m;){j+=b;for(var p=-1,q=a[j];++p<l;){var r=k[p],s=r.iteratee,t=r.type,u=s(q);if(t==qa)q=u;else if(!u){if(t==pa)continue a;break a}}o[m++]=q}return o}function Lb(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Mb(){this.__data__=jk?jk(null):{}}function Nb(a){return this.has(a)&&delete this.__data__[a]}function Ob(a){var b=this.__data__;if(jk){var c=b[a];return c===Z?V:c}return Cj.call(b,a)?b[a]:V}function Pb(a){var b=this.__data__;return jk?b[a]!==V:Cj.call(b,a)}function Qb(a,b){var c=this.__data__;return c[a]=jk&&b===V?Z:b,this}function Rb(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Sb(){this.__data__=[]}function Tb(a){var b=this.__data__,c=pc(b,a);if(0>c)return!1;var d=b.length-1;return c==d?b.pop():Rj.call(b,c,1),!0}function Ub(a){var b=this.__data__,c=pc(b,a);return 0>c?V:b[c][1]}function Vb(a){return pc(this.__data__,a)>-1}function Wb(a,b){var c=this.__data__,d=pc(c,a);return 0>d?c.push([a,b]):c[d][1]=b,this}function Xb(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Yb(){this.__data__={hash:new Lb,map:new(fk||Rb),string:new Lb}}function Zb(a){return Je(this,a)["delete"](a)}function $b(a){return Je(this,a).get(a)}function _b(a){return Je(this,a).has(a)}function ac(a,b){return Je(this,a).set(a,b),this}function bc(a){var b=-1,c=a?a.length:0;for(this.__data__=new Xb;++b<c;)this.add(a[b])}function cc(a){return this.__data__.set(a,Z),this}function dc(a){return this.__data__.has(a)}function ec(a){this.__data__=new Rb(a)}function fc(){this.__data__=new Rb}function gc(a){return this.__data__["delete"](a)}function hc(a){return this.__data__.get(a)}function ic(a){return this.__data__.has(a)}function jc(a,b){var c=this.__data__;return c instanceof Rb&&c.__data__.length==X&&(c=this.__data__=new Xb(c.__data__)),c.set(a,b),this}function kc(a,b,c,d){return a===V||ah(a,xj[c])&&!Cj.call(d,c)?b:a}function lc(a,b,c){(c!==V&&!ah(a[b],c)||"number"==typeof b&&c===V&&!(b in a))&&(a[b]=c)}function mc(a,b,c){var d=a[b];Cj.call(a,b)&&ah(d,c)&&(c!==V||b in a)||(a[b]=c)}function pc(a,b){for(var c=a.length;c--;)if(ah(a[c][0],b))return c;return-1}function xc(a,b,c,d){return vk(a,function(a,e,f){b(d,a,c(a),f)}),d}function yc(a,b){return a&&ce(b,ci(b),a)}function zc(a,b){for(var c=-1,d=null==a,e=b.length,f=Array(e);++c<e;)f[c]=d?V:_h(a,b[c]);return f}function Ac(a,b,c){return a===a&&(c!==V&&(a=c>=a?a:c),b!==V&&(a=a>=b?a:b)),a}function Dc(a,b,c,d,f,g,h){var i;if(d&&(i=g?d(a,f,g,h):d(a)),i!==V)return i;if(!qh(a))return a;var j=pl(a);if(j){if(i=Re(a),!b)return be(a,i)}else{var k=Oe(a),l=k==Ea||k==Fa;if(ql(a))return Rd(a,b);if(k==Ia||k==za||l&&!g){if(L(a))return g?a:{};if(i=Se(l?{}:a),!b)return de(a,yc(i,a))}else{if(!wc[k])return g?a:{};i=Te(a,k,Dc,b)}}h||(h=new ec);var m=h.get(a);if(m)return m;if(h.set(a,i),!j)var n=c?Ee(a):ci(a);return e(n||a,function(e,f){n&&(f=e,e=a[f]),mc(i,f,Dc(e,b,c,d,f,a,h))}),i}function Ec(a){var b=ci(a),c=b.length;return function(d){if(null==d)return!c;for(var e=c;e--;){var f=b[e],g=a[f],h=d[f];if(h===V&&!(f in Object(d))||!g(h))return!1}return!0}}function Gc(a){return qh(a)?Pj(a):{}}function Hc(a,b,c){if("function"!=typeof a)throw new vj(Y);return Sj(function(){a.apply(V,c)},b)}function Ic(a,b,c,d){var e=-1,f=i,g=!0,h=a.length,l=[],m=b.length;if(!h)return l;c&&(b=k(b,z(c))),d?(f=j,g=!1):b.length>=X&&(f=B,g=!1,b=new bc(b));a:for(;++e<h;){var n=a[e],o=c?c(n):n;if(n=d||0!==n?n:0,g&&o===o){for(var p=m;p--;)if(b[p]===o)continue a;l.push(n)}else f(b,o,d)||l.push(n)}return l}function Lc(a,b){var c=!0;return vk(a,function(a,d,e){return c=!!b(a,d,e)}),c}function Mc(a,b,c){for(var d=-1,e=a.length;++d<e;){var f=a[d],g=b(f);if(null!=g&&(h===V?g===g&&!Fh(g):c(g,h)))var h=g,i=f}return i}function Nc(a,b,c,d){var e=a.length;for(c=Mh(c),0>c&&(c=-c>e?0:e+c),d=d===V||d>e?e:Mh(d),0>d&&(d+=e),d=c>d?0:Nh(d);d>c;)a[c++]=b;return a}function Oc(a,b){var c=[];return vk(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function Pc(a,b,c,d,e){var f=-1,g=a.length;for(c||(c=Ve),e||(e=[]);++f<g;){var h=a[f];b>0&&c(h)?b>1?Pc(h,b-1,c,d,e):l(e,h):d||(e[e.length]=h)}return e}function Qc(a,b){return a&&xk(a,b,ci)}function Rc(a,b){return a&&yk(a,b,ci)}function Sc(a,b){
return h(b,function(b){return nh(a[b])})}function Tc(a,b){b=Ze(b,a)?[b]:Pd(b);for(var c=0,d=b.length;null!=a&&d>c;)a=a[jf(b[c++])];return c&&c==d?a:V}function Uc(a,b,c){var d=b(a);return pl(a)?d:l(d,c(a))}function Vc(a,b){return a>b}function Wc(a,b){return null!=a&&(Cj.call(a,b)||"object"==typeof a&&b in a&&null===Me(a))}function Xc(a,b){return null!=a&&b in Object(a)}function Yc(a,b,c){return a>=$j(b,c)&&a<Zj(b,c)}function Zc(a,b,c){for(var d=c?j:i,e=a[0].length,f=a.length,g=f,h=Array(f),l=1/0,m=[];g--;){var n=a[g];g&&b&&(n=k(n,z(b))),l=$j(n.length,l),h[g]=!c&&(b||e>=120&&n.length>=120)?new bc(g&&n):V}n=a[0];var o=-1,p=h[0];a:for(;++o<e&&m.length<l;){var q=n[o],r=b?b(q):q;if(q=c||0!==q?q:0,!(p?B(p,r):d(m,r,c))){for(g=f;--g;){var s=h[g];if(!(s?B(s,r):d(a[g],r,c)))continue a}p&&p.push(r),m.push(q)}}return m}function $c(a,b,c,d){return Qc(a,function(a,e,f){b(d,c(a),e,f)}),d}function _c(a,b,d){Ze(b,a)||(b=Pd(b),a=gf(a,b),b=Ef(b));var e=null==a?a:a[jf(b)];return null==e?V:c(e,a,d)}function ad(a,b,c,d,e){return a===b?!0:null==a||null==b||!qh(a)&&!rh(b)?a!==a&&b!==b:bd(a,b,ad,c,d,e)}function bd(a,b,c,d,e,f){var g=pl(a),h=pl(b),i=Aa,j=Aa;g||(i=Oe(a),i=i==za?Ia:i),h||(j=Oe(b),j=j==za?Ia:j);var k=i==Ia&&!L(a),l=j==Ia&&!L(b),m=i==j;if(m&&!k)return f||(f=new ec),g||Gh(a)?Be(a,b,c,d,e,f):Ce(a,b,i,c,d,e,f);if(!(e&ka)){var n=k&&Cj.call(a,"__wrapped__"),o=l&&Cj.call(b,"__wrapped__");if(n||o){var p=n?a.value():a,q=o?b.value():b;return f||(f=new ec),c(p,q,d,e,f)}}return m?(f||(f=new ec),De(a,b,c,d,e,f)):!1}function cd(a,b,c,d){var e=c.length,f=e,g=!d;if(null==a)return!f;for(a=Object(a);e--;){var h=c[e];if(g&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++e<f;){h=c[e];var i=h[0],j=a[i],k=h[1];if(g&&h[2]){if(j===V&&!(i in a))return!1}else{var l=new ec;if(d)var m=d(j,k,i,a,b,l);if(!(m===V?ad(k,j,d,ja|ka,l):m))return!1}}return!0}function dd(a){if(!qh(a)||af(a))return!1;var b=nh(a)||L(a)?Hj:yb;return b.test(kf(a))}function ed(a){return"function"==typeof a?a:null==a?Ti:"object"==typeof a?pl(a)?kd(a[0],a[1]):jd(a):_i(a)}function fd(a){return Yj(Object(a))}function gd(a){a=null==a?a:Object(a);var b=[];for(var c in a)b.push(c);return b}function hd(a,b){return b>a}function id(a,b){var c=-1,d=dh(a)?Array(a.length):[];return vk(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function jd(a){var b=Ke(a);return 1==b.length&&b[0][2]?df(b[0][0],b[0][1]):function(c){return c===a||cd(c,a,b)}}function kd(a,b){return Ze(a)&&cf(b)?df(jf(a),b):function(c){var d=_h(c,a);return d===V&&d===b?bi(c,a):ad(b,d,V,ja|ka)}}function ld(a,b,c,d,f){if(a!==b){if(!pl(b)&&!Gh(b))var g=di(b);e(g||b,function(e,h){if(g&&(h=e,e=b[h]),qh(e))f||(f=new ec),md(a,b,h,c,ld,d,f);else{var i=d?d(a[h],e,h+"",a,b,f):V;i===V&&(i=e),lc(a,h,i)}})}}function md(a,b,c,d,e,f,g){var h=a[c],i=b[c],j=g.get(i);if(j)return void lc(a,c,j);var k=f?f(h,i,c+"",a,b,g):V,l=k===V;l&&(k=i,pl(i)||Gh(i)?pl(h)?k=h:eh(h)?k=be(h):(l=!1,k=Dc(i,!0)):Ah(i)||bh(i)?bh(h)?k=Ph(h):!qh(h)||d&&nh(h)?(l=!1,k=Dc(i,!0)):k=h:l=!1),g.set(i,k),l&&e(k,i,d,f,g),g["delete"](i),lc(a,c,k)}function nd(a,b){var c=a.length;if(c)return b+=0>b?c:0,Xe(b,c)?a[b]:V}function od(a,b,c){var d=-1;b=k(b.length?b:[Ti],z(Ie()));var e=id(a,function(a,c,e){var f=k(b,function(b){return b(a)});return{criteria:f,index:++d,value:a}});return v(e,function(a,b){return $d(a,b,c)})}function pd(a,b){return a=Object(a),m(b,function(b,c){return c in a&&(b[c]=a[c]),b},{})}function qd(a,b){for(var c=-1,d=Fe(a),e=d.length,f={};++c<e;){var g=d[c],h=a[g];b(h,g)&&(f[g]=h)}return f}function rd(a){return function(b){return null==b?V:b[a]}}function sd(a){return function(b){return Tc(b,a)}}function td(a,b,c,d){var e=d?s:r,f=-1,g=b.length,h=a;for(a===b&&(b=be(b)),c&&(h=k(a,z(c)));++f<g;)for(var i=0,j=b[f],l=c?c(j):j;(i=e(h,l,i,d))>-1;)h!==a&&Rj.call(h,i,1),Rj.call(a,i,1);return a}function ud(a,b){for(var c=a?b.length:0,d=c-1;c--;){var e=b[c];if(c==d||e!==f){var f=e;if(Xe(e))Rj.call(a,e,1);else if(Ze(e,a))delete a[jf(e)];else{var g=Pd(e),h=gf(a,g);null!=h&&delete h[jf(Ef(g))]}}}return a}function vd(a,b){return a+Uj(ak()*(b-a+1))}function wd(a,b,c,d){for(var e=-1,f=Zj(Tj((b-a)/(c||1)),0),g=Array(f);f--;)g[d?f:++e]=a,a+=c;return g}function xd(a,b){var c="";if(!a||1>b||b>ta)return c;do b%2&&(c+=a),b=Uj(b/2),b&&(a+=a);while(b);return c}function yd(a,b,c,d){b=Ze(b,a)?[b]:Pd(b);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&&++e<f;){var i=jf(b[e]);if(qh(h)){var j=c;if(e!=g){var k=h[i];j=d?d(k,i,h):V,j===V&&(j=null==k?Xe(b[e+1])?[]:{}:k)}mc(h,i,j)}h=h[i]}return a}function zd(a,b,c){var d=-1,e=a.length;0>b&&(b=-b>e?0:e+b),c=c>e?e:c,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Array(e);++d<e;)f[d]=a[d+b];return f}function Ad(a,b){var c;return vk(a,function(a,d,e){return c=b(a,d,e),!c}),!!c}function Bd(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&ya>=e){for(;e>d;){var f=d+e>>>1,g=a[f];null!==g&&!Fh(g)&&(c?b>=g:b>g)?d=f+1:e=f}return e}return Cd(a,b,Ti,c)}function Cd(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,g=b!==b,h=null===b,i=Fh(b),j=b===V;f>e;){var k=Uj((e+f)/2),l=c(a[k]),m=l!==V,n=null===l,o=l===l,p=Fh(l);if(g)var q=d||o;else q=j?o&&(d||m):h?o&&m&&(d||!n):i?o&&m&&!n&&(d||!p):n||p?!1:d?b>=l:b>l;q?e=k+1:f=k}return $j(f,xa)}function Dd(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c],h=b?b(g):g;if(!c||!ah(h,i)){var i=h;f[e++]=0===g?0:g}}return f}function Ed(a){return"number"==typeof a?a:Fh(a)?va:+a}function Fd(a){if("string"==typeof a)return a;if(Fh(a))return uk?uk.call(a):"";var b=a+"";return"0"==b&&1/a==-sa?"-0":b}function Gd(a,b,c){var d=-1,e=i,f=a.length,g=!0,h=[],k=h;if(c)g=!1,e=j;else if(f>=X){var l=b?null:Ak(a);if(l)return P(l);g=!1,e=B,k=new bc}else k=b?[]:h;a:for(;++d<f;){var m=a[d],n=b?b(m):m;if(m=c||0!==m?m:0,g&&n===n){for(var o=k.length;o--;)if(k[o]===n)continue a;b&&k.push(n),h.push(m)}else e(k,n,c)||(k!==h&&k.push(n),h.push(m))}return h}function Hd(a,b){b=Ze(b,a)?[b]:Pd(b),a=gf(a,b);var c=jf(Ef(b));return!(null!=a&&Wc(a,c))||delete a[c]}function Id(a,b,c,d){return yd(a,b,c(Tc(a,b)),d)}function Jd(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?zd(a,d?0:f,d?f+1:e):zd(a,d?f+1:0,d?e:f)}function Kd(a,b){var c=a;return c instanceof Hb&&(c=c.value()),m(b,function(a,b){return b.func.apply(b.thisArg,l([a],b.args))},c)}function Ld(a,b,c){for(var d=-1,e=a.length;++d<e;)var f=f?l(Ic(f,a[d],b,c),Ic(a[d],f,b,c)):a[d];return f&&f.length?Gd(f,b,c):[]}function Md(a,b,c){for(var d=-1,e=a.length,f=b.length,g={};++d<e;){var h=f>d?b[d]:V;c(g,a[d],h)}return g}function Nd(a){return eh(a)?a:[]}function Od(a){return"function"==typeof a?a:Ti}function Pd(a){return pl(a)?a:Gk(a)}function Qd(a,b,c){var d=a.length;return c=c===V?d:c,!b&&c>=d?a:zd(a,b,c)}function Rd(a,b){if(b)return a.slice();var c=new a.constructor(a.length);return a.copy(c),c}function Sd(a){var b=new a.constructor(a.byteLength);return new Lj(b).set(new Lj(a)),b}function Td(a,b){var c=b?Sd(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.byteLength)}function Ud(b,c,d){var e=c?d(N(b),!0):N(b);return m(e,a,new b.constructor)}function Vd(a){var b=new a.constructor(a.source,ub.exec(a));return b.lastIndex=a.lastIndex,b}function Wd(a,c,d){var e=c?d(P(a),!0):P(a);return m(e,b,new a.constructor)}function Xd(a){return tk?Object(tk.call(a)):{}}function Yd(a,b){var c=b?Sd(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.length)}function Zd(a,b){if(a!==b){var c=a!==V,d=null===a,e=a===a,f=Fh(a),g=b!==V,h=null===b,i=b===b,j=Fh(b);if(!h&&!j&&!f&&a>b||f&&g&&i&&!h&&!j||d&&g&&i||!c&&i||!e)return 1;if(!d&&!f&&!j&&b>a||j&&c&&e&&!d&&!f||h&&c&&e||!g&&e||!i)return-1}return 0}function $d(a,b,c){for(var d=-1,e=a.criteria,f=b.criteria,g=e.length,h=c.length;++d<g;){var i=Zd(e[d],f[d]);if(i){if(d>=h)return i;var j=c[d];return i*("desc"==j?-1:1)}}return a.index-b.index}function _d(a,b,c,d){for(var e=-1,f=a.length,g=c.length,h=-1,i=b.length,j=Zj(f-g,0),k=Array(i+j),l=!d;++h<i;)k[h]=b[h];for(;++e<g;)(l||f>e)&&(k[c[e]]=a[e]);for(;j--;)k[h++]=a[e++];return k}function ae(a,b,c,d){for(var e=-1,f=a.length,g=-1,h=c.length,i=-1,j=b.length,k=Zj(f-h,0),l=Array(k+j),m=!d;++e<k;)l[e]=a[e];for(var n=e;++i<j;)l[n+i]=b[i];for(;++g<h;)(m||f>e)&&(l[n+c[g]]=a[e++]);return l}function be(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}function ce(a,b,c,d){c||(c={});for(var e=-1,f=b.length;++e<f;){var g=b[e],h=d?d(c[g],a[g],g,c,a):a[g];mc(c,g,h)}return c}function de(a,b){return ce(a,Ne(a),b)}function ee(a,b){return function(c,e){var f=pl(c)?d:xc,g=b?b():{};return f(c,a,Ie(e),g)}}function fe(a){return Sg(function(b,c){var d=-1,e=c.length,f=e>1?c[e-1]:V,g=e>2?c[2]:V;for(f=a.length>3&&"function"==typeof f?(e--,f):V,g&&Ye(c[0],c[1],g)&&(f=3>e?V:f,e=1),b=Object(b);++d<e;){var h=c[d];h&&a(b,h,d,f)}return b})}function ge(a,b){return function(c,d){if(null==c)return c;if(!dh(c))return a(c,d);for(var e=c.length,f=b?e:-1,g=Object(c);(b?f--:++f<e)&&d(g[f],f,g)!==!1;);return c}}function he(a){return function(b,c,d){for(var e=-1,f=Object(b),g=d(b),h=g.length;h--;){var i=g[a?h:++e];if(c(f[i],i,f)===!1)break}return b}}function ie(a,b,c){function d(){var b=this&&this!==Jc&&this instanceof d?f:a;return b.apply(e?c:this,arguments)}var e=b&_,f=le(a);return d}function je(a){return function(b){b=Rh(b);var c=rc.test(b)?S(b):V,d=c?c[0]:b.charAt(0),e=c?Qd(c,1).join(""):b.slice(1);return d[a]()+e}}function ke(a){return function(b){return m(Pi(vi(b).replace(nc,"")),a,"")}}function le(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=Gc(a.prototype),d=a.apply(c,b);return qh(d)?d:c}}function me(a,b,d){function e(){for(var g=arguments.length,h=Array(g),i=g,j=He(e);i--;)h[i]=arguments[i];var k=3>g&&h[0]!==j&&h[g-1]!==j?[]:O(h,j);if(g-=k.length,d>g)return xe(a,b,pe,e.placeholder,V,h,k,V,V,d-g);var l=this&&this!==Jc&&this instanceof e?f:a;return c(l,this,h)}var f=le(a);return e}function ne(a){return function(b,c,d){var e=Object(b);if(c=Ie(c,3),!dh(b))var f=ci(b);var g=a(f||b,function(a,b){return f&&(b=a,a=e[b]),c(a,b,e)},d);return g>-1?b[f?f[g]:g]:V}}function oe(a){return Sg(function(b){b=Pc(b,1);var c=b.length,d=c,e=Gb.prototype.thru;for(a&&b.reverse();d--;){var f=b[d];if("function"!=typeof f)throw new vj(Y);if(e&&!g&&"wrapper"==Ge(f))var g=new Gb([],!0)}for(d=g?d:c;++d<c;){f=b[d];var h=Ge(f),i="wrapper"==h?Bk(f):V;g=i&&_e(i[0])&&i[1]==(ga|ca|ea|ha)&&!i[4].length&&1==i[9]?g[Ge(i[0])].apply(g,i[3]):1==f.length&&_e(f)?g[h]():g.thru(f)}return function(){var a=arguments,d=a[0];if(g&&1==a.length&&pl(d)&&d.length>=X)return g.plant(d).value();for(var e=0,f=c?b[e].apply(this,a):d;++e<c;)f=b[e].call(this,f);return f}})}function pe(a,b,c,d,e,f,g,h,i,j){function k(){for(var r=arguments.length,s=Array(r),t=r;t--;)s[t]=arguments[t];if(o)var u=He(k),v=F(s,u);if(d&&(s=_d(s,d,e,o)),f&&(s=ae(s,f,g,o)),r-=v,o&&j>r){var w=O(s,u);return xe(a,b,pe,k.placeholder,c,s,w,h,i,j-r)}var x=m?c:this,y=n?x[a]:a;return r=s.length,h?s=hf(s,h):p&&r>1&&s.reverse(),l&&r>i&&(s.length=i),this&&this!==Jc&&this instanceof k&&(y=q||le(y)),y.apply(x,s)}var l=b&ga,m=b&_,n=b&aa,o=b&(ca|da),p=b&ia,q=n?V:le(a);return k}function qe(a,b){return function(c,d){return $c(c,a,b(d),{})}}function re(a){return function(b,c){var d;if(b===V&&c===V)return 0;if(b!==V&&(d=b),c!==V){if(d===V)return c;"string"==typeof b||"string"==typeof c?(b=Fd(b),c=Fd(c)):(b=Ed(b),c=Ed(c)),d=a(b,c)}return d}}function se(a){return Sg(function(b){return b=1==b.length&&pl(b[0])?k(b[0],z(Ie())):k(Pc(b,1,We),z(Ie())),Sg(function(d){var e=this;return a(b,function(a){return c(a,e,d)})})})}function te(a,b){b=b===V?" ":Fd(b);var c=b.length;if(2>c)return c?xd(b,a):b;var d=xd(b,Tj(a/R(b)));return rc.test(b)?Qd(S(d),0,a).join(""):d.slice(0,a)}function ue(a,b,d,e){function f(){for(var b=-1,i=arguments.length,j=-1,k=e.length,l=Array(k+i),m=this&&this!==Jc&&this instanceof f?h:a;++j<k;)l[j]=e[j];for(;i--;)l[j++]=arguments[++b];return c(m,g?d:this,l)}var g=b&_,h=le(a);return f}function ve(a){return function(b,c,d){return d&&"number"!=typeof d&&Ye(b,c,d)&&(c=d=V),b=Oh(b),b=b===b?b:0,c===V?(c=b,b=0):c=Oh(c)||0,d=d===V?c>b?1:-1:Oh(d)||0,wd(b,c,d,a)}}function we(a){return function(b,c){return("string"!=typeof b||"string"!=typeof c)&&(b=Oh(b),c=Oh(c)),a(b,c)}}function xe(a,b,c,d,e,f,g,h,i,j){var k=b&ca,l=k?g:V,m=k?V:g,n=k?f:V,o=k?V:f;b|=k?ea:fa,b&=~(k?fa:ea),b&ba||(b&=~(_|aa));var p=[a,b,e,n,l,o,m,h,i,j],q=c.apply(V,p);return _e(a)&&Fk(q,p),q.placeholder=d,q}function ye(a){var b=tj[a];return function(a,c){if(a=Oh(a),c=$j(Mh(c),292)){var d=(Rh(a)+"e").split("e"),e=b(d[0]+"e"+(+d[1]+c));return d=(Rh(e)+"e").split("e"),+(d[0]+"e"+(+d[1]-c))}return b(a)}}function ze(a){return function(b){var c=Oe(b);return c==Ga?N(b):c==La?Q(b):y(b,a(b))}}function Ae(a,b,c,d,e,f,g,h){var i=b&aa;if(!i&&"function"!=typeof a)throw new vj(Y);var j=d?d.length:0;if(j||(b&=~(ea|fa),d=e=V),g=g===V?g:Zj(Mh(g),0),h=h===V?h:Mh(h),j-=e?e.length:0,b&fa){var k=d,l=e;d=e=V}var m=i?V:Bk(a),n=[a,b,c,d,e,k,l,f,g,h];if(m&&ef(n,m),a=n[0],b=n[1],c=n[2],d=n[3],e=n[4],h=n[9]=null==n[9]?i?0:a.length:Zj(n[9]-j,0),!h&&b&(ca|da)&&(b&=~(ca|da)),b&&b!=_)o=b==ca||b==da?me(a,b,h):b!=ea&&b!=(_|ea)||e.length?pe.apply(V,n):ue(a,b,c,d);else var o=ie(a,b,c);var p=m?zk:Fk;return p(o,n)}function Be(a,b,c,d,e,f){var g=e&ka,h=a.length,i=b.length;if(h!=i&&!(g&&i>h))return!1;var j=f.get(a);if(j)return j==b;var k=-1,l=!0,m=e&ja?new bc:V;for(f.set(a,b);++k<h;){var n=a[k],p=b[k];if(d)var q=g?d(p,n,k,b,a,f):d(n,p,k,a,b,f);if(q!==V){if(q)continue;l=!1;break}if(m){if(!o(b,function(a,b){return m.has(b)||n!==a&&!c(n,a,d,e,f)?void 0:m.add(b)})){l=!1;break}}else if(n!==p&&!c(n,p,d,e,f)){l=!1;break}}return f["delete"](a),l}function Ce(a,b,c,d,e,f,g){switch(c){case Ra:if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)return!1;a=a.buffer,b=b.buffer;case Qa:return a.byteLength==b.byteLength&&d(new Lj(a),new Lj(b))?!0:!1;case Ba:case Ca:return+a==+b;case Da:return a.name==b.name&&a.message==b.message;case Ha:return a!=+a?b!=+b:a==+b;case Ka:case Ma:return a==b+"";case Ga:var h=N;case La:var i=f&ka;if(h||(h=P),a.size!=b.size&&!i)return!1;var j=g.get(a);return j?j==b:(f|=ja,g.set(a,b),Be(h(a),h(b),d,e,f,g));case Na:if(tk)return tk.call(a)==tk.call(b)}return!1}function De(a,b,c,d,e,f){var g=e&ka,h=ci(a),i=h.length,j=ci(b),k=j.length;if(i!=k&&!g)return!1;for(var l=i;l--;){var m=h[l];if(!(g?m in b:Wc(b,m)))return!1}var n=f.get(a);if(n)return n==b;var o=!0;f.set(a,b);for(var p=g;++l<i;){m=h[l];var q=a[m],r=b[m];if(d)var s=g?d(r,q,m,b,a,f):d(q,r,m,a,b,f);if(!(s===V?q===r||c(q,r,d,e,f):s)){o=!1;break}p||(p="constructor"==m)}if(o&&!p){var t=a.constructor,u=b.constructor;t!=u&&"constructor"in a&&"constructor"in b&&!("function"==typeof t&&t instanceof t&&"function"==typeof u&&u instanceof u)&&(o=!1)}return f["delete"](a),o}function Ee(a){return Uc(a,ci,Ne)}function Fe(a){return Uc(a,di,Dk)}function Ge(a){for(var b=a.name+"",c=mk[b],d=Cj.call(mk,b)?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function He(a){var b=Cj.call(Eb,"placeholder")?Eb:a;return b.placeholder}function Ie(){var a=Eb.iteratee||Ui;return a=a===Ui?ed:a,arguments.length?a(arguments[0],arguments[1]):a}function Je(a,b){var c=a.__data__;return $e(b)?c["string"==typeof b?"string":"hash"]:c.map}function Ke(a){for(var b=ci(a),c=b.length;c--;){var d=b[c],e=a[d];b[c]=[d,e,cf(e)]}return b}function Le(a,b){var c=J(a,b);return dd(c)?c:V}function Me(a){return Vj(Object(a))}function Ne(a){return Nj(Object(a))}function Oe(a){return Fj.call(a)}function Pe(a,b,c){for(var d=-1,e=c.length;++d<e;){var f=c[d],g=f.size;switch(f.type){case"drop":a+=g;break;case"dropRight":b-=g;break;case"take":b=$j(b,a+g);break;case"takeRight":a=Zj(a,b-g)}}return{start:a,end:b}}function Qe(a,b,c){b=Ze(b,a)?[b]:Pd(b);for(var d,e=-1,f=b.length;++e<f;){var g=jf(b[e]);if(!(d=null!=a&&c(a,g)))break;a=a[g]}if(d)return d;var f=a?a.length:0;return!!f&&ph(f)&&Xe(g,f)&&(pl(a)||Eh(a)||bh(a))}function Re(a){var b=a.length,c=a.constructor(b);return b&&"string"==typeof a[0]&&Cj.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function Se(a){return"function"!=typeof a.constructor||bf(a)?{}:Gc(Me(a))}function Te(a,b,c,d){var e=a.constructor;switch(b){case Qa:return Sd(a);case Ba:case Ca:return new e(+a);case Ra:return Td(a,d);case Sa:case Ta:case Ua:case Va:case Wa:case Xa:case Ya:case Za:case $a:return Yd(a,d);case Ga:return Ud(a,d,c);case Ha:case Ma:return new e(a);case Ka:return Vd(a);case La:return Wd(a,d,c);case Na:return Xd(a)}}function Ue(a){var b=a?a.length:V;return ph(b)&&(pl(a)||Eh(a)||bh(a))?x(b,String):null}function Ve(a){return pl(a)||bh(a)}function We(a){return pl(a)&&!(2==a.length&&!nh(a[0]))}function Xe(a,b){return b=null==b?ta:b,!!b&&("number"==typeof a||Ab.test(a))&&a>-1&&a%1==0&&b>a}function Ye(a,b,c){if(!qh(c))return!1;var d=typeof b;return("number"==d?dh(c)&&Xe(b,c.length):"string"==d&&b in c)?ah(c[b],a):!1}function Ze(a,b){if(pl(a))return!1;var c=typeof a;return"number"==c||"symbol"==c||"boolean"==c||null==a||Fh(a)?!0:kb.test(a)||!jb.test(a)||null!=b&&a in Object(b)}function $e(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}function _e(a){var b=Ge(a),c=Eb[b];if("function"!=typeof c||!(b in Hb.prototype))return!1;if(a===c)return!0;var d=Bk(c);return!!d&&a===d[0]}function af(a){return!!Aj&&Aj in a}function bf(a){var b=a&&a.constructor,c="function"==typeof b&&b.prototype||xj;return a===c}function cf(a){return a===a&&!qh(a)}function df(a,b){return function(c){return null==c?!1:c[a]===b&&(b!==V||a in Object(c))}}function ef(a,b){var c=a[1],d=b[1],e=c|d,f=(_|aa|ga)>e,g=d==ga&&c==ca||d==ga&&c==ha&&a[7].length<=b[8]||d==(ga|ha)&&b[7].length<=b[8]&&c==ca;if(!f&&!g)return a;d&_&&(a[2]=b[2],e|=c&_?0:ba);var h=b[3];if(h){var i=a[3];a[3]=i?_d(i,h,b[4]):h,a[4]=i?O(a[3],$):b[4]}return h=b[5],h&&(i=a[5],a[5]=i?ae(i,h,b[6]):h,a[6]=i?O(a[5],$):b[6]),h=b[7],h&&(a[7]=h),d&ga&&(a[8]=null==a[8]?b[8]:$j(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=e,a}function ff(a,b,c,d,e,f){return qh(a)&&qh(b)&&ld(a,b,V,ff,f.set(b,a)),a}function gf(a,b){return 1==b.length?a:Tc(a,zd(b,0,-1))}function hf(a,b){for(var c=a.length,d=$j(b.length,c),e=be(a);d--;){var f=b[d];a[d]=Xe(f,c)?e[f]:V}return a}function jf(a){if("string"==typeof a||Fh(a))return a;var b=a+"";return"0"==b&&1/a==-sa?"-0":b}function kf(a){if(null!=a){try{return Bj.call(a)}catch(b){}try{return a+""}catch(b){}}return""}function lf(a){if(a instanceof Hb)return a.clone();var b=new Gb(a.__wrapped__,a.__chain__);return b.__actions__=be(a.__actions__),b.__index__=a.__index__,b.__values__=a.__values__,b}function mf(a,b,c){b=(c?Ye(a,b,c):b===V)?1:Zj(Mh(b),0);var d=a?a.length:0;if(!d||1>b)return[];for(var e=0,f=0,g=Array(Tj(d/b));d>e;)g[f++]=zd(a,e,e+=b);return g}function nf(a){for(var b=-1,c=a?a.length:0,d=0,e=[];++b<c;){var f=a[b];f&&(e[d++]=f)}return e}function of(){for(var a=arguments.length,b=Array(a?a-1:0),c=arguments[0],d=a;d--;)b[d-1]=arguments[d];return a?l(pl(c)?be(c):[c],Pc(b,1)):[]}function pf(a,b,c){var d=a?a.length:0;return d?(b=c||b===V?1:Mh(b),zd(a,0>b?0:b,d)):[]}function qf(a,b,c){var d=a?a.length:0;return d?(b=c||b===V?1:Mh(b),b=d-b,zd(a,0,0>b?0:b)):[]}function rf(a,b){return a&&a.length?Jd(a,Ie(b,3),!0,!0):[]}function sf(a,b){return a&&a.length?Jd(a,Ie(b,3),!0):[]}function tf(a,b,c,d){var e=a?a.length:0;return e?(c&&"number"!=typeof c&&Ye(a,b,c)&&(c=0,d=e),Nc(a,b,c,d)):[]}function uf(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=null==c?0:Mh(c);return 0>e&&(e=Zj(d+e,0)),q(a,Ie(b,3),e)}function vf(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d-1;return c!==V&&(e=Mh(c),e=0>c?Zj(d+e,0):$j(e,d-1)),q(a,Ie(b,3),e,!0)}function wf(a){var b=a?a.length:0;return b?Pc(a,1):[]}function xf(a){var b=a?a.length:0;return b?Pc(a,sa):[]}function yf(a,b){var c=a?a.length:0;return c?(b=b===V?1:Mh(b),Pc(a,b)):[]}function zf(a){for(var b=-1,c=a?a.length:0,d={};++b<c;){var e=a[b];d[e[0]]=e[1]}return d}function Af(a){return a&&a.length?a[0]:V}function Bf(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=null==c?0:Mh(c);return 0>e&&(e=Zj(d+e,0)),r(a,b,e)}function Cf(a){return qf(a,1)}function Df(a,b){return a?Xj.call(a,b):""}function Ef(a){var b=a?a.length:0;return b?a[b-1]:V}function Ff(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d;if(c!==V&&(e=Mh(c),e=(0>e?Zj(d+e,0):$j(e,d-1))+1),b!==b)return K(a,e-1,!0);for(;e--;)if(a[e]===b)return e;return-1}function Gf(a,b){return a&&a.length?nd(a,Mh(b)):V}function Hf(a,b){return a&&a.length&&b&&b.length?td(a,b):a}function If(a,b,c){return a&&a.length&&b&&b.length?td(a,b,Ie(c)):a}function Jf(a,b,c){return a&&a.length&&b&&b.length?td(a,b,V,c):a}function Kf(a,b){var c=[];if(!a||!a.length)return c;var d=-1,e=[],f=a.length;for(b=Ie(b,3);++d<f;){var g=a[d];b(g,d,a)&&(c.push(g),e.push(d))}return ud(a,e),c}function Lf(a){return a?ck.call(a):a}function Mf(a,b,c){var d=a?a.length:0;return d?(c&&"number"!=typeof c&&Ye(a,b,c)?(b=0,c=d):(b=null==b?0:Mh(b),c=c===V?d:Mh(c)),zd(a,b,c)):[]}function Nf(a,b){return Bd(a,b)}function Of(a,b,c){return Cd(a,b,Ie(c))}function Pf(a,b){var c=a?a.length:0;if(c){var d=Bd(a,b);if(c>d&&ah(a[d],b))return d}return-1}function Qf(a,b){return Bd(a,b,!0)}function Rf(a,b,c){return Cd(a,b,Ie(c),!0)}function Sf(a,b){var c=a?a.length:0;if(c){var d=Bd(a,b,!0)-1;if(ah(a[d],b))return d}return-1}function Tf(a){return a&&a.length?Dd(a):[]}function Uf(a,b){return a&&a.length?Dd(a,Ie(b)):[]}function Vf(a){return pf(a,1)}function Wf(a,b,c){return a&&a.length?(b=c||b===V?1:Mh(b),zd(a,0,0>b?0:b)):[]}function Xf(a,b,c){var d=a?a.length:0;return d?(b=c||b===V?1:Mh(b),b=d-b,zd(a,0>b?0:b,d)):[]}function Yf(a,b){return a&&a.length?Jd(a,Ie(b,3),!1,!0):[]}function Zf(a,b){return a&&a.length?Jd(a,Ie(b,3)):[]}function $f(a){return a&&a.length?Gd(a):[]}function _f(a,b){return a&&a.length?Gd(a,Ie(b)):[]}function ag(a,b){return a&&a.length?Gd(a,V,b):[]}function bg(a){if(!a||!a.length)return[];var b=0;return a=h(a,function(a){return eh(a)?(b=Zj(a.length,b),!0):void 0}),x(b,function(b){return k(a,rd(b))})}function cg(a,b){if(!a||!a.length)return[];var d=bg(a);return null==b?d:k(d,function(a){return c(b,V,a)})}function dg(a,b){return Md(a||[],b||[],mc)}function eg(a,b){return Md(a||[],b||[],yd)}function fg(a){var b=Eb(a);return b.__chain__=!0,b}function gg(a,b){return b(a),a}function hg(a,b){return b(a)}function ig(){return fg(this)}function jg(){return new Gb(this.value(),this.__chain__)}function kg(){this.__values__===V&&(this.__values__=Kh(this.value()));var a=this.__index__>=this.__values__.length,b=a?V:this.__values__[this.__index__++];return{done:a,value:b}}function lg(){return this}function mg(a){for(var b,c=this;c instanceof Fb;){var d=lf(c);d.__index__=0,d.__values__=V,b?e.__wrapped__=d:b=d;var e=d;c=c.__wrapped__}return e.__wrapped__=a,b}function ng(){var a=this.__wrapped__;if(a instanceof Hb){var b=a;return this.__actions__.length&&(b=new Hb(this)),b=b.reverse(),b.__actions__.push({func:hg,args:[Lf],thisArg:V}),new Gb(b,this.__chain__)}return this.thru(Lf)}function og(){return Kd(this.__wrapped__,this.__actions__)}function pg(a,b,c){var d=pl(a)?g:Lc;return c&&Ye(a,b,c)&&(b=V),d(a,Ie(b,3))}function qg(a,b){var c=pl(a)?h:Oc;return c(a,Ie(b,3))}function rg(a,b){return Pc(xg(a,b),1)}function sg(a,b){return Pc(xg(a,b),sa)}function tg(a,b,c){return c=c===V?1:Mh(c),Pc(xg(a,b),c)}function ug(a,b){var c=pl(a)?e:vk;return c(a,Ie(b,3))}function vg(a,b){var c=pl(a)?f:wk;return c(a,Ie(b,3))}function wg(a,b,c,d){a=dh(a)?a:pi(a),c=c&&!d?Mh(c):0;var e=a.length;return 0>c&&(c=Zj(e+c,0)),Eh(a)?e>=c&&a.indexOf(b,c)>-1:!!e&&r(a,b,c)>-1}function xg(a,b){var c=pl(a)?k:id;return c(a,Ie(b,3))}function yg(a,b,c,d){return null==a?[]:(pl(b)||(b=null==b?[]:[b]),c=d?V:c,pl(c)||(c=null==c?[]:[c]),od(a,b,c))}function zg(a,b,c){var d=pl(a)?m:u,e=arguments.length<3;return d(a,Ie(b,4),c,e,vk)}function Ag(a,b,c){var d=pl(a)?n:u,e=arguments.length<3;return d(a,Ie(b,4),c,e,wk)}function Bg(a,b){var c=pl(a)?h:Oc;return b=Ie(b,3),c(a,function(a,c,d){return!b(a,c,d)})}function Cg(a){var b=dh(a)?a:pi(a),c=b.length;return c>0?b[vd(0,c-1)]:V}function Dg(a,b,c){var d=-1,e=Kh(a),f=e.length,g=f-1;for(b=(c?Ye(a,b,c):b===V)?1:Ac(Mh(b),0,f);++d<b;){var h=vd(d,g),i=e[h];e[h]=e[d],e[d]=i}return e.length=b,e}function Eg(a){return Dg(a,wa)}function Fg(a){if(null==a)return 0;if(dh(a)){var b=a.length;return b&&Eh(a)?R(a):b}if(rh(a)){var c=Oe(a);if(c==Ga||c==La)return a.size}return ci(a).length}function Gg(a,b,c){var d=pl(a)?o:Ad;return c&&Ye(a,b,c)&&(b=V),d(a,Ie(b,3))}function Hg(){return rj.now()}function Ig(a,b){if("function"!=typeof b)throw new vj(Y);return a=Mh(a),function(){return--a<1?b.apply(this,arguments):void 0}}function Jg(a,b,c){return b=c?V:b,b=a&&null==b?a.length:b,Ae(a,ga,V,V,V,V,b)}function Kg(a,b){var c;if("function"!=typeof b)throw new vj(Y);return a=Mh(a),function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=V),c}}function Lg(a,b,c){b=c?V:b;var d=Ae(a,ca,V,V,V,V,V,b);return d.placeholder=Lg.placeholder,d}function Mg(a,b,c){b=c?V:b;var d=Ae(a,da,V,V,V,V,V,b);return d.placeholder=Mg.placeholder,d}function Ng(a,b,c){function d(b){var c=m,d=n;return m=n=V,s=b,p=a.apply(d,c)}function e(a){return s=a,q=Sj(h,b),t?d(a):p}function f(a){var c=a-r,d=a-s,e=b-c;return u?$j(e,o-d):e}function g(a){var c=a-r,d=a-s;return r===V||c>=b||0>c||u&&d>=o}function h(){var a=Hg();return g(a)?i(a):void(q=Sj(h,f(a)))}function i(a){return q=V,v&&m?d(a):(m=n=V,p)}function j(){s=0,m=r=n=q=V}function k(){return q===V?p:i(Hg())}function l(){var a=Hg(),c=g(a);if(m=arguments,n=this,r=a,c){if(q===V)return e(r);if(u)return q=Sj(h,b),d(r)}return q===V&&(q=Sj(h,b)),p}var m,n,o,p,q,r,s=0,t=!1,u=!1,v=!0;if("function"!=typeof a)throw new vj(Y);return b=Oh(b)||0,qh(c)&&(t=!!c.leading,u="maxWait"in c,o=u?Zj(Oh(c.maxWait)||0,b):o,v="trailing"in c?!!c.trailing:v),l.cancel=j,l.flush=k,l}function Og(a){return Ae(a,ia)}function Pg(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new vj(Y);var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g),g};return c.cache=new(Pg.Cache||Xb),c}function Qg(a){if("function"!=typeof a)throw new vj(Y);return function(){return!a.apply(this,arguments)}}function Rg(a){return Kg(2,a)}function Sg(a,b){if("function"!=typeof a)throw new vj(Y);return b=Zj(b===V?a.length-1:Mh(b),0),function(){for(var d=arguments,e=-1,f=Zj(d.length-b,0),g=Array(f);++e<f;)g[e]=d[b+e];switch(b){case 0:return a.call(this,g);case 1:return a.call(this,d[0],g);case 2:return a.call(this,d[0],d[1],g)}var h=Array(b+1);for(e=-1;++e<b;)h[e]=d[e];return h[b]=g,c(a,this,h)}}function Tg(a,b){if("function"!=typeof a)throw new vj(Y);return b=b===V?0:Zj(Mh(b),0),Sg(function(d){var e=d[b],f=Qd(d,0,b);return e&&l(f,e),c(a,this,f)})}function Ug(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new vj(Y);return qh(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),Ng(a,b,{leading:d,maxWait:b,trailing:e})}function Vg(a){return Jg(a,1)}function Wg(a,b){return b=null==b?Ti:b,kl(b,a)}function Xg(){if(!arguments.length)return[];var a=arguments[0];return pl(a)?a:[a]}function Yg(a){return Dc(a,!1,!0)}function Zg(a,b){return Dc(a,!1,!0,b)}function $g(a){return Dc(a,!0,!0)}function _g(a,b){return Dc(a,!0,!0,b)}function ah(a,b){return a===b||a!==a&&b!==b}function bh(a){return eh(a)&&Cj.call(a,"callee")&&(!Qj.call(a,"callee")||Fj.call(a)==za)}function ch(a){return rh(a)&&Fj.call(a)==Qa}function dh(a){return null!=a&&ph(Ck(a))&&!nh(a)}function eh(a){return rh(a)&&dh(a)}function fh(a){return a===!0||a===!1||rh(a)&&Fj.call(a)==Ba}function gh(a){return rh(a)&&Fj.call(a)==Ca}function hh(a){return!!a&&1===a.nodeType&&rh(a)&&!Ah(a)}function ih(a){if(dh(a)&&(pl(a)||Eh(a)||nh(a.splice)||bh(a)||ql(a)))return!a.length;if(rh(a)){var b=Oe(a);if(b==Ga||b==La)return!a.size}for(var c in a)if(Cj.call(a,c))return!1;return!(lk&&ci(a).length)}function jh(a,b){return ad(a,b)}function kh(a,b,c){c="function"==typeof c?c:V;var d=c?c(a,b):V;return d===V?ad(a,b,c):!!d}function lh(a){return rh(a)?Fj.call(a)==Da||"string"==typeof a.message&&"string"==typeof a.name:!1}function mh(a){return"number"==typeof a&&Wj(a)}function nh(a){var b=qh(a)?Fj.call(a):"";return b==Ea||b==Fa}function oh(a){return"number"==typeof a&&a==Mh(a)}function ph(a){return"number"==typeof a&&a>-1&&a%1==0&&ta>=a}function qh(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function rh(a){return!!a&&"object"==typeof a}function sh(a){return rh(a)&&Oe(a)==Ga}function th(a,b){return a===b||cd(a,b,Ke(b))}function uh(a,b,c){return c="function"==typeof c?c:V,cd(a,b,Ke(b),c)}function vh(a){return zh(a)&&a!=+a}function wh(a){if(Ek(a))throw new sj("This method is not supported with `core-js`. Try https://github.com/es-shims.");return dd(a)}function xh(a){return null===a}function yh(a){return null==a}function zh(a){return"number"==typeof a||rh(a)&&Fj.call(a)==Ha}function Ah(a){if(!rh(a)||Fj.call(a)!=Ia||L(a))return!1;var b=Me(a);if(null===b)return!0;var c=Cj.call(b,"constructor")&&b.constructor;return"function"==typeof c&&c instanceof c&&Bj.call(c)==Ej}function Bh(a){return qh(a)&&Fj.call(a)==Ka}function Ch(a){return oh(a)&&a>=-ta&&ta>=a}function Dh(a){return rh(a)&&Oe(a)==La}function Eh(a){return"string"==typeof a||!pl(a)&&rh(a)&&Fj.call(a)==Ma}function Fh(a){return"symbol"==typeof a||rh(a)&&Fj.call(a)==Na}function Gh(a){return rh(a)&&ph(a.length)&&!!vc[Fj.call(a)]}function Hh(a){return a===V}function Ih(a){return rh(a)&&Oe(a)==Oa}function Jh(a){return rh(a)&&Fj.call(a)==Pa}function Kh(a){if(!a)return[];if(dh(a))return Eh(a)?S(a):be(a);if(Oj&&a[Oj])return M(a[Oj]());var b=Oe(a),c=b==Ga?N:b==La?P:pi;return c(a)}function Lh(a){if(!a)return 0===a?a:0;if(a=Oh(a),a===sa||a===-sa){var b=0>a?-1:1;return b*ua}return a===a?a:0}function Mh(a){var b=Lh(a),c=b%1;return b===b?c?b-c:b:0}function Nh(a){return a?Ac(Mh(a),0,wa):0}function Oh(a){if("number"==typeof a)return a;if(Fh(a))return va;if(qh(a)){var b=nh(a.valueOf)?a.valueOf():a;a=qh(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(ob,"");var c=xb.test(a);return c||zb.test(a)?Cc(a.slice(2),c?2:8):wb.test(a)?va:+a}function Ph(a){return ce(a,di(a))}function Qh(a){return Ac(Mh(a),-ta,ta)}function Rh(a){return null==a?"":Fd(a)}function Sh(a,b){var c=Gc(a);return b?yc(c,b):c}function Th(a,b){return p(a,Ie(b,3),Qc)}function Uh(a,b){return p(a,Ie(b,3),Rc)}function Vh(a,b){return null==a?a:xk(a,Ie(b,3),di)}function Wh(a,b){return null==a?a:yk(a,Ie(b,3),di)}function Xh(a,b){return a&&Qc(a,Ie(b,3))}function Yh(a,b){return a&&Rc(a,Ie(b,3))}function Zh(a){return null==a?[]:Sc(a,ci(a))}function $h(a){return null==a?[]:Sc(a,di(a))}function _h(a,b,c){var d=null==a?V:Tc(a,b);return d===V?c:d}function ai(a,b){return null!=a&&Qe(a,b,Wc)}function bi(a,b){return null!=a&&Qe(a,b,Xc)}function ci(a){var b=bf(a);if(!b&&!dh(a))return fd(a);var c=Ue(a),d=!!c,e=c||[],f=e.length;for(var g in a)!Wc(a,g)||d&&("length"==g||Xe(g,f))||b&&"constructor"==g||e.push(g);return e}function di(a){for(var b=-1,c=bf(a),d=gd(a),e=d.length,f=Ue(a),g=!!f,h=f||[],i=h.length;++b<e;){var j=d[b];g&&("length"==j||Xe(j,i))||"constructor"==j&&(c||!Cj.call(a,j))||h.push(j)}return h}function ei(a,b){var c={};return b=Ie(b,3),Qc(a,function(a,d,e){c[b(a,d,e)]=a}),c}function fi(a,b){var c={};return b=Ie(b,3),Qc(a,function(a,d,e){c[d]=b(a,d,e)}),c}function gi(a,b){return b=Ie(b),qd(a,function(a,c){return!b(a,c)})}function hi(a,b){return null==a?{}:qd(a,Ie(b))}function ii(a,b,c){b=Ze(b,a)?[b]:Pd(b);var d=-1,e=b.length;for(e||(a=V,e=1);++d<e;){var f=null==a?V:a[jf(b[d])];f===V&&(d=e,f=c),a=nh(f)?f.call(a):f}return a}function ji(a,b,c){return null==a?a:yd(a,b,c)}function ki(a,b,c,d){return d="function"==typeof d?d:V,null==a?a:yd(a,b,c,d)}function li(a,b,c){var d=pl(a)||Gh(a);if(b=Ie(b,4),null==c)if(d||qh(a)){var f=a.constructor;c=d?pl(a)?new f:[]:nh(f)?Gc(Me(a)):{}}else c={};return(d?e:Qc)(a,function(a,d,e){return b(c,a,d,e)}),c}function mi(a,b){
return null==a?!0:Hd(a,b)}function ni(a,b,c){return null==a?a:Id(a,b,Od(c))}function oi(a,b,c,d){return d="function"==typeof d?d:V,null==a?a:Id(a,b,Od(c),d)}function pi(a){return a?A(a,ci(a)):[]}function qi(a){return null==a?[]:A(a,di(a))}function ri(a,b,c){return c===V&&(c=b,b=V),c!==V&&(c=Oh(c),c=c===c?c:0),b!==V&&(b=Oh(b),b=b===b?b:0),Ac(Oh(a),b,c)}function si(a,b,c){return b=Oh(b)||0,c===V?(c=b,b=0):c=Oh(c)||0,a=Oh(a),Yc(a,b,c)}function ti(a,b,c){if(c&&"boolean"!=typeof c&&Ye(a,b,c)&&(b=c=V),c===V&&("boolean"==typeof b?(c=b,b=V):"boolean"==typeof a&&(c=a,a=V)),a===V&&b===V?(a=0,b=1):(a=Oh(a)||0,b===V?(b=a,a=0):b=Oh(b)||0),a>b){var d=a;a=b,b=d}if(c||a%1||b%1){var e=ak();return $j(a+e*(b-a+Bc("1e-"+((e+"").length-1))),b)}return vd(a,b)}function ui(a){return Ql(Rh(a).toLowerCase())}function vi(a){return a=Rh(a),a&&a.replace(Bb,G).replace(oc,"")}function wi(a,b,c){a=Rh(a),b=Fd(b);var d=a.length;return c=c===V?d:Ac(Mh(c),0,d),c-=b.length,c>=0&&a.indexOf(b,c)==c}function xi(a){return a=Rh(a),a&&fb.test(a)?a.replace(db,H):a}function yi(a){return a=Rh(a),a&&nb.test(a)?a.replace(mb,"\\$&"):a}function zi(a,b,c){a=Rh(a),b=Mh(b);var d=b?R(a):0;if(!b||d>=b)return a;var e=(b-d)/2;return te(Uj(e),c)+a+te(Tj(e),c)}function Ai(a,b,c){a=Rh(a),b=Mh(b);var d=b?R(a):0;return b&&b>d?a+te(b-d,c):a}function Bi(a,b,c){a=Rh(a),b=Mh(b);var d=b?R(a):0;return b&&b>d?te(b-d,c)+a:a}function Ci(a,b,c){return c||null==b?b=0:b&&(b=+b),a=Rh(a).replace(ob,""),_j(a,b||(vb.test(a)?16:10))}function Di(a,b,c){return b=(c?Ye(a,b,c):b===V)?1:Mh(b),xd(Rh(a),b)}function Ei(){var a=arguments,b=Rh(a[0]);return a.length<3?b:bk.call(b,a[1],a[2])}function Fi(a,b,c){return c&&"number"!=typeof c&&Ye(a,b,c)&&(b=c=V),(c=c===V?wa:c>>>0)?(a=Rh(a),a&&("string"==typeof b||null!=b&&!Bh(b))&&(b=Fd(b),""==b&&rc.test(a))?Qd(S(a),0,c):dk.call(a,b,c)):[]}function Gi(a,b,c){return a=Rh(a),c=Ac(Mh(c),0,a.length),a.lastIndexOf(Fd(b),c)==c}function Hi(a,b,c){var d=Eb.templateSettings;c&&Ye(a,b,c)&&(b=V),a=Rh(a),b=vl({},b,d,kc);var e,f,g=vl({},b.imports,d.imports,kc),h=ci(g),i=A(g,h),j=0,k=b.interpolate||Cb,l="__p += '",m=uj((b.escape||Cb).source+"|"+k.source+"|"+(k===ib?tb:Cb).source+"|"+(b.evaluate||Cb).source+"|$","g"),n="//# sourceURL="+("sourceURL"in b?b.sourceURL:"lodash.templateSources["+ ++uc+"]")+"\n";a.replace(m,function(b,c,d,g,h,i){return d||(d=g),l+=a.slice(j,i).replace(Db,I),c&&(e=!0,l+="' +\n__e("+c+") +\n'"),h&&(f=!0,l+="';\n"+h+";\n__p += '"),d&&(l+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),j=i+b.length,b}),l+="';\n";var o=b.variable;o||(l="with (obj) {\n"+l+"\n}\n"),l=(f?l.replace(_a,""):l).replace(ab,"$1").replace(bb,"$1;"),l="function("+(o||"obj")+") {\n"+(o?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(e?", __e = _.escape":"")+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";var p=Rl(function(){return Function(h,n+"return "+l).apply(V,i)});if(p.source=l,lh(p))throw p;return p}function Ii(a){return Rh(a).toLowerCase()}function Ji(a){return Rh(a).toUpperCase()}function Ki(a,b,c){if(a=Rh(a),a&&(c||b===V))return a.replace(ob,"");if(!a||!(b=Fd(b)))return a;var d=S(a),e=S(b),f=C(d,e),g=D(d,e)+1;return Qd(d,f,g).join("")}function Li(a,b,c){if(a=Rh(a),a&&(c||b===V))return a.replace(qb,"");if(!a||!(b=Fd(b)))return a;var d=S(a),e=D(d,S(b))+1;return Qd(d,0,e).join("")}function Mi(a,b,c){if(a=Rh(a),a&&(c||b===V))return a.replace(pb,"");if(!a||!(b=Fd(b)))return a;var d=S(a),e=C(d,S(b));return Qd(d,e).join("")}function Ni(a,b){var c=la,d=ma;if(qh(b)){var e="separator"in b?b.separator:e;c="length"in b?Mh(b.length):c,d="omission"in b?Fd(b.omission):d}a=Rh(a);var f=a.length;if(rc.test(a)){var g=S(a);f=g.length}if(c>=f)return a;var h=c-R(d);if(1>h)return d;var i=g?Qd(g,0,h).join(""):a.slice(0,h);if(e===V)return i+d;if(g&&(h+=i.length-h),Bh(e)){if(a.slice(h).search(e)){var j,k=i;for(e.global||(e=uj(e.source,Rh(ub.exec(e))+"g")),e.lastIndex=0;j=e.exec(k);)var l=j.index;i=i.slice(0,l===V?h:l)}}else if(a.indexOf(Fd(e),h)!=h){var m=i.lastIndexOf(e);m>-1&&(i=i.slice(0,m))}return i+d}function Oi(a){return a=Rh(a),a&&eb.test(a)?a.replace(cb,T):a}function Pi(a,b,c){return a=Rh(a),b=c?V:b,b===V&&(b=sc.test(a)?qc:rb),a.match(b)||[]}function Qi(a){var b=a?a.length:0,d=Ie();return a=b?k(a,function(a){if("function"!=typeof a[1])throw new vj(Y);return[d(a[0]),a[1]]}):[],Sg(function(d){for(var e=-1;++e<b;){var f=a[e];if(c(f[0],this,d))return c(f[1],this,d)}})}function Ri(a){return Ec(Dc(a,!0))}function Si(a){return function(){return a}}function Ti(a){return a}function Ui(a){return ed("function"==typeof a?a:Dc(a,!0))}function Vi(a){return jd(Dc(a,!0))}function Wi(a,b){return kd(a,Dc(b,!0))}function Xi(a,b,c){var d=ci(b),f=Sc(b,d);null!=c||qh(b)&&(f.length||!d.length)||(c=b,b=a,a=this,f=Sc(b,ci(b)));var g=!(qh(c)&&"chain"in c&&!c.chain),h=nh(a);return e(f,function(c){var d=b[c];a[c]=d,h&&(a.prototype[c]=function(){var b=this.__chain__;if(g||b){var c=a(this.__wrapped__),e=c.__actions__=be(this.__actions__);return e.push({func:d,args:arguments,thisArg:a}),c.__chain__=b,c}return d.apply(a,l([this.value()],arguments))})}),a}function Yi(){return Jc._===this&&(Jc._=Gj),this}function Zi(){}function $i(a){return a=Mh(a),Sg(function(b){return nd(b,a)})}function _i(a){return Ze(a)?rd(jf(a)):sd(a)}function aj(a){return function(b){return null==a?V:Tc(a,b)}}function bj(){return[]}function cj(){return!1}function dj(){return{}}function ej(){return""}function fj(){return!0}function gj(a,b){if(a=Mh(a),1>a||a>ta)return[];var c=wa,d=$j(a,wa);b=Ie(b),a-=wa;for(var e=x(d,b);++c<a;)b(c);return e}function hj(a){return pl(a)?k(a,jf):Fh(a)?[a]:be(Gk(a))}function ij(a){var b=++Dj;return Rh(a)+b}function jj(a){return a&&a.length?Mc(a,Ti,Vc):V}function kj(a,b){return a&&a.length?Mc(a,Ie(b),Vc):V}function lj(a){return t(a,Ti)}function mj(a,b){return t(a,Ie(b))}function nj(a){return a&&a.length?Mc(a,Ti,hd):V}function oj(a,b){return a&&a.length?Mc(a,Ie(b),hd):V}function pj(a){return a&&a.length?w(a,Ti):0}function qj(a,b){return a&&a.length?w(a,Ie(b)):0}E=E?Kc.defaults({},E,Kc.pick(Jc,tc)):Jc;var rj=E.Date,sj=E.Error,tj=E.Math,uj=E.RegExp,vj=E.TypeError,wj=E.Array.prototype,xj=E.Object.prototype,yj=E.String.prototype,zj=E["__core-js_shared__"],Aj=function(){var a=/[^.]+$/.exec(zj&&zj.keys&&zj.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Bj=E.Function.prototype.toString,Cj=xj.hasOwnProperty,Dj=0,Ej=Bj.call(Object),Fj=xj.toString,Gj=Jc._,Hj=uj("^"+Bj.call(Cj).replace(mb,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ij=Fc?E.Buffer:V,Jj=E.Reflect,Kj=E.Symbol,Lj=E.Uint8Array,Mj=Jj?Jj.enumerate:V,Nj=Object.getOwnPropertySymbols,Oj="symbol"==typeof(Oj=Kj&&Kj.iterator)?Oj:V,Pj=Object.create,Qj=xj.propertyIsEnumerable,Rj=wj.splice,Sj=function(a,b){return E.setTimeout.call(Jc,a,b)},Tj=tj.ceil,Uj=tj.floor,Vj=Object.getPrototypeOf,Wj=E.isFinite,Xj=wj.join,Yj=Object.keys,Zj=tj.max,$j=tj.min,_j=E.parseInt,ak=tj.random,bk=yj.replace,ck=wj.reverse,dk=yj.split,ek=Le(E,"DataView"),fk=Le(E,"Map"),gk=Le(E,"Promise"),hk=Le(E,"Set"),ik=Le(E,"WeakMap"),jk=Le(Object,"create"),kk=ik&&new ik,lk=!Qj.call({valueOf:1},"valueOf"),mk={},nk=kf(ek),ok=kf(fk),pk=kf(gk),qk=kf(hk),rk=kf(ik),sk=Kj?Kj.prototype:V,tk=sk?sk.valueOf:V,uk=sk?sk.toString:V;Eb.templateSettings={escape:gb,evaluate:hb,interpolate:ib,variable:"",imports:{_:Eb}},Eb.prototype=Fb.prototype,Eb.prototype.constructor=Eb,Gb.prototype=Gc(Fb.prototype),Gb.prototype.constructor=Gb,Hb.prototype=Gc(Fb.prototype),Hb.prototype.constructor=Hb,Lb.prototype.clear=Mb,Lb.prototype["delete"]=Nb,Lb.prototype.get=Ob,Lb.prototype.has=Pb,Lb.prototype.set=Qb,Rb.prototype.clear=Sb,Rb.prototype["delete"]=Tb,Rb.prototype.get=Ub,Rb.prototype.has=Vb,Rb.prototype.set=Wb,Xb.prototype.clear=Yb,Xb.prototype["delete"]=Zb,Xb.prototype.get=$b,Xb.prototype.has=_b,Xb.prototype.set=ac,bc.prototype.add=bc.prototype.push=cc,bc.prototype.has=dc,ec.prototype.clear=fc,ec.prototype["delete"]=gc,ec.prototype.get=hc,ec.prototype.has=ic,ec.prototype.set=jc;var vk=ge(Qc),wk=ge(Rc,!0),xk=he(),yk=he(!0);Mj&&!Qj.call({valueOf:1},"valueOf")&&(gd=function(a){return M(Mj(a))});var zk=kk?function(a,b){return kk.set(a,b),a}:Ti,Ak=hk&&1/P(new hk([,-0]))[1]==sa?function(a){return new hk(a)}:Zi,Bk=kk?function(a){return kk.get(a)}:Zi,Ck=rd("length");Nj||(Ne=bj);var Dk=Nj?function(a){for(var b=[];a;)l(b,Ne(a)),a=Me(a);return b}:Ne;(ek&&Oe(new ek(new ArrayBuffer(1)))!=Ra||fk&&Oe(new fk)!=Ga||gk&&Oe(gk.resolve())!=Ja||hk&&Oe(new hk)!=La||ik&&Oe(new ik)!=Oa)&&(Oe=function(a){var b=Fj.call(a),c=b==Ia?a.constructor:V,d=c?kf(c):V;if(d)switch(d){case nk:return Ra;case ok:return Ga;case pk:return Ja;case qk:return La;case rk:return Oa}return b});var Ek=zj?nh:cj,Fk=function(){var a=0,b=0;return function(c,d){var e=Hg(),f=oa-(e-b);if(b=e,f>0){if(++a>=na)return c}else a=0;return zk(c,d)}}(),Gk=Pg(function(a){var b=[];return Rh(a).replace(lb,function(a,c,d,e){b.push(d?e.replace(sb,"$1"):c||a)}),b}),Hk=Sg(function(a,b){return eh(a)?Ic(a,Pc(b,1,eh,!0)):[]}),Ik=Sg(function(a,b){var c=Ef(b);return eh(c)&&(c=V),eh(a)?Ic(a,Pc(b,1,eh,!0),Ie(c)):[]}),Jk=Sg(function(a,b){var c=Ef(b);return eh(c)&&(c=V),eh(a)?Ic(a,Pc(b,1,eh,!0),V,c):[]}),Kk=Sg(function(a){var b=k(a,Nd);return b.length&&b[0]===a[0]?Zc(b):[]}),Lk=Sg(function(a){var b=Ef(a),c=k(a,Nd);return b===Ef(c)?b=V:c.pop(),c.length&&c[0]===a[0]?Zc(c,Ie(b)):[]}),Mk=Sg(function(a){var b=Ef(a),c=k(a,Nd);return b===Ef(c)?b=V:c.pop(),c.length&&c[0]===a[0]?Zc(c,V,b):[]}),Nk=Sg(Hf),Ok=Sg(function(a,b){b=Pc(b,1);var c=a?a.length:0,d=zc(a,b);return ud(a,k(b,function(a){return Xe(a,c)?+a:a}).sort(Zd)),d}),Pk=Sg(function(a){return Gd(Pc(a,1,eh,!0))}),Qk=Sg(function(a){var b=Ef(a);return eh(b)&&(b=V),Gd(Pc(a,1,eh,!0),Ie(b))}),Rk=Sg(function(a){var b=Ef(a);return eh(b)&&(b=V),Gd(Pc(a,1,eh,!0),V,b)}),Sk=Sg(function(a,b){return eh(a)?Ic(a,b):[]}),Tk=Sg(function(a){return Ld(h(a,eh))}),Uk=Sg(function(a){var b=Ef(a);return eh(b)&&(b=V),Ld(h(a,eh),Ie(b))}),Vk=Sg(function(a){var b=Ef(a);return eh(b)&&(b=V),Ld(h(a,eh),V,b)}),Wk=Sg(bg),Xk=Sg(function(a){var b=a.length,c=b>1?a[b-1]:V;return c="function"==typeof c?(a.pop(),c):V,cg(a,c)}),Yk=Sg(function(a){a=Pc(a,1);var b=a.length,c=b?a[0]:0,d=this.__wrapped__,e=function(b){return zc(b,a)};return!(b>1||this.__actions__.length)&&d instanceof Hb&&Xe(c)?(d=d.slice(c,+c+(b?1:0)),d.__actions__.push({func:hg,args:[e],thisArg:V}),new Gb(d,this.__chain__).thru(function(a){return b&&!a.length&&a.push(V),a})):this.thru(e)}),Zk=ee(function(a,b,c){Cj.call(a,c)?++a[c]:a[c]=1}),$k=ne(uf),_k=ne(vf),al=ee(function(a,b,c){Cj.call(a,c)?a[c].push(b):a[c]=[b]}),bl=Sg(function(a,b,d){var e=-1,f="function"==typeof b,g=Ze(b),h=dh(a)?Array(a.length):[];return vk(a,function(a){var i=f?b:g&&null!=a?a[b]:V;h[++e]=i?c(i,a,d):_c(a,b,d)}),h}),cl=ee(function(a,b,c){a[c]=b}),dl=ee(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),el=Sg(function(a,b){if(null==a)return[];var c=b.length;return c>1&&Ye(a,b[0],b[1])?b=[]:c>2&&Ye(b[0],b[1],b[2])&&(b=[b[0]]),b=1==b.length&&pl(b[0])?b[0]:Pc(b,1,We),od(a,b,[])}),fl=Sg(function(a,b,c){var d=_;if(c.length){var e=O(c,He(fl));d|=ea}return Ae(a,d,b,c,e)}),gl=Sg(function(a,b,c){var d=_|aa;if(c.length){var e=O(c,He(gl));d|=ea}return Ae(b,d,a,c,e)}),hl=Sg(function(a,b){return Hc(a,1,b)}),il=Sg(function(a,b,c){return Hc(a,Oh(b)||0,c)});Pg.Cache=Xb;var jl=Sg(function(a,b){b=1==b.length&&pl(b[0])?k(b[0],z(Ie())):k(Pc(b,1,We),z(Ie()));var d=b.length;return Sg(function(e){for(var f=-1,g=$j(e.length,d);++f<g;)e[f]=b[f].call(this,e[f]);return c(a,this,e)})}),kl=Sg(function(a,b){var c=O(b,He(kl));return Ae(a,ea,V,b,c)}),ll=Sg(function(a,b){var c=O(b,He(ll));return Ae(a,fa,V,b,c)}),ml=Sg(function(a,b){return Ae(a,ha,V,V,V,Pc(b,1))}),nl=we(Vc),ol=we(function(a,b){return a>=b}),pl=Array.isArray,ql=Ij?function(a){return a instanceof Ij}:cj,rl=we(hd),sl=we(function(a,b){return b>=a}),tl=fe(function(a,b){if(lk||bf(b)||dh(b))return void ce(b,ci(b),a);for(var c in b)Cj.call(b,c)&&mc(a,c,b[c])}),ul=fe(function(a,b){if(lk||bf(b)||dh(b))return void ce(b,di(b),a);for(var c in b)mc(a,c,b[c])}),vl=fe(function(a,b,c,d){ce(b,di(b),a,d)}),wl=fe(function(a,b,c,d){ce(b,ci(b),a,d)}),xl=Sg(function(a,b){return zc(a,Pc(b,1))}),yl=Sg(function(a){return a.push(V,kc),c(vl,V,a)}),zl=Sg(function(a){return a.push(V,ff),c(El,V,a)}),Al=qe(function(a,b,c){a[b]=c},Si(Ti)),Bl=qe(function(a,b,c){Cj.call(a,b)?a[b].push(c):a[b]=[c]},Ie),Cl=Sg(_c),Dl=fe(function(a,b,c){ld(a,b,c)}),El=fe(function(a,b,c,d){ld(a,b,c,d)}),Fl=Sg(function(a,b){return null==a?{}:(b=k(Pc(b,1),jf),pd(a,Ic(Fe(a),b)))}),Gl=Sg(function(a,b){return null==a?{}:pd(a,k(Pc(b,1),jf))}),Hl=ze(ci),Il=ze(di),Jl=ke(function(a,b,c){return b=b.toLowerCase(),a+(c?ui(b):b)}),Kl=ke(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),Ll=ke(function(a,b,c){return a+(c?" ":"")+b.toLowerCase()}),Ml=je("toLowerCase"),Nl=ke(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),Ol=ke(function(a,b,c){return a+(c?" ":"")+Ql(b)}),Pl=ke(function(a,b,c){return a+(c?" ":"")+b.toUpperCase()}),Ql=je("toUpperCase"),Rl=Sg(function(a,b){try{return c(a,V,b)}catch(d){return lh(d)?d:new sj(d)}}),Sl=Sg(function(a,b){return e(Pc(b,1),function(b){b=jf(b),a[b]=fl(a[b],a)}),a}),Tl=oe(),Ul=oe(!0),Vl=Sg(function(a,b){return function(c){return _c(c,a,b)}}),Wl=Sg(function(a,b){return function(c){return _c(a,c,b)}}),Xl=se(k),Yl=se(g),Zl=se(o),$l=ve(),_l=ve(!0),am=re(function(a,b){return a+b}),bm=ye("ceil"),cm=re(function(a,b){return a/b}),dm=ye("floor"),em=re(function(a,b){return a*b}),fm=ye("round"),gm=re(function(a,b){return a-b});return Eb.after=Ig,Eb.ary=Jg,Eb.assign=tl,Eb.assignIn=ul,Eb.assignInWith=vl,Eb.assignWith=wl,Eb.at=xl,Eb.before=Kg,Eb.bind=fl,Eb.bindAll=Sl,Eb.bindKey=gl,Eb.castArray=Xg,Eb.chain=fg,Eb.chunk=mf,Eb.compact=nf,Eb.concat=of,Eb.cond=Qi,Eb.conforms=Ri,Eb.constant=Si,Eb.countBy=Zk,Eb.create=Sh,Eb.curry=Lg,Eb.curryRight=Mg,Eb.debounce=Ng,Eb.defaults=yl,Eb.defaultsDeep=zl,Eb.defer=hl,Eb.delay=il,Eb.difference=Hk,Eb.differenceBy=Ik,Eb.differenceWith=Jk,Eb.drop=pf,Eb.dropRight=qf,Eb.dropRightWhile=rf,Eb.dropWhile=sf,Eb.fill=tf,Eb.filter=qg,Eb.flatMap=rg,Eb.flatMapDeep=sg,Eb.flatMapDepth=tg,Eb.flatten=wf,Eb.flattenDeep=xf,Eb.flattenDepth=yf,Eb.flip=Og,Eb.flow=Tl,Eb.flowRight=Ul,Eb.fromPairs=zf,Eb.functions=Zh,Eb.functionsIn=$h,Eb.groupBy=al,Eb.initial=Cf,Eb.intersection=Kk,Eb.intersectionBy=Lk,Eb.intersectionWith=Mk,Eb.invert=Al,Eb.invertBy=Bl,Eb.invokeMap=bl,Eb.iteratee=Ui,Eb.keyBy=cl,Eb.keys=ci,Eb.keysIn=di,Eb.map=xg,Eb.mapKeys=ei,Eb.mapValues=fi,Eb.matches=Vi,Eb.matchesProperty=Wi,Eb.memoize=Pg,Eb.merge=Dl,Eb.mergeWith=El,Eb.method=Vl,Eb.methodOf=Wl,Eb.mixin=Xi,Eb.negate=Qg,Eb.nthArg=$i,Eb.omit=Fl,Eb.omitBy=gi,Eb.once=Rg,Eb.orderBy=yg,Eb.over=Xl,Eb.overArgs=jl,Eb.overEvery=Yl,Eb.overSome=Zl,Eb.partial=kl,Eb.partialRight=ll,Eb.partition=dl,Eb.pick=Gl,Eb.pickBy=hi,Eb.property=_i,Eb.propertyOf=aj,Eb.pull=Nk,Eb.pullAll=Hf,Eb.pullAllBy=If,Eb.pullAllWith=Jf,Eb.pullAt=Ok,Eb.range=$l,Eb.rangeRight=_l,Eb.rearg=ml,Eb.reject=Bg,Eb.remove=Kf,Eb.rest=Sg,Eb.reverse=Lf,Eb.sampleSize=Dg,Eb.set=ji,Eb.setWith=ki,Eb.shuffle=Eg,Eb.slice=Mf,Eb.sortBy=el,Eb.sortedUniq=Tf,Eb.sortedUniqBy=Uf,Eb.split=Fi,Eb.spread=Tg,Eb.tail=Vf,Eb.take=Wf,Eb.takeRight=Xf,Eb.takeRightWhile=Yf,Eb.takeWhile=Zf,Eb.tap=gg,Eb.throttle=Ug,Eb.thru=hg,Eb.toArray=Kh,Eb.toPairs=Hl,Eb.toPairsIn=Il,Eb.toPath=hj,Eb.toPlainObject=Ph,Eb.transform=li,Eb.unary=Vg,Eb.union=Pk,Eb.unionBy=Qk,Eb.unionWith=Rk,Eb.uniq=$f,Eb.uniqBy=_f,Eb.uniqWith=ag,Eb.unset=mi,Eb.unzip=bg,Eb.unzipWith=cg,Eb.update=ni,Eb.updateWith=oi,Eb.values=pi,Eb.valuesIn=qi,Eb.without=Sk,Eb.words=Pi,Eb.wrap=Wg,Eb.xor=Tk,Eb.xorBy=Uk,Eb.xorWith=Vk,Eb.zip=Wk,Eb.zipObject=dg,Eb.zipObjectDeep=eg,Eb.zipWith=Xk,Eb.entries=Hl,Eb.entriesIn=Il,Eb.extend=ul,Eb.extendWith=vl,Xi(Eb,Eb),Eb.add=am,Eb.attempt=Rl,Eb.camelCase=Jl,Eb.capitalize=ui,Eb.ceil=bm,Eb.clamp=ri,Eb.clone=Yg,Eb.cloneDeep=$g,Eb.cloneDeepWith=_g,Eb.cloneWith=Zg,Eb.deburr=vi,Eb.divide=cm,Eb.endsWith=wi,Eb.eq=ah,Eb.escape=xi,Eb.escapeRegExp=yi,Eb.every=pg,Eb.find=$k,Eb.findIndex=uf,Eb.findKey=Th,Eb.findLast=_k,Eb.findLastIndex=vf,Eb.findLastKey=Uh,Eb.floor=dm,Eb.forEach=ug,Eb.forEachRight=vg,Eb.forIn=Vh,Eb.forInRight=Wh,Eb.forOwn=Xh,Eb.forOwnRight=Yh,Eb.get=_h,Eb.gt=nl,Eb.gte=ol,Eb.has=ai,Eb.hasIn=bi,Eb.head=Af,Eb.identity=Ti,Eb.includes=wg,Eb.indexOf=Bf,Eb.inRange=si,Eb.invoke=Cl,Eb.isArguments=bh,Eb.isArray=pl,Eb.isArrayBuffer=ch,Eb.isArrayLike=dh,Eb.isArrayLikeObject=eh,Eb.isBoolean=fh,Eb.isBuffer=ql,Eb.isDate=gh,Eb.isElement=hh,Eb.isEmpty=ih,Eb.isEqual=jh,Eb.isEqualWith=kh,Eb.isError=lh,Eb.isFinite=mh,Eb.isFunction=nh,Eb.isInteger=oh,Eb.isLength=ph,Eb.isMap=sh,Eb.isMatch=th,Eb.isMatchWith=uh,Eb.isNaN=vh,Eb.isNative=wh,Eb.isNil=yh,Eb.isNull=xh,Eb.isNumber=zh,Eb.isObject=qh,Eb.isObjectLike=rh,Eb.isPlainObject=Ah,Eb.isRegExp=Bh,Eb.isSafeInteger=Ch,Eb.isSet=Dh,Eb.isString=Eh,Eb.isSymbol=Fh,Eb.isTypedArray=Gh,Eb.isUndefined=Hh,Eb.isWeakMap=Ih,Eb.isWeakSet=Jh,Eb.join=Df,Eb.kebabCase=Kl,Eb.last=Ef,Eb.lastIndexOf=Ff,Eb.lowerCase=Ll,Eb.lowerFirst=Ml,Eb.lt=rl,Eb.lte=sl,Eb.max=jj,Eb.maxBy=kj,Eb.mean=lj,Eb.meanBy=mj,Eb.min=nj,Eb.minBy=oj,Eb.stubArray=bj,Eb.stubFalse=cj,Eb.stubObject=dj,Eb.stubString=ej,Eb.stubTrue=fj,Eb.multiply=em,Eb.nth=Gf,Eb.noConflict=Yi,Eb.noop=Zi,Eb.now=Hg,Eb.pad=zi,Eb.padEnd=Ai,Eb.padStart=Bi,Eb.parseInt=Ci,Eb.random=ti,Eb.reduce=zg,Eb.reduceRight=Ag,Eb.repeat=Di,Eb.replace=Ei,Eb.result=ii,Eb.round=fm,Eb.runInContext=U,Eb.sample=Cg,Eb.size=Fg,Eb.snakeCase=Nl,Eb.some=Gg,Eb.sortedIndex=Nf,Eb.sortedIndexBy=Of,Eb.sortedIndexOf=Pf,Eb.sortedLastIndex=Qf,Eb.sortedLastIndexBy=Rf,Eb.sortedLastIndexOf=Sf,Eb.startCase=Ol,Eb.startsWith=Gi,Eb.subtract=gm,Eb.sum=pj,Eb.sumBy=qj,Eb.template=Hi,Eb.times=gj,Eb.toFinite=Lh,Eb.toInteger=Mh,Eb.toLength=Nh,Eb.toLower=Ii,Eb.toNumber=Oh,Eb.toSafeInteger=Qh,Eb.toString=Rh,Eb.toUpper=Ji,Eb.trim=Ki,Eb.trimEnd=Li,Eb.trimStart=Mi,Eb.truncate=Ni,Eb.unescape=Oi,Eb.uniqueId=ij,Eb.upperCase=Pl,Eb.upperFirst=Ql,Eb.each=ug,Eb.eachRight=vg,Eb.first=Af,Xi(Eb,function(){var a={};return Qc(Eb,function(b,c){Cj.call(Eb.prototype,c)||(a[c]=b)}),a}(),{chain:!1}),Eb.VERSION=W,e(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){Eb[a].placeholder=Eb}),e(["drop","take"],function(a,b){Hb.prototype[a]=function(c){var d=this.__filtered__;if(d&&!b)return new Hb(this);c=c===V?1:Zj(Mh(c),0);var e=this.clone();return d?e.__takeCount__=$j(c,e.__takeCount__):e.__views__.push({size:$j(c,wa),type:a+(e.__dir__<0?"Right":"")}),e},Hb.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),e(["filter","map","takeWhile"],function(a,b){var c=b+1,d=c==pa||c==ra;Hb.prototype[a]=function(a){var b=this.clone();return b.__iteratees__.push({iteratee:Ie(a,3),type:c}),b.__filtered__=b.__filtered__||d,b}}),e(["head","last"],function(a,b){var c="take"+(b?"Right":"");Hb.prototype[a]=function(){return this[c](1).value()[0]}}),e(["initial","tail"],function(a,b){var c="drop"+(b?"":"Right");Hb.prototype[a]=function(){return this.__filtered__?new Hb(this):this[c](1)}}),Hb.prototype.compact=function(){return this.filter(Ti)},Hb.prototype.find=function(a){return this.filter(a).head()},Hb.prototype.findLast=function(a){return this.reverse().find(a)},Hb.prototype.invokeMap=Sg(function(a,b){return"function"==typeof a?new Hb(this):this.map(function(c){return _c(c,a,b)})}),Hb.prototype.reject=function(a){return a=Ie(a,3),this.filter(function(b){return!a(b)})},Hb.prototype.slice=function(a,b){a=Mh(a);var c=this;return c.__filtered__&&(a>0||0>b)?new Hb(c):(0>a?c=c.takeRight(-a):a&&(c=c.drop(a)),b!==V&&(b=Mh(b),c=0>b?c.dropRight(-b):c.take(b-a)),c)},Hb.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Hb.prototype.toArray=function(){return this.take(wa)},Qc(Hb.prototype,function(a,b){var c=/^(?:filter|find|map|reject)|While$/.test(b),d=/^(?:head|last)$/.test(b),e=Eb[d?"take"+("last"==b?"Right":""):b],f=d||/^find/.test(b);e&&(Eb.prototype[b]=function(){var b=this.__wrapped__,g=d?[1]:arguments,h=b instanceof Hb,i=g[0],j=h||pl(b),k=function(a){var b=e.apply(Eb,l([a],g));return d&&m?b[0]:b};j&&c&&"function"==typeof i&&1!=i.length&&(h=j=!1);var m=this.__chain__,n=!!this.__actions__.length,o=f&&!m,p=h&&!n;if(!f&&j){b=p?b:new Hb(this);var q=a.apply(b,g);return q.__actions__.push({func:hg,args:[k],thisArg:V}),new Gb(q,m)}return o&&p?a.apply(this,g):(q=this.thru(k),o?d?q.value()[0]:q.value():q)})}),e(["pop","push","shift","sort","splice","unshift"],function(a){var b=wj[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:pop|shift)$/.test(a);Eb.prototype[a]=function(){var a=arguments;if(d&&!this.__chain__){var e=this.value();return b.apply(pl(e)?e:[],a)}return this[c](function(c){return b.apply(pl(c)?c:[],a)})}}),Qc(Hb.prototype,function(a,b){var c=Eb[b];if(c){var d=c.name+"",e=mk[d]||(mk[d]=[]);e.push({name:b,func:c})}}),mk[pe(V,aa).name]=[{name:"wrapper",func:V}],Hb.prototype.clone=Ib,Hb.prototype.reverse=Jb,Hb.prototype.value=Kb,Eb.prototype.at=Yk,Eb.prototype.chain=ig,Eb.prototype.commit=jg,Eb.prototype.next=kg,Eb.prototype.plant=mg,Eb.prototype.reverse=ng,Eb.prototype.toJSON=Eb.prototype.valueOf=Eb.prototype.value=og,Oj&&(Eb.prototype[Oj]=lg),Eb}var V,W="4.13.1",X=200,Y="Expected a function",Z="__lodash_hash_undefined__",$="__lodash_placeholder__",_=1,aa=2,ba=4,ca=8,da=16,ea=32,fa=64,ga=128,ha=256,ia=512,ja=1,ka=2,la=30,ma="...",na=150,oa=16,pa=1,qa=2,ra=3,sa=1/0,ta=9007199254740991,ua=1.7976931348623157e308,va=NaN,wa=4294967295,xa=wa-1,ya=wa>>>1,za="[object Arguments]",Aa="[object Array]",Ba="[object Boolean]",Ca="[object Date]",Da="[object Error]",Ea="[object Function]",Fa="[object GeneratorFunction]",Ga="[object Map]",Ha="[object Number]",Ia="[object Object]",Ja="[object Promise]",Ka="[object RegExp]",La="[object Set]",Ma="[object String]",Na="[object Symbol]",Oa="[object WeakMap]",Pa="[object WeakSet]",Qa="[object ArrayBuffer]",Ra="[object DataView]",Sa="[object Float32Array]",Ta="[object Float64Array]",Ua="[object Int8Array]",Va="[object Int16Array]",Wa="[object Int32Array]",Xa="[object Uint8Array]",Ya="[object Uint8ClampedArray]",Za="[object Uint16Array]",$a="[object Uint32Array]",_a=/\b__p \+= '';/g,ab=/\b(__p \+=) '' \+/g,bb=/(__e\(.*?\)|\b__t\)) \+\n'';/g,cb=/&(?:amp|lt|gt|quot|#39|#96);/g,db=/[&<>"'`]/g,eb=RegExp(cb.source),fb=RegExp(db.source),gb=/<%-([\s\S]+?)%>/g,hb=/<%([\s\S]+?)%>/g,ib=/<%=([\s\S]+?)%>/g,jb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kb=/^\w*$/,lb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(\.|\[\])(?:\4|$))/g,mb=/[\\^$.*+?()[\]{}|]/g,nb=RegExp(mb.source),ob=/^\s+|\s+$/g,pb=/^\s+/,qb=/\s+$/,rb=/[a-zA-Z0-9]+/g,sb=/\\(\\)?/g,tb=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ub=/\w*$/,vb=/^0x/i,wb=/^[-+]0x[0-9a-f]+$/i,xb=/^0b[01]+$/i,yb=/^\[object .+?Constructor\]$/,zb=/^0o[0-7]+$/i,Ab=/^(?:0|[1-9]\d*)$/,Bb=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Cb=/($^)/,Db=/['\n\r\u2028\u2029\\]/g,Eb="\\ud800-\\udfff",Fb="\\u0300-\\u036f\\ufe20-\\ufe23",Gb="\\u20d0-\\u20f0",Hb="\\u2700-\\u27bf",Ib="a-z\\xdf-\\xf6\\xf8-\\xff",Jb="\\xac\\xb1\\xd7\\xf7",Kb="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Lb="\\u2000-\\u206f",Mb=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Nb="A-Z\\xc0-\\xd6\\xd8-\\xde",Ob="\\ufe0e\\ufe0f",Pb=Jb+Kb+Lb+Mb,Qb="['’]",Rb="["+Eb+"]",Sb="["+Pb+"]",Tb="["+Fb+Gb+"]",Ub="\\d+",Vb="["+Hb+"]",Wb="["+Ib+"]",Xb="[^"+Eb+Pb+Ub+Hb+Ib+Nb+"]",Yb="\\ud83c[\\udffb-\\udfff]",Zb="(?:"+Tb+"|"+Yb+")",$b="[^"+Eb+"]",_b="(?:\\ud83c[\\udde6-\\uddff]){2}",ac="[\\ud800-\\udbff][\\udc00-\\udfff]",bc="["+Nb+"]",cc="\\u200d",dc="(?:"+Wb+"|"+Xb+")",ec="(?:"+bc+"|"+Xb+")",fc="(?:"+Qb+"(?:d|ll|m|re|s|t|ve))?",gc="(?:"+Qb+"(?:D|LL|M|RE|S|T|VE))?",hc=Zb+"?",ic="["+Ob+"]?",jc="(?:"+cc+"(?:"+[$b,_b,ac].join("|")+")"+ic+hc+")*",kc=ic+hc+jc,lc="(?:"+[Vb,_b,ac].join("|")+")"+kc,mc="(?:"+[$b+Tb+"?",Tb,_b,ac,Rb].join("|")+")",nc=RegExp(Qb,"g"),oc=RegExp(Tb,"g"),pc=RegExp(Yb+"(?="+Yb+")|"+mc+kc,"g"),qc=RegExp([bc+"?"+Wb+"+"+fc+"(?="+[Sb,bc,"$"].join("|")+")",ec+"+"+gc+"(?="+[Sb,bc+dc,"$"].join("|")+")",bc+"?"+dc+"+"+fc,bc+"+"+gc,Ub,lc].join("|"),"g"),rc=RegExp("["+cc+Eb+Fb+Gb+Ob+"]"),sc=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","isFinite","parseInt","setTimeout"],uc=-1,vc={};vc[Sa]=vc[Ta]=vc[Ua]=vc[Va]=vc[Wa]=vc[Xa]=vc[Ya]=vc[Za]=vc[$a]=!0,vc[za]=vc[Aa]=vc[Qa]=vc[Ba]=vc[Ra]=vc[Ca]=vc[Da]=vc[Ea]=vc[Ga]=vc[Ha]=vc[Ia]=vc[Ka]=vc[La]=vc[Ma]=vc[Oa]=!1;var wc={};wc[za]=wc[Aa]=wc[Qa]=wc[Ra]=wc[Ba]=wc[Ca]=wc[Sa]=wc[Ta]=wc[Ua]=wc[Va]=wc[Wa]=wc[Ga]=wc[Ha]=wc[Ia]=wc[Ka]=wc[La]=wc[Ma]=wc[Na]=wc[Xa]=wc[Ya]=wc[Za]=wc[$a]=!0,wc[Da]=wc[Ea]=wc[Oa]=!1;var xc={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},yc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},zc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ac={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bc=parseFloat,Cc=parseInt,Dc="object"==typeof exports&&exports,Ec=Dc&&"object"==typeof module&&module,Fc=Ec&&Ec.exports===Dc,Gc=E("object"==typeof global&&global),Hc=E("object"==typeof self&&self),Ic=E("object"==typeof this&&this),Jc=Gc||Hc||Ic||Function("return this")(),Kc=U();(Hc||{})._=Kc,"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("lodash/lodash",[],function(){return Kc}):Ec?((Ec.exports=Kc)._=Kc,Dc._=Kc):Jc._=Kc}.call(this),function(a,b){"function"!=typeof define||!define.amd||"undefined"!=typeof bam&&"function"==typeof bam.define?a.deviceBootstrap=b():define("device/device",[],b)}(this,function(){function a(a,b){return a&&b?a[b]:a}function b(a){var b=a.split(w).slice(0,3);return a&&b.length<2&&b.push(0),b.join(".")}function c(a){return a=a||navigator.userAgent,D[a]?D[a]:this instanceof c?(D[a]=this,this.userAgent=a,this.is={},this.platform=this.getPlatform(),this.platformVersion=this.getPlatformVersion(),this.browser=this.getBrowser(),this.browserVersion=this.getBrowserVersion(),void(this.formFactor=this.getFormFactor())):new c(a)}var d="(",e=")",f="i",g="|",h="desktop",i="version",j="",k=function(a,b){return new RegExp(a,b||f)},l="iP(?:hone|ad|od)",m="(?:BlackBerry|BB10| RIM )",n="Android",o="Windows",p="WPDesktop",q=o+" Phone",r="Trident(?:.*?Touch(?:.*?Mobile))",s="Linux(?!.*Android)",t="Macintosh",u="CrOS",v=d+"?:"+[t,o,s,u].join(g)+e,w=/[\._]/,x={windowsphone:k(r+g+q+g+p),windows:k(o),ios:k(l),blackberry:k(m),android:k(n),linux:k(s),macintosh:k(t),chromebook:k(u)},y={desktop:/(?:Windows NT(?!.*WPDesktop)(?!.*Xbox))/i,tablet:k(d+["Tablet|iPad","\\sNT.*?"+r,n+"(?!.*Mobi)","silk",m+".*?Tablet","xbox"].join(g)+e),phone:k(d+["Mobi|Mobile","WPDesktop",l,r,m].join(g)+e)},z={tablet:k(d+["Tablet|iPad","\\sNT.*?"+r,n+"(?!.*Mobi)","silk",m+".*?Tablet"].join(g)+e),phone:k(d+["Mobi|Mobile",l,r,m].join(g)+e),desktop:k(v)},A={msie:/msie|iemobile|trident/i,edge:/edge/i,android:/android(?!.+(?:chrome|silk))/i,chrome:/chrome|crios/i,firefox:/firefox/i,opera:/opera(?!.*?mini)\//i,operamini:/opera mini/i,silk:/silk/i,safari:/safari/i},B={webkit:/AppleWebKit/i,gecko:/gecko\//i,trident:/trident/i,edge:/Edge/i},C={desktop:"desktop",other:h,phone:"phone",tablet:"tablet"},D={};return c.prototype={getPlatform:function(){return this.test(x)||h},getPlatformVersion:function(){return b(this.match(k("(?:"+(this.is.blackberry?i:this.platform)+"|"+q+"|OS)[^\\d]+([\\d\\.\\_]+)","ig"),1))},getBrowser:function(){return this.test(B),this.test(A)||h},getFormFactor:function(){var a="";return a=this.is.msie?y:z,C[this.test(a)]||C.other},getBrowserVersion:function(){var a=this.browser,c="[\\/\\s]";return this.is.chrome&&this.is.ios?a="crios":this.is.opera?a=i:this.is.msie&&(a=a+g+"IEMobile"+g+"rv",c="[\\/\\:\\s]"),b(this.match(k("(?:"+a+g+i+")"+c+"([\\d\\.]+)","i"),1))},match:function(b,c){return a(b.exec(this.userAgent),c)||j},test:function(a){var b,c,d,e=this.userAgent;for(b in a)c=a[b].test(e),this.is[b]=this.is[b]||c&&!d,c&&!d&&(d=b);return d}},c}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/utils/VideoUtils",["lodash/lodash","device/device"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("device/device")):a.VideoUtils=b(a._,a.deviceBootstrap)}(this,function(a,b){"use strict";function c(){var a={},b=document.createElement("video")||!1;return a.html5=b&&"undefined"!=typeof b.canPlayType,a.mp4=a.html5&&("maybe"===b.canPlayType("video/mp4")||"probably"===b.canPlayType("video/mp4")),a.ogg=a.html5&&("maybe"===b.canPlayType("video/ogg")||"probably"===b.canPlayType("video/ogg")),a.mse=d(),a}function d(){var a="WebKitMediaSource"in window,b="MediaSource"in window;try{a?new WebKitMediaSource:b&&new MediaSource}catch(c){a=b=!1}return a||b}var e=b(),f={getPlayerTypeByDevice:function(b){var d="";c();return d=e.is.desktop?a.get(b,"videoPlayers.desktop.playerTypeOverride.html","HTML5Player"):e.is.phone?a.get(b,"videoPlayers.phone.playerTypeOverride.html","HTML5Player"):e.is.tablet?a.get(b,"videoPlayers.tablet.playerTypeOverride.html","HTML5Player"):"HTML5Player"},debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},browserNativelySupportsHls:function(a){a=a||e;var b=!1;if(a.is.desktop)"safari"===a.browser&&(b=!0);else if(a.is.phone||a.is.tablet){if(a.is.ios)return!0;if(a.is.android)return!0}return b},setDeviceMgr:function(a){e=a?a:b()},getVideoSupport:c,is:{desktop:function(){return e.is.desktop}}};return f}),define("text",["module"],function(a){"use strict";var b,c,d,e,f,g=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],h=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,i=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,j="undefined"!=typeof location&&location.href,k=j&&location.protocol&&location.protocol.replace(/\:/,""),l=j&&location.hostname,m=j&&(location.port||void 0),n={},o=a.config&&a.config()||{};return b={version:"2.0.10",strip:function(a){if(a){a=a.replace(h,"");var b=a.match(i);b&&(a=b[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:o.createXhr||function(){var a,b,c;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(b=0;3>b;b+=1){c=g[b];try{a=new ActiveXObject(c)}catch(d){}if(a){g=[c];break}}return a},parseName:function(a){var b,c,d,e=!1,f=a.indexOf("."),g=0===a.indexOf("./")||0===a.indexOf("../");return-1!==f&&(!g||f>1)?(b=a.substring(0,f),c=a.substring(f+1,a.length)):b=a,d=c||b,f=d.indexOf("!"),-1!==f&&(e="strip"===d.substring(f+1),d=d.substring(0,f),c?c=d:b=d),{moduleName:b,ext:c,strip:e}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,c,d,e){var f,g,h,i=b.xdRegExp.exec(a);return i?(f=i[2],g=i[3],g=g.split(":"),h=g[1],g=g[0],!(f&&f!==c||g&&g.toLowerCase()!==d.toLowerCase()||(h||g)&&h!==e)):!0},finishLoad:function(a,c,d,e){d=c?b.strip(d):d,o.isBuild&&(n[a]=d),e(d)},load:function(a,c,d,e){if(e.isBuild&&!e.inlineText)return void d();o.isBuild=e.isBuild;var f=b.parseName(a),g=f.moduleName+(f.ext?"."+f.ext:""),h=c.toUrl(g),i=o.useXhr||b.useXhr;
return 0===h.indexOf("empty:")?void d():void(!j||i(h,k,l,m)?b.get(h,function(c){b.finishLoad(a,f.strip,c,d)},function(a){d.error&&d.error(a)}):c([g],function(a){b.finishLoad(f.moduleName+"."+f.ext,f.strip,a,d)}))},write:function(a,c,d,e){if(n.hasOwnProperty(c)){var f=b.jsEscape(n[c]);d.asModule(a+"!"+c,"define(function () { return '"+f+"';});\n")}},writeFile:function(a,c,d,e,f){var g=b.parseName(c),h=g.ext?"."+g.ext:"",i=g.moduleName+h,j=d.toUrl(g.moduleName+h)+".js";b.load(i,d,function(c){var d=function(a){return e(j,a)};d.asModule=function(a,b){return e.asModule(a,j,b)},b.write(a,i,d,f)},f)}},"node"===o.env||!o.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(c=require.nodeRequire("fs"),b.get=function(a,b,d){try{var e=c.readFileSync(a,"utf8");0===e.indexOf("\ufeff")&&(e=e.substring(1)),b(e)}catch(f){d(f)}}):"xhr"===o.env||!o.env&&b.createXhr()?b.get=function(a,c,d,e){var f,g=b.createXhr();if(g.open("GET",a,!0),e)for(f in e)e.hasOwnProperty(f)&&g.setRequestHeader(f.toLowerCase(),e[f]);o.onXhr&&o.onXhr(g,a),g.onreadystatechange=function(b){var e,f;4===g.readyState&&(e=g.status,e>399&&600>e?(f=new Error(a+" HTTP status: "+e),f.xhr=g,d(f)):c(g.responseText),o.onXhrComplete&&o.onXhrComplete(g,a))},g.send(null)}:"rhino"===o.env||!o.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?b.get=function(a,b){var c,d,e="utf-8",f=new java.io.File(a),g=java.lang.System.getProperty("line.separator"),h=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f),e)),i="";try{for(c=new java.lang.StringBuffer,d=h.readLine(),d&&d.length()&&65279===d.charAt(0)&&(d=d.substring(1)),null!==d&&c.append(d);null!==(d=h.readLine());)c.append(g),c.append(d);i=String(c.toString())}finally{h.close()}b(i)}:("xpconnect"===o.env||!o.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(d=Components.classes,e=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),f="@mozilla.org/windows-registry-key;1"in d,b.get=function(a,b){var c,g,h,i={};f&&(a=a.replace(/\//g,"\\")),h=new FileUtils.File(a);try{c=d["@mozilla.org/network/file-input-stream;1"].createInstance(e.nsIFileInputStream),c.init(h,1,0,!1),g=d["@mozilla.org/intl/converter-input-stream;1"].createInstance(e.nsIConverterInputStream),g.init(c,"utf-8",c.available(),e.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),g.readString(c.available(),i),g.close(),c.close(),b(i.value)}catch(j){throw new Error((h&&h.path||"")+": "+j)}}),b}),define("text!bam-video-players/overlays/overlayTemplate.html",[],function(){return"<div class='video-overlays-container'>\n    {{#if loading}}<div class='overlay loading'></div>{{/if}}\n    {{#if noMedia}}<div class='overlay noMedia'></div>{{/if}}\n    {{#if poster}}<div class='overlay poster'></div>{{/if}}\n    {{#if messages}}<div class='overlay messages'></div>{{/if}}\n    {{#if debug-info}}<div class='overlay debug-overlay debug-info'></div>{{/if}}\n    {{#if debug-action}}<div class='overlay debug-overlay debug-action'></div>{{/if}}\n</div>\n"}),function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define("handlebars/handlebars",b):"object"==typeof exports?exports.Handlebars=b():a.Handlebars=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(){var a=r();return a.compile=function(b,c){return k.compile(b,c,a)},a.precompile=function(b,c){return k.precompile(b,c,a)},a.AST=i["default"],a.Compiler=k.Compiler,a.JavaScriptCompiler=m["default"],a.Parser=j.parser,a.parse=j.parse,a}var e=c(8)["default"];b.__esModule=!0;var f=c(1),g=e(f),h=c(2),i=e(h),j=c(3),k=c(4),l=c(5),m=e(l),n=c(6),o=e(n),p=c(7),q=e(p),r=g["default"].create,s=d();s.create=d,q["default"](s),s.Visitor=o["default"],s["default"]=s,b["default"]=s,a.exports=b["default"]},function(a,b,c){"use strict";function d(){var a=new g.HandlebarsEnvironment;return m.extend(a,g),a.SafeString=i["default"],a.Exception=k["default"],a.Utils=m,a.escapeExpression=m.escapeExpression,a.VM=o,a.template=function(b){return o.template(b,a)},a}var e=c(8)["default"];b.__esModule=!0;var f=c(9),g=e(f),h=c(10),i=e(h),j=c(11),k=e(j),l=c(12),m=e(l),n=c(13),o=e(n),p=c(7),q=e(p),r=d();r.create=d,q["default"](r),r["default"]=r,b["default"]=r,a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d={Program:function(a,b,c,d){this.loc=d,this.type="Program",this.body=a,this.blockParams=b,this.strip=c},MustacheStatement:function(a,b,c,d,e,f){this.loc=f,this.type="MustacheStatement",this.path=a,this.params=b||[],this.hash=c,this.escaped=d,this.strip=e},BlockStatement:function(a,b,c,d,e,f,g,h,i){this.loc=i,this.type="BlockStatement",this.path=a,this.params=b||[],this.hash=c,this.program=d,this.inverse=e,this.openStrip=f,this.inverseStrip=g,this.closeStrip=h},PartialStatement:function(a,b,c,d,e){this.loc=e,this.type="PartialStatement",this.name=a,this.params=b||[],this.hash=c,this.indent="",this.strip=d},ContentStatement:function(a,b){this.loc=b,this.type="ContentStatement",this.original=this.value=a},CommentStatement:function(a,b,c){this.loc=c,this.type="CommentStatement",this.value=a,this.strip=b},SubExpression:function(a,b,c,d){this.loc=d,this.type="SubExpression",this.path=a,this.params=b||[],this.hash=c},PathExpression:function(a,b,c,d,e){this.loc=e,this.type="PathExpression",this.data=a,this.original=d,this.parts=c,this.depth=b},StringLiteral:function(a,b){this.loc=b,this.type="StringLiteral",this.original=this.value=a},NumberLiteral:function(a,b){this.loc=b,this.type="NumberLiteral",this.original=this.value=Number(a)},BooleanLiteral:function(a,b){this.loc=b,this.type="BooleanLiteral",this.original=this.value="true"===a},UndefinedLiteral:function(a){this.loc=a,this.type="UndefinedLiteral",this.original=this.value=void 0},NullLiteral:function(a){this.loc=a,this.type="NullLiteral",this.original=this.value=null},Hash:function(a,b){this.loc=b,this.type="Hash",this.pairs=a},HashPair:function(a,b,c){this.loc=c,this.type="HashPair",this.key=a,this.value=b},helpers:{helperExpression:function(a){return!("SubExpression"!==a.type&&!a.params.length&&!a.hash)},scopedId:function(a){return/^\.|this\b/.test(a.original)},simpleId:function(a){return 1===a.parts.length&&!d.helpers.scopedId(a)&&!a.depth}}};b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){if("Program"===a.type)return a;g["default"].yy=o,o.locInfo=function(a){return new o.SourceLocation(b&&b.srcName,a)};var c=new k["default"];return c.accept(g["default"].parse(a))}var e=c(8)["default"];b.__esModule=!0,b.parse=d;var f=c(14),g=e(f),h=c(2),i=e(h),j=c(15),k=e(j),l=c(16),m=e(l),n=c(12);b.parser=g["default"];var o={};n.extend(o,m,i["default"])},function(a,b,c){"use strict";function d(){}function e(a,b,c){if(null==a||"string"!=typeof a&&"Program"!==a.type)throw new k["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);b=b||{},"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var d=c.parse(a,b),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function f(a,b,c){function d(){var b=c.parse(a,f),d=(new c.Compiler).compile(b,f),e=(new c.JavaScriptCompiler).compile(d,f,void 0,!0);return c.template(e)}function e(a,b){return g||(g=d()),g.call(this,a,b)}var f=void 0===arguments[1]?{}:arguments[1];if(null==a||"string"!=typeof a&&"Program"!==a.type)throw new k["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);"data"in f||(f.data=!0),f.compat&&(f.useDepths=!0);var g=void 0;return e._setup=function(a){return g||(g=d()),g._setup(a)},e._child=function(a,b,c,e){return g||(g=d()),g._child(a,b,c,e)},e}function g(a,b){if(a===b)return!0;if(l.isArray(a)&&l.isArray(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!g(a[c],b[c]))return!1;return!0}}function h(a){if(!a.path.parts){var b=a.path;a.path=new n["default"].PathExpression(!1,0,[b.original+""],b.original+"",b.loc)}}var i=c(8)["default"];b.__esModule=!0,b.Compiler=d,b.precompile=e,b.compile=f;var j=c(11),k=i(j),l=c(12),m=c(2),n=i(m),o=[].slice;d.prototype={compiler:d,equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;b>c;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||!g(d.args,e.args))return!1}b=this.children.length;for(var c=0;b>c;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=b,this.stringParams=b.stringParams,this.trackIds=b.trackIds,b.blockParams=b.blockParams||[];var c=b.knownHelpers;if(b.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},c)for(var d in c)d in c&&(b.knownHelpers[d]=c[d]);return this.accept(a)},compileProgram:function(a){var b=new this.compiler,c=b.compile(a,this.options),d=this.guid++;return this.usePartial=this.usePartial||c.usePartial,this.children[d]=c,this.useDepths=this.useDepths||c.useDepths,d},accept:function(a){this.sourceNode.unshift(a);var b=this[a.type](a);return this.sourceNode.shift(),b},Program:function(a){this.options.blockParams.unshift(a.blockParams);for(var b=a.body,c=b.length,d=0;c>d;d++)this.accept(b[d]);return this.options.blockParams.shift(),this.isSimple=1===c,this.blockParams=a.blockParams?a.blockParams.length:0,this},BlockStatement:function(a){h(a);var b=a.program,c=a.inverse;b=b&&this.compileProgram(b),c=c&&this.compileProgram(c);var d=this.classifySexpr(a);"helper"===d?this.helperSexpr(a,b,c):"simple"===d?(this.simpleSexpr(a),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("blockValue",a.path.original)):(this.ambiguousSexpr(a,b,c),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},PartialStatement:function(a){this.usePartial=!0;var b=a.params;if(b.length>1)throw new k["default"]("Unsupported number of partial arguments: "+b.length,a);b.length||b.push({type:"PathExpression",parts:[],depth:0});var c=a.name.original,d="SubExpression"===a.name.type;d&&this.accept(a.name),this.setupFullMustacheParams(a,void 0,void 0,!0);var e=a.indent||"";this.options.preventIndent&&e&&(this.opcode("appendContent",e),e=""),this.opcode("invokePartial",d,c,e),this.opcode("append")},MustacheStatement:function(a){this.SubExpression(a),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ContentStatement:function(a){a.value&&this.opcode("appendContent",a.value)},CommentStatement:function(){},SubExpression:function(a){h(a);var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ambiguousSexpr:function(a,b,c){var d=a.path,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.accept(d),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){this.accept(a.path),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.path,f=e.parts[0];if(this.options.knownHelpers[f])this.opcode("invokeKnownHelper",d.length,f);else{if(this.options.knownHelpersOnly)throw new k["default"]("You specified knownHelpersOnly, but used the unknown helper "+f,a);e.falsy=!0,this.accept(e),this.opcode("invokeHelper",d.length,e.original,n["default"].helpers.simpleId(e))}},PathExpression:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0],c=n["default"].helpers.scopedId(a),d=!a.depth&&!c&&this.blockParamIndex(b);d?this.opcode("lookupBlockParam",d,a.parts):b?a.data?(this.options.data=!0,this.opcode("lookupData",a.depth,a.parts)):this.opcode("lookupOnContext",a.parts,a.falsy,c):this.opcode("pushContext")},StringLiteral:function(a){this.opcode("pushString",a.value)},NumberLiteral:function(a){this.opcode("pushLiteral",a.value)},BooleanLiteral:function(a){this.opcode("pushLiteral",a.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(a){var b=a.pairs,c=0,d=b.length;for(this.opcode("pushHash");d>c;c++)this.pushParam(b[c].value);for(;c--;)this.opcode("assignToHash",b[c].key);this.opcode("popHash")},opcode:function(a){this.opcodes.push({opcode:a,args:o.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(a){a&&(this.useDepths=!0)},classifySexpr:function(a){var b=n["default"].helpers.simpleId(a.path),c=b&&!!this.blockParamIndex(a.path.parts[0]),d=!c&&n["default"].helpers.helperExpression(a),e=!c&&(d||b);if(e&&!d){var f=a.path.parts[0],g=this.options;g.knownHelpers[f]?d=!0:g.knownHelpersOnly&&(e=!1)}return d?"helper":e?"ambiguous":"simple"},pushParams:function(a){for(var b=0,c=a.length;c>b;b++)this.pushParam(a[b])},pushParam:function(a){var b=null!=a.value?a.value:a.original||"";if(this.stringParams)b.replace&&(b=b.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),a.depth&&this.addDepth(a.depth),this.opcode("getContext",a.depth||0),this.opcode("pushStringParam",b,a.type),"SubExpression"===a.type&&this.accept(a);else{if(this.trackIds){var c=void 0;if(!a.parts||n["default"].helpers.scopedId(a)||a.depth||(c=this.blockParamIndex(a.parts[0])),c){var d=a.parts.slice(1).join(".");this.opcode("pushId","BlockParam",c,d)}else b=a.original||b,b.replace&&(b=b.replace(/^\.\//g,"").replace(/^\.$/g,"")),this.opcode("pushId",a.type,b)}this.accept(a)}},setupFullMustacheParams:function(a,b,c,d){var e=a.params;return this.pushParams(e),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.accept(a.hash):this.opcode("emptyHash",d),e},blockParamIndex:function(a){for(var b=0,c=this.options.blockParams.length;c>b;b++){var d=this.options.blockParams[b],e=d&&l.indexOf(d,a);if(d&&e>=0)return[b,e]}}}},function(a,b,c){"use strict";function d(a){this.value=a}function e(){}function f(a,b,c,d){var e=b.popStack(),f=0,g=c.length;for(a&&g--;g>f;f++)e=b.nameLookup(e,c[f],d);return a?[b.aliasable("this.strict"),"(",e,", ",b.quotedString(c[f]),")"]:e}var g=c(8)["default"];b.__esModule=!0;var h=c(9),i=c(11),j=g(i),k=c(12),l=c(17),m=g(l);e.prototype={nameLookup:function(a,b){return e.isValidJavaScriptVariableName(b)?[a,".",b]:[a,"['",b,"']"]},depthedLookup:function(a){return[this.aliasable("this.lookup"),'(depths, "',a,'")']},compilerInfo:function(){var a=h.COMPILER_REVISION,b=h.REVISION_CHANGES[a];return[a,b]},appendToBuffer:function(a,b,c){return k.isArray(a)||(a=[a]),a=this.source.wrap(a,b),this.environment.isSimple?["return ",a,";"]:c?["buffer += ",a,";"]:(a.appendToBuffer=!0,a)},initializeBuffer:function(){return this.quotedString("")},compile:function(a,b,c,d){this.environment=a,this.options=b,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!d,this.name=this.environment.name,this.isChild=!!c,this.context=c||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(a,b),this.useDepths=this.useDepths||a.useDepths||this.options.compat,this.useBlockParams=this.useBlockParams||a.useBlockParams;var e=a.opcodes,f=void 0,g=void 0,h=void 0,i=void 0;for(h=0,i=e.length;i>h;h++)f=e[h],this.source.currentLocation=f.loc,g=g||f.loc,this[f.opcode].apply(this,f.args);if(this.source.currentLocation=g,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new j["default"]("Compile completed with content left on stack");var k=this.createFunctionContext(d);if(this.isChild)return k;var l={compiler:this.compilerInfo(),main:k},m=this.context.programs;for(h=0,i=m.length;i>h;h++)m[h]&&(l[h]=m[h]);return this.environment.usePartial&&(l.usePartial=!0),this.options.data&&(l.useData=!0),this.useDepths&&(l.useDepths=!0),this.useBlockParams&&(l.useBlockParams=!0),this.options.compat&&(l.compat=!0),d?l.compilerOptions=this.options:(l.compiler=JSON.stringify(l.compiler),this.source.currentLocation={start:{line:1,column:0}},l=this.objectLiteral(l),b.srcName?(l=l.toStringWithSourceMap({file:b.destName}),l.map=l.map&&l.map.toString()):l=l.toString()),l},preamble:function(){this.lastContext=0,this.source=new m["default"](this.options.srcName)},createFunctionContext:function(a){var b="",c=this.stackVars.concat(this.registers.list);c.length>0&&(b+=", "+c.join(", "));var d=0;for(var e in this.aliases){var f=this.aliases[e];this.aliases.hasOwnProperty(e)&&f.children&&f.referenceCount>1&&(b+=", alias"+ ++d+"="+e,f.children[0]="alias"+d)}var g=["depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&g.push("blockParams"),this.useDepths&&g.push("depths");var h=this.mergeSource(b);return a?(g.push(h),Function.apply(this,g)):this.source.wrap(["function(",g.join(","),") {\n  ",h,"}"])},mergeSource:function(a){var b=this.environment.isSimple,c=!this.forceBuffer,d=void 0,e=void 0,f=void 0,g=void 0;return this.source.each(function(a){a.appendToBuffer?(f?a.prepend("  + "):f=a,g=a):(f&&(e?f.prepend("buffer += "):d=!0,g.add(";"),f=g=void 0),e=!0,b||(c=!1))}),c?f?(f.prepend("return "),g.add(";")):e||this.source.push('return "";'):(a+=", buffer = "+(d?"":this.initializeBuffer()),f?(f.prepend("return buffer + "),g.add(";")):this.source.push("return buffer;")),a&&this.source.prepend("var "+a.substring(2)+(d?"":";\n")),this.source.merge()},blockValue:function(a){var b=this.aliasable("helpers.blockHelperMissing"),c=[this.contextName(0)];this.setupHelperArgs(a,0,c);var d=this.popStack();c.splice(1,0,d),this.push(this.source.functionCall(b,"call",c))},ambiguousBlockValue:function(){var a=this.aliasable("helpers.blockHelperMissing"),b=[this.contextName(0)];this.setupHelperArgs("",0,b,!0),this.flushInline();var c=this.topStack();b.splice(1,0,c),this.pushSource(["if (!",this.lastHelper,") { ",c," = ",this.source.functionCall(a,"call",b),"}"])},appendContent:function(a){this.pendingContent?a=this.pendingContent+a:this.pendingLocation=this.source.currentLocation,this.pendingContent=a},append:function(){if(this.isInline())this.replaceStack(function(a){return[" != null ? ",a,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var a=this.popStack();this.pushSource(["if (",a," != null) { ",this.appendToBuffer(a,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("this.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,b,c){var d=0;c||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(a[d++])),this.resolvePath("context",a,d,b)},lookupBlockParam:function(a,b){this.useBlockParams=!0,this.push(["blockParams[",a[0],"][",a[1],"]"]),this.resolvePath("context",b,1)},lookupData:function(a,b){a?this.pushStackLiteral("this.data(data, "+a+")"):this.pushStackLiteral("data"),this.resolvePath("data",b,0,!0)},resolvePath:function(a,b,c,d){var e=this;if(this.options.strict||this.options.assumeObjects)return void this.push(f(this.options.strict,this,b,a));for(var g=b.length;g>c;c++)this.replaceStack(function(f){var g=e.nameLookup(f,b[c],a);return d?[" && ",g]:[" != null ? ",g," : ",f]})},resolvePossibleLambda:function(){this.push([this.aliasable("this.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(a,b){this.pushContext(),this.pushString(b),"SubExpression"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(a){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(a?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(a.ids)),this.stringParams&&(this.push(this.objectLiteral(a.contexts)),this.push(this.objectLiteral(a.types))),this.push(this.objectLiteral(a.values))},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},invokeHelper:function(a,b,c){var d=this.popStack(),e=this.setupHelper(a,b),f=c?[e.name," || "]:"",g=["("].concat(f,d);this.options.strict||g.push(" || ",this.aliasable("helpers.helperMissing")),g.push(")"),this.push(this.source.functionCall(g,"call",e.callParams))},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(this.source.functionCall(c.name,"call",c.callParams))},invokeAmbiguous:function(a,b){this.useRegister("helper");var c=this.popStack();this.emptyHash();var d=this.setupHelper(0,a,b),e=this.lastHelper=this.nameLookup("helpers",a,"helper"),f=["(","(helper = ",e," || ",c,")"];this.options.strict||(f[0]="(helper = ",f.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",f,d.paramsInit?["),(",d.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",d.callParams)," : helper))"])},invokePartial:function(a,b,c){var d=[],e=this.setupParams(b,1,d,!1);a&&(b=this.popStack(),delete e.name),c&&(e.indent=JSON.stringify(c)),e.helpers="helpers",e.partials="partials",a?d.unshift(b):d.unshift(this.nameLookup("partials",b,"partial")),this.options.compat&&(e.depths="depths"),e=this.objectLiteral(e),d.push(e),this.push(this.source.functionCall("this.invokePartial","",d))},assignToHash:function(a){var b=this.popStack(),c=void 0,d=void 0,e=void 0;this.trackIds&&(e=this.popStack()),this.stringParams&&(d=this.popStack(),c=this.popStack());var f=this.hash;c&&(f.contexts[a]=c),d&&(f.types[a]=d),e&&(f.ids[a]=e),f.values[a]=b},pushId:function(a,b,c){"BlockParam"===a?this.pushStackLiteral("blockParams["+b[0]+"].path["+b[1]+"]"+(c?" + "+JSON.stringify("."+c):"")):"PathExpression"===a?this.pushString(b):"SubExpression"===a?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:e,compileChildren:function(a,b){for(var c=a.children,d=void 0,e=void 0,f=0,g=c.length;g>f;f++){d=c[f],e=new this.compiler;var h=this.matchExistingProgram(d);null==h?(this.context.programs.push(""),h=this.context.programs.length,d.index=h,d.name="program"+h,this.context.programs[h]=e.compile(d,b,this.context,!this.precompile),this.context.environments[h]=d,this.useDepths=this.useDepths||e.useDepths,this.useBlockParams=this.useBlockParams||e.useBlockParams):(d.index=h,d.name="program"+h,this.useDepths=this.useDepths||d.useDepths,this.useBlockParams=this.useBlockParams||d.useBlockParams)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;c>b;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){var b=this.environment.children[a],c=[b.index,"data",b.blockParams];return(this.useBlockParams||this.useDepths)&&c.push("blockParams"),this.useDepths&&c.push("depths"),"this.program("+c.join(", ")+")"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},push:function(a){return a instanceof d||(a=this.source.wrap(a)),this.inlineStack.push(a),a},pushStackLiteral:function(a){this.push(new d(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),a&&this.source.push(a)},replaceStack:function(a){var b=["("],c=void 0,e=void 0,f=void 0;if(!this.isInline())throw new j["default"]("replaceStack on non-inline");var g=this.popStack(!0);if(g instanceof d)c=[g.value],b=["(",c],f=!0;else{e=!0;var h=this.incrStack();b=["((",this.push(h)," = ",g,")"],c=this.topStack()}var i=a.call(this,c);f||this.popStack(),e&&this.stackSlot--,this.push(b.concat(i,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;this.inlineStack=[];for(var b=0,c=a.length;c>b;b++){var e=a[b];if(e instanceof d)this.compileStack.push(e);else{var f=this.incrStack();this.pushSource([f," = ",e,";"]),this.compileStack.push(f)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();if(!a&&c instanceof d)return c.value;if(!b){if(!this.stackSlot)throw new j["default"]("Invalid stack pop");this.stackSlot--}return c},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack,b=a[a.length-1];return b instanceof d?b.value:b},contextName:function(a){return this.useDepths&&a?"depths["+a+"]":"depth"+a},quotedString:function(a){return this.source.quotedString(a)},objectLiteral:function(a){return this.source.objectLiteral(a)},aliasable:function(a){var b=this.aliases[a];return b?(b.referenceCount++,b):(b=this.aliases[a]=this.source.wrap(a),b.aliasable=!0,b.referenceCount=1,b)},setupHelper:function(a,b,c){var d=[],e=this.setupHelperArgs(b,a,d,c),f=this.nameLookup("helpers",b,"helper");return{params:d,paramsInit:e,name:f,callParams:[this.contextName(0)].concat(d)}},setupParams:function(a,b,c){var d={},e=[],f=[],g=[],h=void 0;d.name=this.quotedString(a),d.hash=this.popStack(),this.trackIds&&(d.hashIds=this.popStack()),this.stringParams&&(d.hashTypes=this.popStack(),d.hashContexts=this.popStack());var i=this.popStack(),j=this.popStack();(j||i)&&(d.fn=j||"this.noop",d.inverse=i||"this.noop");for(var k=b;k--;)h=this.popStack(),c[k]=h,this.trackIds&&(g[k]=this.popStack()),this.stringParams&&(f[k]=this.popStack(),e[k]=this.popStack());return this.trackIds&&(d.ids=this.source.generateArray(g)),this.stringParams&&(d.types=this.source.generateArray(f),d.contexts=this.source.generateArray(e)),this.options.data&&(d.data="data"),this.useBlockParams&&(d.blockParams="blockParams"),d},setupHelperArgs:function(a,b,c,d){var e=this.setupParams(a,b,c,!0);return e=this.objectLiteral(e),d?(this.useRegister("options"),c.push("options"),["options=",e]):(c.push(e),"")}},function(){for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),b=e.RESERVED_WORDS={},c=0,d=a.length;d>c;c++)b[a[c]]=!0}(),e.isValidJavaScriptVariableName=function(a){return!e.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)},b["default"]=e,a.exports=b["default"]},function(a,b,c){"use strict";function d(){this.parents=[]}var e=c(8)["default"];b.__esModule=!0;var f=c(11),g=e(f),h=c(2),i=e(h);d.prototype={constructor:d,mutating:!1,acceptKey:function(a,b){var c=this.accept(a[b]);if(this.mutating){if(c&&(!c.type||!i["default"][c.type]))throw new g["default"]('Unexpected node type "'+c.type+'" found when accepting '+b+" on "+a.type);a[b]=c}},acceptRequired:function(a,b){if(this.acceptKey(a,b),!a[b])throw new g["default"](a.type+" requires "+b)},acceptArray:function(a){for(var b=0,c=a.length;c>b;b++)this.acceptKey(a,b),a[b]||(a.splice(b,1),b--,c--)},accept:function(a){if(a){this.current&&this.parents.unshift(this.current),this.current=a;var b=this[a.type](a);return this.current=this.parents.shift(),!this.mutating||b?b:b!==!1?a:void 0}},Program:function(a){this.acceptArray(a.body)},MustacheStatement:function(a){this.acceptRequired(a,"path"),this.acceptArray(a.params),this.acceptKey(a,"hash")},BlockStatement:function(a){this.acceptRequired(a,"path"),this.acceptArray(a.params),this.acceptKey(a,"hash"),this.acceptKey(a,"program"),this.acceptKey(a,"inverse")},PartialStatement:function(a){this.acceptRequired(a,"name"),this.acceptArray(a.params),this.acceptKey(a,"hash")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:function(a){this.acceptRequired(a,"path"),this.acceptArray(a.params),this.acceptKey(a,"hash")},PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(a){this.acceptArray(a.pairs)},HashPair:function(a){this.acceptRequired(a,"value")}},b["default"]=d,a.exports=b["default"]},function(a,b,c){(function(c){"use strict";b.__esModule=!0,b["default"]=function(a){var b="undefined"!=typeof c?c:window,d=b.Handlebars;a.noConflict=function(){b.Handlebars===a&&(b.Handlebars=d)}},a.exports=b["default"]}).call(b,function(){return this}())},function(a,b,c){"use strict";b["default"]=function(a){return a&&a.__esModule?a:{"default":a}},b.__esModule=!0},function(a,b,c){"use strict";function d(a,b){this.helpers=a||{},this.partials=b||{},e(this)}function e(a){a.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new k["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse,e=c.fn;if(b===!0)return e(this);if(b===!1||null==b)return d(this);if(o(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):d(this);if(c.data&&c.ids){var g=f(c.data);g.contextPath=i.appendContextPath(c.data.contextPath,c.name),c={data:g}}return e(b,c)}),a.registerHelper("each",function(a,b){function c(b,c,e){j&&(j.key=b,j.index=c,j.first=0===c,j.last=!!e,l&&(j.contextPath=l+b)),h+=d(a[b],{data:j,blockParams:i.blockParams([a[b],b],[l+b,null])})}if(!b)throw new k["default"]("Must pass iterator to #each");var d=b.fn,e=b.inverse,g=0,h="",j=void 0,l=void 0;if(b.data&&b.ids&&(l=i.appendContextPath(b.data.contextPath,b.ids[0])+"."),p(a)&&(a=a.call(this)),b.data&&(j=f(b.data)),a&&"object"==typeof a)if(o(a))for(var m=a.length;m>g;g++)c(g,g,g===a.length-1);else{var n=void 0;for(var q in a)a.hasOwnProperty(q)&&(n&&c(n,g-1),n=q,g++);n&&c(n,g-1,!0)}return 0===g&&(h=e(this)),h}),a.registerHelper("if",function(a,b){return p(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||i.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){p(a)&&(a=a.call(this));var c=b.fn;if(i.isEmpty(a))return b.inverse(this);if(b.data&&b.ids){var d=f(b.data);d.contextPath=i.appendContextPath(b.data.contextPath,b.ids[0]),b={data:d}}return c(a,b)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)}),a.registerHelper("lookup",function(a,b){return a&&a[b]})}function f(a){var b=i.extend({},a);return b._parent=a,b}var g=c(8)["default"];b.__esModule=!0,b.HandlebarsEnvironment=d,b.createFrame=f;var h=c(12),i=g(h),j=c(11),k=g(j),l="3.0.1";b.VERSION=l;var m=6;b.COMPILER_REVISION=m;var n={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};b.REVISION_CHANGES=n;var o=i.isArray,p=i.isFunction,q=i.toString,r="[object Object]";d.prototype={constructor:d,logger:s,log:t,registerHelper:function(a,b){if(q.call(a)===r){if(b)throw new k["default"]("Arg not supported with multiple helpers");i.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(q.call(a)===r)i.extend(this.partials,a);else{if("undefined"==typeof b)throw new k["default"]("Attempting to register a partial as undefined");
this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]}};var s={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(a,b){if("undefined"!=typeof console&&s.level<=a){var c=s.methodMap[a];(console[c]||console.log).call(console,b)}}};b.logger=s;var t=s.log;b.log=t},function(a,b,c){"use strict";function d(a){this.string=a}b.__esModule=!0,d.prototype.toString=d.prototype.toHTML=function(){return""+this.string},b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){var c=b&&b.loc,f=void 0,g=void 0;c&&(f=c.start.line,g=c.start.column,a+=" - "+f+":"+g);for(var h=Error.prototype.constructor.call(this,a),i=0;i<e.length;i++)this[e[i]]=h[e[i]];Error.captureStackTrace&&Error.captureStackTrace(this,d),c&&(this.lineNumber=f,this.column=g)}b.__esModule=!0;var e=["description","fileName","lineNumber","message","name","number","stack"];d.prototype=new Error,b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return k[a]}function e(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function f(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function g(a){if("string"!=typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+"";a=""+a}return m.test(a)?a.replace(l,d):a}function h(a){return a||0===a?p(a)&&0===a.length?!0:!1:!0}function i(a,b){return a.path=b,a}function j(a,b){return(a?a+".":"")+b}b.__esModule=!0,b.extend=e,b.indexOf=f,b.escapeExpression=g,b.isEmpty=h,b.blockParams=i,b.appendContextPath=j;var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,m=/[&<>"'`]/,n=Object.prototype.toString;b.toString=n;var o=function(a){return"function"==typeof a};o(/x/)&&(b.isFunction=o=function(a){return"function"==typeof a&&"[object Function]"===n.call(a)});var o;b.isFunction=o;var p=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===n.call(a):!1};b.isArray=p},function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=p.COMPILER_REVISION;if(b!==c){if(c>b){var d=p.REVISION_CHANGES[c],e=p.REVISION_CHANGES[b];throw new o["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new o["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){function c(c,d,e){e.hash&&(d=m.extend({},d,e.hash)),c=b.VM.resolvePartial.call(this,c,d,e);var f=b.VM.invokePartial.call(this,c,d,e);if(null==f&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),f=e.partials[e.name](d,e)),null!=f){if(e.indent){for(var g=f.split("\n"),h=0,i=g.length;i>h&&(g[h]||h+1!==i);h++)g[h]=e.indent+g[h];f=g.join("\n")}return f}throw new o["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode")}function d(b){var c=void 0===arguments[1]?{}:arguments[1],f=c.data;d._setup(c),!c.partial&&a.useData&&(f=j(b,f));var g=void 0,h=a.useBlockParams?[]:void 0;return a.useDepths&&(g=c.depths?[b].concat(c.depths):[b]),a.main.call(e,b,e.helpers,e.partials,f,h,g)}if(!b)throw new o["default"]("No environment passed to template");if(!a||!a.main)throw new o["default"]("Unknown template object: "+typeof a);b.VM.checkRevision(a.compiler);var e={strict:function(a,b){if(!(b in a))throw new o["default"]('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,d=0;c>d;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:m.escapeExpression,invokePartial:c,fn:function(b){return a[b]},programs:[],program:function(a,b,c,d,e){var g=this.programs[a],h=this.fn(a);return b||e||d||c?g=f(this,a,h,b,c,d,e):g||(g=this.programs[a]=f(this,a,h)),g},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=m.extend({},b,a)),c},noop:b.VM.noop,compilerInfo:a.compiler};return d.isTop=!0,d._setup=function(c){c.partial?(e.helpers=c.helpers,e.partials=c.partials):(e.helpers=e.merge(c.helpers,b.helpers),a.usePartial&&(e.partials=e.merge(c.partials,b.partials)))},d._child=function(b,c,d,g){if(a.useBlockParams&&!d)throw new o["default"]("must pass block params");if(a.useDepths&&!g)throw new o["default"]("must pass parent depths");return f(e,b,a[b],c,0,d,g)},d}function f(a,b,c,d,e,f,g){function h(b){var e=void 0===arguments[1]?{}:arguments[1];return c.call(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),g&&[b].concat(g))}return h.program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function g(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a=c.partials[c.name],a}function h(a,b,c){if(c.partial=!0,void 0===a)throw new o["default"]("The partial "+c.name+" could not be found");return a instanceof Function?a(b,c):void 0}function i(){return""}function j(a,b){return b&&"root"in b||(b=b?p.createFrame(b):{},b.root=a),b}var k=c(8)["default"];b.__esModule=!0,b.checkRevision=d,b.template=e,b.wrapProgram=f,b.resolvePartial=g,b.invokePartial=h,b.noop=i;var l=c(12),m=k(l),n=c(11),o=k(n),p=c(9)},function(a,b,c){"use strict";b.__esModule=!0;var d=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,content:12,COMMENT:13,CONTENT:14,openRawBlock:15,END_RAW_BLOCK:16,OPEN_RAW_BLOCK:17,helperName:18,openRawBlock_repetition0:19,openRawBlock_option0:20,CLOSE_RAW_BLOCK:21,openBlock:22,block_option0:23,closeBlock:24,openInverse:25,block_option1:26,OPEN_BLOCK:27,openBlock_repetition0:28,openBlock_option0:29,openBlock_option1:30,CLOSE:31,OPEN_INVERSE:32,openInverse_repetition0:33,openInverse_option0:34,openInverse_option1:35,openInverseChain:36,OPEN_INVERSE_CHAIN:37,openInverseChain_repetition0:38,openInverseChain_option0:39,openInverseChain_option1:40,inverseAndProgram:41,INVERSE:42,inverseChain:43,inverseChain_option0:44,OPEN_ENDBLOCK:45,OPEN:46,mustache_repetition0:47,mustache_option0:48,OPEN_UNESCAPED:49,mustache_repetition1:50,mustache_option1:51,CLOSE_UNESCAPED:52,OPEN_PARTIAL:53,partialName:54,partial_repetition0:55,partial_option0:56,param:57,sexpr:58,OPEN_SEXPR:59,sexpr_repetition0:60,sexpr_option0:61,CLOSE_SEXPR:62,hash:63,hash_repetition_plus0:64,hashSegment:65,ID:66,EQUALS:67,blockParams:68,OPEN_BLOCK_PARAMS:69,blockParams_repetition_plus0:70,CLOSE_BLOCK_PARAMS:71,path:72,dataName:73,STRING:74,NUMBER:75,BOOLEAN:76,UNDEFINED:77,NULL:78,DATA:79,pathSegments:80,SEP:81,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",13:"COMMENT",14:"CONTENT",16:"END_RAW_BLOCK",17:"OPEN_RAW_BLOCK",21:"CLOSE_RAW_BLOCK",27:"OPEN_BLOCK",31:"CLOSE",32:"OPEN_INVERSE",37:"OPEN_INVERSE_CHAIN",42:"INVERSE",45:"OPEN_ENDBLOCK",46:"OPEN",49:"OPEN_UNESCAPED",52:"CLOSE_UNESCAPED",53:"OPEN_PARTIAL",59:"OPEN_SEXPR",62:"CLOSE_SEXPR",66:"ID",67:"EQUALS",69:"OPEN_BLOCK_PARAMS",71:"CLOSE_BLOCK_PARAMS",74:"STRING",75:"NUMBER",76:"BOOLEAN",77:"UNDEFINED",78:"NULL",79:"DATA",81:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[12,1],[10,3],[15,5],[9,4],[9,4],[22,6],[25,6],[36,6],[41,2],[43,3],[43,1],[24,3],[8,5],[8,5],[11,5],[57,1],[57,1],[58,5],[63,1],[65,3],[68,3],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[54,1],[54,1],[73,2],[72,1],[80,3],[80,1],[6,0],[6,2],[19,0],[19,2],[20,0],[20,1],[23,0],[23,1],[26,0],[26,1],[28,0],[28,2],[29,0],[29,1],[30,0],[30,1],[33,0],[33,2],[34,0],[34,1],[35,0],[35,1],[38,0],[38,2],[39,0],[39,1],[40,0],[40,1],[44,0],[44,1],[47,0],[47,2],[48,0],[48,1],[50,0],[50,2],[51,0],[51,1],[55,0],[55,2],[56,0],[56,1],[60,0],[60,2],[61,0],[61,1],[64,1],[64,2],[70,1],[70,2]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return f[h-1];case 2:this.$=new d.Program(f[h],null,{},d.locInfo(this._$));break;case 3:this.$=f[h];break;case 4:this.$=f[h];break;case 5:this.$=f[h];break;case 6:this.$=f[h];break;case 7:this.$=f[h];break;case 8:this.$=new d.CommentStatement(d.stripComment(f[h]),d.stripFlags(f[h],f[h]),d.locInfo(this._$));break;case 9:this.$=new d.ContentStatement(f[h],d.locInfo(this._$));break;case 10:this.$=d.prepareRawBlock(f[h-2],f[h-1],f[h],this._$);break;case 11:this.$={path:f[h-3],params:f[h-2],hash:f[h-1]};break;case 12:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!1,this._$);break;case 13:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!0,this._$);break;case 14:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 15:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 16:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 17:this.$={strip:d.stripFlags(f[h-1],f[h-1]),program:f[h]};break;case 18:var i=d.prepareBlock(f[h-2],f[h-1],f[h],f[h],!1,this._$),j=new d.Program([i],null,{},d.locInfo(this._$));j.chained=!0,this.$={strip:f[h-2].strip,program:j,chain:!0};break;case 19:this.$=f[h];break;case 20:this.$={path:f[h-1],strip:d.stripFlags(f[h-2],f[h])};break;case 21:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 22:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 23:this.$=new d.PartialStatement(f[h-3],f[h-2],f[h-1],d.stripFlags(f[h-4],f[h]),d.locInfo(this._$));break;case 24:this.$=f[h];break;case 25:this.$=f[h];break;case 26:this.$=new d.SubExpression(f[h-3],f[h-2],f[h-1],d.locInfo(this._$));break;case 27:this.$=new d.Hash(f[h],d.locInfo(this._$));break;case 28:this.$=new d.HashPair(d.id(f[h-2]),f[h],d.locInfo(this._$));break;case 29:this.$=d.id(f[h-1]);break;case 30:this.$=f[h];break;case 31:this.$=f[h];break;case 32:this.$=new d.StringLiteral(f[h],d.locInfo(this._$));break;case 33:this.$=new d.NumberLiteral(f[h],d.locInfo(this._$));break;case 34:this.$=new d.BooleanLiteral(f[h],d.locInfo(this._$));break;case 35:this.$=new d.UndefinedLiteral(d.locInfo(this._$));break;case 36:this.$=new d.NullLiteral(d.locInfo(this._$));break;case 37:this.$=f[h];break;case 38:this.$=f[h];break;case 39:this.$=d.preparePath(!0,f[h],this._$);break;case 40:this.$=d.preparePath(!1,f[h],this._$);break;case 41:f[h-2].push({part:d.id(f[h]),original:f[h],separator:f[h-1]}),this.$=f[h-2];break;case 42:this.$=[{part:d.id(f[h]),original:f[h]}];break;case 43:this.$=[];break;case 44:f[h-1].push(f[h]);break;case 45:this.$=[];break;case 46:f[h-1].push(f[h]);break;case 53:this.$=[];break;case 54:f[h-1].push(f[h]);break;case 59:this.$=[];break;case 60:f[h-1].push(f[h]);break;case 65:this.$=[];break;case 66:f[h-1].push(f[h]);break;case 73:this.$=[];break;case 74:f[h-1].push(f[h]);break;case 77:this.$=[];break;case 78:f[h-1].push(f[h]);break;case 81:this.$=[];break;case 82:f[h-1].push(f[h]);break;case 85:this.$=[];break;case 86:f[h-1].push(f[h]);break;case 89:this.$=[f[h]];break;case 90:f[h-1].push(f[h]);break;case 91:this.$=[f[h]];break;case 92:f[h-1].push(f[h])}},table:[{3:1,4:2,5:[2,43],6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],46:[2,43],49:[2,43],53:[2,43]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:[1,11],14:[1,18],15:16,17:[1,21],22:14,25:15,27:[1,19],32:[1,20],37:[2,2],42:[2,2],45:[2,2],46:[1,12],49:[1,13],53:[1,17]},{1:[2,1]},{5:[2,44],13:[2,44],14:[2,44],17:[2,44],27:[2,44],32:[2,44],37:[2,44],42:[2,44],45:[2,44],46:[2,44],49:[2,44],53:[2,44]},{5:[2,3],13:[2,3],14:[2,3],17:[2,3],27:[2,3],32:[2,3],37:[2,3],42:[2,3],45:[2,3],46:[2,3],49:[2,3],53:[2,3]},{5:[2,4],13:[2,4],14:[2,4],17:[2,4],27:[2,4],32:[2,4],37:[2,4],42:[2,4],45:[2,4],46:[2,4],49:[2,4],53:[2,4]},{5:[2,5],13:[2,5],14:[2,5],17:[2,5],27:[2,5],32:[2,5],37:[2,5],42:[2,5],45:[2,5],46:[2,5],49:[2,5],53:[2,5]},{5:[2,6],13:[2,6],14:[2,6],17:[2,6],27:[2,6],32:[2,6],37:[2,6],42:[2,6],45:[2,6],46:[2,6],49:[2,6],53:[2,6]},{5:[2,7],13:[2,7],14:[2,7],17:[2,7],27:[2,7],32:[2,7],37:[2,7],42:[2,7],45:[2,7],46:[2,7],49:[2,7],53:[2,7]},{5:[2,8],13:[2,8],14:[2,8],17:[2,8],27:[2,8],32:[2,8],37:[2,8],42:[2,8],45:[2,8],46:[2,8],49:[2,8],53:[2,8]},{18:22,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:33,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:34,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{4:35,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{12:36,14:[1,18]},{18:38,54:37,58:39,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,9],13:[2,9],14:[2,9],16:[2,9],17:[2,9],27:[2,9],32:[2,9],37:[2,9],42:[2,9],45:[2,9],46:[2,9],49:[2,9],53:[2,9]},{18:41,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:42,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:43,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[2,73],47:44,59:[2,73],66:[2,73],74:[2,73],75:[2,73],76:[2,73],77:[2,73],78:[2,73],79:[2,73]},{21:[2,30],31:[2,30],52:[2,30],59:[2,30],62:[2,30],66:[2,30],69:[2,30],74:[2,30],75:[2,30],76:[2,30],77:[2,30],78:[2,30],79:[2,30]},{21:[2,31],31:[2,31],52:[2,31],59:[2,31],62:[2,31],66:[2,31],69:[2,31],74:[2,31],75:[2,31],76:[2,31],77:[2,31],78:[2,31],79:[2,31]},{21:[2,32],31:[2,32],52:[2,32],59:[2,32],62:[2,32],66:[2,32],69:[2,32],74:[2,32],75:[2,32],76:[2,32],77:[2,32],78:[2,32],79:[2,32]},{21:[2,33],31:[2,33],52:[2,33],59:[2,33],62:[2,33],66:[2,33],69:[2,33],74:[2,33],75:[2,33],76:[2,33],77:[2,33],78:[2,33],79:[2,33]},{21:[2,34],31:[2,34],52:[2,34],59:[2,34],62:[2,34],66:[2,34],69:[2,34],74:[2,34],75:[2,34],76:[2,34],77:[2,34],78:[2,34],79:[2,34]},{21:[2,35],31:[2,35],52:[2,35],59:[2,35],62:[2,35],66:[2,35],69:[2,35],74:[2,35],75:[2,35],76:[2,35],77:[2,35],78:[2,35],79:[2,35]},{21:[2,36],31:[2,36],52:[2,36],59:[2,36],62:[2,36],66:[2,36],69:[2,36],74:[2,36],75:[2,36],76:[2,36],77:[2,36],78:[2,36],79:[2,36]},{21:[2,40],31:[2,40],52:[2,40],59:[2,40],62:[2,40],66:[2,40],69:[2,40],74:[2,40],75:[2,40],76:[2,40],77:[2,40],78:[2,40],79:[2,40],81:[1,45]},{66:[1,32],80:46},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{50:47,52:[2,77],59:[2,77],66:[2,77],74:[2,77],75:[2,77],76:[2,77],77:[2,77],78:[2,77],79:[2,77]},{23:48,36:50,37:[1,52],41:51,42:[1,53],43:49,45:[2,49]},{26:54,41:55,42:[1,53],45:[2,51]},{16:[1,56]},{31:[2,81],55:57,59:[2,81],66:[2,81],74:[2,81],75:[2,81],76:[2,81],77:[2,81],78:[2,81],79:[2,81]},{31:[2,37],59:[2,37],66:[2,37],74:[2,37],75:[2,37],76:[2,37],77:[2,37],78:[2,37],79:[2,37]},{31:[2,38],59:[2,38],66:[2,38],74:[2,38],75:[2,38],76:[2,38],77:[2,38],78:[2,38],79:[2,38]},{18:58,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{28:59,31:[2,53],59:[2,53],66:[2,53],69:[2,53],74:[2,53],75:[2,53],76:[2,53],77:[2,53],78:[2,53],79:[2,53]},{31:[2,59],33:60,59:[2,59],66:[2,59],69:[2,59],74:[2,59],75:[2,59],76:[2,59],77:[2,59],78:[2,59],79:[2,59]},{19:61,21:[2,45],59:[2,45],66:[2,45],74:[2,45],75:[2,45],76:[2,45],77:[2,45],78:[2,45],79:[2,45]},{18:65,31:[2,75],48:62,57:63,58:66,59:[1,40],63:64,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{66:[1,70]},{21:[2,39],31:[2,39],52:[2,39],59:[2,39],62:[2,39],66:[2,39],69:[2,39],74:[2,39],75:[2,39],76:[2,39],77:[2,39],78:[2,39],79:[2,39],81:[1,45]},{18:65,51:71,52:[2,79],57:72,58:66,59:[1,40],63:73,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{24:74,45:[1,75]},{45:[2,50]},{4:76,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{45:[2,19]},{18:77,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:78,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{24:79,45:[1,75]},{45:[2,52]},{5:[2,10],13:[2,10],14:[2,10],17:[2,10],27:[2,10],32:[2,10],37:[2,10],42:[2,10],45:[2,10],46:[2,10],49:[2,10],53:[2,10]},{18:65,31:[2,83],56:80,57:81,58:66,59:[1,40],63:82,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{59:[2,85],60:83,62:[2,85],66:[2,85],74:[2,85],75:[2,85],76:[2,85],77:[2,85],78:[2,85],79:[2,85]},{18:65,29:84,31:[2,55],57:85,58:66,59:[1,40],63:86,64:67,65:68,66:[1,69],69:[2,55],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,31:[2,61],34:87,57:88,58:66,59:[1,40],63:89,64:67,65:68,66:[1,69],69:[2,61],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,20:90,21:[2,47],57:91,58:66,59:[1,40],63:92,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[1,93]},{31:[2,74],59:[2,74],66:[2,74],74:[2,74],75:[2,74],76:[2,74],77:[2,74],78:[2,74],79:[2,74]},{31:[2,76]},{21:[2,24],31:[2,24],52:[2,24],59:[2,24],62:[2,24],66:[2,24],69:[2,24],74:[2,24],75:[2,24],76:[2,24],77:[2,24],78:[2,24],79:[2,24]},{21:[2,25],31:[2,25],52:[2,25],59:[2,25],62:[2,25],66:[2,25],69:[2,25],74:[2,25],75:[2,25],76:[2,25],77:[2,25],78:[2,25],79:[2,25]},{21:[2,27],31:[2,27],52:[2,27],62:[2,27],65:94,66:[1,95],69:[2,27]},{21:[2,89],31:[2,89],52:[2,89],62:[2,89],66:[2,89],69:[2,89]},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],67:[1,96],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{21:[2,41],31:[2,41],52:[2,41],59:[2,41],62:[2,41],66:[2,41],69:[2,41],74:[2,41],75:[2,41],76:[2,41],77:[2,41],78:[2,41],79:[2,41],81:[2,41]},{52:[1,97]},{52:[2,78],59:[2,78],66:[2,78],74:[2,78],75:[2,78],76:[2,78],77:[2,78],78:[2,78],79:[2,78]},{52:[2,80]},{5:[2,12],13:[2,12],14:[2,12],17:[2,12],27:[2,12],32:[2,12],37:[2,12],42:[2,12],45:[2,12],46:[2,12],49:[2,12],53:[2,12]},{18:98,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{36:50,37:[1,52],41:51,42:[1,53],43:100,44:99,45:[2,71]},{31:[2,65],38:101,59:[2,65],66:[2,65],69:[2,65],74:[2,65],75:[2,65],76:[2,65],77:[2,65],78:[2,65],79:[2,65]},{45:[2,17]},{5:[2,13],13:[2,13],14:[2,13],17:[2,13],27:[2,13],32:[2,13],37:[2,13],42:[2,13],45:[2,13],46:[2,13],49:[2,13],53:[2,13]},{31:[1,102]},{31:[2,82],59:[2,82],66:[2,82],74:[2,82],75:[2,82],76:[2,82],77:[2,82],78:[2,82],79:[2,82]},{31:[2,84]},{18:65,57:104,58:66,59:[1,40],61:103,62:[2,87],63:105,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{30:106,31:[2,57],68:107,69:[1,108]},{31:[2,54],59:[2,54],66:[2,54],69:[2,54],74:[2,54],75:[2,54],76:[2,54],77:[2,54],78:[2,54],79:[2,54]},{31:[2,56],69:[2,56]},{31:[2,63],35:109,68:110,69:[1,108]},{31:[2,60],59:[2,60],66:[2,60],69:[2,60],74:[2,60],75:[2,60],76:[2,60],77:[2,60],78:[2,60],79:[2,60]},{31:[2,62],69:[2,62]},{21:[1,111]},{21:[2,46],59:[2,46],66:[2,46],74:[2,46],75:[2,46],76:[2,46],77:[2,46],78:[2,46],79:[2,46]},{21:[2,48]},{5:[2,21],13:[2,21],14:[2,21],17:[2,21],27:[2,21],32:[2,21],37:[2,21],42:[2,21],45:[2,21],46:[2,21],49:[2,21],53:[2,21]},{21:[2,90],31:[2,90],52:[2,90],62:[2,90],66:[2,90],69:[2,90]},{67:[1,96]},{18:65,57:112,58:66,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,22],13:[2,22],14:[2,22],17:[2,22],27:[2,22],32:[2,22],37:[2,22],42:[2,22],45:[2,22],46:[2,22],49:[2,22],53:[2,22]},{31:[1,113]},{45:[2,18]},{45:[2,72]},{18:65,31:[2,67],39:114,57:115,58:66,59:[1,40],63:116,64:67,65:68,66:[1,69],69:[2,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,23],13:[2,23],14:[2,23],17:[2,23],27:[2,23],32:[2,23],37:[2,23],42:[2,23],45:[2,23],46:[2,23],49:[2,23],53:[2,23]},{62:[1,117]},{59:[2,86],62:[2,86],66:[2,86],74:[2,86],75:[2,86],76:[2,86],77:[2,86],78:[2,86],79:[2,86]},{62:[2,88]},{31:[1,118]},{31:[2,58]},{66:[1,120],70:119},{31:[1,121]},{31:[2,64]},{14:[2,11]},{21:[2,28],31:[2,28],52:[2,28],62:[2,28],66:[2,28],69:[2,28]},{5:[2,20],13:[2,20],14:[2,20],17:[2,20],27:[2,20],32:[2,20],37:[2,20],42:[2,20],45:[2,20],46:[2,20],49:[2,20],53:[2,20]},{31:[2,69],40:122,68:123,69:[1,108]},{31:[2,66],59:[2,66],66:[2,66],69:[2,66],74:[2,66],75:[2,66],76:[2,66],77:[2,66],78:[2,66],79:[2,66]},{31:[2,68],69:[2,68]},{21:[2,26],31:[2,26],52:[2,26],59:[2,26],62:[2,26],66:[2,26],69:[2,26],74:[2,26],75:[2,26],76:[2,26],77:[2,26],78:[2,26],79:[2,26]},{13:[2,14],14:[2,14],17:[2,14],27:[2,14],32:[2,14],37:[2,14],42:[2,14],45:[2,14],46:[2,14],49:[2,14],53:[2,14]},{66:[1,125],71:[1,124]},{66:[2,91],71:[2,91]},{13:[2,15],14:[2,15],17:[2,15],27:[2,15],32:[2,15],42:[2,15],45:[2,15],46:[2,15],49:[2,15],53:[2,15]},{31:[1,126]},{31:[2,70]},{31:[2,29]},{66:[2,92],71:[2,92]},{13:[2,16],14:[2,16],17:[2,16],27:[2,16],32:[2,16],37:[2,16],42:[2,16],45:[2,16],46:[2,16],49:[2,16],53:[2,16]}],defaultActions:{4:[2,1],49:[2,50],51:[2,19],55:[2,52],64:[2,76],73:[2,80],78:[2,17],82:[2,84],92:[2,48],99:[2,18],100:[2,72],105:[2,88],107:[2,58],110:[2,64],111:[2,11],123:[2,70],124:[2,29]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:((null===n||"undefined"==typeof n)&&(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},c=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return b.yytext=b.yytext.substr(5,b.yyleng-9),this.popState(),16;case 4:return 14;case 5:return this.popState(),13;case 6:return 59;case 7:return 62;case 8:return 17;case 9:return this.popState(),this.begin("raw"),21;case 10:return 53;case 11:return 27;case 12:return 45;case 13:return this.popState(),42;case 14:return this.popState(),42;case 15:return 32;case 16:return 37;case 17:return 49;case 18:return 46;case 19:this.unput(b.yytext),this.popState(),this.begin("com");break;case 20:return this.popState(),13;case 21:return 46;case 22:return 67;case 23:return 66;case 24:return 66;case 25:return 81;case 26:break;case 27:return this.popState(),52;case 28:return this.popState(),31;case 29:return b.yytext=e(1,2).replace(/\\"/g,'"'),74;case 30:return b.yytext=e(1,2).replace(/\\'/g,"'"),74;case 31:return 79;case 32:return 76;case 33:return 76;case 34:return 77;case 35:return 78;case 36:return 75;case 37:return 69;case 38:return 71;case 39:return 66;case 40:return 66;case 41:return"INVALID";case 42:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,42],inclusive:!0}},a}();return b.lexer=c,a.prototype=b,b.Parser=a,new a}();b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(){}function e(a,b,c){void 0===b&&(b=a.length);var d=a[b-1],e=a[b-2];return d?"ContentStatement"===d.type?(e||!c?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(d.original):void 0:c}function f(a,b,c){void 0===b&&(b=-1);var d=a[b+1],e=a[b+2];return d?"ContentStatement"===d.type?(e||!c?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(d.original):void 0:c}function g(a,b,c){var d=a[null==b?0:b+1];if(d&&"ContentStatement"===d.type&&(c||!d.rightStripped)){var e=d.value;d.value=d.value.replace(c?/^\s+/:/^[ \t]*\r?\n?/,""),d.rightStripped=d.value!==e}}function h(a,b,c){var d=a[null==b?a.length-1:b-1];if(d&&"ContentStatement"===d.type&&(c||!d.leftStripped)){var e=d.value;return d.value=d.value.replace(c?/\s+$/:/[ \t]+$/,""),d.leftStripped=d.value!==e,d.leftStripped}}var i=c(8)["default"];b.__esModule=!0;var j=c(6),k=i(j);d.prototype=new k["default"],d.prototype.Program=function(a){var b=!this.isRootSeen;this.isRootSeen=!0;for(var c=a.body,d=0,i=c.length;i>d;d++){var j=c[d],k=this.accept(j);if(k){var l=e(c,d,b),m=f(c,d,b),n=k.openStandalone&&l,o=k.closeStandalone&&m,p=k.inlineStandalone&&l&&m;k.close&&g(c,d,!0),k.open&&h(c,d,!0),p&&(g(c,d),h(c,d)&&"PartialStatement"===j.type&&(j.indent=/([ \t]+$)/.exec(c[d-1].original)[1])),n&&(g((j.program||j.inverse).body),h(c,d)),o&&(g(c,d),h((j.inverse||j.program).body))}}return a},d.prototype.BlockStatement=function(a){this.accept(a.program),this.accept(a.inverse);var b=a.program||a.inverse,c=a.program&&a.inverse,d=c,i=c;if(c&&c.chained)for(d=c.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var j={open:a.openStrip.open,close:a.closeStrip.close,openStandalone:f(b.body),closeStandalone:e((d||b).body)};if(a.openStrip.close&&g(b.body,null,!0),c){var k=a.inverseStrip;k.open&&h(b.body,null,!0),k.close&&g(d.body,null,!0),a.closeStrip.open&&h(i.body,null,!0),e(b.body)&&f(d.body)&&(h(b.body),g(d.body))}else a.closeStrip.open&&h(b.body,null,!0);return j},d.prototype.MustacheStatement=function(a){return a.strip},d.prototype.PartialStatement=d.prototype.CommentStatement=function(a){var b=a.strip||{};return{inlineStandalone:!0,open:b.open,close:b.close}},b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){this.source=a,this.start={line:b.first_line,column:b.first_column},this.end={line:b.last_line,
column:b.last_column}}function e(a){return/^\[.*\]$/.test(a)?a.substr(1,a.length-2):a}function f(a,b){return{open:"~"===a.charAt(2),close:"~"===b.charAt(b.length-3)}}function g(a){return a.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function h(a,b,c){c=this.locInfo(c);for(var d=a?"@":"",e=[],f=0,g="",h=0,i=b.length;i>h;h++){var j=b[h].part,k=b[h].original!==j;if(d+=(b[h].separator||"")+j,k||".."!==j&&"."!==j&&"this"!==j)e.push(j);else{if(e.length>0)throw new n["default"]("Invalid path: "+d,{loc:c});".."===j&&(f++,g+="../")}}return new this.PathExpression(a,f,e,d,c)}function i(a,b,c,d,e,f){var g=d.charAt(3)||d.charAt(2),h="{"!==g&&"&"!==g;return new this.MustacheStatement(a,b,c,h,e,this.locInfo(f))}function j(a,b,c,d){if(a.path.original!==c){var e={loc:a.path.loc};throw new n["default"](a.path.original+" doesn't match "+c,e)}d=this.locInfo(d);var f=new this.Program([b],null,{},d);return new this.BlockStatement(a.path,a.params,a.hash,f,void 0,{},{},{},d)}function k(a,b,c,d,e,f){if(d&&d.path&&a.path.original!==d.path.original){var g={loc:a.path.loc};throw new n["default"](a.path.original+" doesn't match "+d.path.original,g)}b.blockParams=a.blockParams;var h=void 0,i=void 0;return c&&(c.chain&&(c.program.body[0].closeStrip=d.strip),i=c.strip,h=c.program),e&&(e=h,h=b,b=e),new this.BlockStatement(a.path,a.params,a.hash,b,h,a.strip,i,d&&d.strip,this.locInfo(f))}var l=c(8)["default"];b.__esModule=!0,b.SourceLocation=d,b.id=e,b.stripFlags=f,b.stripComment=g,b.preparePath=h,b.prepareMustache=i,b.prepareRawBlock=j,b.prepareBlock=k;var m=c(11),n=l(m)},function(a,b,c){"use strict";function d(a,b,c){if(f.isArray(a)){for(var d=[],e=0,g=a.length;g>e;e++)d.push(b.wrap(a[e],c));return d}return"boolean"==typeof a||"number"==typeof a?a+"":a}function e(a){this.srcFile=a,this.source=[]}b.__esModule=!0;var f=c(12),g=void 0;try{}catch(h){}g||(g=function(a,b,c,d){this.src="",d&&this.add(d)},g.prototype={add:function(a){f.isArray(a)&&(a=a.join("")),this.src+=a},prepend:function(a){f.isArray(a)&&(a=a.join("")),this.src=a+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),e.prototype={prepend:function(a,b){this.source.unshift(this.wrap(a,b))},push:function(a,b){this.source.push(this.wrap(a,b))},merge:function(){var a=this.empty();return this.each(function(b){a.add(["  ",b,"\n"])}),a},each:function(a){for(var b=0,c=this.source.length;c>b;b++)a(this.source[b])},empty:function(){var a=void 0===arguments[0]?this.currentLocation||{start:{}}:arguments[0];return new g(a.start.line,a.start.column,this.srcFile)},wrap:function(a){var b=void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return a instanceof g?a:(a=d(a,this,b),new g(b.start.line,b.start.column,this.srcFile,a))},functionCall:function(a,b,c){return c=this.generateList(c),this.wrap([a,b?"."+b+"(":"(",c,")"])},quotedString:function(a){return'"'+(a+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){var e=d(a[c],this);"undefined"!==e&&b.push([this.quotedString(c),":",e])}var f=this.generateList(b);return f.prepend("{"),f.add("}"),f},generateList:function(a,b){for(var c=this.empty(b),e=0,f=a.length;f>e;e++)e&&c.add(","),c.add(d(a[e],this,b));return c},generateArray:function(a,b){var c=this.generateList(a,b);return c.prepend("["),c.add("]"),c}},b["default"]=e,a.exports=b["default"]}])}),function(a){var b="undefined",c=typeof window!==b?window:typeof global!==b?global:this;"function"==typeof define&&define.amd?define("message-service/lib/SwitchBoard",[],function(){return a(c)}):"object"==typeof module&&module.exports?module.exports=a(c):c.MessageServiceSwitchBoard=a(c)}(function(a){function b(){this.port1=c.createElement(d)}var c=document;if(a.MessageChannel)var b=MessageChannel;else{var d="div";b.prototype={port1:null,port2:null}}return b}),function(a){var b,c=typeof window!==b?window:typeof global!==b?global:this;"function"==typeof define&&define.amd?define("message-service/lib/Topic",[],function(){return a(c)}):"object"==typeof module&&module.exports?module.exports=a(c):c.MessageServiceTopic=a(c)}(function(a){function b(){this.store={}}function c(a,b,c,d,e){this.scope=a,this.originalConsumer=b,this.name=e,c&&(this.handleEvent=this.handleEventOnce,this.topics=d)}function d(a,b){this.name=a,this.consumers=new n,this.consumerCount=0,this.hub=b}function e(a,b,c){for(var d=0,e=a.length,f=this.hub,g=this.name;e>d;d++)f.removeEventListener(g,a[d],!1,!0);c["delete"](b)}function f(a,b,c){return a&&a.publish(b,c)}function g(a,b,c,e,f,g){if(!f)throw new Error("message-service : no listener specified for topic : "+e);var h=c[e]||(c[e]=new d(e,b));h.addConsumer(a,f,g,c)}function h(a,b,c,d){var e=b[c];e&&d&&(e.removeConsumer(a,d),e.consumerCount<=0&&delete b[c])}function i(a,b){var c=a[b];c&&(c.removeAllConsumers(),delete a[b])}var j="Events",k="",l={bubbles:!1,cancelable:!1},m=a.document;b.prototype={get:function(a){return this.store[(a||k).toString()]},set:function(a,b){this.store[(a||k).toString()]=b},has:function(a){return(a||k).toString()in this.store},"delete":function(a){delete this.store[(a||k).toString()]},forEach:function(a,b){var c,d=this.store;for(c in d)a.call(b||this,d[c],c,this)}};var n=a.Map||b;c.prototype={handleEvent:function(a){return this.originalConsumer.call(this.scope,a.data,a)},handleEventOnce:function(a){return h(this.scope,this.topics,this.name,this.originalConsumer),this.originalConsumer.call(this.scope,a.data,a)}};var o=d.createEvent="function"==typeof CustomEvent?function(a,b){var c=new CustomEvent(a,l);return c.originalType=b||a,c}:function(a,b){var c=m.createEvent(j);return c.initEvent(a,l.bubbles,l.cancelable),c.originalType=b||a,c};return d.prototype.publish=function(a,b){var c=o(this.name,b);c.data=a,this.hub.dispatchEvent(c)},d.prototype.addConsumer=function(a,b,d,e){var f=b,g=this.hub,h=this.consumers.get(f),i=new c(a,b,d,e,this.name);h?this.removeConsumer(a,b):h=[],h.push(i),this.consumerCount++,this.consumers.set(f,h),g.addEventListener(this.name,i,!1,!0)},d.prototype.removeConsumer=function(a,b){var c,d=b,e=this.consumers.get(d),f=this.name;if(e)for(var g=e.length,h=0;g>h;h++)if(c=e[h],c.originalConsumer===b&&(!a||c.scope===a)){this.hub.removeEventListener(f,c,!1,!0),e.splice(h,1),e.length||this.consumers["delete"](d),this.consumerCount--;break}},d.prototype.removeAllConsumers=function(){var a=this.consumers;this.name;a.forEach(e,this),this.consumerCount=0},d.publishTopic=f,d.addTopicListener=g,d.removeTopicListener=h,d.removeAllTopicListeners=i,d}),function(a){"function"==typeof define&&define.amd?define("message-service/lib/Channel",["require","exports","module","./SwitchBoard","./Topic"],function(b,c,d){return a(b("./SwitchBoard"),b("./Topic"))}):"object"==typeof module&&module.exports?module.exports=a(require("./SwitchBoard"),require("./Topic")):root.MessageServiceChannel=a(root.MessageServiceSwitchBoard,root.MessageServiceTopic)}(function(a,b){function c(a,b,c,d){var e=this;this.target=a,this.handshake=b,this.initData=c,this.initDataFromTarget=null,this.hub=d.hub,this.messageService=d.messageService,this.topics=d.topics,this.channelTopics=d.channelTopics,this.status="pending",this.isMessageChannel=d.isMessageChannel,this.handshakeMessageCallback=function(a){e.handshakeMessage(a)},this.channelRepeaterCallback=function(a){e.channelRepeater(a)},this.channelConfirmationCallback=function(a){e.channelConfirmation(a)}}var d="undefined",e=typeof window!==d?window:typeof global!==d?global:this,f="message",g="msg",h="MessageService::channel",i="MessageService::channel::repeater",j="channel::ready",k="channel::error",l="MessageService::channel::complete",m="MessageService::channel::disconnect",n="channel::closed",o="*";return c.events={CHANNELMESSAGE:h,CHANNELMESSAGE_REPEATER:i,CHANNELMESSAGE_READY:j,CHANNELMESSAGE_ERROR:k,CHANNELMESSAGE_COMPLETE:l,CHANNELMESSAGE_DISCONNECT:m,CHANNELMESSAGE_CLOSED:n},c.prototype={publish:function(a,b){this.repeatToChannel({topic:a,msg:b})},acceptInvitation:function(c,d){if(this.target&&this.handshake&&this.isMessageChannel){var g,k=(this.topics,this.target);if(!c){var m=new a;c=m.port1,g=m.port2,this.initDataFromTarget=d}c.start(),this.port=c,c.addEventListener(f,this.channelRepeaterCallback,!1),b.addTopicListener(this,this.hub,this.channelTopics,i,this.repeatToChannel,!1),g?(c.addEventListener(f,this.channelConfirmationCallback,!1),k.postMessage({type:h,handshake:this.handshake,initData:this.initData},o,[g])):(this.status="ready",e.removeEventListener(f,this.handshakeMessage,!1),b.removeTopicListener(this,this.channelTopics,i,this.tempRepeater),c.postMessage({type:l,handshake:this.handshake}),this.messageService.publish(j,{id:this.handshake,data:d},!0))}},tempRepeater:function(a,b){a&&a.topic&&a.hasOwnProperty(g)&&this.target.postMessage({type:i,handshake:this.handshake,topic:a.topic,msg:a.msg},o)},handshakeMessage:function(a){var c=this.handshakeListener(this.target,a);if(c)if(c===h)this.acceptInvitation(a.ports&&a.ports[0],a.data&&a.data.initData);else if(c===i){var d=a.data;d&&d.topic&&d.hasOwnProperty(g)&&b.publishTopic(this.topics[d.topic],d.msg)}},channelRepeater:function(a){var c=a.data;c&&c.topic&&c.hasOwnProperty(g)?b.publishTopic(this.topics[c.topic],c.msg):this.handshakeListener(this.port,a)===m&&this.disconnect()},repeatToChannel:function(a,b){var c=this.target,d=this.port;return c&&c.closed!==!0?void(a&&a.topic&&a.hasOwnProperty(g)&&d.postMessage({topic:a.topic,msg:a.msg})):void this.disconnect()},channelConfirmation:function(a){this.handshakeListener(this.port,a)===l&&(e.removeEventListener(f,this.handshakeMessageCallback,!1),this.port.removeEventListener(f,this.channelConfirmationCallback,!1),b.removeTopicListener(this,this.channelTopics,i,this.tempRepeater),this.status="ready",this.messageService.publish(j,{id:this.handshake,data:this.initDataFromTarget},!0))},connect:function(){var a,c=!0;this.target===e,e.addEventListener(f,this.handshakeMessageCallback,!1),b.addTopicListener(this,this.hub,this.channelTopics,i,this.tempRepeater,!1);try{this.target.postMessage({type:h,handshake:this.handshake,initData:this.initData},o)}catch(a){c=!1,channelError=a}finally{c||(this.disconnect(),this.messageService.publish(k,{id:this.handshake,data:channelError},!0))}return c},disconnect:function(){var a=this.port;e.removeEventListener(f,this.handshakeMessageCallback,!1),b.removeTopicListener(this,this.channelTopics,i,this.tempRepeater),b.removeTopicListener(this,this.channelTopics,i,this.repeatToChannel),this.status="closed",a&&(a.removeEventListener(f,this.channelRepeaterCallback,!1),a.postMessage({type:m,handshake:this.handshake}),a.close()),this.messageService.publish(n,{id:this.handshake,data:this},!0)},handshakeListener:function(a,b){var c=b.data,d=this.handshake;return!c||c.type!==h&&c.type!==i&&c.type!==l&&c.type!==m||d!==c.handshake||a!==(b.source||b.srcElement)?!1:c.type}},c}),function(a){"function"==typeof define&&define.amd?define("message-service/lib/ChannelBroker",["require","exports","module","./Channel","./SwitchBoard","./Topic"],function(b,c,d){return a(b("./Channel"),b("./SwitchBoard"),b("./Topic"))}):"object"==typeof module&&module.exports?module.exports=a(require("./Channel"),require("./SwitchBoard"),require("./Topic")):root.MessageServiceChannelBroker=a(root.MessageServiceChannel,root.MessageServiceSwitchBoard,root.MessageServiceTopic)}(function(a,b,c){function d(a){return a.target&&a.target===this?(a.disconnect(),!0):!1}function e(a,c){this.hub=a,this.topics=c.topics,this.messageService=c,null===a&&(this.isMessageChannel=!1,this.hub=(new b).port1),this.channelTopics={},this.channels={}}var f="undefined",g=(typeof window!==f?window:typeof global!==f?global:this,a.events.CHANNELMESSAGE_REPEATER);return e.prototype={isMessageChannel:!0,publish:function(a,b){var d=c.createEvent(g);d.data={topic:a,msg:b},this.hub.dispatchEvent(d)},connect:function(b,c,d){var e=this.channels,f=e[c]||(e[c]=[]),g=new a(b,c,d,this);return g.connect()?(f.push(g),g):!1},disconnect:function(a,b){var c=this.channels,e=c[b];e&&e.length&&openChannels.some(d,a)}},e}),function(a){var b="undefined",c=typeof window!==b?window:typeof global!==b?global:this;"function"==typeof define&&define.amd?define("message-service/message-service",["require","exports","module","./lib/SwitchBoard","./lib/Topic","./lib/ChannelBroker"],function(b,d,e){return a(c,b("./lib/SwitchBoard"),b("./lib/Topic"),b("./lib/ChannelBroker"))}):"object"==typeof module&&module.exports?module.exports=a(c,require("./lib/SwitchBoard"),require("./lib/Topic"),require("./lib/ChannelBroker")):c.MessageService=a(c,c.MessageServiceSwitchBoard,c.MessageServiceTopic,c.MessageServiceChannelBroker)}(function(a,b,c,d){function e(a){var b;return a&&a.postMessage?b=a:a instanceof Node&&(b=a.window||a.contentWindow),b}function f(a){function e(a,b){c.publishTopic(m[g],a,b.originalType)}var f=this,i=a||this;if(a){var j;for(j in h)a[j]=this[j].bind(f)}var k=this.switchboard=new b,l=this.hub=k.port1,l=(this.dock=k.port2,this.hub),m=this.topics={},n=(new b).port1,o=this.allTopicsRepeater=new c(g,n);o.addConsumer(this,e,!1,{}),this.channelBroker=new d(this.dock,this),i.on=i.addListener=function(a,b){c.addTopicListener(this,l,m,a,b,!1)},i.off=i.removeListener=function(a,b){c.removeTopicListener(this,m,a,b)},i.one=i.once=function(a,b){c.addTopicListener(this,l,m,a,b,!0)}}var g="*",h=f.prototype={publish:function(a,b,d){var e=c.publishTopic(this.topics[a],b);return c.publishTopic(this.allTopicsRepeater,b,a),d!==!0&&this.channelBroker.publish(a,b),e},publishChannel:function(a,b){return this.channelBroker.publish(a,b)},removeAllListeners:function(a){var b,d=this.topics;if(a)c.removeAllTopicListeners(d,a);else for(b in d)c.removeAllTopicListeners(d,b)},getTopics:function(a){return this.topics},hasListeners:function(a){var b=this.topics[a];return a&&b?!!b.consumerCount:!1},openChannel:function(a,b,c){var d=e(a),f=b||"global";return d&&d.postMessage?this.channelBroker.connect(d,f,c):!1},closeChannel:function(a,b){var c=e(a),d=b||"global";return c&&c.postMessage?(this.channelBroker.disconnect(c,d),!0):!1}},i=function(a){var b=new f(a);return b.sharedMessageService=j,a||b},j=i();return j.sharedMessageService=j,j.bind=function(a){if(!a)throw new Error("Binding object not specified");return i(a)},j.create=i,j}),function(a,b){"function"==typeof define&&define.amd?define("bandwagon/bandwagon",["jquery","message-service/message-service"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("message-service/message-service")):a.Bandwagon=b(a.jQuery,null)}(this,function(a,b){"use strict";function c(){g()}var d,e={global:{}},f={},g=function(){};return c.prototype={registerEvents:function(b,c){b?e[b]?a.extend(!0,e[b],c):e[b]=c:a.extend(!0,e.global,c)},deleteEventsByKey:function(a){a&&e[a]?delete e[a]:console.log("bandwagon: specified namespace does not exist in events cache to delete",a)},getRegisteredEvents:function(){return e},getRegisteredEventsByKey:function(a){var b;return a&&e[a]?b=e[a]:console.log("please provide valid event key you want to retrieve from the events cache",a),b},getInstanceByKey:function(a){var c={};return c=a&&!f[a]?f[a]=b.create():f[a]},getInstancesAvailable:function(){return f},deleteInstanceByKey:function(a){a&&f[a]?delete f[a]:console.log("bandwagon: specified key does not exist in cache to delete",a)}},d=d||new c}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/events/ErrorEvents",[],b):"object"==typeof exports?module.exports=b():a.ErrorEvents=b()}(this,function(){var a={MEDIA_ERROR:"mediaError",BROWSER_SUPPORT_ERROR:"browserSupportError",UNKNOWN_ERROR:"unknownError",DEVELOPER_ERROR:"developerError"};return a}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/events/PlayerEvents",["bandwagon/bandwagon","bam-video-players/events/ErrorEvents"],b):"object"==typeof exports?module.exports=b(require("bandwagon/bandwagon"),require("bam-video-players/events/ErrorEvents")):a.PlayerEvents=b(a.Bandwagon,a.ErrorEvents)}(this,function(a,b){var c={BITRATE_PROFILES_CHANGED:"bitrateProfilesChanged",CLOSED_CAPTIONS_OFF:"closedCaptionsOff",CLOSED_CAPTIONS_ON:"closedCaptionsOn",CLOSED_CAPTIONS_AVAILABLE:"closedCaptionsAvailable",CLOSED_CAPTIONS_TRACKS_CHANGED:"closedCaptionsTracksChanged",AUDIO_TRACKS_CHANGED:"audioTracksChanged",AUDIO_TRACKS_AVAILABLE:"audioTracksAvailable",CURRENT_AUDIO_TRACK_CHANGED:"currentAudioTrackChanged",ERROR_MESSAGE:"errorMessage",FULLSCREEN_START:"fullscreenStart",FULLSCREEN_END:"fullscreenEnd",FULLSCREEN_CHANGE:"fullscreenChange",GENERIC_FLASH_EVENT:"genericFlashEvent",ISLIVE_CHANGED:"isLiveStreamChanged",IS_SLIDING_WINDOW_CHANGED:"isSlidingWindowChanged",LIVETIME_CHANGED:"liveTimeChanged",MEDIA_ATTACHED:"mediaAttached",MEDIA_CLEARED:"mediaCleared",MEDIA_SET:"mediaSet",MEDIA_ERROR:b.MEDIA_ERROR,MEDIA_START:"mediaStart",MEDIA_PLAYING:"mediaPlaying",MEDIA_PRE_PLAY:"mediaPrePlay",MEDIA_COMPLETE:"mediaComplete",MEDIA_PAUSED:"mediaPaused",MEDIA_RESUME:"mediaResume",MEDIA_RESUME_OUTSIDE_SEEKABLE_RANGE:"mediaResumeOutsideSeekableRange",MEDIA_PROGRESS:"mediaProgress",MEDIA_TIME_UPDATE:"mediaTimeUpdate",MEDIA_SEEK:"mediaSeek",MEDIA_RESIZE:"mediaResize",MEDIA_VOLUME_CHANGED:"mediaVolumeChanged",MEDIA_WARNING:"mediaWarning",META_DATA_LOADED:"metadataLoaded",META_DATA_PARSED:"metadataParsed",META_DATA_PT_REACHED:"metadataPtReached",EXT_META_DATA_REACHED:"extMetadataReached",MINI_MODE_START:"miniModeStart",MINI_MODE_END:"miniModeEnd",PLAY_CONTENT_CALLED:"playContentCalled",PLAYER_INITIALIZING:"playerInitializing",PLAYER_DESTROYING:"playerDestroying",PLAYER_LOADED:"playerLoaded",PLAYBACK_COMMERCIAL_BREAK_START:"playback_commercialBreak_start",PLAYBACK_COMMERCIAL_BREAK_SET_STATE:"playback_commercialBreak_setState",PLAYBACK_COMMERCIAL_BREAK_END:"playback_commercialBreak_end",PLAYBACK_FAILED_PERMISSION_DENIED:"playback_failed_permission_denied",STREAM_PLAYBACK_RATE_CHANGED:"streamPlaybackRateChanged",BUFFERING_STARTED:"playbackBufferingStarted",BUFFERING_ENDED:"playbackBufferingEnded",PLAYER_STATE_CHANGED:"playerStateChanged",PLAYLIST_COMPLETE:"playlistComplete",PLAYLIST_START:"playlistStart",PLAYLIST_LOADED:"playlistLoaded",POSTER_HIDDEN:"player.posterHidden",POSTER_SHOWN:"player.posterShown",CONTROLS_CHANGED:"controlsChanged",CONTROLS_VISIBILITY_CHANGED:"controlsVisibilityChanged",SHOW_POSTER:"player:showPoster",STREAM_METRICS_UPDATED:"streamMetricsUpdated",OVERLAY_LOADING_SHOW:"player:showLoading",OVERLAY_LOADING_HIDE:"player:hideLoading",OVERLAY_DEBUG_SHOW:"player:showDebug",OVERLAY_DEBUG_HIDE:"player:hideDebug",OVERLAY_DEBUG_ACTION_SHOW:"player:showDebugActions",OVERLAY_DEBUG_ACTION_HIDE:"player:hideDebugActions",SCRUBBER_END_REACHED:"scrubber_end_reached",TIME_CODE:"timeCode",CUE_POINT:"cuePoint",QUICK_REWIND:"quickRewind",QUICK_FORWARD:"quickForward",STREAM_MEDIA_ERROR:"streamMediaError",SCREEN_SMALL:"screenSmall",SCREEN_LARGE:"screenLarge",VIEW_HIGHLIGHT:"viewPlayerHighlight",SEEK_COMPLETE:"seekComplete",PLAYBACK_STARTED:"playbackStarted",CLOSE_HIGHLIGHT:"playerCloseHighlight",ENTER_MINI_MODE_BUTTON_CLICK:"enterMiniModeButtonClick",EXIT_MINI_MODE_BUTTON_CLICK:"exitMiniModeButtonClick",ENABLE_CLOSED_CAPTIONS:"enableClosedCaptionsEvent",DISABLE_CLOSED_CAPTIONS:"disableClosedCaptionsEvent",TRACKING_EVENT:"trackingEvent",FREEWHEEL_AD_STARTED:"freewheelAdStarted",FREEWHEEL_AD_ENDED:"freewheelAdEnded",MUTE_BUTTON:"muteButton",CHANGE_VOLUME:"changeVolume",SELECTED_MEDIA_SLOT_CHANGED:"selectedMediaSlotChanged",VIDEO_AREA_LAYOUT_STATE_CHANGED:"videoAreaLayoutStateChanged",SELECTED_FEED_UPDATED:"selectedFeedUpdated",STREAM_SELECTION_OPTIONS_UPDATED:"streamSelectionOptionsUpdated",DEVELOPER_ERROR:b.DEVELOPER_ERROR};return a.registerEvents("PLAYER_EVENTS",c),c}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/overlays/BaseOverlay",["lodash/lodash","bam-video-players/events/PlayerEvents"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/events/PlayerEvents")):a.BaseOverlay=b(a.lodash,a.PlayerEvents)}(this,function(a,b,c,d){function e(a,b,c){if(!b)throw new Error("player is required");this.id=this.getId(b.id),this.config=a,this.container=c,this.isVisible=!1,this.logger=b.logger,this.player=b,this.isEnabled()?(f.call(this,b),this.log("Using Default")):this.log("Using Custom Loading")}function f(a){this.uiHelper=this.createUIHelper(a.id),g.call(this),this.addBoundFxns(),this.addListeners(this.player.dispatcher),this.modelUpdated(),a.state&&a.state.isInitialized()&&h.call(this)}function g(){this.boundFxns={onPlayerLoaded:h.bind(this)}}function h(b){var c=this.container;this.$overlay=this.uiHelper.getHTMLElement(c),this.log("onPlayerLoaded. Div added",a.get(b,"player.id","")),this.postLoad()}return e.prototype={constructor:e,getExpectedClasses:function(){return[]},addBoundFxns:function(){},isEnabled:function(){return!0},getId:function(a){return"BaseOverlay."+a},createUIHelper:function(a){throw new Error("createUIHelper needs to be overridden")},addListeners:function(a){a.on(b.PLAYER_LOADED,this.boundFxns.onPlayerLoaded)},removeListeners:function(a){a.off(b.PLAYER_LOADED,this.boundFxns.onPlayerLoaded)},modelUpdated:function(){},postLoad:function(){},hide:function(){this.isEnabled()&&(this.log("hide"),this.isVisible=!1,this.modelUpdated.call(this),this.uiHelper&&this.uiHelper.hide())},show:function(){this.isEnabled()&&(this.log("show"),this.isVisible=!0,this.modelUpdated.call(this),this.uiHelper&&this.uiHelper.show())},destroy:function(){this.$overlay&&(this.log("destroy",this.$overlay),this.$overlay.remove()),this.removeListeners(this.player.dispatcher)},log:function(){var a="["+this.id+"]";this.logger?this.logger.info(a,Array.prototype.slice.call(arguments).join(" ")):console.log(a,Array.prototype.slice.call(arguments).join(" "))}},e}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/events/UserEvents",["bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("bandwagon/bandwagon")):a.UserEvents=b(a.Bandwagon)}(this,function(a){var b={LOCALE_CHANGE_REQUESTED:"locale_change_requested",PLAY_REQUESTED:"play_requested",PAUSE_REQUESTED:"pause_requested",ADJUST_VOLUME_REQUESTED:"adjust_volume_requested",ADJUST_BITRATE_THRESHOLD_REQUESTED:"adjust_bitrate_threshold_requested",AUDIO_RENDITION_REQUESTED:"audio_rendition_requested",CLOSED_CAPTIONS_TOGGLE_REQUESTED:"closed_captions_toggle_requested",CONTAINER_RESIZE:"containerResize",GOTO_START_REQUESTED:"goto_start_requested",HIDE_CONTROLS:"hide_controls",MUTE_REQUESTED:"mute_requested",REWIND_REQUESTED:"rewind_requested",FASTFORWARD_REQUESTED:"fastforward_requested",LIVE_REQUESTED:"live_requested",POSTER_CLICKED:"poster_clicked",RESET_CONTROLS_VISIBILITY:"reset_controls_visibility",SEEK_REQUESTED:"seek_requested",SHOW_CONTROLS:"show_controls",SWAP_SLOTS:"swapSlots",THUMB_DRAG_ENDED:"thumb_drag_ended",THUMB_DRAGGING:"thumb_dragging",THUMB_DRAG_STARTED:"thumb_drag_started",TOGGLE_FULL_SCREEN_REQUESTED:"toggle_full_screen_requested",TOGGLE_DEBUG_PANEL:"toggleDebugPanel",UNMUTE_REQUESTED:"unmute_requested",VIDEO_KEY_DOWN:"video_key_down",VIDEO_POINTER_IDLE:"video_pointer_idle",WINDOW_RESIZE:"window_resize",VIDEO_POINTER_CLICK:"video_pointer_click",VIDEO_POINTER_ENTER:"video_pointer_enter",VIDEO_POINTER_UP:"video_pointer_up",VIDEO_POINTER_DOWN:"video_pointer_down",VIDEO_POINTER_MOVE:"video_pointer_move",VIDEO_POINTER_LEAVE:"video_pointer_leave",VIDEO_POINTER_OUT:"video_pointer_out",VIDEO_POINTER_CANCEL:"video_pointer_cancel"};return a.registerEvents("USER_EVENTS",b),b}),define("text!bam-video-players/overlays/noMedia/noMediaTemplate.html",[],function(){return'<div class="video-player__noMedia js-video-player__noMedia">\n    <svg\n        id="Layer_1"\n        class="bamtechLogo"\n        data-name="Layer 1"\n        xmlns="http://www.w3.org/2000/svg"\n        xmlns:xlink="http://www.w3.org/1999/xlink"\n        viewBox="0 0 196.05 237.24">\n        <defs>\n            <style>\n                .cls-1{fill: none;}\n                .cls-2{}\n                .cls-3{fill: #ee2649;}\n            </style>\n            <clipPath id="clip-path">\n                <rect class="cls-1" width="196.05" height="237.24"/>\n            </clipPath>\n        </defs>\n        <title>Bamtech_media_logo_Red_on_Dark</title>\n        <g class="cls-2">\n            <g id="_Group_" data-name="&lt;Group&gt;">\n                <g id="_Group_2" data-name="&lt;Group&gt;">\n                    <g id="_Group_3" data-name="&lt;Group&gt;">\n                        <g id="_Group_4" data-name="&lt;Group&gt;">\n                            <g id="_Group_5" data-name="&lt;Group&gt;">\n                                <g id="_Group_6" data-name="&lt;Group&gt;">\n                                    <g id="_Group_7" data-name="&lt;Group&gt;">\n                                        <path class="cls-3" d="M139.1,119.59l-.68-1,.68-1A43.56,43.56,0,0,0,103.47,49H49V188.23h54.45a43.58,43.58,0,0,0,39-63.09A42.25,42.25,0,0,0,139.1,119.59ZM81.9,157,89,123.44l-10.74-4.86,25.15-38.65L96.3,113.61,107,118.48Z"/>\n                                    </g>\n                                </g>\n                            </g>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </g>\n    </svg>\n    <img class="noMediaImage"/>\n</div>\n'}),function(a,b){if("function"==typeof define&&define.amd)define("bam-video-players/overlays/noMedia/NoMediaUIHelper",["jquery","lodash/lodash","handlebars/handlebars","text!bam-video-players/overlays/noMedia/noMediaTemplate.html"],b);else if("object"==typeof exports)module.exports=b(require("jquery"),require("lodash/lodash"),require("handlebars/handlebars"),require("text!bam-video-players/overlays/noMedia/noMediaTemplate.html"));else{var c=a.jQuery("#NoMediaTemplate").html();a.NoMedia=b(a.jQuery,a._,a.Handlebars,c)}}(this,function(a,b,c,d){"use strict";function e(a,c){this.playerName=a,this.noMediaUrl=0!==b.size(b.trim(c))?c:null,this.eventNames={},this.classes={JS_NOMEDIA:"js-video-player__noMedia",HIDE:"video-player__noMedia--hide",LOGO:"bamtechLogo",LOGO_HIDE:"bamtechLogo--hide",IMG:"noMediaImage"}}function f(){console.warn("[NoMediaUIHelper]",Array.prototype.slice.call(arguments).join(" "))}return e.prototype.getHTMLElement=function(b){try{return this.template=c.compile(d),b.innerHTML=this.template(),this.$overlay=a("."+this.classes.JS_NOMEDIA,b),this.setSource(this.noMediaUrl),this.$overlay}catch(e){f("Error creating NoMedia div",e)}return null},e.prototype.hide=function(){this.$overlay&&this.$overlay.addClass(this.classes.HIDE)},e.prototype.show=function(){this.$overlay&&this.$overlay.removeClass(this.classes.HIDE)},e.prototype.setSource=function(a){if(this.$overlay){var c=this.$overlay.find("."+this.classes.IMG);a&&c.attr("src")!==a&&c.attr("src",a),b.size(a)>0?this.hideLogo():this.showLogo()}},e.prototype.hideLogo=function(){var a=this.$overlay.find("."+this.classes.LOGO);a&&a.addClass(this.classes.LOGO_HIDE)},e.prototype.showLogo=function(){var a=this.$overlay.find("."+this.classes.LOGO);a&&a.removeClass(this.classes.LOGO_HIDE)},e}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/overlays/noMedia/NoMediaOverlay",["lodash/lodash","bam-video-players/overlays/BaseOverlay","bam-video-players/events/PlayerEvents","bam-video-players/events/UserEvents","bam-video-players/overlays/noMedia/NoMediaUIHelper"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/overlays/BaseOverlay"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/UserEvents"),require("bam-video-players/overlays/noMedia/NoMediaUIHelper")):a.NoMediaOverlay=b(a.lodash,a.BaseOverlay,a.PlayerEvents,a.UserEvents,a.NoMediaUIHelper)}(this,function(a,b,c,d,e){function f(a,b,c){f.prototype["super"].constructor.call(this,a,b,c)}return f.prototype=Object.create(b.prototype),f.prototype.constructor=f,f.prototype["super"]=b.prototype,f.prototype.getId=function(a){return"NoMediaOverlay."+a},f.prototype.getExpectedClasses=function(){return this.uiHelper.classes},f.prototype.addBoundFxns=function(){this.boundFxns.onShow=this.show.bind(this),this.boundFxns.onHide=this.hide.bind(this),this.boundFxns.onSetMedia=this.onSetMedia.bind(this)},f.prototype.createUIHelper=function(b){return new e(b,a.get(this.config,"html5.noMediaUrl",null))},f.prototype.addListeners=function(a){f.prototype["super"].addListeners.call(this,a),a.on(c.MEDIA_SET,this.boundFxns.onSetMedia),a.on(c.MEDIA_CLEARED,this.boundFxns.onShow)},f.prototype.removeListeners=function(a){f.prototype["super"].removeListeners.call(this,a),a.off(c.MEDIA_SET,this.boundFxns.onSetMedia),a.off(c.MEDIA_CLEARED,this.boundFxns.onShow)},f.prototype.onSetMedia=function(b){var c=a.isObject(a.get(b,"clip")),d=a.size(a.get(b,"clip.path"))>0;c&&d?this.hide():this.show()},f}),define("text!bam-video-players/overlays/poster/posterTemplate.html",[],function(){return'<div class="video-player__poster video-player__poster--hide js-video-player__poster">\n    <div class="centering-wrapper">\n        <i class="media-icon media-icon--play-overlay"></i>\n    </div>\n    <img class="posterImage" src="{{posterUrl}}" />\n</div>\n'}),function(a,b){if("function"==typeof define&&define.amd)define("bam-video-players/overlays/poster/PosterUIHelper",["jquery","lodash/lodash","handlebars/handlebars","text!bam-video-players/overlays/poster/posterTemplate.html"],b);else if("object"==typeof exports)module.exports=b(require("jquery"),require("lodash/lodash"),require("handlebars/handlebars"),require("text!bam-video-players/overlays/poster/posterTemplate.html"));else{var c=a.jQuery("#PosterTemplate").html();a.Poster=b(a.jQuery,a._,a.Handlebars,c)}}(this,function(a,b,c,d){"use strict";function e(a){this.playerName=a,this.eventNames={POSTER_CLICK:"poster-clicked"},this.classes={JS_POSTER:"js-video-player__poster",HIDE:"video-player__poster--hide",IMG:"posterImage"}}function f(){console.warn("[PosterUIHelper]",Array.prototype.slice.call(arguments).join(" "))}return e.prototype.getHTMLElement=function(b){try{return this.template=c.compile(d),b.innerHTML=this.template(),this.$overlay=a("."+this.classes.JS_POSTER,b),this.setSource(""),this.$overlay}catch(e){f("Error creating Poster div",e)}return null},e.prototype.hide=function(){this.$overlay&&this.$overlay.addClass(this.classes.HIDE)},e.prototype.show=function(){this.$overlay&&this.$overlay.removeClass(this.classes.HIDE)},e.prototype.addListener=function(b,c){a(this).on(b,c)},e.prototype.setSource=function(a){if(this.$overlay){var b=this.$overlay.find("."+this.classes.IMG);b.attr("src")!==a&&b.attr("src",a)}},e.prototype.addClickHandler=function(){var a=this;this.$overlay&&(this.removeClickHandler(),this.$overlay.one("click",function(){a.publish(a.eventNames.POSTER_CLICK)}))},e.prototype.removeClickHandler=function(){this.$overlay&&this.$overlay.off("click")},e.prototype.publish=function(b,c){a(this).triggerHandler(b,c)},e}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/overlays/poster/PosterOverlay",["lodash/lodash","bam-video-players/overlays/BaseOverlay","bam-video-players/events/PlayerEvents","bam-video-players/events/UserEvents","bam-video-players/overlays/poster/PosterUIHelper"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/overlays/BaseOverlay"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/UserEvents"),require("bam-video-players/overlays/poster/PosterUIHelper")):a.PosterOverlay=b(a.lodash,a.BaseOverlay,a.PlayerEvents,a.UserEvents,a.PosterUIHelper)}(this,function(a,b,c,d,e){function f(a,b,c){f.prototype["super"].constructor.call(this,a,b,c),f.prototype["super"].hide.call(this),this.isEnabled()&&this.uiHelper&&this.uiHelper.addListener(this.uiHelper.eventNames.POSTER_CLICK,j.bind(this));
}function g(a){this.uiHelper&&this.uiHelper.setSource(a)}function h(b){var c=a.get(b,"clip"),d=a.size(a.get(c,"path"))>0,e=a.get(b,"showPoster",!1)&&c&&d,f=this.player.utils.getClipReader(),g=f.getPosterImage(c);this.model=g,e?this.show():this.hide()}function i(b){var c=a.get(b,"url","");this.model=c,this.show()}function j(){this.player.dispatcher.publish(d.POSTER_CLICKED)}return f.prototype=Object.create(b.prototype),f.prototype.constructor=f,f.prototype["super"]=b.prototype,f.prototype.getId=function(a){return"PosterOverlay."+a},f.prototype.getExpectedClasses=function(){return this.uiHelper.classes},f.prototype.addBoundFxns=function(){this.boundFxns.onShow=this.show.bind(this),this.boundFxns.onHide=this.hide.bind(this),this.boundFxns.showPoster=i.bind(this),this.boundFxns.setPosterFromClip=h.bind(this)},f.prototype.createUIHelper=function(a){return new e(a)},f.prototype.addListeners=function(b){f.prototype["super"].addListeners.call(this,b);var d=a.get(this.player.utils.getEventList(),"AdEvents",{});b.on(c.MEDIA_START,this.boundFxns.onHide),b.on(d.AD_START,this.boundFxns.onHide),b.on(c.SHOW_POSTER,this.boundFxns.showPoster),b.on(c.MEDIA_PLAYING,this.boundFxns.onHide),b.on(c.MEDIA_SET,this.boundFxns.setPosterFromClip),b.on(c.OVERLAY_LOADING_SHOW,this.boundFxns.onHide),b.on(c.MEDIA_CLEARED,this.boundFxns.onHide)},f.prototype.removeListeners=function(b){f.prototype["super"].removeListeners.call(this,b);var d=a.get(this.player.utils.getEventList(),"AdEvents",{});b.off(c.MEDIA_START,this.boundFxns.onHide),b.off(d.AD_START,this.boundFxns.onHide),b.off(c.SHOW_POSTER,this.boundFxns.showPoster),b.off(c.MEDIA_PLAYING,this.boundFxns.onHide),b.off(c.MEDIA_SET,this.boundFxns.setPosterFromClip),b.off(c.OVERLAY_LOADING_SHOW,this.boundFxns.onHide),b.off(c.MEDIA_CLEARED,this.boundFxns.onHide)},f.prototype.modelUpdated=function(){this.model&&g.call(this,this.model)},f.prototype.show=function(){f.prototype["super"].show.call(this),this.uiHelper.addClickHandler(),this.player.dispatcher.publish(c.POSTER_SHOWN)},f.prototype.hide=function(){var a=this.isVisible;a&&(f.prototype["super"].hide.call(this),this.uiHelper.removeClickHandler(),this.player.dispatcher.publish(c.POSTER_HIDDEN))},f}),define("text!bam-video-players/overlays/loading/loadingTemplate.html",[],function(){return'<div class="js-video-player-loader player-loader-container player-loader-container--dark">\n    <div class="video-player-loader player-media-spinner player-media-spinner--medium player-media-spinner--dark"></div>\n</div>'}),function(a,b){if("function"==typeof define&&define.amd)define("bam-video-players/overlays/loading/LoadingUIHelper",["jquery","lodash/lodash","handlebars/handlebars","text!bam-video-players/overlays/loading/loadingTemplate.html"],b);else if("object"==typeof exports)module.exports=b(require("jquery"),require("lodash/lodash"),require("handlebars/handlebars"),require("text!bam-video-players/overlays/loading/loadingTemplate.html"));else{var c=a.jQuery("#LoadingTemplate").html();a.LoadingUIHelper=b(a.jQuery,a._,a.Handlebars,c)}}(this,function(a,b,c,d){"use strict";function e(a){this.playerName=a,this.classes={JS_LOADER:"js-video-player-loader"}}function f(){console.warn("[LoadingUIHelper]",Array.prototype.slice.call(arguments).join(" "))}return e.prototype.getHTMLElement=function(b){try{return this.template=c.compile(d),b.innerHTML=this.template(),this.$overlay=a("."+this.classes.JS_LOADER,b),this.hide(),this.$overlay}catch(e){f("Error creating Loading div",e)}return null},e.prototype.hide=function(){this.$overlay&&this.$overlay.hide()},e.prototype.show=function(){this.$overlay&&this.$overlay.show()},e}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/overlays/loading/LoadingOverlay",["lodash/lodash","bam-video-players/overlays/BaseOverlay","bam-video-players/events/PlayerEvents","bam-video-players/events/ErrorEvents","bam-video-players/overlays/loading/LoadingUIHelper"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/overlays/BaseOverlay"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/ErrorEvents"),require("bam-video-players/overlays/loading/LoadingUIHelper")):a.LoadingOverlay=b(a.lodash,a.BaseOverlay,a.PlayerEvents,a.ErrorEvents,a.LoadingUIHelper)}(this,function(a,b,c,d,e){function f(a,b,c){f.prototype["super"].constructor.call(this,a,b,c)}return f.prototype=Object.create(b.prototype),f.prototype.constructor=f,f.prototype["super"]=b.prototype,f.prototype.getId=function(a){return"LoadingOverlay."+a},f.prototype.getExpectedClasses=function(){return this.uiHelper.classes},f.prototype.addBoundFxns=function(){this.boundFxns.onShow=this.show.bind(this),this.boundFxns.onHide=this.hide.bind(this)},f.prototype.createUIHelper=function(a){return new e(a)},f.prototype.addListeners=function(b){f.prototype["super"].addListeners.call(this,b),b.on(c.OVERLAY_LOADING_SHOW,this.boundFxns.onShow),b.on(c.OVERLAY_LOADING_HIDE,this.boundFxns.onHide),a.each(d,function(a){b.on(a,this.boundFxns.onHide)}.bind(this))},f.prototype.removeListeners=function(b){f.prototype["super"].removeListeners.call(this,b),b.off(c.OVERLAY_LOADING_SHOW,this.boundFxns.onShow),b.off(c.OVERLAY_LOADING_HIDE,this.boundFxns.onHide),a.each(d,function(a){b.off(a,this.boundFxns.onHide)}.bind(this))},f}),define("text!bam-video-players/overlays/messages/messageTemplate.html",[],function(){return'<div class="alert warning">\n    <button class="alert-close">\n        <!-- \'X\' button -->\n        <svg id="x-svg" viewBox="0 0 100 100" class="svg-btn">\n            <path d="M100 78.905L78.735 100 49.608 71.094 21.263 99.217 0 78.123 28.344 50 0 21.877 21.263.78l28.345 28.125L78.735 0 100 21.094 70.862 50z"></path>\n        </svg>\n    </button>\n    <div class="alert-message-text"></div>\n</div>'}),function(a,b){if("function"==typeof define&&define.amd)define("bam-video-players/overlays/messages/MessageUIHelper",["jquery","lodash/lodash","handlebars/handlebars","text!bam-video-players/overlays/messages/messageTemplate.html"],b);else if("object"==typeof exports)module.exports=b(require("jquery"),require("lodash/lodash"),require("handlebars/handlebars"),require("text!bam-video-players/overlays/messages/messageTemplate.html"));else{var c=a.jQuery("#MessageTemplate").html();a.MessageUIHelper=b(a.jQuery,a._,a.Handlebars,c)}}(this,function(a,b,c,d){"use strict";function e(a){this.playerName=a,this.eventNames={CLOSE_MESSAGE_PANEL:"closeMessagePanel"},this.classes={ALERT_MESSAGE_TEXT:"alert-message-text",ALERT:"alert",CLOSE_BTN:"alert-close"}}function f(){console.log("[MessageUIHelper]",Array.prototype.slice.call(arguments).join(" "))}function g(){console.warn("[MessageUIHelper]",Array.prototype.slice.call(arguments).join(" "))}return e.prototype.getHTMLElement=function(b){try{var e=c.compile(d);b.innerHTML=e(),this.$messages=a("."+this.classes.ALERT_MESSAGE_TEXT,b),this.$overlay=a("."+this.classes.ALERT,b),this.closeBtn=a("."+this.classes.CLOSE_BTN,b);var f=this.$overlay,h=this;return this.closeBtn&&this.closeBtn.on("click",function(){a(h).triggerHandler(h.eventNames.CLOSE_MESSAGE_PANEL)}),this.hide(),f}catch(i){g("Error creating Message div",i)}return null},e.prototype.addListener=function(b,c){a(this).on(b,c)},e.prototype.removeListener=function(b,c){a(this).on(b,c)},e.prototype.destroy=function(){this.closeBtn&&this.closeBtn.off()},e.prototype.hide=function(){this.$overlay&&this.$overlay.hide()},e.prototype.show=function(){this.$overlay&&this.$overlay.show()},e.prototype.showMessageQueue=function(a){try{if(!this.$overlay)return;var c="";b.forEach(a,function(a){c+="<li>"+a+"</li>"}),this.$messages&&(this.$messages.html(c),b.size(c)>0?(f("addMessage",c),this.show()):this.hide())}catch(d){g("Error adding Messages",d)}},e}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/overlays/messages/MessageOverlay",["lodash/lodash","bam-video-players/overlays/BaseOverlay","bam-video-players/events/PlayerEvents","bam-video-players/events/ErrorEvents","bam-video-players/overlays/messages/MessageUIHelper"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/overlays/BaseOverlay"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/ErrorEvents"),require("bam-video-players/overlays/messages/MessageUIHelper")):a.MessageOverlay=b(a.lodash,a.BaseOverlay,a.PlayerEvents,a.ErrorEvents,a.MessageUIHelper)}(this,function(a,b,c,d,e){function f(a,b,c){this.messageQueue=[],f.prototype["super"].constructor.call(this,a,b,c)}function g(){this.messageQueue=[],this.modelUpdated()}function h(b){this.log("onShowError",b.message),this.messageQueue.push(a.get(b,"message","unknown error occured")),this.modelUpdated()}function i(){this.hide()}return f.prototype=Object.create(b.prototype),f.prototype.constructor=f,f.prototype["super"]=b.prototype,f.prototype.getId=function(a){return"MessageOverlay."+a},f.prototype.getExpectedClasses=function(){return this.uiHelper.classes},f.prototype.addBoundFxns=function(){this.boundFxns.onShowError=h.bind(this),this.boundFxns.closeMessagePanel=i.bind(this)},f.prototype.isEnabled=function(){return a.get(this.config,"html5.useDefaultMessaging",!0)},f.prototype.createUIHelper=function(a){return new e(a)},f.prototype.addListeners=function(b){f.prototype["super"].addListeners.call(this,b),this.isEnabled()&&this.uiHelper&&this.uiHelper.addListener(this.uiHelper.eventNames.CLOSE_MESSAGE_PANEL,this.boundFxns.closeMessagePanel),a.each(d,function(a){b.on(a,this.boundFxns.onShowError)}.bind(this))},f.prototype.removeListeners=function(b){this.log("removeListeners",b),f.prototype["super"].removeListeners.call(this,b),this.uiHelper&&this.uiHelper.removeListener(this.uiHelper.eventNames.CLOSE_MESSAGE_PANEL,this.boundFxns.closeMessagePanel),a.each(d,function(a){b.off(a,this.boundFxns.onShowError)}.bind(this))},f.prototype.destroy=function(){f.prototype["super"].destroy.call(this),this.uiHelper&&this.uiHelper.destroy()},f.prototype.modelUpdated=function(){this.isEnabled()&&this.uiHelper&&this.uiHelper.showMessageQueue(this.messageQueue)},f.prototype.hide=function(){g.call(this),f.prototype["super"].hide.call(this)},f}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/valueObjects/PlayerInfoVO",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.PlayerInfoVO=b(a.lodash)}(this,function(a){var b=function(a,b,c,d,e,f,g,h,i){this.playerName=a||"",this.playerVersion=b||"",this.clientType=c||"",this.clientAdapterName=d||"",this.clientAdapterModule=e||"",this.clientAdapterVersion=f||"",this.clientLibraryName=g||"",this.clientLibraryVersion=h||"",this.versions=i};return b.prototype.toString=function(){return"PlayerInfoVO:"+JSON.stringify(this)},b}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/valueObjects/BitrateWindowVO",["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):a.BitrateWindowVO=b(a.jQuery)}(this,function(a){"use strict";function b(a,b,c){this.minBitrateKbps=a||-1,this.maxBitrateKbps=b||-1,this.initialBitrateKbps=c||-1}return b.prototype=a.extend(b.prototype,{isInWindow:function(a){return a>=this.minBitrateKbps&&a<=this.maxBitrateKbps},toString:function(){return"BitrateWindowVO: ["+this.minBitrateKbps+","+this.maxBitrateKbps+"] - initialBitrateKbps="+this.initialBitrateKbps}}),b}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/valueObjects/ABRConstraintsVO",["jquery","lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash")):a.ABRConstraintsVO=b(a.jQuery,a._)}(this,function(a,b){"use strict";function c(a,c){this.minBitrateKbps=-1,this.maxBitrateKbps=-1,this.initialBitrateKbps=-1,this.maxWidth=-1,this.maxHeight=-1;var d=b.functionsIn(a),e=b.functionsIn(c);b.assign(this,b.omit(a,d),b.omit(c,e))}return c.prototype=a.extend(c.prototype,{toString:function(){return"ABRConstraintsVO:"+JSON.stringify(b.omit(this,"toString"))}}),c}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/helpers/MediaMetricsManager",["lodash/lodash","device/device","bam-video-players/valueObjects/PlayerInfoVO","bam-video-players/events/PlayerEvents","bam-video-players/valueObjects/BitrateWindowVO","bam-video-players/valueObjects/ABRConstraintsVO"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("device/device"),require("bam-video-players/valueObjects/PlayerInfoVO"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/valueObjects/BitrateWindowVO"),require("bam-video-players/valueObjects/ABRConstraintsVO")):a.MediaMetricsManager=b(a.lodash,a.Device,a.PlayerInfoVO,a.PlayerEvents,a.BitrateWindowVO,a.ABRConstraintsVO)}(this,function(a,b,c,d,e,f){function g(){var a={};return a.environment=i(),h(a),a}function h(a){a.playerInfo=j(),a.clipMetaValues={},a.clipMetaObjects={},a.stream=k(),a.bitrates=l(),a.metrics=m(),a.clientMetrics={},a.ads=n(),a.playerInfoObjects={}}function i(){return{OS:"",browser:"",formFactor:"",lastUpdated:"",pollingInterval:0}}function j(){var a={};return a}function k(){return{isLive:"",isSlidingWindow:"",hasCC:""}}function l(){return{useBitrateCaps:"",usePlayerDimensionsForBitrateCaps:"",abrConstraints:a.assign({},new f),bitrateMaxThreshold:"",availableBitratesKbps:""}}function m(){return{currentBitrateKbps:"",currentBitrateProfile:"",firstTimeCode:"",timeCode:"",timeCodeHeartbeatInterval:"",seekableRange:""}}function n(){return{inAdBreak:"",isAdPlaying:""}}function o(){return{}}function p(a){q(a.environment)}function q(a){var c=new b,d=" ",e=c.platform+d+c.platformVersion,f=c.browser+d+c.browserVersion,g=c.formFactor;a.OS=e,a.browser=f,a.formFactor=g}function r(b){var c=function(b){a.forEach(b,function(d,e){a.isObject(d)?c(d):b[e]=a.upperFirst(e)})};c(b)}function s(b,c){var d="---";try{if(b){c.environment.lastUpdated=(new Date).toISOString();var e=b.playerStateHelper;c.ads.isAdPlaying=b.ads.adIsPlaying(),c.ads.inAdBreak=d,c.metrics.currentBitrateKbps=b.bitrates.getCurrentKbps(),c.metrics.currentBitrateProfile=b.bitrates.getCurrentProfile(),c.metrics.firstTimeCode=b.timecode.getTimeCodeAt(0),c.metrics.timeCode=b.timecode.getLastDispatchedTimeCode(),c.metrics.timeCodeHeartbeatInterval=b.timecode.getHeartbeatInterval(),c.metrics.seekableRange=b.getSeekableRange();var f=b.getPlayerInfo();a.forEach(f,function(b,d){a.isObject(b)?c.playerInfoObjects[d]=b:c.playerInfo[d]=b}),c.clientMetrics=b.metrics.getClientMetrics(),c.bitrates.useBitrateCaps=a.get(b,"config.bitrateCaps.useBitrateCaps",""),c.bitrates.usePlayerDimensionsForBitrateCaps=b.bitrates.getUsePlayerDimensionsForBitrateCaps(),c.bitrates.abrConstraints=b.bitrates.getABRConstraints(),c.bitrates.bitrateMaxThreshold=a.toString(b.bitrates.getMaxThreshold()),c.bitrates.availableBitratesKbps=t(b.bitrates.getProfiles());var g=e.getState("clip");a.forEach(g,function(b,d){a.isObject(b)?c.clipMetaObjects[d]=b:c.clipMetaValues[d]=b}),c.stream.hasCC=b.captions.hasCaptions(),c.stream.isLive=b.state.isLive(),c.stream.isSlidingWindow=b.state.isSlidingWindow()}}catch(h){if(this._internals.ignoreErrors||console.log("[MediaMetricsManager] ("+this.id+") Error:",h),this._internals.throwErrors)throw h}}function t(b){var c={};if(b){var d;a.forEach(b,function(a,b){d=a.width+"x"+a.height,a.frameRate&&(d+=" "+a.frameRate+"fps"),c[a.bitrate/1e3]=d})}return c}var u=function(b,c){this.id=b,this._internals={player:c,dispatcher:a.get(c,"dispatcher")},this.data=g(),this.meta={labels:g(),desc:g()},this.api=o(),p(this.data),r(this.meta.labels)};return u.prototype.toString=function(){return JSON.stringify(this.data,null,4)},u.prototype.update=function(a){var b=!1;this._internals.player.metrics&&(b=this._internals.player.metrics.areMetricsAvailable());var c=!a||a&&b;return h.call(this,this.data),s.call(this,this._internals.player,this.data),c&&this._internals.dispatcher.publish(d.STREAM_METRICS_UPDATED,{player:this._internals.player,mediaMetrics:this.data}),this.data},u.prototype.schedule=function(a,b){this.unschedule(),this._internals.intervalID=setInterval(this.update.bind(this,b),a),this.data.environment.pollingInterval=a},u.prototype.unschedule=function(){this.data.environment.pollingInterval=0,this._internals.intervalID&&clearInterval(this._internals.intervalID)},u}),define("text!bam-video-players/overlays/debug/debugInfoTemplate.html",[],function(){return'<div class="debug background debug-display-flex flex-direction-column">\n    <div class="debug-buttons-container display-flex">\n        <button class="debug-btn js-actions-settings-btn">\n            <svg id="actions-icon-svg" class="svg-btn" viewBox="0 0 300.145 300.145">\n                <path d="M49.126,150.126c0-42.346,26.212-78.68,63.26-93.643l18.904-37.971C66.847,27.667,17.126,83.194,17.126,150.126c0,60.895,41.157,112.355,97.113,128.035l3.636-32.354C77.952,232.337,49.126,194.535,49.126,150.126z"></path>\n                <path d="M283.019,150.126c0-60.883-41.139-112.333-97.076-128.025l-3.718,32.33c39.946,13.457,68.794,51.27,68.794,95.695c0,42.099-25.907,78.255-62.613,93.379l-19.428,38.217C233.361,272.515,283.019,217.015,283.019,150.126z"></path>\n                <path d="M226.169,134.015c1.26-2.479,1.141-5.202-0.314-7.572c-1.454-2.371-4.036-3.316-6.818-3.316h-60.821L171.309,9.3c0.446-3.859-1.946-7.857-5.672-8.963C164.868,0.109,164.089,0,163.32,0c-2.954,0-5.746,1.681-7.121,4.442L73.946,169.718c-1.234,2.479-1.098,5.78,0.36,8.136c1.459,2.355,4.031,4.273,6.802,4.273h60.019l-12.304,109.543c-0.43,3.844,1.951,7.077,5.657,8.185c0.761,0.228,1.532,0.29,2.293,0.29c2.948,0,5.74-1.637,7.133-4.378L226.169,134.015z"></path>\n            </svg>\n        </button>\n        <button class="debug-btn js-debug-settings-btn">\n            <svg id="gear-icon-svg" class="svg-btn" viewBox="0 0 100 100">\n                <path d="M87.687 45.077c-.313-2.433-.816-4.807-1.542-7.079l8.145-11.73-5.827-7.515-.094-.123-5.824-7.514-12.955 5.577c-2.041-1.265-4.192-2.362-6.459-3.219L59.42 0H40.586l-3.709 13.474c-2.27.857-4.421 1.955-6.463 3.222l-12.957-5.577-5.825 7.514-.097.124-5.822 7.517 8.146 11.731a39.832 39.832 0 0 0-1.544 7.079L0 52.032l2.08 9.375.033.15 2.08 9.375 14.001.761a39.157 39.157 0 0 0 4.4 5.668l-2.396 14.227 8.416 4.173.138.067L37.169 100l9.309-10.796c1.161.109 2.335.173 3.524.173s2.358-.074 3.52-.184l9.317 10.804 8.415-4.173.141-.066 8.413-4.172-2.396-14.228a39.06 39.06 0 0 0 4.4-5.672l14-.759 2.078-9.375.035-.154L100 52.025l-12.313-6.948zM50.003 34.51c8.435 0 15.272 7.035 15.272 15.719 0 8.679-6.839 15.717-15.272 15.717-8.436 0-15.272-7.038-15.272-15.717 0-8.684 6.838-15.719 15.272-15.719z"></path>\n            </svg>\n        </button>\n        <button class="debug-btn js-debug-close-btn">\n            <svg id="x-svg" viewBox="0 0 100 100" class="svg-btn">\n                <path d="M100 78.905L78.735 100 49.608 71.094 21.263 99.217 0 78.123 28.344 50 0 21.877 21.263.78l28.345 28.125L78.735 0 100 21.094 70.862 50z"></path>\n            </svg>\n        </button>\n    </div>\n    <div class="debug-display-flex debug-output">\n        <textarea class="debug-message-text" wrap="off"></textarea>\n    </div>\n    <div class="debug-controls-settings overlay--hidden">\n        <div class="debug-polling">Polling Interval <input class="debug-polling-interval" value="1000"> ms\n        </div>\n        Filters:\n        {{#each sections}}\n        <div class="filter-debug"><input class="filter-debug-ck" type="checkbox" value="{{this}}" checked="">{{this}}\n        </div>\n        {{/each}}\n    </div>\n</div>\n'}),function(a,b){if("function"==typeof define&&define.amd)define("bam-video-players/overlays/debug/DebugUIHelper",["jquery","lodash/lodash","bam-video-players/players/helpers/MediaMetricsManager","handlebars/handlebars","text!bam-video-players/overlays/debug/debugInfoTemplate.html"],b);else if("object"==typeof exports)module.exports=b(require("jquery"),require("lodash/lodash"),require("bam-video-players/players/helpers/MediaMetricsManager"),require("handlebars/handlebars"),require("text!bam-video-players/overlays/debug/debugInfoTemplate.html"));else{a.jQuery("#DebugInfoTemplate").html();a.DebugUIHelper=b(a.jQuery,a._,a.MediaMetricsManager,a.Handlebars,DebugControlsTemplate)}}(this,function(a,b,c,d,e){"use strict";function f(a,b,c){this.playerName=a,this.stateModel=b,this.filterModel=c,this.eventNames={POLLING_INTERVAL_CHANGED:"pollingIntervalChanged",DISABLE_POLLING:"disablePolling",CLOSE_DEBUG_PANEL:"closeDebugPanel",SHOW_DEBUG_ACTIONS:"showDebugActions",HIDE_DEBUG_ACTIONS:"hideDebugActions"},this.settingsOpen=!1,this.classes={INFO:"debug-message-text",CONTROLS:"debug-controls",OVERLAY:"overlay",OUTPUT:"debug-output",SETTINGS_PANEL:"debug-controls-settings",INPUT_POLLING_INTERVAL:"debug-polling-interval",FILTER_CHECKBOX:"filter-debug-ck",CLOSE_BTN:"js-debug-close-btn",SETTINGS_BTN:"js-debug-settings-btn",ACTIONS_PANEL_BTN:"js-actions-settings-btn"}}function g(){this.$querySelector(this.classes.OUTPUT).addClass(this.classes.OUTPUT+"--hidden")}function h(){this.$querySelector(this.classes.OUTPUT).removeClass(this.classes.OUTPUT+"--hidden")}function i(){this.$querySelector(this.classes.SETTINGS_PANEL).addClass(this.classes.OVERLAY+"--hidden"),this.settingsOpen=!1}function j(){this.$querySelector(this.classes.SETTINGS_PANEL).removeClass(this.classes.OVERLAY+"--hidden"),this.settingsOpen=!0}function k(){a(this).triggerHandler(this.eventNames.HIDE_DEBUG_ACTIONS),this.actionsOpen=!1}function l(){a(this).triggerHandler(this.eventNames.SHOW_DEBUG_ACTIONS),this.actionsOpen=!0}function m(){var b=this;this.$querySelector(this.classes.CLOSE_BTN).on("click",function(){a(b).triggerHandler(b.eventNames.CLOSE_DEBUG_PANEL),(b.settingsOpen||b.actionsOpen)&&(k.call(b),i.call(b),h.call(b))}),this.$querySelector(this.classes.SETTINGS_BTN).on("click",function(){b.settingsOpen?(i.call(b),h.call(b)):(k.call(b),g.call(b),j.call(b))}),this.$querySelector(this.classes.ACTIONS_PANEL_BTN).on("click",function(){o("actions click isActionsOpen:",b.actionsOpen),b.actionsOpen?(k.call(b),h.call(b)):(l.call(b),g.call(b),i.call(b))})}function n(){var b=this.$polling.val();a(this).triggerHandler(this.eventNames.POLLING_INTERVAL_CHANGED,[b])}function o(){console.log("[DebugUIHelper]",Array.prototype.slice.call(arguments).join(" "))}function p(){console.warn("[DebugUIHelper]",Array.prototype.slice.call(arguments).join(" "))}return f.prototype.getHTMLElement=function(c){try{var f=d.compile(e);return c.innerHTML=f({sections:b.keys(this.filterModel)}),this.container=c,this.$messsages=this.$querySelector(this.classes.INFO),this.$controls=this.$querySelector(this.classes.CONTROLS),this.$overlay=a(c),this.addControls(this.filterModel),this.stateModel.isVisible?this.show():this.hide(),m.call(this),this.$overlay}catch(g){p("Error creating Debug div",g)}return null},f.prototype.addControls=function(){var b=this;this.$polling=this.$querySelector(this.classes.INPUT_POLLING_INTERVAL),this.$polling.on("keyup",function(){n.call(b)}),this.$querySelector(this.classes.FILTER_CHECKBOX).on("click",function(){var c=a(this),d=c.prop("value"),e=c.prop("checked");b.filterModel[d]=e,b.showDebugData.call(b,b.data)})},f.prototype.hide=function(){this.$overlay&&(a(this).triggerHandler(this.eventNames.DISABLE_POLLING),this.$overlay.hide())},f.prototype.show=function(){this.$overlay&&(this.$overlay.show(),n.call(this))},f.prototype.showDebugData=function(a){this.data=a;var c=this;try{if(!this.$overlay)return;var d=b.pickBy(a,function(a,d){return b.get(c.filterModel,d)}),e=JSON.stringify(d,null,2),f=this.$messsages.scrollTop();this.$messsages.html(e),this.$messsages.scrollTop(f)}catch(g){p("Error adding debug",g)}},f.prototype.setLogLevel=function(b){var c="error"!=b&&"warn"!=b;o("setLogLevel.isLogging",c),a("#"+this.enableLoggingID).prop("checked",c)},f.prototype.addListener=function(b,c){a(this).on(b,c)},f.prototype.$querySelector=function(b){return a("."+b,this.container)},f}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/overlays/debug/DebugOverlay",["lodash/lodash","bam-video-players/overlays/BaseOverlay","bam-video-players/events/PlayerEvents","bam-video-players/events/UserEvents","bam-video-players/overlays/debug/DebugUIHelper","bam-video-players/players/helpers/MediaMetricsManager"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/overlays/BaseOverlay"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/UserEvents"),require("bam-video-players/overlays/debug/DebugUIHelper"),require("bam-video-players/players/helpers/MediaMetricsManager")):a.DebugOverlay=b(a.lodash,a.BaseOverlay,a.PlayerEvents,a.UserEvents,a.DebugUIHelper,a.MediaMetricsManager)}(this,function(a,b,c,d,e,f){function g(b,c,d){var e=new f;this.model={},this.filterModel=a.assign({},a.mapValues(e.data,function(a){return!0})),this.stateModel={isVisible:!1},g.prototype["super"].constructor.call(this,b,c,d),this.isEnabled()&&this.uiHelper&&(this.uiHelper.addListener(this.uiHelper.eventNames.POLLING_INTERVAL_CHANGED,a.debounce(j,500,{trailing:!0,leading:!1}).bind(this)),this.uiHelper.addListener(this.uiHelper.eventNames.DISABLE_POLLING,k.bind(this)),this.uiHelper.addListener(this.uiHelper.eventNames.CLOSE_DEBUG_PANEL,i.bind(this)),this.uiHelper.addListener(this.uiHelper.eventNames.SHOW_DEBUG_ACTIONS,l.bind(this)),this.uiHelper.addListener(this.uiHelper.eventNames.HIDE_DEBUG_ACTIONS,m.bind(this)))}function h(a){this.model=a.mediaMetrics,this.modelUpdated()}function i(){this.player.dispatcher.publish(d.TOGGLE_DEBUG_PANEL)}function j(a,b){this.log("changePollingInterval",b);try{this.player.metrics.getMediaMetrics(),this.player.metrics.enablePolling(b)}catch(c){this.log(this.player.id+" does not have metricsGetMediaMetrics()")}}function k(){try{this.player.metrics.disablePolling()}catch(a){this.log("[DebugOverlay]",this.player.id+" does not have metricsDisablePolling()")}}function l(){this.player.dispatcher.publish(c.OVERLAY_DEBUG_ACTION_SHOW)}function m(){this.player.dispatcher.publish(c.OVERLAY_DEBUG_ACTION_HIDE)}function n(){var a=window.location.search,b=/[\?&]debug=true/.test(a);b&&this.player.dispatcher.publish(d.TOGGLE_DEBUG_PANEL)}return g.prototype=Object.create(b.prototype),g.prototype.constructor=g,g.prototype["super"]=b.prototype,g.prototype.getId=function(a){return"DebugOverlay."+a},g.prototype.isEnabled=function(){return a.has(this.player,"api")},g.prototype.addBoundFxns=function(){this.boundFxns.onUpdate=h.bind(this),this.boundFxns.onHide=this.hide.bind(this),this.boundFxns.onShow=this.show.bind(this)},g.prototype.createUIHelper=function(a){return new e(a,this.stateModel,this.filterModel)},g.prototype.addListeners=function(a){g.prototype["super"].addListeners.call(this,a),a.on(c.STREAM_METRICS_UPDATED,this.boundFxns.onUpdate),a.on(c.OVERLAY_DEBUG_SHOW,this.boundFxns.onShow),a.on(c.OVERLAY_DEBUG_HIDE,this.boundFxns.onHide)},g.prototype.removeListeners=function(a){g.prototype["super"].removeListeners.call(this,a),a.off(c.STREAM_METRICS_UPDATED,this.boundFxns.onUpdate),a.off(c.OVERLAY_DEBUG_SHOW,this.boundFxns.onShow),a.off(c.OVERLAY_DEBUG_HIDE,this.boundFxns.onHide)},g.prototype.modelUpdated=function(){this.stateModel.isVisible=this.isVisible,this.isEnabled()&&this.uiHelper&&this.uiHelper.showDebugData(this.model)},g.prototype.postLoad=function(){n.call(this),this.uiHelper.setLogLevel(this.player.debug.getLogLevel())},g.prototype.hide=function(){m.call(this),g.prototype["super"].hide.call(this)},g}),define("text!bam-video-players/overlays/debug/debugActionsTemplate.html",[],function(){return'<div class="debug">\n    <div class="action-controls">\n        <div class="actions-header">ACTIONS</div>\n        <hr>\n        <span class="actions-subheader">Ads</span>\n        <li class="actions">\n            <button class="action-btn midroll-start">Start MidRoll</button>\n        </li>\n        <li class="actions">\n            <button class="action-btn midroll-end">End MidRoll</button>\n        </li>\n        <li class="actions">\n            <button class="action-btn preroll-end">End PreRoll</button>\n        </li>\n        <li class="actions"><input class="view-mid-and-content-toggle checkbox" type="checkbox">View Midroll and\n            Content together\n        </li>\n        <hr>\n        <span class="actions-subheader">Bitrates</span>\n        <div class="bitrates display-flex flex-flow row-wrap"></div>\n        <hr>\n        <span class="actions-subheader">Errors</span>\n        <li class="actions"><button class="media-error-btn action-btn">Dispatch MEDIA ERROR</button></li>\n        <li class="actions"><input class="action-btn enable-logging-btn checkbox" type="checkbox">Logging</li>\n    </div>\n</div>\n'}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/valueObjects/DimensionConstraintVO",["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):a.DimensionConstraintVO=b(a.jQuery)}(this,function(a){"use strict";function b(a,b){this.maxWidth=a||-1,this.maxHeight=b||-1}return b.prototype=a.extend(b.prototype,{toString:function(){return"DimensionConstraintVO: ["+this.maxWidth+", "+this.maxHeight+"]"}}),b}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/utils/VideoQualityManager",["jquery","lodash/lodash","bam-video-players/valueObjects/BitrateWindowVO","bam-video-players/valueObjects/DimensionConstraintVO","bam-video-players/valueObjects/ABRConstraintsVO"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bam-video-players/valueObjects/BitrateWindowVO"),require("bam-video-players/valueObjects/DimensionConstraintVO"),require("bam-video-players/valueObjects/ABRConstraintsVO")):a.VideoQualityManager=b(a.jQuery,a._,a.BitrateWindowVO,a.DimensionConstraintsVO,a.ABRConstraintsVO)}(this,function(a,b,c,d,e){"use strict";function f(a,c){this.config=a,this.usePlayerDimensionsForBitrateCaps=b.isBoolean(c)?c:!0}function g(a,c){var d;return b.isNumber(a)&&b.isArray(c)&&!b.isEmpty(c)&&b.each(c,function(b,c){a<=b.maxWidth&&(!d||b.maxWidth<d.maxWidth)&&(d=b)}),d}return f.prototype=a.extend(f.prototype,{getBitrateWindowByLimitAndWidth:function(a,d,e,f){console.log("[VideoQualityManager] getBitrateWindowByLimitAndWidth: videoWidth="+a+";max="+e+";min="+f+";altAudio="+d);var h=b.get(this,"config.bitrateCaps");if(!h)return console.log("[VideoQualityManager] getBitrateWindowByLimitAndWidth: config.bitrateCaps DNE so get out of here"),null;if(0==h.useBitrateCaps)return console.log("[VideoQualityManager] getBitrateWindowByLimitAndWidth: useBitrateCaps=false so get out of here"),null;var i=-1,j=-1,k=g(a,this.config.bitrateCaps.widthThresholds);return k&&(d?(i=k.altAudioMinKbps,j=k.altAudioMaxKbps):(i=k.minKbps,j=k.maxKbps,e&&e>=k.minKbps&&(j=e||j),f&&f<=k.maxKbps&&(i=Math.max(i,f)))),-1==i&&-1==j?null:new c(i,j)},getDimensionConstraint:function(a,c){if(this.usePlayerDimensionsForBitrateCaps){var e=.1,f=b.get(this.config,"bitrateCaps.dimensionBufferPercentage",e);b.isNumber(f)||(f=e),Math.abs(f)>1&&(f/=100),c||(c=16*a/9);var g=a*(1+f),h=c*(1+f);return new d(g,h)}return null},getABRConstraints:function(a,b){return new e(a,b)}}),f}),function(a,b){if("function"==typeof define&&define.amd)define("bam-video-players/overlays/debug/DebugActionUIHelper",["jquery","lodash/lodash","handlebars/handlebars","text!bam-video-players/overlays/debug/debugActionsTemplate.html","bam-video-players/utils/VideoQualityManager"],b);else if("object"==typeof exports)module.exports=b(require("jquery"),require("lodash/lodash"),require("handlebars/handlebars"),require("text!bam-video-players/overlays/debug/debugActionsTemplate.html"),require("bam-video-players/utils/VideoQualityManager"));else{a.jQuery("#DebugActionTemplate").html();a.DebugActionUIHelper=b(a.jQuery,a._,a.Handlebars,DebugControlsTemplate,a.VideoQualityManager)}}(this,function(a,b,c,d,e){"use strict";
function f(a,b,c){this.playerName=a,this.stateModel=b,this.filterModel=c,this.eventNames={CLOSE_DEBUG_PANEL:"closeDebugPanel",DISPATCH_MEDIA_ERROR:"dispatchMediaError",START_MID_ROLL:"startMidRollRequested",END_MID_ROLL:"endMidRollRequested",END_PRE_ROLL:"endPreRollRequested",VIEW_MID_AND_CONTENT:"viewMidRollAndContent",REQUEST_BITRATE:"requestBitrate",TOGGLE_LOGGING:"toggleLogging"},this.settingsOpen=!1,this.classes={ACTIONS_PANEL:"action-controls",MIDROLL_START:"midroll-start",MIDROLL_END:"midroll-end",PREROLL_END:"preroll-end",VIEW_MID_CONTENT_TOGETHER:"view-mid-and-content-toggle",MEDIA_ERROR:"media-error-btn",ENABLED_LOGGING:"enable-logging-btn",BITRATES:"bitrates"}}function g(a){return this.playerName+a}function h(c,d,e,f){var h=this.$querySelector(this.classes.BITRATES),j=this,k=i(c,d,e,f);b.each(f,function(c){if(!b.isNaN(c.bitrate)){var d=c.bitrate/1e3,e=g.call(j,"bitrate"+c.bitrate),f="bitrates-action-btn";c.isActive||(f+=d>=k.minBitrateKbps&&d<=k.maxBitrateKbps?" disabled":" excluded");var i='<li class="bitrates-action"><button id="'+e+'" class="'+f+'" value="'+d+'">'+d+"</button>";h.append(i),a("#"+e).on("click",function(){var b=a(this).val();a(j).triggerHandler(j.eventNames.REQUEST_BITRATE,[b])})}});var l=g.call(j,"bitrate-resest"),m='<li class="bitrates-action"><button id="'+l+'" class="bitrates-action-btn">RESET</button>';h.append(m),a("#"+l).on("click",function(){a(j).triggerHandler(j.eventNames.REQUEST_BITRATE,[null])})}function i(a,c,d){var f=b.get(a,"bitrateCaps.usePlayerDimensionsForBitrateCaps",!0),g=new e(a,f),h=g.getBitrateWindowByLimitAndWidth(d,!1,null,null),i=g.getDimensionConstraint(d,c);return g.getABRConstraints(h,i)}function j(){var a=this.$querySelector(this.classes.BITRATES);a.empty()}function k(){console.log("[DebugActionUIHelper]",Array.prototype.slice.call(arguments).join(" "))}function l(){console.warn("[DebugActionUIHelper]",Array.prototype.slice.call(arguments).join(" "))}return f.prototype.getHTMLElement=function(b){try{var e=c.compile(d);return b.innerHTML=e(),this.container=b,this.$actions=this.$querySelector(this.classes.ACTIONS_PANEL),this.$overlay=a(b),this.addActions(),this.stateModel.isVisible?this.show():this.hide(),this.$overlay}catch(f){l("Error creating Debug div",f)}return null},f.prototype.addActions=function(){var b=this;this.$querySelector(this.classes.MIDROLL_START).on("click",function(){a(b).triggerHandler(b.eventNames.START_MID_ROLL)}),this.$querySelector(this.classes.MIDROLL_END).on("click",function(){a(b).triggerHandler(b.eventNames.END_MID_ROLL)}),this.$querySelector(this.classes.PREROLL_END).on("click",function(){a(b).triggerHandler(b.eventNames.END_PRE_ROLL)}),this.$querySelector(this.classes.VIEW_MID_CONTENT_TOGETHER).on("change",function(){var c=a(this).prop("checked");k("view mid and content change",c),a(b).triggerHandler(b.eventNames.VIEW_MID_AND_CONTENT,[c])}),this.$querySelector(this.classes.MEDIA_ERROR).on("click",function(){a(b).triggerHandler(b.eventNames.DISPATCH_MEDIA_ERROR)}),this.$querySelector(this.classes.ENABLED_LOGGING).on("change",function(){var c=a(this).prop("checked");a(b).triggerHandler(b.eventNames.TOGGLE_LOGGING,[c])})},f.prototype.hide=function(){this.$overlay&&this.$overlay.hide()},f.prototype.show=function(){this.$overlay&&this.$overlay.show()},f.prototype.setLogLevel=function(a){var b="error"!==a&&"warn"!==a;k("setLogLevel.isLogging",b),this.$querySelector(this.classes.ENABLED_LOGGING).prop("checked",b)},f.prototype.updateBitrateButtons=function(a,b,c,d){j.call(this),h.call(this,a,b,c,d)},f.prototype.addListener=function(b,c){a(this).on(b,c)},f.prototype.$querySelector=function(b){return a("."+b,this.container)},f}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/overlays/debug/DebugActionOverlay",["lodash/lodash","bam-video-players/overlays/BaseOverlay","bam-video-players/events/PlayerEvents","bam-video-players/events/UserEvents","bam-video-players/overlays/debug/DebugActionUIHelper"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/overlays/BaseOverlay"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/UserEvents"),require("bam-video-players/overlays/debug/DebugActionUIHelper")):a.DebugActionOverlay=b(a.lodash,a.BaseOverlay,a.PlayerEvents,a.UserEvents,a.DebugActionUIHelper)}(this,function(a,b,c,d,e){function f(a,b,c){this.model={},this.stateModel={isVisible:!1},f.prototype["super"].constructor.call(this,a,b,c),this.isEnabled()&&this.uiHelper&&(this.uiHelper.addListener(this.uiHelper.eventNames.DISPATCH_MEDIA_ERROR,i.bind(this)),this.uiHelper.addListener(this.uiHelper.eventNames.START_MID_ROLL,j.bind(this)),this.uiHelper.addListener(this.uiHelper.eventNames.END_MID_ROLL,k.bind(this)),this.uiHelper.addListener(this.uiHelper.eventNames.END_PRE_ROLL,l.bind(this)),this.uiHelper.addListener(this.uiHelper.eventNames.VIEW_MID_AND_CONTENT,n.bind(this)),this.uiHelper.addListener(this.uiHelper.eventNames.TOGGLE_LOGGING,o.bind(this)),this.uiHelper.addListener(this.uiHelper.eventNames.REQUEST_BITRATE,m.bind(this)))}function g(){this.uiHelper.updateBitrateButtons(this.config,this.player.ui.getHeight(),this.player.ui.getWidth(),this.player.bitrates.getProfiles())}function h(){this.uiHelper.updateBitrateButtons(this.config,this.player.ui.getHeight(),this.player.ui.getWidth(),this.player.bitrates.getProfiles())}function i(){this.player.dispatcher.publish(c.MEDIA_ERROR,{player:this.player})}function j(){this.player.ads.startMidRoll()}function k(){this.player.ads.endMidRoll()}function l(){this.player.ads.endPreRoll()}function m(b,c){c=a.isNull(c)?null:a.toNumber(c),this.player.bitrates.setManualBitrate(c)}function n(a,b){this.player.ads.viewMidRollAndContentDebugToggle(b)}function o(a,b){b?this.player.debug.enableLogging():this.player.debug.disableLogging()}return f.prototype=Object.create(b.prototype),f.prototype.constructor=f,f.prototype["super"]=b.prototype,f.prototype.getId=function(a){return"DebugActionOverlay."+a},f.prototype.isEnabled=function(){return a.has(this.player,"api")},f.prototype.addBoundFxns=function(){this.boundFxns.onBitratesAvail=h.bind(this),this.boundFxns.onMediaResize=g.bind(this),this.boundFxns.onHide=this.hide.bind(this),this.boundFxns.onShow=this.show.bind(this)},f.prototype.createUIHelper=function(a){return new e(a,this.stateModel)},f.prototype.addListeners=function(a){f.prototype["super"].addListeners.call(this,a),a.on(c.OVERLAY_DEBUG_ACTION_SHOW,this.boundFxns.onShow),a.on(c.OVERLAY_DEBUG_ACTION_HIDE,this.boundFxns.onHide),a.on(c.BITRATE_PROFILES_CHANGED,this.boundFxns.onBitratesAvail),a.on(c.MEDIA_RESIZE,this.boundFxns.onMediaResize)},f.prototype.removeListeners=function(a){f.prototype["super"].removeListeners.call(this,a),a.off(c.OVERLAY_DEBUG_ACTION_SHOW,this.boundFxns.onShow),a.off(c.OVERLAY_DEBUG_ACTION_HIDE,this.boundFxns.onHide),a.off(c.BITRATE_PROFILES_CHANGED,this.boundFxns.onBitratesAvail),a.off(c.MEDIA_RESIZE,this.boundFxns.onMediaResize)},f}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/overlays/OverlayManager",["lodash/lodash","text!bam-video-players/overlays/overlayTemplate.html","handlebars/handlebars","bam-video-players/overlays/noMedia/NoMediaOverlay","bam-video-players/overlays/poster/PosterOverlay","bam-video-players/overlays/loading/LoadingOverlay","bam-video-players/overlays/messages/MessageOverlay","bam-video-players/overlays/debug/DebugOverlay","bam-video-players/overlays/debug/DebugActionOverlay"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("text!bam-video-players/overlays/overlayTemplate.html"),require("handlebars/handlebars"),require("bam-video-players/overlays/noMedia/NoMediaOverlay"),require("bam-video-players/overlays/poster/PosterOverlay"),require("bam-video-players/overlays/loading/LoadingOverlay"),require("bam-video-players/overlays/messages/MessageOverlay"),require("bam-video-players/overlays/debug/DebugOverlay"),require("bam-video-players/overlays/debug/DebugActionOverlay")):a.OverlayManager=b(a.lodash,a["null"],a.Handlebars,a.NoMediaOverlay,a.PosterOverlay,a.LoadingOverlay,a.MessageOverlay,a.DebugOverlay,a.DebugActionOverlay)}(this,function(a,b,c,d,e,f,g,h,i){function j(a,b){this.overlayIds.push(a),this.controllerClasses[a]=b}function k(){j.call(this,"noMedia",d)}function l(){j.call(this,"poster",e)}function m(){j.call(this,"loading",f)}function n(){j.call(this,"messages",g)}function o(){j.call(this,"debug-info",h)}function p(){j.call(this,"debug-action",i)}function q(){this.overlayIds=[],this.controllerClasses={},this.controllers={},k.call(this),l.call(this),m.call(this),n.call(this),o.call(this),p.call(this)}return q.prototype.getOverlayIds=function(){return this.overlayIds},q.prototype.getDefaultTemplates=function(d){var e=c.compile(b),f={},g=d||this.getOverlayIds();return a.each(g,function(a){f[a]=!0}),e(f)},q.prototype.getDefaultControllers=function(b){var c={},d=b||this.getOverlayIds();return a.each(d,function(a){var b=this.controllerClasses[a];b&&(c[a]=b)}.bind(this)),c},q.prototype.generate=function(b,c,d,e,f){return a.each(d,function(a,c){var d=f.querySelector("."+c);d&&(this.controllers[c]=new a(b,e,d))}.bind(this)),this.controllers},q.prototype.getController=function(a){return this.controllers[a]},q}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-paid-interruptions/models/RegisterPaidInterruptionData",["bandwagon/bandwagon","lodash/lodash","device/device"],b):"object"==typeof exports?module.exports=b(require("bandwagon/bandwagon"),require("lodash/lodash"),require("device/device")):a.RegisterPaidInterruptionData=b(a.Bandwagon,a.lodash,a.deviceBootstrap)}(this,function(a,b,c){"use strict";function d(c){var d=function(a){var d={},f=b.get(c,"videocore.advertising.freewheel.topicID",void 0),g=b.get(c,"videocore.advertising.freewheel.site","mlb"),h="embed";if("undefined"!=typeof f){g=f.substr(0,f.indexOf("/")),h=f.slice(f.lastIndexOf("/")+1,f.length);var i=f.slice(f.indexOf("/")+1,f.lastIndexOf("/"));b.set(d,"topicID",f),b.set(d,"section",i)}return b.set(d,"player",h),b.set(d,"site",g),b.merge(d,b.get(a,"freewheelProps",{})),b.set(d,"deviceType",e.formFactor),b.merge(d,b.get(a,"freewheelProps",{})),d},f="PROPERTY_INTENTIONS",g=a.getInstanceByKey(f),h=a.getRegisteredEventsByKey(f);console.log("[RegisterPaidInterruptionData]","registering",h.freewheel_default),g.publish(h.freewheel_default,d)}var e=c();return{registerDefaultData:d}}),function(a,b){"function"==typeof define&&define.amd?define("bam-media-utils/logging/logLevel",["lodash/lodash"],b):"object"==typeof module&&module.exports?module.exports=b(require("lodash/lodash")):a.MediaLogLevel=b(a._)}(this,function(a){function b(){var b=this;this.levelCodes=d,Object.keys(this.levelCodes).forEach(function(c){a.set(b,c,b.levelCodes[c])})}var c={0:"all",1:"trace",2:"debug.all",2.2:"debug.allEvents",2.4:"debug.playbackEvents",2.6:"debug.userEvents",2.8:"debug.setup",3:"info",4:"warn",5:"error",6:"none"},d=a.invert(c);return b.prototype=Object.create(a.assign({},c,d)),new b}),function(a,b){"function"==typeof define&&define.amd?define("bam-media-utils/logging/logEvent",["bam-media-utils/logging/logLevel"],b):"object"==typeof module&&module.exports?module.exports=b(require("bam-media-utils/logging/logLevel")):a.MediaLogEvent=b(a.MediaLogLevel)}(this,function(a){function b(a,b,c,d){this.level=void 0===a?null:a,this.source=b||"",this.message=c||"",this.extraArgs=d||[]}return b.prototype.toArgs=function(){return["("+a[this.level]+"): ",this.source,this.message].concat(this.extraArgs)},b}),function(a,b){"function"==typeof define&&define.amd?define("bam-media-utils/logging/logger",["lodash/lodash","bam-media-utils/logging/logLevel","bam-media-utils/logging/logEvent"],b):"object"==typeof module&&module.exports?module.exports=b(require("lodash/lodash"),require("bam-media-utils/logging/logLevel"),require("bam-media-utils/logging/logEvent")):a.MediaLogger=b(a._,a.MediaLogLevel,a.MediaLogEvent)}(this,function(a,b,c){function d(a){this.debugId=Math.random(),this.logLevel=a||b.all,this.setLogLevel=function(a){this.logLevel=a},this._log=function(a){a.level<this.logLevel||(console[b[a.level]]?console[b[a.level]].apply(console,a.toArgs()):console.log.apply(console,a.toArgs()))}}return Object.keys(b.levelCodes).forEach(function(e){var f=b[e];a.get(d.prototype,e)||a.set(d.prototype,e,function(a,b){var d=Array.prototype.slice.call(arguments).slice(3);this._log(new c(f,a,b,d))})}),d}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/VideoPlayerFactory",["lodash/lodash","bam-video-players/utils/VideoUtils","bam-video-players/overlays/OverlayManager","bam-video-paid-interruptions/models/RegisterPaidInterruptionData","bam-media-utils/logging/logLevel","bam-media-utils/logging/logger"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/utils/VideoUtils"),require("bam-video-players/overlays/OverlayManager"),require("bam-video-paid-interruptions/models/RegisterPaidInterruptionData"),require("bam-media-utils/logging/logLevel"),require("bam-media-utils/logging/logger")):a.VideoPlayerFactory=b(a.lodash,a.VideoUtils,a.OverlayManager,a.RegisterPaidInterruptionData,a.MediaLogLevel,a.MediaLogger)}(this,function(a,b,c,d,e,f){"use strict";function g(a,b){var d=["noMedia","poster","loading","messages","debug-info","debug-action"],e=new c,f=e.getDefaultTemplates(d),g=e.getDefaultControllers(d),h=b.$container[0];h.insertAdjacentHTML("beforeend",f),e.generate(a,f,g,b,h),b.overlayManager=e}var h={},i=["HTML5CorePlayer","HLSPlayer","DashPlayer"],j={registerPlayer:function(b){var c=a.get(window.mediaConfig,"videocore.logging.level","info"),d=new f(e[c]),g=b.prototype.toString(),i=b.prototype["super"]?"AbstractPlayer"===b.prototype["super"].toString():!1,j=b.prototype["super"]?h[b.prototype["super"].toString()]:!1;("AbstractPlayer"===g||"AbstractHTMLPlayer"==g||i||j)&&(d.info("VideoPlayerFactory registerPlayer: add "+g+" to available players"),h[g]=b)},getPlayer:function(b,c){c=this.getType(b,c);var i=a.get(b,"logging.level","info"),j=new f(e[i]);d.registerDefaultData(b);var k=null,l=a.get(b,"html5.callInitOnCreation"),m=a.isUndefined(l);return h[c]&&(j.info("VideoPlayerFactory getPlayer: get new instance of "+c),m&&a.set(b,"html5.callInitOnCreation",!1),k=new h[c](b,document)),k?(m&&k.init(),g(b,k)):j.error("VideoPlayerFactoy failed to instantiate player of type:"+c),k},getType:function(c,d){var g=a.get(c,"logging.level","info"),h=new f(e[g]);return d||(d=b.getPlayerTypeByDevice(c)),a.includes(i,d)&&(h.info("VideoPlayerFactory.getType() swapping to BamHTMLPlayer"),d="BamHTMLPlayer"),d}};return j}),define("text!bam-video-players/players/ui/templates/Poster.html",[],function(){return'<div class="video-player__poster js-video-player__poster">\n    <i class="media-icon media-icon--play-overlay"></i>\n    <img src="{{posterUrl}}" />\n</div>\n'}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-paid-interruptions/events/PaidInterruptionEvents",["bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("bandwagon/bandwagon")):a.PaidInterruptionEvents=b(a.Bandwagon)}(this,function(a){var b={AD_AUTOPLAY_BLOCKED:"adAutoPlayBlocked",AD_PLUGIN_LOADED:"adPluginLoaded",AD_PLUGIN_ERROR:"adPluginError",AD_ERROR:"adError",AD_START:"adStart",AD_COMPLETE:"adComplete",AD_PREROLL_START:"adPreRollStart",AD_PREROLL_COMPLETE:"adPreRollComplete",AD_DEFAULT_COMPANION:"adDefaultCompanion",AD_COMPANION:"adCompanion",AD_TIME_UPDATE_ELAPSED:"adTimeUpdateElapsed",AD_TIME_UPDATE_REMAINING:"adTimeUpdateRemaining",AD_BLOCK_DETECTED:"adBlockDetected",ALL_ADS_COMPLETED:"allAdsCompleted",AD_LOADED:"adLoaded"};return a.registerEvents("AD_EVENTS",b),b}),function(a,b){if("function"==typeof define&&define.amd)define("bam-video-players/players/ui/Poster",["jquery","lodash/lodash","handlebars/handlebars","text!bam-video-players/players/ui/templates/Poster.html","bam-video-players/events/PlayerEvents","bam-video-paid-interruptions/events/PaidInterruptionEvents"],b);else if("object"==typeof exports)module.exports=b(require("jquery"),require("lodash/lodash"),require("handlebars/handlebars"),require("text!bam-video-players/players/ui/templates/Poster.html"),require("bam-video-players/events/PlayerEvents"),require("bam-video-paid-interruptions/events/PaidInterruptionEvents"));else{var c=a.jQuery("#PosterTemplate").html();a.Poster=b(a.jQuery,a._,a.Handlebars,c,a.PlayerEvents,a.PaidInterruptionEvents)}}(this,function(a,b,c,d,e,f){"use strict";function g(a){return this instanceof g?(this.player=a,this.template=c.compile(d),this.$elem=null,this.boundFxns={init:h.bind(this),hide:this.hide.bind(this),setPosterImage:i.bind(this),showPoster:k.bind(this)},void this.player.dispatcher.on(e.PLAYER_LOADED,this.boundFxns.init)):new g(a)}function h(){try{this.player.$container.append(this.template()),this.$elem=this.player.$container.find(".js-video-player__poster"),this.player.dispatcher.on(f.AD_START,this.boundFxns.hide),this.player.dispatcher.on(e.MEDIA_START,this.boundFxns.hide),this.player.dispatcher.on(e.MEDIA_SET,this.boundFxns.setPosterImage),this.player.dispatcher.on(e.SHOW_POSTER,this.boundFxns.showPoster)}catch(a){console.log("Poster","possible jquery errors")}}function i(a){var c=a.player,d=b.get(c,"config.poster.imageType","13");Array.isArray(d)&&d.length&&(d=d[1]&&c.$player.width()<=d[1].width?d[1]:d[0],d=d.width+"x"+d.height);var e=b.get(c,"config.poster.beginPosterPath","clip.metaData.imagesByType['{imageType}']");"string"==typeof d&&(e=e.replace("{imageType}",d));var f=b.get(c,e,"");this.$elem.one("click",function(a){c.clip&&c.clip.path&&c.play([c.clip])}),j.call(this,f)}function j(a){var b=this.$elem.find("img");b.attr("src")!==a&&b.attr("src",a)}function k(a){a.player&&this.player===a.player&&this.show()}return g.prototype.show=function(a){this.$elem&&(a&&""!==String(a).trim()&&j.call(this,a),this.$elem.removeClass("video-player__poster--hide"))},g.prototype.hide=function(){this.$elem&&this.$elem.addClass("video-player__poster--hide")},g.prototype.destroy=function(){this.player.dispatcher.off(e.PLAYER_LOADED,this.boundFxns.init),this.player.dispatcher.off(f.AD_START,this.boundFxns.hide),this.player.dispatcher.off(e.MEDIA_START,this.boundFxns.hide),this.player.dispatcher.off(e.MEDIA_SET,this.boundFxns.setPosterImage),this.player.dispatcher.off(e.SHOW_POSTER,this.boundFxns.showPoster)},g}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/AbstractPlayer",["jquery","lodash/lodash","bam-video-players/players/ui/Poster","bam-video-players/players/VideoPlayerFactory","bam-video-players/events/PlayerEvents","bam-video-paid-interruptions/events/PaidInterruptionEvents","bandwagon/bandwagon","device/device"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bam-video-players/players/ui/Poster"),require("bam-video-players/players/VideoPlayerFactory"),require("bam-video-players/events/PlayerEvents"),require("bam-video-paid-interruptions/events/PaidInterruptionEvents"),require("bandwagon/bandwagon"),require("device/device")):a.AbstractPlayer=b(a.jQuery,a.lodash,a.Poster,a.VideoPlayerFactory,a.PlayerEvents,a.PaidInterruptionEvents,a.Bandwagon,a.deviceBootstrap)}(this,function(a,b,c,d,e,f,g,h){"use strict";function i(b,c){this.id="player"+(new Date).getTime(),this.config=b,this.document=c,this.$document=a(c),this.$container=a(this.config.property_state.container),this.player=null,this.$player=null,this.poster=null,this.loaded=!1,this.clip=null,this.isPlaying=!1,this.isPaused=!1,this.isResumed=!1,this.duration=0,this.muted=!1,this.isFullScreen=!1,this.inMiniMode=!1,this.adManager=null,this.adPlaying=!1,this.adEvents=null,this.eventBus=g,this.dispatcher=this.config?g.getInstanceByKey(this.config.property_state.container):null,this.device=h(),this.overlays={},this.supportsHls=!1,this.dispatcher.publish(e.PLAYER_INITIALIZING,{player:this}),j.call(this),console.log("AbstractPlayer constructor")}function j(){this.$container.addClass("video__player"),b.get(this,"config.loadPoster",!0)&&(this.hidePlayer(),this.poster=new c(this)),k.call(this)}function k(){this.dispatcher.on(e.MEDIA_START,l.bind(this)),this.dispatcher.on(f.AD_START,l.bind(this))}function l(a){console.log("[AbstractPlayer] _onMediaStart"),this.showPlayer()}return i.prototype={constructor:i,Events:e,play:function(){console.log("AbstractPlayer Play")},setClip:function(a){throw new Error("Function setClip has not been implemented.")},pause:function(){this.isPlaying&&console.log("AbstractPlayer Pause")},resume:function(){this.isPlaying||console.log("AbstractPlayer Resume")},mute:function(){this.muted=!this.muted},unmute:function(){this.muted=!this.muted},setVolume:function(a){a>100?a=100:0>a&&(a=0),console.log("AbstractPlayer setVolume")},resize:function(b,c){this.player&&(a(this.config.container).width(b).height(c),this.$player.width(b).height(c),this.dispatcher.publish(e.MEDIA_RESIZE,{player:this,width:b,height:c})),console.log("AbstractPlayer resize")},setBeginPoster:function(a){console.log("AbstractPlayer setBeginPoster")},showPoster:function(a){this.poster&&this.poster.show(a)},enterFullScreen:function(){this.isFullScreen||console.log("AbstractPlayer enterFullScreen")},exitFullScreen:function(){this.isFullScreen&&console.log("AbstractPlayer exitFullScreen")},enterMiniMode:function(a,b){this.inMiniMode||console.log("AbstractPlayer enterMiniMode",a,b)},exitMiniMode:function(a,b){this.inMiniMode&&console.log("AbstractPlayer exitMiniMode",a,b)},showPlayer:function(){this.$container.removeClass("video__player--hide"),this.resize()},hidePlayer:function(){this.$container.addClass("video__player--hide")},getCurrentAdDuration:function(){console.log("BasePlayer getCurrentAdDuration")},toString:function(){return"AbstractPlayer"},destroy:function(){this.dispatcher.removeAllListeners(),this.$player&&this.$player.remove()},showOverlay:function(a){var c=this,d=b.get(this,"overlays",{});b.each(b.keys(d),function(d){(null==a||b.includes(a,d))&&c.overlays[d].show()})},hideOverlay:function(a){var c=this,d=b.get(this,"overlays",{});b.each(b.keys(d),function(d){(null==a||b.includes(a,d))&&c.overlays[d].hide()})}},d.registerPlayer(i),i}),define("text!bam-video-players/players/ui/templates/HTML5PlayerControls.html",[],function(){return'<div id="{{elemId}}" class="video-controls skin-{{skin}} js-video-controls">\n    <div class="video-controls__branding"></div>\n    <div class="video-controls__wrapper">\n        <div class="video-controls__icon video-controls__start js-video-controls__start"></div>\n        <div class="video-controls__icon video-controls__play js-video-controls__play"></div>\n        <div class="video-controls__icon video-controls__pause js-video-controls__pause"></div>\n        <div class="video-controls__icon video-controls__rewind js-video-control__rewind"></div>\n        <div class="video-controls__icon video-controls__forward js-video-control__forward"></div>\n        <div class="video-controls__icon video-controls__smallscreen js-video-controls__smallscreen"></div>\n        <div class="video-controls__icon video-controls__largescreen js-video-controls__largescreen"></div>\n        <div class="video-controls__icon video-controls__fullscreen js-video-controls__fullscreen"></div>\n        <div class="video-controls__timer js-video-controls__timer">\n            <span class="video-timer__elapsed js-video-timer__elapsed">{{elapsed}}</span>\n            <span class="video-timer__divider"></span>\n            <span class="video-timer__duration">{{duration}}</span>\n        </div>\n        <div class="video-controls__volume js-video-controls__volume">\n            <i class="video-controls__icon video-volume__icon js-video-volume__icon">\n                <span class="video-volume__icon--status js-video-volume__icon--status"></span>\n            </i>\n            <div class="video-volume__slider-wrapper">\n                <div class="video-volume__slider js-video-volume__slider">\n                    <div class="video-volume__slider-range js-video-volume__slider-range"></div>\n                    <div class="video-volume__slider-handle js-video-volume__slider-handle"></div>\n                </div>\n            </div>\n        </div>\n        <div class="video-controls__scrubber js-video-controls__scrubber">\n            <div class="video-scrubber__progress js-video-scrubber__progress"></div>\n            <div class="video-scrubber__buffer js-video-scrubber__buffer"></div>\n            <div class="video-scrubber__handle js-video-scrubber__handle"></div>\n        </div>\n    </div>\n</div>\n'}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/utils/DateTimeHelper",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.DateTimeHelper=b(a.lodash)}(this,function(a){"use strict";function b(b,d){var e,f=new Date(1e3*b);if(!a.isNumber(b)||!c(f))return console.log("Duration is invalid: "+b),"";var l=f.getUTCHours(),m=f.getUTCMinutes(),n=f.getSeconds();return 10>l&&(l="0"+l),10>m&&(m="0"+m),10>n&&(n="0"+n),-1!=i.indexOf(d)?e=i[i.indexOf(d)]:(console.log("Duration format not supported or not provided, using default"),e=i[j]),parseInt(l,10)>0||e===g?l+k+m+k+n:parseInt(m,10)>0||e===h?m+k+n:n}function c(b){return!!b&&a.isDate(b)&&!isNaN(b.getTime())}function d(b){var c,d,e,f,g,h,i,j=/(\d\d\d\d)-(\d{1,2})-(\d{1,2})T(\d{1,2}):(\d{1,2}):(\d{1,2})/;return b&&a.isString(b)&&(i=b.match(j),i&&7===i.length)?(c=i[1],d=i[2]-1,e=i[3],f=i[4],g=i[5],h=i[6],new Date(Date.UTC(c,d,e,f,g,h))):new Date(b||"")}function e(b){if(!a.isDate(b)){var c=d(b);return a.isDate(c)||console.warn("[DateTimeHelper] - getValidDate: Date format is invalid, cannot convert to Date object: "+b),c}return b}function f(a){var b=this.getValidDate(a);return this.isValidDate(b)}var g="hh:mm:ss",h="mm:ss",i=[g,h,"ss"],j=0,k=":";return{formatDuration:b,isValidDate:c,isValidTimecode:f,getValidDate:e}}),define("jqueryui-amd/jqueryui/core",["jquery"],function(a){!function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}}))}(a)}),define("jqueryui-amd/jqueryui/widget",["jquery"],function(a){!function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(a.isPlainObject(f)?c[e]=a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):c[e]=f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;
return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(a)}),define("jqueryui-amd/jqueryui/mouse",["jquery","./widget"],function(a){!function(a,b){var c=!1;a(document).mouseup(function(){c=!1}),a.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=1===b.which,f="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(a)}),define("jqueryui-amd/jqueryui/draggable",["jquery","./core","./mouse","./widget"],function(a){!function(a,b){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c,d=this,e=!1,f=!1;for(a.ui.ddmanager&&!this.options.dropBehaviour&&(f=a.ui.ddmanager.drop(this,b)),this.dropped&&(f=this.dropped,this.dropped=!1),c=this.element[0];c&&(c=c.parentNode);)c===document&&(e=!0);return e||"original"!==this.options.helper?("invalid"===this.options.revert&&!f||"valid"===this.options.revert&&f||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,f)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){d._trigger("stop",b)!==!1&&d._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1):!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;return a(this.options.handle,this.element).find("*").addBack().each(function(){this===b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;if("parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=["document"===e.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===e.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===e.containment?0:a(window).scrollLeft())+a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===e.containment?0:a(window).scrollTop())+(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||e.containment.constructor===Array)e.containment.constructor===Array&&(this.containment=e.containment);else{if(c=a(e.containment),d=c[0],!d)return;b="hidden"!==a(d).css("overflow"),this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e,f,g=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName),j=b.pageX,k=b.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(d=this.relative_container.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,b.pageX-this.offset.click.left<c[0]&&(j=c[0]+this.offset.click.left),b.pageY-this.offset.click.top<c[1]&&(k=c[1]+this.offset.click.top),b.pageX-this.offset.click.left>c[2]&&(j=c[2]+this.offset.click.left),b.pageY-this.offset.click.top>c[3]&&(k=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((k-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,k=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((j-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,j=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f)),{top:k-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:j-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("ui-draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"ui-sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("ui-draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("ui-draggable"),e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.ui.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("ui-draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("ui-draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("ui-draggable"),d=c.options,e=!1;c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName?(d.axis&&"x"===d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("ui-draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!==String?c.snap.items||":data(ui-draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!==b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){var d,e,f,g,h,i,j,k,l,m,n=a(this).data("ui-draggable"),o=n.options,p=o.snapTolerance,q=c.offset.left,r=q+n.helperProportions.width,s=c.offset.top,t=s+n.helperProportions.height;for(l=n.snapElements.length-1;l>=0;l--)h=n.snapElements[l].left,i=h+n.snapElements[l].width,j=n.snapElements[l].top,k=j+n.snapElements[l].height,q>h-p&&i+p>q&&s>j-p&&k+p>s||q>h-p&&i+p>q&&t>j-p&&k+p>t||r>h-p&&i+p>r&&s>j-p&&k+p>s||r>h-p&&i+p>r&&t>j-p&&k+p>t?("inner"!==o.snapMode&&(d=Math.abs(j-t)<=p,e=Math.abs(k-s)<=p,f=Math.abs(h-r)<=p,g=Math.abs(i-q)<=p,d&&(c.position.top=n._convertPositionTo("relative",{top:j-n.helperProportions.height,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i}).left-n.margins.left)),m=d||e||f||g,"outer"!==o.snapMode&&(d=Math.abs(j-s)<=p,e=Math.abs(k-t)<=p,f=Math.abs(h-q)<=p,g=Math.abs(i-r)<=p,d&&(c.position.top=n._convertPositionTo("relative",{top:j,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k-n.helperProportions.height,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[l].snapping&&(d||e||f||g||m)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=d||e||f||g||m):(n.snapElements[l].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=!1)}}),a.ui.plugin.add("draggable","stack",{start:function(){var b,c=a(this).data("ui-draggable").options,d=a.makeArray(a(c.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});d.length&&(b=parseInt(d[0].style.zIndex,10)||0,a(d).each(function(a){this.style.zIndex=b+a}),this[0].style.zIndex=b+d.length)}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(a)}),function(a,b){if("function"==typeof define&&define.amd)define("bam-video-players/players/ui/controls/HTML5PlayerControls",["jquery","handlebars/handlebars","text!bam-video-players/players/ui/templates/HTML5PlayerControls.html","bam-video-players/events/PlayerEvents","bam-video-players/utils/DateTimeHelper","jqueryui-amd/jqueryui/draggable"],b);else if("object"==typeof exports)module.exports=b(require("jquery"),require("handlebars/handlebars"),require("text!bam-video-players/players/ui/templates/HTML5PlayerControls.html"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/utils/DateTimeHelper"),require("jqueryui-amd/jqueryui/draggable"));else{var c=$("#ControlsTemplate").html();a.HTML5PlayerControls=b(a.jQuery,a.Handlebars,c,a.PlayerEvents,a.DateTimeHelper,null)}}(this,function(a,b,c,d,e){"use strict";function f(a){this.player=a,this.$player=a.$player,this.elemId="video-controls__"+this.$player.attr("id"),this.playingCssClass="video-controls--playing",this.timeout=null,g.call(this)}function g(){this.timeFormat=this.player.duration>3600?"hh:mm:ss":"mm:ss";var d=b.compile(c),f=e.formatDuration(0,this.timeFormat),g=e.formatDuration(this.player.duration,this.timeFormat);1===this.$player.siblings("#"+this.elemId).length?this.$player.siblings("#"+this.elemId).replaceWith(d({elemId:this.elemId,skin:this.player.config.skinProps.skin||null,elapsed:f,duration:g})):this.$player.after(d({elemId:this.elemId,skin:this.player.config.skinProps.skin||null,elapsed:f,duration:g})),this.$controls=a("#"+this.elemId),this.$scrubber=this.$controls.find(".js-video-controls__scrubber"),this.$volume=this.$controls.find(".js-video-controls__volume"),z.call(this,this.$player.prop("volume"),this.$player.prop("muted")),h.call(this),E.call(this)}function h(){this.$controls.find(".js-video-controls__start").on("click",a.proxy(i,this)),this.$controls.find(".js-video-controls__play").on("click",a.proxy(j,this)),this.$controls.find(".js-video-controls__pause").on("click",a.proxy(m,this)),this.$controls.find(".js-video-controls__fullscreen").on("click",a.proxy(n,this)),this.$controls.find(".js-video-control__rewind").on("click",a.proxy(p,this)),this.$controls.find(".js-video-control__forward").on("click",a.proxy(q,this)),this.$volume.find(".js-video-volume__icon").on("click",y.call(this)),this.$volume.find(".js-video-volume__slider-handle").draggable({containment:".js-video-volume__slider",axis:"y",drag:a.proxy(w,this)}),this.$volume.find(".js-video-volume__slider").on("click",a.proxy(x,this)),this.$scrubber.find(".js-video-scrubber__handle").draggable({containment:this.$scrubber,axis:"x",drag:a.proxy(s,this),stop:a.proxy(t,this)}),this.$scrubber.on("click",a.proxy(u,this)),I[this.elemId+"::_onTimeUpdate"]=a.proxy(r,this),I[this.elemId+"::_onPlaying"]=a.proxy(k,this),I[this.elemId+"::_onPausedEnded"]=a.proxy(l,this),I[this.elemId+"::_onMouseMove"]=a.proxy(A,this),I[this.elemId+"::_onMouseOver"]=a.proxy(B,this),I[this.elemId+"::_onMouseOut"]=a.proxy(C,this),I[this.elemId+"::_onBufferProgress"]=a.proxy(D,this),I[this.elemId+"::_onFullScreenChange"]=a.proxy(o,this),this.player.dispatcher.on(d.MEDIA_TIME_UPDATE,I[this.elemId+"::_onTimeUpdate"]),this.player.dispatcher.on(d.MEDIA_PLAYING,I[this.elemId+"::_onPlaying"]),this.player.dispatcher.on(d.MEDIA_PAUSED,I[this.elemId+"::_onPausedEnded"]),this.player.dispatcher.on(d.MEDIA_COMPLETE,I[this.elemId+"::_onPausedEnded"]),this.player.dispatcher.on(d.FULLSCREEN_CHANGE,I[this.elemId+"::_onFullScreenChange"]),this.$player.on("mousemove",I[this.elemId+"::_onMouseMove"]),this.$controls.on("mouseover",I[this.elemId+"::_onMouseOver"]),this.$player.on("mouseout",I[this.elemId+"::_onMouseOut"]),this.$controls.on("mouseout",I[this.elemId+"::_onMouseOut"]),this.$player.on("progress",I[this.elemId+"::_onBufferProgress"])}function i(a){this.$player.prop("currentTime",0)}function j(a){this.player.play()}function k(a,b){this.$controls.addClass(this.playingCssClass)}function l(a,b){this.$controls.removeClass(this.playingCssClass)}function m(a){this.player.pause()}function n(a){this.player.isFullScreen?this.player.exitFullScreen():this.player.enterFullScreen()}function o(a,b){var c=this.$controls.find(".js-video-controls__fullscreen");a.isFullScreen?c.addClass("video-controls__exit-fullscreen"):c.removeClass("video-controls__exit-fullscreen")}function p(a){var b=this.$player.prop("currentTime"),c=0>b-10?0:b-10;this.$player.prop("currentTime",c)}function q(a){var b=this.$player.prop("currentTime"),c=b+10>this.player.duration?this.player.duration:b+10;this.$player.prop("currentTime",c)}function r(a,b){var c=e.formatDuration(a.currentTime,this.timeFormat),d=a.currentTime/this.player.duration;this.$controls.find(".js-video-timer__elapsed").text(c),v.call(this,d)}function s(a,b){this.player.isPlaying&&(this.player.pause({silent:!0}),this.$scrubber.data("play-after-scrub",!0));var c=b.position.left/this.$scrubber.width(),d=c*this.player.duration;v.call(this,c),this.$player.prop("currentTime",d)}function t(a,b){this.$scrubber.data("play-after-scrub")&&(this.player.play(),this.$scrubber.data("play-after-scrub",!1))}function u(a){this.player.isPlaying&&(this.player.pause({silent:!0}),this.$scrubber.data("play-after-scrub",!0));var b=(a.pageX-this.$scrubber.offset().left)/this.$scrubber.width(),c=b*this.player.duration;if(v.call(this,b),this.$player.prop("currentTime",c),this.$scrubber.data("play-after-scrub")){var d=this;window.setTimeout(function(){d.player.play()},250),this.$scrubber.data("play-after-scrub",!1)}}function v(a){this.$scrubber.find(".js-video-scrubber__progress").css(H(a)),this.$scrubber.find(".js-video-scrubber__handle").css({left:a*this.$scrubber.width()})}function w(a,b){var c=this.$controls.find(".js-video-volume__slider");if(!c.is(":visible"))return!1;var d=c.height(),e=c.find(".js-video-volume__slider-handle").outerHeight();d-=e;var f=Math.abs(d-b.position.top)/d;z.call(this,f)}function x(a){var b=this.$volume.find(".js-video-volume__slider"),c=Math.abs(b.height()+b.offset().top-a.pageY)/b.height();z.call(this,c)}function y(){var a=this;return function(b){0===a.currentVolume||a.$player.prop("muted")?a.player.unmute():a.player.mute(),
z.call(a,a.currentVolume,a.$player.prop("muted"))}}function z(a,b){this.currentVolume=a,b&&(a=0);var c=this.$volume.find(".js-video-volume__slider"),d=this.$volume.find(".js-video-volume__slider-handle"),e=c.height()-d.outerHeight()-a*(c.height()-d.outerHeight());0===a?this.$volume.find(".js-video-volume__icon--status").removeClass("video-volume__icon--half").removeClass("video-volume__icon--full").addClass("video-volume__icon--muted"):.5>a?this.$volume.find(".js-video-volume__icon--status").removeClass("video-volume__icon--muted").removeClass("video-volume__icon--full").addClass("video-volume__icon--half"):this.$volume.find(".js-video-volume__icon--status").removeClass("video-volume__icon--muted").removeClass("video-volume__icon--half").addClass("video-volume__icon--full"),c.find(".js-video-volume__slider-range").css(H(a,"Y")),c.find(".js-video-volume__slider-handle").css({top:e}),this.player.setVolume(100*a)}function A(a){G.call(this,!0),E.call(this)}function B(a){G.call(this,!0),F.call(this)}function C(a){G.call(this,!1)}function D(a){var b=a.target.buffered>0?a.target.buffered.end(a.target.buffered.length-1):0,c=this.player.duration;if(c>0){var d=b/c;this.$scrubber.find(".js-video-scrubber__buffer").css(H(d))}}function E(a){var b=this;a=a||8e3,F.call(b),b.timeout=window.setTimeout(function(){G.call(b,!1)},a)}function F(){window.clearTimeout(this.timeout)}function G(a){a?this.$controls.removeClass("video-controls--hide"):this.$controls.addClass("video-controls--hide"),this.player.dispatcher.publish(d.CONTROLS_VISIBILITY_CHANGED,{player:self,visible:a}),v.call(this,this.$player.prop("currentTime")/this.player.duration)}function H(a,b){return b=b&&-1!==["X","Y"].indexOf(b.toUpperCase())?"scale"+b.toUpperCase():"scaleX",{"-webkit-transform":b+"("+a+")","-moz-transform":b+"("+a+")","-ms-transform":b+"("+a+")","-o-transform":b+"("+a+")",transform:b+"("+a+")"}}var I={};return f.prototype={show:function(){this.$player.siblings("#"+this.elemId).show()},hide:function(){this.$player.siblings("#"+this.elemId).hide()},destroy:function(){this.$controls.find(".js-video-controls__play").off(),this.$controls.find(".js-video-controls__pause").off(),this.$controls.find(".js-video-controls__fullscreen").off(),this.$controls.find(".js-video-control__rewind").off(),this.$controls.find(".js-video-control__forward").off(),this.$volume.find(".js-video-volume__icon").off("click",y.call(this)),this.$volume.find(".js-video-volume__slider-handle").draggable("destroy"),this.$volume.find(".js-video-volume__slider").off(),this.$scrubber.find(".js-video-scrubber__handle").draggable("destroy"),this.$scrubber.off(),this.player.dispatcher.off(d.MEDIA_TIME_UPDATE,I[this.elemId+"::_onTimeUpdate"]),this.player.dispatcher.off(d.MEDIA_PLAYING,I[this.elemId+"::_onPlaying"]),this.player.dispatcher.off(d.MEDIA_PAUSED,I[this.elemId+"::_onPausedEnded"]),this.player.dispatcher.off(d.MEDIA_COMPLETE,I[this.elemId+"::_onPausedEnded"]),this.player.dispatcher.off(d.FULLSCREEN_CHANGE,I[this.elemId+"::_onFullScreenChange"]),this.$player.off("mousemove",I[this.elemId+"::_onMouseMove"]),this.$controls.off("mouseover",I[this.elemId+"::_onMouseOver"]),this.$player.off("mouseout",I[this.elemId+"::_onMouseOut"]),this.$controls.off("mouseout",I[this.elemId+"::_onMouseOut"]),this.$player.off("progress",I[this.elemId+"::_onBufferProgress"]),this.$player.siblings("#"+this.elemId).remove()}},f}),define("text!bam-video-players/players/ui/templates/AdControls.html",[],function(){return'<div id="{{elemId}}" class="ad-controls skin-{{skin}} js-ad-controls">\n    <div class="ad-controls__timer js-ad-controls__timer">\n        {{message}}&nbsp;<span class="ad-timer__duration js-ad-timer__duration">{{duration}}</span>&nbsp;seconds\n    </div>\n    <div class="ad-controls__volume js-ad-controls__volume">\n        <i class="ad-controls__icon ad-volume__icon js-ad-volume__icon"></i>\n    </div>\n</div>\n'}),function(a,b){if("function"==typeof define&&define.amd)define("bam-video-players/players/ui/controls/AdControls",["jquery","handlebars/handlebars","text!bam-video-players/players/ui/templates/AdControls.html","bam-video-players/events/PlayerEvents","bam-video-players/events/UserEvents","bam-video-paid-interruptions/events/PaidInterruptionEvents","lodash/lodash","bam-video-players/utils/DateTimeHelper"],b);else if("object"==typeof exports)module.exports=b(require("jquery"),require("handlebars/handlebars"),require("text!bam-video-players/players/ui/templates/AdControls.html"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/UserEvents"),require("bam-video-paid-interruptions/events/PaidInterruptionEvents"),require("lodash/lodash"),require("bam-video-players/utils/DateTimeHelper"));else{var c=a.jQuery("#AdControlsTemplate").html();a.AdControls=b(a.jQuery,a.Handlebars,c,a.PlayerEvents,a.UserEvents,a.PaidInterruptionEvents,a._,a.DateTimeHelper)}}(this,function(a,b,c,d,e,f,g,h){"use strict";function i(a,d,e,f){this.$video=a,this.dispatcher=d,this.playerId=e,this.elemId="ad-controls__"+e,this.template=b.compile(c),this.duration=0,this.timeFormat="ss",this.logger=f,this.BOUND_FUNCS={},this.BOUND_FUNCS[this.elemId]={},this.BOUND_FUNCS[this.elemId].AD_START=k.bind(this),this.BOUND_FUNCS[this.elemId].AD_COMPLETE=l.bind(this),this.BOUND_FUNCS[this.elemId].AD_TIME_UPDATE_ELAPSED=m.bind(this),this.BOUND_FUNCS[this.elemId].onVolumeChange=r.bind(this),j.call(this)}function j(){this.dispatcher.on(f.AD_START,this.BOUND_FUNCS[this.elemId].AD_START),this.dispatcher.on(f.AD_COMPLETE,this.BOUND_FUNCS[this.elemId].AD_COMPLETE),this.dispatcher.on(f.AD_TIME_UPDATE_ELAPSED,this.BOUND_FUNCS[this.elemId].AD_TIME_UPDATE_ELAPSED),this.dispatcher.on(d.MEDIA_VOLUME_CHANGED,this.BOUND_FUNCS[this.elemId].onVolumeChange)}function k(b){if(t.call(this,b)){this.duration=b.duration;var c=h.formatDuration(this.duration||0,this.timeFormat),d=this.template({elemId:this.elemId,message:"This ad ends in",duration:c});1===this.$video.siblings("#"+this.elemId).length?this.$video.siblings("#"+this.elemId).replaceWith(d):this.$video.after(d);var e=a("#"+this.elemId);e.on("click",".js-ad-volume__icon",n.call(this)),s.call(this,this.currentVolume,this.muted)}}function l(a){t.call(this,a)&&u.call(this,"_onAdComplete",g.keys(a))}function m(b){if(t.call(this,b)){var c=this.duration-b.currentTime,d=h.formatDuration(c,this.timeFormat);a("#"+this.elemId).find(".js-ad-timer__duration").text(d)}}function n(a){var b=this;return function(a){0==b.currentVolume?b.dispatcher.publish(e.UNMUTE_REQUESTED):b.dispatcher.publish(e.MUTE_REQUESTED)}}function o(b){var c=a("#"+this.elemId).find(".js-ad-volume__icon");b?c.addClass("ad-volume__icon--muted"):c.removeClass("ad-volume__icon--muted")}function p(){o.call(this,!0)}function q(){o.call(this,!1)}function r(a){u.call(this,"_updateVolume_event",a.volume);var b=a.volume/100,c=0==b;s.call(this,b,c)}function s(a,b){u.call(this,"updateVolume",a),this.currentVolume=a,this.muted=b,b&&(a=0),0===a?p.call(this):q.call(this)}function t(a){return g.get(a,"player.id")==this.playerId}function u(){this.logger&&this.logger.info("[AbstractHTMLPlayer-AdControls]",Array.prototype.slice.call(arguments).join(" "))}return i.prototype={destroy:function(){u.call(this,"destroy"),this.dispatcher.off(f.AD_START,this.BOUND_FUNCS[this.elemId].AD_START),this.dispatcher.off(f.AD_COMPLETE,this.BOUND_FUNCS[this.elemId].AD_COMPLETE),this.dispatcher.off(f.AD_TIME_UPDATE_ELAPSED,this.BOUND_FUNCS[this.elemId].AD_TIME_UPDATE_ELAPSED),this.dispatcher.off(d.MEDIA_VOLUME_CHANGED,this.BOUND_FUNCS[this.elemId].onVolumeChange),a("#"+this.elemId).off(),this.$video.siblings("#"+this.elemId).remove()}},i}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-paid-interruptions/plugins/PaidInterruptionPlugin",["bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("bandwagon/bandwagon")):a.PaidInterruptionPlugin=b(a.Bandwagon)}(this,function(a){"use strict";function b(b,c){this.config=c,this.ready=!1,this.player=b,this.adManager=null,this.adPlaying=!1,this.eventBus=a,this.dispatcher=this.config?a.getInstanceByKey(this.config.container):null}return b.prototype={constructor:b,requestAd:function(a,b){this.adPlaying=!1},startMidRoll:function(){},endMidRoll:function(){},endPreRoll:function(){},setClip:function(){},destroy:function(){},resumeAd:function(){},setSize:function(a,b,c){},setVolume:function(a){},mute:function(){},unmute:function(){},getCurrentTimeInSecs:function(){return 0},getDurationInSecs:function(){return 0},attachLogger:function(a){this.logger=a},toString:function(){return"PaidInterruptionPlugin"}},b}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-paid-interruptions/plugins/AuditudePlugin",["jquery","bam-video-paid-interruptions/plugins/PaidInterruptionPlugin","bam-video-paid-interruptions/events/PaidInterruptionEvents","device/device"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("bam-video-paid-interruptions/plugins/PaidInterruptionPlugin"),require("bam-video-paid-interruptions/events/PaidInterruptionEvents"),require("device/device")):a.AuditudePlugin=b(a.jQuery,a.PaidInterruptionPlugin,a.PaidInterruptionEvents,a.deviceBootstrap)}(this,function(a,b,c,d){"use strict";function e(){console.log("AD INIT COMPLETE"),this.adManager.publish(window.aud.notifications.break_begin)}function f(){console.log("AD INIT ERROR"),this.adManager.publish(window.aud.notifications.video_playback_started),this.dispatcher.publish(c.AD_ERROR)}function g(){console.log("ON BREAK BEGIN")}function h(a,b,d){console.log("AD BEGIN"),this.adPlaying=!0,this.dispatcher.publish(c.AD_START),this.dispatcher.publish(c.AD_PREROLL_START),this.dispatcher.publish(c.AD_COMPANION,d&&d.banners?d.banners:null)}function i(a,b,d){console.log("AD ENDED"),this.adPlaying=!1,this.adManager.publish(window.aud.notifications.video_playback_started),this.dispatcher.publish(c.AD_COMPLETE),this.dispatcher.publish(c.AD_PREROLL_COMPLETE),this.dispatcher.publish(c.AD_COMPANION,d&&d.banners?d.banners:null)}function j(b,d){if("success"!==d.toLowerCase())return void this.dispatcher.publish(c.AD_PLUGIN_ERROR);var j={controls:!0,style:{backgroundColor:"#000",width:parseInt(a(this.config.container).width(),10),height:parseInt(a(this.config.container).height(),10)},handlers:{play:null,pause:null,ended:null}};this.adManager=window.aud.html5.AdPlayer(this.player,a(this.config.container).get(0),this.config.auditude.auditudeDomain,this.config.auditude.auditudeZoneId,j),this.adManager.subscribe(window.aud.events.init_complete,a.proxy(e,this)),this.adManager.subscribe(window.aud.events.init_failed,a.proxy(f,this)),this.adManager.subscribe(window.aud.events.break_begin,a.proxy(g,this)),this.adManager.subscribe(window.aud.events.linear_ad_begin,a.proxy(h,this)),this.adManager.subscribe(window.aud.events.break_end,a.proxy(i,this)),this.ready=!0,this.dispatcher.publish(c.AD_PLUGIN_LOADED)}function k(){var a="",b=this.config.auditude,c=b.substr(0,b.indexOf("/")),d=b.slice(b.lastIndexOf("/")+1,b.length),e=b.slice(b.indexOf("/")+1,b.lastIndexOf("/")),f="other"===n.formFactor.toLowerCase()?"desktop":n.formFactor.toLowerCase(),g="preroll";return a="siteSection="+b,a=a.concat(";site="+c),a=a.concat(";section="+e),a=a.concat(";player="+d),a=a.concat(";devicetype="+f),a=a.concat(";adType="+g),"undefined"!=typeof this.config.auditude.league&&(a=a.concat(";league="+this.config.auditude.league)),a}function l(){a.getScript(this.scriptUrl).done(a.proxy(j,this))}function m(a,b){m.prototype["super"].constructor.call(this,a,b),this.scriptUrl=this.config.scriptUrl?this.config.scriptUrl:"https://mlb.cdns.auditude.com/player/js/lib/plugin/1.3/auds.html5player.js",l.call(this)}var n=d();return m.prototype=Object.create(b.prototype),m.prototype.constructor=m,m.prototype["super"]=b.prototype,m.prototype.requestAd=function(a){if(this.adManager){m.prototype["super"].requestAd.call(this,a);var b=k.call(this),c=this.config.auditude.contentIdPrefix+a;this.adManager.init([c,this.config.auditude.defaultContentId],{userData:b})}},m.prototype.destroy=function(){this.adManager.destroy()},m.prototype.toString=function(){return"AuditudePlugin"},m}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-paid-interruptions/models/CuePointVO",[],b):"object"==typeof exports?module.exports=b():a.CuePointVO=b()}(this,function(){var a=function(a){this.duration=a||90,this.breakLength=this.duration,this.timePosition=5};return a.prototype.toString=function(){return"CuePointVO:"+JSON.stringify(this)},a}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-paid-interruptions/models/ScriptLoader",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.ScriptLoader=b(a._)}(this,function(a){function b(b,c,d,e){var f=document.createElement("script");f.src=b,f.onload=function(){var b=a.get(window,c);b?d(b):e()},f.onerror=e,f.type="text/javascript",document.getElementsByTagName("body")[0].appendChild(f)}var c={getAPI:function(a,c,d,e,f){b(a,c,d,e)}};return c}),function(a,b){"function"==typeof define&&define.amd?define("video-block-detector/blockDetector",["jquery","lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash")):a.BlockDetector=b(a.$,a._)}(this,function(a,b){function c(){return k}function d(){return l}function e(a){i=b.assign({},i,a)}function f(a,b,c,d,e){var f=function(){4==this.readyState&&(l=!1,0==this.status?(console.log("AdBlockDetector ::: cors ::: onReady ::: (adBlockEnabled, true)"),k=!0,c&&c(e)):(k=!1,console.log("AdBlockDetector ::: cors ::: onReady ::: (adBlockEnabled, false)"),d&&d(e)))},g=new XMLHttpRequest;if("withCredentials"in g){g.onreadystatechange=f;try{g.open(b,a,!0)}catch(h){return void(k=!0)}}else if("undefined"!=typeof XDomainRequest){g=new XDomainRequest,g.onreadystatechange=f;try{g.open(b,a,!0)}catch(h){return void(k=!0)}}g&&g.send()}function g(){var b=a("#"+j);if(b.length>0)m=!0;else{var c=a("<div></div>");a(c).attr("class","ad-placement ad-unit"),a(c).attr("id",j),a(c).css("width","1px"),a(c).css("height","1px"),a(c).css("position","absolute"),a(c).css("top","0"),a(c).css("left","0"),a("body").append(c)}}function h(b,c,d){i.enabled&&i.testAdUrl?(l=!0,a(document).ready(function(){g();var a=document.getElementById(j);a&&setTimeout(function(){if(0==a.offsetWidth&&0==a.offsetHeight&&!m)return k=!0,l=!1,void(b&&b(d));var e=i.testAdUrl+"?"+parseInt(1e8*Math.random());f(e,"GET",b,c,d)},20)})):(i.testAdUrl||console.warn("AdBlockDetector ::: adblock url not defined"),c&&c(d))}var i={testAdUrl:"",enabled:!0},j="mlb-block-unit",k=!1,l=!1,m=!1;return{detectAdBlock:h,isInProgress:d,isAdBlockEnabled:c,setConfig:e}}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-paid-interruptions/plugins/FreewheelPlugin",["jquery","lodash/lodash","bam-video-paid-interruptions/plugins/PaidInterruptionPlugin","bam-video-paid-interruptions/events/PaidInterruptionEvents","bam-video-paid-interruptions/models/CuePointVO","bam-video-paid-interruptions/models/ScriptLoader","video-block-detector/blockDetector","device/device"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bam-video-paid-interruptions/plugins/PaidInterruptionPlugin"),require("bam-video-paid-interruptions/events/PaidInterruptionEvents"),require("bam-video-paid-interruptions/models/CuePointVO"),require("bam-video-paid-interruptions/models/ScriptLoader"),require("video-block-detector/blockDetector"),require("device/device")):a.FreewheelPlugin=b(a.jQuery,a.lodash,a.PaidInterruptionPlugin,a.PaidInterruptionEvents,a.CuePointVO,a.ScriptLoader,a.AdBlockDetector,a.deviceBootstrap)}(this,function(a,b,c,d,e,f,g,h){"use strict";function i(){try{var a=this.player.utils.getClipReader(),c=a.getFreewheelProps(this.clip)}catch(d){var c=b.get(this.clip,"freewheelProps")}b.each(c,function(a,c){this.context.addKeyValue(c,b.toString(a))}.bind(this))}function j(c){if(this.ready&&this.clip){if(!this.adManager)return void k.call(this);var e=b.get(this,"config.freewheel.duration",600);this.context=this.adManager.newContext(),this.context.setContentVideoElement(c),this.context.setProfile(this.config.freewheel.adProfile),this.context.setSiteSection(this.siteSection,this.networkId,Math.floor(1e4*Math.random()),this.freewheelSDK.ID_TYPE_CUSTOM,this.fallbackNetwork);var f="MP4";if(this.clip&&(f=this.clip.content_id||f),this.context.setVideoAsset(f,e,this.networkId),"undefined"!=typeof this.topicId){var g=this.topicId.substr(0,this.topicId.indexOf("/")),h=this.topicId.slice(this.topicId.lastIndexOf("/")+1,this.topicId.length),j=this.topicId.slice(this.topicId.indexOf("/")+1,this.topicId.lastIndexOf("/"));this.context.addKeyValue("topicID",this.topicId),this.context.addKeyValue("player",h),this.context.addKeyValue("site",g),this.context.addKeyValue("section",j)}else this.context.addKeyValue("player","embed"),this.context.addKeyValue("site",this.config.freewheel.site);this.context.addKeyValue("deviceType",y.formFactor.toLowerCase()),i.call(this),this.context.addTemporalSlot("Preroll_1",this.freewheelSDK.ADUNIT_PREROLL,0);try{this.context.addEventListener(this.freewheelSDK.EVENT_REQUEST_COMPLETE,a.proxy(u,this)),this.context.addEventListener(this.freewheelSDK.EVENT_AD,a.proxy(s,this)),this.context.submitRequest()}catch(l){this.dispatcher.publish(d.AD_ERROR,l)}}else{if(this.ready)return void this.dispatcher.publish(d.AD_COMPLETE,{player:this.player,data:{}});var m=this;window.setTimeout(function(){m.requestAd(c)},500)}}function k(){x.call(this,"AD_BLOCK_DETECTED"),this.dispatcher.publish(d.AD_BLOCK_DETECTED)}function l(){this.prerollSlots.length?this.prerollSlots[0].play():(this.player.removeEventListener("timeupdate",z[this.player.id].onTimeUpdated),this.dispatcher.publish(d.AD_COMPLETE,{player:this.player,data:{}}))}function m(){return this.currentPlayingSlotType===this.freewheelSDK.TIME_POSITION_CLASS_MIDROLL?void x.call(this,"Received content video ended event dispatched from midroll, ignore"):(this.sourceUrlQueue.shift(),this.context.setVideoState(this.freewheelSDK.VIDEO_STATE_STOPPED),void(this.midrollSlots.length?(this.currentPlayingSlotType=this.freewheelSDK.TIME_POSITION_CLASS_MIDROLL,this.midrollSlots[0].play()):this.sourceUrlQueue.length?l.call(this):this.postrollSlots&&this.postrollSlots.length?(this.player.removeEventListener("ended",z[this.player.id].onContentVideoEnded),this.player.removeEventListener("timeupdate",z[this.player.id].onContentVideoTimeUpdated),this.postrollSlots[0].play()):this.context.setVideoState(this.freewheelSDK.VIDEO_STATE_COMPLETED)))}function n(){if(!this.overlaySlots.length)return void this.player.removeEventListener("timeupdate",z[this.player.id].onContentVideoTimeUpdated);if(this.currentPlayingSlotType===this.freewheelSDK.TIME_POSITION_CLASS_MIDROLL)return void x.call(this,"Received content video timeUpdate event dispatched when midroll playing, ignore");for(var a=0;a<this.overlaySlots.length;a++){var b=this.overlaySlots[a],c=b.getTimePosition(),d=this.player.currentTime;if(d-c>=0&&1>=d-c&&!this.currentPlayingSlotType)return this.overlaySlots.splice(a,1),x.call(this,"onContentVideoTimeUpdated timePositionClass: "+b.getTimePositionClass()),void b.play()}}function o(a){var b={currentTime:a.target.currentTime};this.dispatcher.publish(d.AD_TIME_UPDATE_ELAPSED,b)}function p(){this.adManager=new this.freewheelSDK.AdManager,this.adManager.setNetwork(this.config.freewheel.adNetwork),this.adManager.setServer(this.config.freewheel.adServer),z[this.player.id].onContentVideoEnded=m.bind(this),z[this.player.id].onContentVideoTimeUpdated=n.bind(this),z[this.player.id].onTimeUpdated=o.bind(this),this.ready=!0,this.dispatcher.publish(d.AD_PLUGIN_LOADED)}function q(){this.midrollSlots.length?this.midrollSlots[0].play():(this.player.removeEventListener("timeupdate",z[this.player.id].onTimeUpdated),this.dispatcher.publish(d.AD_COMPLETE,{player:this.player,data:{}}))}function r(a){var b=a.slot.getTimePositionClass();x.call(this,"FreeWheelPlugin onSlotStarted slotTimePositionClass: "+b)}function s(a){if(a.subType===this.freewheelSDK.EVENT_AD_IMPRESSION&&(this.player.addEventListener("timeupdate",z[this.player.id].onTimeUpdated),this.dispatcher.publish(d.AD_START,{duration:a.slot.getTotalDuration()})),a.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0){var b=a.target._temporalSlotBase;b&&b.parentElement&&b.parentElement.classList.add("freewheel_adClickthru")}a.subType===this.freewheelSDK.EVENT_AD_AUTO_PLAY_BLOCKED&&this.dispatcher.publish(d.AD_AUTOPLAY_BLOCKED)}function t(a){var b=a.slot.getTimePositionClass();x.call(this,"FreeWheelPlugin onSlotEnded slotTimePositionClass: "+b);var c;switch(b){case this.freewheelSDK.TIME_POSITION_CLASS_PREROLL:if(this.prerollSlots.length)if(this.prerollSlots.shift(),this.prerollSlots.length)this.prerollSlots[0].play();else{try{this.player.addEventListener("ended",z[this.player.id].onContentVideoEnded),this.player.addEventListener("timeupdate",z[this.player.id].onContentVideoTimeUpdated)}catch(e){}this.context.setVideoState(this.freewheelSDK.VIDEO_STATE_PLAYING),this.player.removeEventListener("timeupdate",z[this.player.id].onTimeUpdated),c={duration:a.slot?a.slot.getTotalDuration():null},this.dispatcher.publish(d.AD_COMPLETE,{player:this.player,data:c})}break;case this.freewheelSDK.TIME_POSITION_CLASS_MIDROLL:if(this.midrollSlots.length)if(this.midrollSlots.shift(),this.midrollSlots.length&&!this.endMidRolls)this.midrollSlots[0].play();else{this.currentPlayingSlotType=null,this.endMidRolls=!1;try{this.player.addEventListener("ended",z[this.player.id].onContentVideoEnded),this.player.addEventListener("timeupdate",z[this.player.id].onContentVideoTimeUpdated)}catch(e){}this.context.setVideoState(this.freewheelSDK.VIDEO_STATE_PLAYING),this.player.removeEventListener("timeupdate",z[this.player.id].onTimeUpdated),c={duration:a.slot?a.slot.getTotalDuration():null},this.dispatcher.publish(d.AD_COMPLETE,{player:this.player,data:c})}break;case this.freewheelSDK.TIME_POSITION_CLASS_OVERLAY:this.currentPlayingSlotType=null;break;case this.freewheelSDK.TIME_POSITION_CLASS_POSTROLL:this.postrollSlots.length&&(this.postrollSlots.shift(),this.postrollSlots.length?this.postrollSlots[0].play():(this.context.setVideoState(this.freewheelSDK.VIDEO_STATE_COMPLETED),u.call(this,{success:!0})))}var f=document.getElementsByClassName("freewheel_adClickthru");f.length>0&&f[0].classList.remove("freewheel_adClickthru")}function u(b){if(x.call(this,"FreeWheelPlugin - _onRequestComplete",b),this.context.removeEventListener(this.freewheelSDK.EVENT_REQUEST_COMPLETE,function(){}),!b.success)return void this.dispatcher.publish(d.AD_ERROR,b);this.prerollSlots=[],this.midrollSlots=[],this.overlaySlots=[],this.postrollSlots=[];for(var c=this.context.getTemporalSlots(),e=null,f=0;f<c.length;f++)switch(e=c[f],e.getTimePositionClass()){case this.freewheelSDK.TIME_POSITION_CLASS_PREROLL:this.prerollSlots.push(e);break;case this.freewheelSDK.TIME_POSITION_CLASS_MIDROLL:this.midrollSlots.push(e);break;case this.freewheelSDK.TIME_POSITION_CLASS_OVERLAY:this.overlaySlots.push(e);break;case this.freewheelSDK.TIME_POSITION_CLASS_POSTROLL:this.postrollSlots.push(e)}this.context.addEventListener(this.freewheelSDK.EVENT_SLOT_STARTED,a.proxy(r,this)),this.context.addEventListener(this.freewheelSDK.EVENT_SLOT_ENDED,a.proxy(t,this)),this.sourceUrlQueue=[this.clip];var g="noAdSlot",h=e?e.getTimePositionClass():g;switch(h){case g:case this.freewheelSDK.TIME_POSITION_CLASS_PREROLL:l.call(this);break;case this.freewheelSDK.TIME_POSITION_CLASS_MIDROLL:q.call(this);break;case this.freewheelSDK.TIME_POSITION_CLASS_OVERLAY:case this.freewheelSDK.TIME_POSITION_CLASS_POSTROLL:}}function v(){var a=this;window.tv&&window.window.tv.freewheel?(this.freewheelSDK||(this.freewheelSDK=window.tv.freewheel.SDK),p.call(a)):f.getAPI(this.scriptUrl,"tv.freewheel.SDK",function(b){a.freewheelSDK=b,p.call(a)},function(){a.dispatcher.publish(d.AD_PLUGIN_ERROR)})}function w(a,b){w.prototype["super"].constructor.call(this,a,b),this.scriptUrl=this.config.freewheel&&this.config.freewheel.adManager?this.config.freewheel.adManager:"https://mssl.fwmrm.net/p/release/latest-JS/adm/prd/AdManager.js",this.context=null,this.siteSection=this.config.siteSection,this.networkId=this.config.freewheel.siteSectionNetwork,this.fallbackNetwork=this.config.freewheel.fallbackNetwork,this.topicId=this.config.freewheel.topicId,this.prerollSlots=[],this.midrollSlots=[],this.overlaySlots=[],this.postrollSlots=[],this.sourceUrlQueue=[],this.currentPlayingSlotType=null,this.endMidRolls=!1,z[this.player.id]={},v.call(this)}function x(){this.logger?this.logger.info("[FreewheelPlugin]",Array.prototype.slice.call(arguments).join(" ")):console.log("[FreewheelPlugin]",Array.prototype.slice.call(arguments).join(" "))}var y=h(),z={};return w.prototype=Object.create(c.prototype),w.prototype.constructor=w,w.prototype["super"]=c.prototype,w.prototype.setClip=function(a){a&&a!==this.clip&&(this.clip=a)},w.prototype.requestAd=function(a){this.config.adBlocker&&g.setConfig({testAdUrl:b.get(this.config.adBlocker,"adBlockTestLocation"),enabled:b.get(this.config.adBlocker,"enabled",!1)}),g.detectAdBlock(k.bind(this),j.bind(this),a)},w.prototype.startMidRoll=function(b,c,f){if(this.ready&&b){f||(f=new e);var g=f.timePosition,h=f.breakLength,i=f.duration,j=this.networkId,k="MP4";this.clip&&(k=this.clip.content_id||k),this.context=this.adManager.newContext(),this.context.setContentVideoElement(b),this.context.setProfile(this.config.freewheel.adProfile),this.context.setRequestMode(this.freewheelSDK.REQUEST_MODE_LIVE),this.context.setSiteSection(this.siteSection,j,Math.floor(1e4*Math.random()),this.freewheelSDK.ID_TYPE_CUSTOM,this.fallbackNetwork),this.context.setVideoAsset(k,i,j),this.context.addTemporalSlot("Midroll_1",this.freewheelSDK.ADUNIT_MIDROLL,g,null,1,h,h,null);try{this.context.addEventListener(this.freewheelSDK.EVENT_REQUEST_COMPLETE,a.proxy(u,this)),this.context.addEventListener(this.freewheelSDK.EVENT_AD,a.proxy(s,this)),this.context.submitRequest()}catch(l){this.dispatcher.publish(d.AD_ERROR,l)}}else{var m=this;window.setTimeout(function(){m.startMidRoll(b,f)},500)}},w.prototype.endMidRoll=function(){var a=this.midrollSlots[0];a&&(this.endMidRolls=!0,a.stop())},w.prototype.endPreRoll=function(){var a=this.prerollSlots[0];a&&(this.endPreRolls=!0,a.stop())},w.prototype.resumeAd=function(){try{var a=this.prerollSlots[0];a.play(),this.dispatcher.publish(d.AD_START,{duration:a.getTotalDuration()})}catch(b){x.call(this,"resumeAd failed. "+b.message)}},w.prototype.destroy=function(){},w.prototype.toString=function(){return"FreewheelPlugin"},w}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-paid-interruptions/models/DFPRequestBuilder",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.DFPRequestBuilder=b(a.lodash)}(this,function(a){function b(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b=b+c+"%3D"+a[c]+"%26");return b.substring(0,b.length-3)}var c=function(){};c.prototype.build=function(c,d){var e=a.get(c,"url","https://pubads.g.doubleclick.net/gampad/live/ads"),f={sz:a.get(c,"sz","400x300|640x480|1920x1280"),iu:a.get(c,"iu","/2605/video_test/riot"),impl:a.get(c,"impl","s"),gdfp_req:a.get(c,"gdfp_req",1),env:a.get(c,"env","vp"),output:a.get(c,"output","vast"),unviewed_position_start:a.get(c,"unviewed_position_start","1"),url:a.get(c,"url","[referrer_url]"),description_url:a.get(c,"description_url","[description_url]"),correlator:a.get(c,"correlator","[timestamp]"),pmnd:a.get(c,"pmnd","0"),pmxd:a.get(c,"pmxd","60000"),pmad:a.get(c,"pmad","-1"),vpos:a.get(c,"vpos","preroll"),pp:a.get(c,"pp","web"),pod:a.get(c,"pod","1"),ad_rule:a.get(c,"ad_rule"," 0"),asset:a.get(c,"asset","")},g=a.get(d,"adConfig",{}),h=a.get(c,"additionalParams",{});g.cust_params=b(a.get(g,"cust_params","")),a.merge(f,g,h);var i=a.reduce(f,function(a,b,c){return a+"&"+c+"="+b},""),j=e+"?"+i;return j};var d=new c;return d}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-paid-interruptions/plugins/DFPPlugin",["bam-video-paid-interruptions/plugins/PaidInterruptionPlugin","bam-video-paid-interruptions/events/PaidInterruptionEvents","bam-video-paid-interruptions/models/CuePointVO","bam-video-paid-interruptions/models/ScriptLoader","bam-video-paid-interruptions/models/DFPRequestBuilder","video-block-detector/blockDetector"],b):"object"==typeof exports?module.exports=b(require("bam-video-paid-interruptions/plugins/PaidInterruptionPlugin"),require("bam-video-paid-interruptions/events/PaidInterruptionEvents"),require("bam-video-paid-interruptions/models/CuePointVO"),require("bam-video-paid-interruptions/models/ScriptLoader"),require("bam-video-paid-interruptions/models/DFPRequestBuilder"),require("video-block-detector/blockDetector")):a.DFPPlugin=b(a.PaidInterruptionPlugin,a.PaidInterruptionEvents,a.CuePointVO,a.ScriptLoader,a.DFPRequestBuilder,a.AdBlockDetector)}(this,function(a,b,c,d,e,f){"use strict";function g(a){var c=this;c.videoContent=c.player,d.getAPI(a||"https://imasdk.googleapis.com/js/sdkloader/ima3.js","google.ima",function(a){c.googleIMA=a,h.call(c)},function(a,d,e){c.dispatcher.publish(b.AD_PLUGIN_ERROR)})}function h(){this.ready=!0,this.dispatcher.publish(b.AD_PLUGIN_LOADED)}function i(a){this.adsLoader=new this.googleIMA.AdsLoader(a),this.adsLoader.addEventListener(this.googleIMA.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,j.bind(this),!1),this.adsLoader.addEventListener(this.googleIMA.AdErrorEvent.Type.AD_ERROR,l.bind(this),!1)}function j(a){var b=new this.googleIMA.AdsRenderingSettings;b.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.adsManager=a.getAdsManager(this.videoContent,b),this.adsManager.addEventListener(this.googleIMA.AdErrorEvent.Type.AD_ERROR,l.bind(this)),this.adsManager.addEventListener(this.googleIMA.AdEvent.Type.CONTENT_PAUSE_REQUESTED,m.bind(this)),this.adsManager.addEventListener(this.googleIMA.AdEvent.Type.CONTENT_RESUME_REQUESTED,n.bind(this)),this.adsManager.addEventListener(this.googleIMA.AdEvent.Type.ALL_ADS_COMPLETED,k.bind(this)),this.adsManager.addEventListener(this.googleIMA.AdEvent.Type.LOADED,k.bind(this)),this.adsManager.addEventListener(this.googleIMA.AdEvent.Type.STARTED,k.bind(this)),this.adsManager.addEventListener(this.googleIMA.AdEvent.Type.COMPLETE,k.bind(this));try{var c=this.width||640,d=this.height||360;this.adsManager.init(c,d,this.googleIMA.ViewMode.NORMAL),this.initVolume&&this.setVolume(this.initVolume),this.adsManager.start()}catch(e){t.call(this,"ERROR",e)}}function k(a){var c=a.getAd();switch(t.call(this,"onAdEvent",a.type,"isLinear:",c.isLinear()),a.type){case this.googleIMA.AdEvent.Type.LOADED:!c.isLinear(),t.call(this,"AD_LOADED"),this.dispatcher.publish(b.AD_LOADED,a.o);break;case this.googleIMA.AdEvent.Type.STARTED:if(c.isLinear()){var d=this;this.elapsedAdsInPodTime+=this.currentAdDuration,this.currentAdDuration=c.getDuration(),t.call(this,"AD_STARTED","currentAdDuration:",this.currentAdDuration,"elapsedAdsInPodTime",this.elapsedAdsInPodTime),this.intervalTimer=setInterval(o.bind(d),300),o.call(this)}break;case this.googleIMA.AdEvent.Type.COMPLETE:c.isLinear()&&(t.call(this,"AD_COMPLETE"),clearInterval(this.intervalTimer));break;case this.googleIMA.AdEvent.Type.ALL_ADS_COMPLETED:this.config.preRollAdsEnabled&&this.dispatcher.publish(b.ALL_ADS_COMPLETED,this.config),c.isLinear()&&t.call(this,"ALL_ADS_COMPLETED")}}function l(a){t.call(this,a.getError()),this.dispatcher.publish(b.AD_ERROR,a),this.adsManager&&this.adsManager.destroy()}function m(a){var c=(this.adsManager.getRemainingTime(),a.getAd()),d=c.getAdPodInfo();this.adPodDuration=d.getMaxDuration(),this.elapsedAdsInPodTime=0,t.call(this,"onContentPauseRequested","adPodDuration:",this.adPodDuration),this.dispatcher.publish(b.AD_START,{duration:this.adPodDuration})}function n(a){t.call(this,"onContentResumeRequested"),this.dispatcher.publish(b.AD_COMPLETE,a);
}function o(){var a=this.adsManager.getRemainingTime(),c=Math.max(this.currentAdDuration,a),d=c-a,e=this.elapsedAdsInPodTime+d;this.dispatcher.publish(b.AD_TIME_UPDATE_ELAPSED,{currentTime:e,currentAdElapsedTime:d,currentAdRemainingTime:a,currentPodElapsedTime:e,currentAdDuration:c})}function p(a,b){p.prototype["super"].constructor.call(this,a,b);var c=this.config.dfp&&this.config.dfp.sdkURL;t.call(this,"constructor"),g.call(this,c)}function q(){t.call(this,"AD_BLOCK_DETECTED"),this.dispatcher.publish(b.AD_BLOCK_DETECTED)}function r(a,b){if(this.ready){t.call(this,"requestAd"),this.currentAdDuration=0,this.adPodDuration=0,this.elapsedAdsInPodTime=0;var b=b,c=new this.googleIMA.AdDisplayContainer(b);c.initialize(),i.call(this,c),s.call(this)}else t.call(this,"requestAdQueued"),this.requestAdTimeoutID=setTimeout(function(){this.requestAd(a,b)}.bind(this),500)}function s(){var a=this,b=new a.googleIMA.AdsRequest,c=e.build(_.get(a.config,"dfp",{}),a.clip);t.call(a,"requestAd.url",c),b.adTagUrl=c,b.linearAdSlotWidth=640,b.linearAdSlotHeight=400,b.nonLinearAdSlotWidth=640,b.nonLinearAdSlotHeight=150,a.adsLoader.requestAds(b)}function t(){this.logger?this.logger.info("[DFPPlugin]",Array.prototype.slice.call(arguments).join(" ")):console.log("[DFPPlugin]",Array.prototype.slice.call(arguments).join(" "))}return p.prototype=Object.create(a.prototype),p.prototype.constructor=p,p.prototype["super"]=a.prototype,p.prototype.setClip=function(a){a&&a!==this.clip&&(this.clip=a)},p.prototype.requestAd=function(a,b){if(_.get(this,"config.adBlocker.enabled",!1))_.get(this,"config.adBlocker.configSet",!1)||(f.setConfig({testAdUrl:_.get(this,"config.adBlocker.adBlockTestLocation"),enabled:_.get(this,"config.adBlocker.enabled",!1)}),_.set(this,"config.adBlocker.configSet",!0)),f.detectAdBlock(q.bind(this),r.bind(this,a,b));else{var c=f.isAdBlockEnabled();c||r.call(this,a,b)}},p.prototype.setSize=function(a,b,c){this.width=a,this.height=b,this.isFullscreen=c,this.adsManager&&(t.call(this,"setSize",a,b,c),this.adsManager.resize(a,b,this.googleIMA.ViewMode.NORMAL))},p.prototype.setVolume=function(a){a>1&&(a/=100),t.call(this,"setVolume",a),this.initVolume=a,this.adsManager&&this.adsManager.setVolume(this.initVolume)},p.prototype.mute=function(){t.call(this,"mute"),this.setVolume(0)},p.prototype.updateConfig=function(a,b){var c=this;b?this.config=a:_.forEach(a,function(a,b){c.config[b]=a})},p.prototype.startMidRoll=function(a,b,c){if(!this.adsLoader){var d=new this.googleIMA.AdDisplayContainer(b);i.call(this,d)}s.call(this)},p.prototype.endMidRoll=function(){this.adsManager.stop(),this.videoContent.muted=!1},p.prototype.endPreRoll=function(){this.adsManager.stop()},p.prototype.destroy=function(){t.call(this,"destroy"),clearTimeout(this.requestAdTimeoutID),this.dispatcher.off()},p.prototype.toString=function(){return"DFPPlugin"},p}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-paid-interruptions/plugins/PaidInterruptionPluginFactory",["bam-video-paid-interruptions/plugins/PaidInterruptionPlugin","bam-video-paid-interruptions/plugins/AuditudePlugin","bam-video-paid-interruptions/plugins/FreewheelPlugin","bam-video-paid-interruptions/plugins/DFPPlugin"],b):"object"==typeof exports?module.exports=b(require("bam-video-paid-interruptions/plugins/PaidInterruptionPlugin"),require("bam-video-paid-interruptions/plugins/AuditudePlugin"),require("bam-video-paid-interruptions/plugins/FreewheelPlugin"),require("bam-video-paid-interruptions/plugins/DFPPlugin")):a.PaidInterruptionPluginFactory=b(a.PaidInterruptionPlugin,a.AuditudePlugin,a.FreewheelPlugin,a.DFPPlugin)}(this,function(a,b,c,d){"use strict";function e(a){var e="";return a.freewheel&&a.freewheel.isFreeWheelSite?e=c.prototype.toString():a.auditude&&a.auditude.isAuditudeSite?e=b.prototype.toString():a.dfp&&a.dfp.isDFPSite&&(e=d.prototype.toString()),e}var f={};f[a.prototype.toString()]=a,f[b.prototype.toString()]=b,f[c.prototype.toString()]=c,f[d.prototype.toString()]=d;var g={getPlugin:function(a,b,c){var d=c||e(b);return f[d]?new f[d](a,b):null}};return g}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/HTML5Player",["jquery","lodash/lodash","bam-video-players/players/AbstractPlayer","bam-video-players/players/VideoPlayerFactory","bam-video-players/utils/VideoUtils","bam-video-players/players/ui/controls/HTML5PlayerControls","bam-video-players/players/ui/controls/AdControls","bam-video-players/events/PlayerEvents","bam-video-players/events/UserEvents","bam-video-paid-interruptions/plugins/PaidInterruptionPluginFactory"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bam-video-players/players/AbstractPlayer"),require("bam-video-players/players/VideoPlayerFactory"),require("bam-video-players/utils/VideoUtils"),require("bam-video-players/players/ui/controls/HTML5PlayerControls"),require("bam-video-players/players/ui/controls/AdControls"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/UserEvents"),require("bam-video-paid-interruptions/plugins/PaidInterruptionPluginFactory")):a.HTML5Player=b(a.jQuery,a.lodash,a.AbstractPlayer,a.VideoPlayerFactory,a.VideoUtils,a.HTML5PlayerControls,a.AdControls,a.PlayerEvents,a.UserEvents,a.PaidInterruptionPluginFactory)}(this,function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a,c){console.log("HTML5PLayer","constructor"),k.prototype["super"].constructor.call(this,a,c),this.supportsHls=e.browserNativelySupportsHls(this.device),b.get(a,"html5.callInitOnCreation",!0)&&this.init.call(this)}function l(){var a=this;a.clip&&a.$player.attr("src")!==a.clip.path&&(o.call(a),a.$player.off().one("play",function(b){a.dispatcher.publish(h.MEDIA_START,{player:a})}).one("loadedmetadata",function(b){a.adPlaying=!1,a.duration=a.player.duration,a.device.is.desktop?(a.controls&&a.controls.destroy(),a.controls=new f(a)):a.$player.attr("controls",!0)}).attr("src",a.clip.path?a.clip.path:"").trigger("load"),m.call(a))}function m(){var b=this;b.$player.on("play",function(){b.adPlaying||(b.isPaused&&(b.isResumed=!0,b.dispatcher.publish(h.MEDIA_RESUME,{player:b})),b.isPlaying=!0,b.isPaused=!1)}).on("playing",function(a){b.adPlaying||b.dispatcher.publish(h.MEDIA_PLAYING,{player:b})}).on("pause",function(){!b.adPlaying&&b.isPlaying&&(b.isPlaying=!1,b.isPaused=!0,b.isResumed=!1,b.player.ended||b.dispatcher.publish(h.MEDIA_PAUSED,{player:b}))}).on("ended",function(){b.adPlaying||(b.isPlaying=!1,b.dispatcher.publish(h.MEDIA_COMPLETE,{player:b}))}).on("timeupdate",function(a){b.adPlaying||b.dispatcher.publish(h.MEDIA_TIME_UPDATE,{player:b,currentTime:b.$player.prop("currentTime")})}).on("touchend",function(a){b.muted&&b.unmute()}),r[b.id+"::_onFullScreenChange"]=a.proxy(n,this),a(this.document).off("webkitfullscreenchange mozfullscreenchange MSFullscreenChange fullscreenchange webkitbeginfullscreen webkitendfullscreen",r[b.id+"::_onFullScreenChange"]).on("webkitfullscreenchange mozfullscreenchange MSFullscreenChange fullscreenchange webkitbeginfullscreen webkitendfullscreen",r[b.id+"::_onFullScreenChange"])}function n(a){switch(this.isFullScreen=!1,a.type){case"webkitfullscreenchange":case"mozfullscreenchange":case"fullscreenchange":this.isFullScreen=this.document.fullScreen||this.document.mozFullScreen||this.document.webkitIsFullScreen;break;case"MSFullscreenChange":this.isFullScreen=this.document.msFullscreenElement;break;case"webkitbeginfullscreen":this.isFullScreen=!0;break;case"webkitendfullscreen":this.isFullScreen=!1}this.dispatcher.publish(h.FULLSCREEN_CHANGE,{player:this,isFullScreen:this.isFullScreen}),this.isFullScreen?(this.$container.addClass("video-player--fullscreen"),this.dispatcher.publish(h.FULLSCREEN_START,{player:this})):(this.$container.removeClass("video-player--fullscreen"),this.dispatcher.publish(h.FULLSCREEN_END,{player:this}))}function o(){this.adPlaying=!1,this.isPlaying=!1,this.isPaused=!1,this.isResumed=!1}function p(){var a=b.get(this.config,"volume",s);0==a?(this.setVolume(s),this.mute()):this.setVolume(a)}function q(){this.dispatcher.on(i.MUTE_REQUESTED,this.mute.bind(this)),this.dispatcher.on(i.UNMUTE_REQUESTED,this.unmute.bind(this))}var r={},s=100;return k.prototype=Object.create(c.prototype),k.prototype.constructor=k,k.prototype["super"]=c.prototype,k.prototype.play=function(a){var b=this,c=a&&a.length?a[0]:null;c&&b.setClip(c);var d=function(){c&&!b.isResumed&&l.call(b),b.dispatcher.publish(h.PLAYLIST_START,{player:b,data:c}),b.$player.trigger("play")};b.$player.one("play",function(){b.adManager&&!b.isResumed?(b.adManager.dispatcher.one(b.adEvents.AD_START,function(a,c){b.controls?b.controls.hide():b.$player.attr("controls",!1),b.adPlaying=!0}),b.adManager.dispatcher.one(b.adEvents.AD_COMPLETE,d),b.adManager.dispatcher.one(b.adEvents.AD_ERROR,d),b.adManager.requestAd(c)):d()}).trigger("play")},k.prototype.setClip=function(a){Array.isArray(a)&&a.length&&(a=a[0]),this.clip=a||null,o.call(this),this.$player.attr("src",null),this.dispatcher.publish(h.MEDIA_SET,{player:this})},k.prototype.pause=function(){this.isPlaying&&this.player.pause()},k.prototype.resume=function(){k.prototype["super"].resume.call(this),this.isPlaying||this.player.play()},k.prototype.mute=function(){this.muted||(k.prototype["super"].mute.call(this),this.$player.prop("muted",!0))},k.prototype.unmute=function(){this.muted&&(k.prototype["super"].unmute.call(this),this.$player.prop("muted",!1))},k.prototype.setVolume=function(a){isNaN(a)&&(a=s),a>100?a=100:0>a&&(a=0),k.prototype["super"].setVolume.call(this,a),this.$player.prop("volume",a/100)},k.prototype.resize=function(a,b){this.player&&k.prototype["super"].resize.call(this,a,b)},k.prototype.setBeginPoster=function(a){k.prototype["super"].setBeginPoster.call(this,a),this.$player.attr("poster",a)},k.prototype.enterFullScreen=function(){var b=this.$container.get(0);b&&!this.isFullScreen&&(k.prototype["super"].enterFullScreen.call(this),b.requestFullscreen?b.requestFullscreen():b.msRequestFullscreen?b.msRequestFullscreen():b.webkitRequestFullScreen?b.webkitRequestFullScreen():b.webkitEnterFullscreen?b.webkitEnterFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():a(this.player).css({position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%",background:"#000"}))},k.prototype.exitFullScreen=function(){this.isFullScreen&&(k.prototype["super"].exitFullScreen.call(this),this.document.exitFullscreen?this.document.exitFullscreen():this.document.msExitFullscreen?this.document.msExitFullscreen():this.document.mozCancelFullScreen?this.document.mozCancelFullScreen():this.document.webkitExitFullscreen&&this.document.webkitExitFullscreen())},k.prototype.toString=function(){return"HTML5Player"},k.prototype.init=function(b){if(!this.loaded){a(b).is("video")?this.player=b:this.player=this.document.createElement("video"),a(this.player).attr("id",this.id).addClass("video-player__screen").attr("controls",!this.device.is.desktop).attr("playsinline",!0),this.$container.append(this.player).wrap(a("<div>",{"class":"vpp"})),this.$player=a(this.player,this.$container),this.adManager=j.getPlugin(this.player,a.extend({},this.config.property_state,this.config.advertising)),this.adEvents=this.eventBus.getRegisteredEventsByKey("AD_EVENTS"),this.adManager&&this.device.is.desktop&&(this.adControls=new g(this.$player,this.dispatcher,this.id)),this.config.autoPlay&&this.$player.prop("autoplay",!0);var c=this.config.playlist&&this.config.playlist.length?this.config.playlist[0].path:void 0;"undefined"!=typeof c&&this.setClip(c),p.call(this),q.call(this),this.loaded=!0,this.dispatcher.publish(h.PLAYER_LOADED,{player:this})}},d.registerPlayer(k),k}),!function(a){"use strict";function b(a,b){return a===b}function c(a){return void 0===a}function d(a){return null===a}function e(a){return!c(a)&&!d(a)}function f(a){return 0===a}function g(a){return a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY}function h(a){return"number"==typeof a&&isNaN(a)===!1&&a!==Number.POSITIVE_INFINITY&&a!==Number.NEGATIVE_INFINITY}function i(a){return h(a)&&a%1===0}function j(a){return h(a)&&a%2===0}function k(a){return i(a)&&!j(a)}function l(a,b){return h(a)&&a>b}function m(a,b){return h(a)&&b>a}function n(a,b,c){return c>b?l(a,b)&&m(a,c):m(a,b)&&l(a,c)}function o(a,b){return h(a)&&a>=b}function p(a,b){return h(a)&&b>=a}function q(a,b,c){return c>b?o(a,b)&&p(a,c):p(a,b)&&o(a,c)}function r(a){return l(a,0)}function s(a){return m(a,0)}function t(a){return"string"==typeof a}function u(a){return""===a}function v(a){return t(a)&&""!==a}function w(a,b){return t(a)&&-1!==a.indexOf(b)}function x(a,b){return t(a)&&!!a.match(b)}function y(a){return a===!1||a===!0}function z(a){return"[object Object]"===Object.prototype.toString.call(a)}function A(a){return z(a)&&0===Object.keys(a).length}function B(a){return z(a)&&Object.keys(a).length>0}function C(a,b){try{return a instanceof b}catch(a){return!1}}function D(a,b){try{return C(a,b)||a.constructor.name===b.name||Object.prototype.toString.call(a)==="[object "+b.name+"]"}catch(a){return!1}}function E(a,b){var c;for(c in b)if(b.hasOwnProperty(c)){if(a.hasOwnProperty(c)===!1||typeof a[c]!=typeof b[c])return!1;if(z(a[c])&&E(a[c],b[c])===!1)return!1}return!0}function F(a){return Array.isArray(a)}function G(a){return F(a)&&0===a.length}function H(a){return F(a)&&a.length>0}function I(a){return e(a)&&h(a.length)}function J(a){return"undefined"==typeof Symbol?I(a):e(a)&&N(a[Symbol.iterator])}function K(a,b){var c,d;if(qa.assigned(a))return!1;try{if("undefined"!=typeof Symbol&&a[Symbol.iterator]&&N(a.values)){c=a.values();do if(d=c.next(),d.value===b)return!0;while(!d.done);return!1}Object.keys(a).forEach(function(c){if(a[c]===b)throw 0})}catch(a){return!0}return!1}function L(a,b){return e(a)&&a.length===b}function M(a){try{return D(a,Date)&&i(a.getTime())}catch(a){return!1}}function N(a){return"function"==typeof a}function O(a,b){return pa.array(a),N(b)?a.map(function(a){return b(a)}):(pa.array(b),pa.hasLength(a,b.length),a.map(function(a,c){return b[c](a)}))}function P(a,b){return pa.object(a),N(b)?Q(a,b):(pa.object(b),R(a,b))}function Q(a,b){var c={};return Object.keys(a).forEach(function(d){c[d]=b(a[d])}),c}function R(a,b){var c={};return Object.keys(b).forEach(function(d){var e=b[d];N(e)?qa.assigned(a)?c[d]=!!e.m:c[d]=e(a[d]):z(e)&&(c[d]=R(a[d],e))}),c}function S(a){return F(a)?T(a,!1):(pa.object(a),U(a,!1))}function T(a,b){var c;for(c=0;c<a.length;c+=1)if(a[c]===b)return b;return!b}function U(a,b){var c,d;for(c in a)if(a.hasOwnProperty(c)){if(d=a[c],z(d)&&U(d,b)===b)return b;if(d===b)return b}return!b}function V(a){return F(a)?T(a,!0):(pa.object(a),U(a,!0))}function W(a,b){return Object.keys(b).forEach(function(c){a[c]=b[c]}),a}function X(a,b){return function(){Y(a,arguments,b)}}function Y(a,b,c){var d=a.l||a.length,e=b[d],f=b[d+1];Z(a.apply(null,b),v(e)?e:c,N(f)?f:TypeError)}function Z(a,b,c){if(a===!1)throw new(c||Error)(b||"Assertion failed")}function $(a){var b=function(){return _(a.apply(null,arguments))};return b.l=a.length,b}function _(a){return!a}function aa(a){var b=function(){return!!qa.assigned(arguments[0])||a.apply(null,arguments)};return b.l=a.length,b.m=!0,b}function ba(a){return e(a)===!1||a}function ca(a,b,c){var d=function(){var a,d;if(a=arguments[0],"maybe"===f&&qa.assigned(a))return!0;if(!b(a))return!1;a=da(b,a),d=ta.call(arguments,1);try{a.forEach(function(a){if(("maybe"!==f||e(a))&&!c.apply(null,[a].concat(d)))throw 0})}catch(f){return!1}return!0};return d.l=c.length,d}function da(a,b){switch(a){case I:return ta.call(b);case z:return Object.keys(b).map(function(a){return b[a]});default:return b}}function ea(a,b){return fa([a,na,b])}function fa(a){var b,c,d,e;return b=a.shift(),c=a.pop(),d=a.pop(),e=c||{},Object.keys(d).forEach(function(c){Object.defineProperty(e,c,{configurable:!1,enumerable:!0,writable:!1,value:b.apply(null,a.concat(d[c],ma[c]))})}),e}function ga(a,b){return fa([a,b,null])}function ha(a){na[a].of=fa([ca.bind(null,null),na[a],na,null])}function ia(a,b){sa.forEach(function(c){a[c].of=ga(b,na[c].of)})}function ja(a){ra[a].of=fa([ca.bind(null,"maybe"),na[a],na,null]),pa.maybe[a].of=ga(X,ra[a].of),pa.not[a].of=ga(X,qa[a].of)}function ka(b){"function"==typeof define&&define.amd?define("check-types/src/check-types.min",[],function(){return b}):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=b:a.check=b}var la,ma,na,oa,pa,qa,ra,sa,ta;la={v:"value",n:"number",s:"string",b:"boolean",o:"object",t:"type",a:"array",al:"array-like",i:"iterable",d:"date",f:"function",l:"length"},ma={},na={},[{n:"equal",f:b,s:"v"},{n:"undefined",f:c,s:"v"},{n:"null",f:d,s:"v"},{n:"assigned",f:e,s:"v"},{n:"includes",f:K,s:"v"},{n:"zero",f:f},{n:"infinity",f:g},{n:"number",f:h},{n:"integer",f:i},{n:"even",f:j},{n:"odd",f:k},{n:"greater",f:l},{n:"less",f:m},{n:"between",f:n},{n:"greaterOrEqual",f:o},{n:"lessOrEqual",f:p},{n:"inRange",f:q},{n:"positive",f:r},{n:"negative",f:s},{n:"string",f:t,s:"s"},{n:"emptyString",f:u,s:"s"},{n:"nonEmptyString",f:v,s:"s"},{n:"contains",f:w,s:"s"},{n:"match",f:x,s:"s"},{n:"boolean",f:y,s:"b"},{n:"object",f:z,s:"o"},{n:"emptyObject",f:A,s:"o"},{n:"nonEmptyObject",f:B,s:"o"},{n:"instanceStrict",f:C,s:"t"},{n:"instance",f:D,s:"t"},{n:"like",f:E,s:"t"},{n:"array",f:F,s:"a"},{n:"emptyArray",f:G,s:"a"},{n:"nonEmptyArray",f:H,s:"a"},{n:"arrayLike",f:I,s:"al"},{n:"iterable",f:J,s:"i"},{n:"date",f:M,s:"d"},{n:"function",f:N,s:"f"},{n:"hasLength",f:L,s:"l"}].map(function(a){var b=a.n;ma[b]="Invalid "+la[a.s||"n"],na[b]=a.f}),oa={apply:O,map:P,all:S,any:V},sa=["array","arrayLike","iterable","object"],ta=Array.prototype.slice,oa=W(oa,na),pa=ea(X,Z),qa=ea($,_),ra=ea(aa,ba),pa.not=ga(X,qa),pa.maybe=ga(X,ra),sa.forEach(ha),ia(pa,X),ia(qa,$),sa.forEach(ja),ka(W(oa,{assert:pa,not:qa,maybe:ra}))}(this),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/valueObjects/MediaClipVO",[],b):"object"==typeof exports?module.exports=b():a.MediaClipVO=b()}(this,function(){"use strict";function a(a){this.path=a,this.uniqueId=void 0,this.isLive=void 0,this.isSlidingWindow=void 0,this.isAudioOnly=void 0,this.startTime={offset:void 0,date:void 0},this.scrubbableRange={startTime:void 0,endTime:void 0,enforceBoundaries:void 0},this.initialAudioLanguage=void 0,this.posterImageUrl=void 0,this.totalFailures=0}return a.prototype.toString=function(){return"MediaClipVO:"+JSON.stringify(this)},a}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/helpers/ClipReader",["lodash/lodash","bam-video-players/utils/DateTimeHelper"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/utils/DateTimeHelper")):a.ClipReader=b(a.lodash,a.DateTimeHelper)}(this,function(a,b){var c=function(){};c.prototype.toString=function(){return"ClipReader"},c.prototype.getPath=function(b){return a.get(b,"path")},c.prototype.getId=function(b){return a.get(b,"content_id")},c.prototype.getStartTimeInSecs=function(b){var c=a.get(b,"startTime.offset",-1);return c},c.prototype.getVttFile=function(b){return a.get(b,"metaData.closed_captions_location_vtt","")},c.prototype.getScrubbableRangeStartTime=function(b){return a.get(b,"scrubbableRange.startTime")},c.prototype.getScrubbableRangeEndTime=function(b){return a.get(b,"scrubbableRange.endTime")},c.prototype.getScrubbableRangeEnforceBoundaries=function(b){return a.get(b,"scrubbableRange.enforceBoundaries")},c.prototype.getStartDate=function(c){var d,e,f=a.get(c,"startTime.date");return f&&(e=b.getValidDate(f),b.isValidDate(e)&&(d=e)),d},c.prototype.getBitrateWindow=function(b){return a.get(b,"bitrateWindow",{})},c.prototype.getIsClosedCaptionsEnabled=function(b){return a.get(b,"isClosedCaptionsEnabled",!1)},c.prototype.getSubtitlesEnabled=function(a){return d.getIsClosedCaptionsEnabled(a)},c.prototype.getConvivaTrackingProps=function(b){return a.get(b,"convivaTrackingProps",{})},c.prototype.getIsLive=function(b){return a.get(b,"isLive")},c.prototype.getPosterImage=function(b){return a.get(b,"posterImageUrl","")},c.prototype.getFreewheelProps=function(b){return a.get(b,"freewheelProps",{})},c.prototype.getSlates=function(b){return a.get(b,"slates",[])},c.prototype.getInitialAudioLanguage=function(b){return a.get(b,"initialAudioLanguage","")},c.prototype.getInitialAudioName=function(b){return a.get(b,"initialAudioName","")};var d=new c;return d}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/helpers/TimeCodeHelper",["lodash/lodash","bam-video-players/events/PlayerEvents","bam-video-players/utils/DateTimeHelper"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/utils/DateTimeHelper")):a.TimeCodeHelper=b(a.lodash,a.PlayerEvents,a.DateTimeHelper)}(this,function(a,b,c){function d(){this._internals.dispatcher&&(this._internals.dispatcher.on(b.MEDIA_TIME_UPDATE,this._internals.boundFxns.onMediaTimeUpdate),this._internals.dispatcher.on(b.MEDIA_COMPLETE,this._internals.boundFxns.onMediaComplete),this._internals.dispatcher.on(b.MEDIA_PAUSED,this._internals.boundFxns.onMediaPaused),this._internals.dispatcher.on(b.MEDIA_PLAYING,this._internals.boundFxns.onMediaPlaying))}function e(b){var c=a.get(b,"currentTime");this.incrementTimeInSecs(c)}function f(a){i.call(this)}function g(a){this.internalElapsedTimeSinceLastUpdate=new Date,this._internals.isPaused=!1}function h(a){this.internalElapsedTimeSinceLastUpdate={getTime:function(){return 0}},this._internals.isPaused=!0}function i(){this.heartbeatIntervalID&&(clearInterval(this.heartbeatIntervalID),k.call(this,this.eventList.HEARTBEAT_ENDED),this.heartbeatIntervalID=null,this.heartbeatDurationInSecs=0)}function j(a){this._internals.dispatcher&&(this.lastDispatchedTimeCode=this.getTimeNow(),this.lastDispatchedTimeCode&&this._internals.dispatcher.publish(b.TIME_CODE,{timecode:this.lastDispatchedTimeCode,player:this._internals.player,metadata:a}))}function k(a){this._internals.dispatcher&&this._internals.dispatcher.publish(a,{player:this._internals.player})}var l,m="timecodeHeartbeatStarted",n="timecodeHeartbeatEnded",o="heartbeat",p="ID3",q="",r=function(c){this._internals={player:c,dispatcher:a.get(c,"dispatcher"),boundFxns:{onMediaTimeUpdate:e.bind(this),onMediaComplete:f.bind(this),onMediaPlaying:g.bind(this),onMediaPaused:h.bind(this)},isPaused:!1},this.eventList={HEARTBEAT_STARTED:m,HEARTBEAT_ENDED:n,TIME_CODE:b.TIME_CODE},this.metadata={HEARTBEAT:o,ID3:p,INTERVAL_DATE:l,LAST_CONTENT:q},this.heartbeatDurationInSecs=0,this.useMillisecondAccuracy=a.get(c,"config.html5.timecodeUseMillisecondAccuracy",!0),this.reset(),d.call(this)};return r.prototype.reset=function(){this.lastDispatchedTimeCode=null,this.lastPDT=null,this.firstPDT=null,this.internalElapsedTimeSinceLastUpdate=new Date},r.prototype.enableMillisecondAccuracy=function(){this.useMillisecondAccuracy=!0},r.prototype.disableMillisecondAccuracy=function(){this.useMillisecondAccuracy=!1},r.prototype.setHeartbeatInSecs=function(b){if(i.call(this),b&&a.toNumber(b)>0){var c=a.bind(j,this,this.metadata.HEARTBEAT);return this.heartbeatDurationInSecs=b,this.heartbeatIntervalID=setInterval(c,1e3*b),k.call(this,this.eventList.HEARTBEAT_STARTED),!0}return!1},r.prototype.updateTime=function(a,b,d){var e=c.getValidDate(a);if(c.isValidDate(e))this.firstPDT||(this.firstPDT=e),this.lastPDT=e,this.lastCurrentTime=b||0,this.incrementTimeInSecs(null);else if(a){var f=/\d?\d:\d?\d:\d?\d;\d?\d/;if(f.test(a.toString())){var g=Date.now(),h=3e5,i=g-this.metadata.INTERVAL_DATE>h,j=this.metadata.LAST_CONTENT!==d;(i||j||!this.metadata.INTERVAL_DATE)&&(console.warn("[TimeCodeHelper] updateTime, time not updated due to PDT is a time only, not a date",a),this.metadata.INTERVAL_DATE=g,this.metadata.LAST_CONTENT=d)}else console.warn("[TimeCodeHelper] updateTime, time not updated due to invalid date",a)}else console.warn("[TimeCodeHelper] updateTime, time not updated due to PDT is null")},r.prototype.getHeartbeatDuration=function(){return this.heartbeatDurationInSecs},r.prototype.getLastDispatchedTimeCode=function(){return this.lastDispatchedTimeCode},r.prototype.getTimeNow=function(){if(!this.lastPDT)return null;var b=new Date(this.lastPDT.getTime());if(a.isNumber(this.secOffset)){var c=this.secOffset-this.lastCurrentTime;b.setSeconds(b.getSeconds()+c)}if(this.useMillisecondAccuracy&&!this._internals.isPaused){var d=(new Date).getTime()-this.internalElapsedTimeSinceLastUpdate.getTime();b.setMilliseconds(b.getMilliseconds()+d)}return b},r.prototype.getTimeStart=function(){return this.getTimeAt(0)},r.prototype.getTimeAt=function(b){if(!this.firstPDT)return null;var c=new Date(this.firstPDT.getTime());if(a.isNumber(b)){var d=b-this.lastCurrentTime;c.setSeconds(c.getSeconds()+d)}return c},r.prototype.saveAndDispatchTimeCode=function(a,b,c){this.updateTime(a,b,c),this.heartbeatIntervalID||j.call(this,this.metadata.ID3)},r.prototype.getAndDispatchTimeCode=function(){return j.call(this),this.getTimeNow()},r.prototype.incrementTimeInSecs=function(a){this.secOffset=a,this._internals.isPaused||(this.internalElapsedTimeSinceLastUpdate=new Date)},r.prototype.destroy=function(){this._internals.dispatcher&&(this._internals.dispatcher.off(b.MEDIA_TIME_UPDATE,this._internals.boundFxns.onMediaTimeUpdate),this._internals.dispatcher.off(b.MEDIA_COMPLETE,this._internals.boundFxns.onMediaComplete)),i.call(this)},r.prototype.toString=function(){return"TimeCodeHelper"},r}),define("text!bam-video-players/versions/player-versions.json",[],function(){return'{\n   "media-config": {\n      "type": "version",\n      "version": "3.1.1",\n      "commit": "41cf267cf4ff37f8f001b61659a887316378c8e9",\n      "description": "media-config#3.1.1",\n      "dependencyType": "bower"\n   },\n   "bam-video-paid-interruptions": {\n      "type": "version",\n      "version": "3.5.0",\n      "commit": "b5eb759f09a9b4d22ddf089121f6313d9327d4d0",\n      "description": "bam-video-paid-interruptions#3.5.0",\n      "dependencyType": "bower"\n   },\n   "bam-video-players": {\n      "type": "version",\n      "version": "3.15.1",\n      "commit": "d8cae0c4835c90f001a2d5fc0f932ca7fbfc2897",\n      "description": "bam-video-players#3.15.1",\n      "dependencyType": "bower"\n   },\n   "bam-hls-player": {\n      "type": "version",\n      "version": "1.15.2",\n      "commit": "24641f4b2e04b8b9894af10dd9cbbf6acc051614",\n      "description": "bam-hls-player#1.15.2",\n      "dependencyType": "bower"\n   },\n   "bam-hls": {\n      "type": "npm",\n      "version": "3.2.1",\n      "commit": "3d33c57bb9f6aba69f42a6a21f85fea9f3987ab5",\n      "description": "bam-hls#3.2.1",\n      "dependencyType": "npm"\n   }\n}'}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/versions/VersionModel",["lodash/lodash","text!bam-video-players/versions/player-versions.json"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("text!bam-video-players/versions/player-versions.json")):a.VersionModel=b(a._,null)}(this,function(a,b){"use strict";function c(){function a(){this.versions={};var a="string"==typeof b?JSON.parse(b):b;a&&(this.versions=a)}a.call(this)}var d={HLSPlayer:"bam-hls-player",HTMLCorePlayer:"bam-video-players"};return c.prototype=$.extend(c.prototype,{getPlayerVersion:function(){return a.get(this.versions,"bam-video-players.version","")},getPlayerLibraryVersions:function(){return this.versions},getPlayerLibraryVersionByPackageName:function(b){a.get(this.versions,b,"")},getPlayerLibraryByPlayerClientType:function(b){var c=a.get(d,b);return c},getPlayerLibraryVersionByPlayerClientType:function(b){var c,e=a.get(d,b);return e&&(c=a.get(this.versions,e+".version","")),c}}),new c}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/utils/PlayerInfoHelper",["lodash/lodash","bam-video-players/valueObjects/PlayerInfoVO","bam-video-players/versions/VersionModel"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/valueObjects/PlayerInfoVO"),require("bam-video-players/versions/VersionModel")):a.PlayerInfoHelper=b(a._,a.PlayerInfoVO,a.VersionModel)}(this,function(a,b,c){"use strict";var d={getPlayerInfo:function(a){var d=new b;d.playerName=a.toString(),d.playerVersion=c.getPlayerVersion();var e=a.meta.getVideoClientType();return d.clientType=e||"",d.clientAdapterName=a.meta.getVideoClientAdapterName()||"",d.clientAdapterModule=c.getPlayerLibraryByPlayerClientType(e)||"",d.clientAdapterVersion=c.getPlayerLibraryVersionByPlayerClientType(e)||"",d.clientLibraryName=a.meta.getVideoClientLibraryName()||"",d.clientLibraryVersion=a.meta.getVideoClientLibraryVersion()||"",d.versions=c.getPlayerLibraryVersions(),d}};return d}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/events/SlateEvents",[],b):"object"==typeof exports?module.exports=b():a.SlateEvents=b()}(this,function(){var a={SLATE_STARTED:"slateStarted",SLATE_COMPLETED:"slateCompleted",SLATE_PAUSED:"slatePaused",SLATE_RESUMED:"slateResumed",SLATE_CHANGED:"slateChanged",SLATE_ERROR:"slatePlaybackError"};return a}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/events/FullScreenEvents",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.FullScreenEvents=b(a.lodash)}(this,function(a){var b={WEBKIT_FS_CHANGE:"webkitfullscreenchange",WEBKIT_FS_BEGIN:"webkitbeginfullscreen",WEBKIT_FS_END:"webkitendfullscreen",MOZ_FS_CHANGE:"mozfullscreenchange",FS_CHANGE:"fullscreenchange",MS_FS_CHANGE:"MSFullscreenChange"};return b.ALL_string=a.values(b).join(" "),b}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/events/VideoClientEvents",["bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("bandwagon/bandwagon")):a.VideoClientEvents=b(a.Bandwagon)}(this,function(a){var b={VIDEO_CLIENT_CREATED:"videoClientCreated",VIDEO_NODE_ADDED:"videoNodeAdded",VIDEO_NODE_REMOVED:"videoNodeRemoved",VIDEO_NODE_REUSED:"videoNodeReused"};return b}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/events/ChromecastRequestEvents",["bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("bandwagon/bandwagon")):a.ChromecastRequestEvents=b(a.Bandwagon)}(this,function(a){var b={CHROMECAST_PLAY_REQUESTED:"chromecast_play_requested",CHROMECAST_PAUSE_REQUESTED:"chromecast_pause_requested",CHROMECAST_ADJUST_VOLUME_REQUESTED:"chromecast_adjust_volume_requested",CHROMECAST_CLOSED_CAPTIONS_TOGGLE_REQUESTED:"chromecast_closed_captions_toggle_requested",CHROMECAST_MUTE_REQUESTED:"chromecast_mute_requested",CHROMECAST_SEEK_REQUESTED:"chromecast_seek_requested",CHROMECAST_UNMUTE_REQUESTED:"chromecast_unmute_requested",CHROMECAST_QUICK_FORWARD:"chromecast_quick_forward",CHROMECAST_QUICK_REWIND:"chromecast_quick_rewind"};return a.registerEvents("CHROMECAST_REQUEST_EVENTS",b),b}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/events/ChromecastResponseEvents",["bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("bandwagon/bandwagon")):a.ChromecastResponseEvents=b(a.Bandwagon)}(this,function(a){var b={CHROMECAST_ERROR:"chromecast_error",CHROMECAST_AVAILABLE:"chromecast_available",CHROMECAST_UNAVILABLE:"chromecast_unavailable",CHROMECAST_INITIALIZED:"chromecast_initialized",CHROMECAST_INITIALIZED_ERROR:"chromecast_initialized_error",CHROMECAST_NO_DEVICES:"chromecast_no_devices",CHROMECAST_CONNECTING:"chromecast_connecting",CHROMECAST_CONNECTED:"chromecast_connected",CHROMECAST_DISCONNECTED:"chromecast_disconnected",CHROMECAST_TIMECODE_UPDATE:"chromecast_timecode_update",CHROMECAST_VOLUME_CHANGED:"chromecast_volume_changed",CHROMECAST_MUTED:"chromecast_chromecast_mute",CHROMECAST_UNMUTED:"chromecast_chromecast_unmute",CHROMECAST_CAST_STARTED:"chromecast_cast_started",CHROMECAST_CAST_STOPPED:"chromecast_cast_stopped",CHROMECAST_CAST_PLAYING:"chromecast_cast_playing",
CHROMECAST_CAST_PAUSED:"chromecast_cast_paused",CHROMECAST_CAST_BUFFERING:"chromecast_cast_buffering",CHROMECAST_SESSION_STARTED:"chromecast_session_started",CHROMECAST_SESSION_RESUMED:"chromecast_session_resumed",CHROMECAST_SESSION_ENDING:"chromecast_session_ending",CHROMECAST_MESSAGE_ERROR:"chromecast_message_error",CHROMECAST_MESSAGE_SEND_ERROR:"chromecast_message_send_error",CHROMECAST_MESSAGE_SEND_SUCCESS:"chromecast_message_send_success",CHROMECAST_MESSAGE_CAPTIONS_ON_SUCCESS:"chromecast_message_captions_on_success",CHROMECAST_MESSAGE_CAPTIONS_ON_ERROR:"chromecast_message_captions_on_error",CHROMECAST_MESSAGE_CAPTIONS_OFF_SUCCESS:"chromecast_message_captions_off_success",CHROMECAST_MESSAGE_CAPTIONS_OFF_ERROR:"chromecast_message_captions_off_error",CHROMECAST_MESSAGE_CAPTIONS_STATUS_SUCCESS:"chromecast_message_captions_status_success",CHROMECAST_MESSAGE_CAPTIONS_STATUS_ERROR:"chromecast_message_captions_status_error",CHROMECAST_MESSAGE_PLAYBACK_RESUME_SUCCESS:"chromecast_message_playback_resume_success",CHROMECAST_MESSAGE_PLAYBACK_RESUME_ERROR:"chromecast_message_playback_resume_error",CHROMECAST_MESSAGE_PLAYBACK_PAUSE_SUCCESS:"chromecast_message_playback_pause_success",CHROMECAST_MESSAGE_PLAYBACK_PAUSE_ERROR:"chromecast_message_playback_pause_error",CHROMECAST_MESSAGE_PLAYBACK_STOP_SUCCESS:"chromecast_message_playback_stop_success",CHROMECAST_MESSAGE_PLAYBACK_STOP_ERROR:"chromecast_message_playback_stop_error",CHROMECAST_MESSAGE_PLAYBACK_SEEK_SUCCESS:"chromecast_message_playbackSeek_success",CHROMECAST_MESSAGE_PLAYBACK_SEEK_ERROR:"chromecast_message_playbackSeek_error",CHROMECAST_MESSAGE_MUTE_SUCCESS:"chromecast_message_mute_success",CHROMECAST_MESSAGE_MUTE_ERROR:"chromecast_message_mute_error",CHROMECAST_MESSAGE_UNMUTE_SUCCESS:"chromecast_message_unmute_success",CHROMECAST_MESSAGE_UNMUTE_ERROR:"chromecast_message_unmute_error",CHROMECAST_MESSAGE_VOLUME_SUCCESS:"chromecast_message_volume_success",CHROMECAST_MESSAGE_VOLUME_ERROR:"chromecast_message_volume_error"};return a.registerEvents("CHROMECAST_RESPONSE_EVENTS",b),b}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/valueObjects/ScrubbableRangeVO",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.ScrubbableRangeVO=b(a.lodash)}(this,function(a){var b=function(a,b,c){this.startTime=a,this.endTime=b,this.enforceBoundaries=c};return b.prototype.toString=function(){return"ScrubbableRangeVO:"+JSON.stringify(this)},b}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/valueObjects/SeekableRangeVO",["lodash/lodash","bam-video-players/valueObjects/ScrubbableRangeVO"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/valueObjects/ScrubbableRangeVO")):a.SeekableRangeVO=b(a.lodash,a.ScrubbableRangeVO)}(this,function(a,b){function c(){if(this.scrubbableRange){var b=this.scrubbableRange.startTime,c=this.scrubbableRange.endTime;a.isNumber(b)&&b>this.startTime&&(this.duration=this.duration-b-this.startTime,this.startTime=b),a.isNumber(c)&&(this.endTime=c,this.duration=this.endTime-this.startTime)}}var d=function(a,c,d,e,f,g){this.trueStartTime=d||0,this.trueDuration=c||0,this.currentTime=a||0,this.duration=c||0,this.startTime=d||0,this.isLiveNow=e||!1,this.isLive=f||!1,this.scrubbableRange=g||new b,this.calculate()};return d.prototype.setScrubbableRange=function(a){this.scrubbableRange=a,this.calculate()},d.prototype.calculate=function(){this.trueEndTime=this.trueStartTime+this.trueDuration,c.call(this),this.endTime=this.startTime+this.duration,this.currentTimeOffset=this.currentTime-this.startTime,this.percent=0,this.endTime>0&&(this.percent=this.currentTimeOffset/this.duration),this.isLiveNow&&(this.percent=.995),this.percent=a.clamp(this.percent,0,1)},d.prototype.toString=function(){return"SeekableRangeVO:"+JSON.stringify(this)},d}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/events/PlayerDispatcher",["check-types/src/check-types.min","bam-video-players/events/ChromecastRequestEvents","bam-video-players/events/ChromecastResponseEvents","bam-video-players/events/PlayerEvents","bam-video-players/events/UserEvents","bam-video-players/valueObjects/SeekableRangeVO"],b):"object"==typeof exports?module.exports=b(require("check-types/src/check-types.min"),require("bam-video-players/events/ChromecastRequestEvents"),require("bam-video-players/events/ChromecastResponseEvents"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/UserEvents"),require("bam-video-players/valueObjects/SeekableRangeVO")):a.PlayerDispatcher=b(a.check,a.ChromecastRequestEvents,a.ChromecastResponseEvents,a.PlayerEvents,a.UserEvents,a.SeekableRangeVO)}(this,function(a,b,c,d,e,f){function g(g){function h(a){F=a}function i(a,b){m(a,b)&&g.on(a,b)}function j(a,b){g.one(a,b)}function k(a,b){g.off(a,b)}function l(a,b){if(n(a,b)){var c=w(a),d=x(a,b);g.publish(c,d)}}function m(a,b){return!0}function n(b,c){var e=p(F);if(e)switch(b){case a.assigned(G[b]):return!0;case d.MEDIA_TIME_UPDATE:case d.MEDIA_VOLUME_CHANGED:return!1;default:return!0}return a.not.assigned(G[b])}function o(){g.removeAllListeners()}function p(a){return a&&a.statuses.isConnected()||!1}function q(a){return G.hasOwnProperty(a)}function r(a){return H.hasOwnProperty(a)}function s(b){return a.number(b)?100*b:0}function t(b){return a.number(b)?b/100:0}function u(){var a={};return a[c.CHROMECAST_TIMECODE_UPDATE]=d.MEDIA_TIME_UPDATE,a[c.CHROMECAST_VOLUME_CHANGED]=d.MEDIA_VOLUME_CHANGED,a[c.CHROMECAST_MUTED]=d.MEDIA_VOLUME_CHANGED,a[c.CHROMECAST_UNMUTED]=d.MEDIA_VOLUME_CHANGED,a[c.CHROMECAST_CAST_STARTED]=d.MEDIA_START,a[c.CHROMECAST_CAST_STOPPED]=d.MEDIA_COMPLETE,a[c.CHROMECAST_CAST_PLAYING]=d.MEDIA_PLAYING,a[c.CHROMECAST_CAST_PAUSED]=d.MEDIA_PAUSED,a}function v(){var a={};return a[e.PLAY_REQUESTED]=b.CHROMECAST_PLAY_REQUESTED,a[e.PAUSE_REQUESTED]=b.CHROMECAST_PAUSE_REQUESTED,a[e.REWIND_REQUESTED]=b.CHROMECAST_QUICK_REWIND,a[e.FASTFORWARD_REQUESTED]=b.CHROMECAST_QUICK_FORWARD,a[e.CLOSED_CAPTIONS_TOGGLE_REQUESTED]=b.CHROMECAST_CLOSED_CAPTIONS_TOGGLE_REQUESTED,a[e.SEEK_REQUESTED]=b.CHROMECAST_SEEK_REQUESTED,a[e.THUMB_DRAG_ENDED]=b.CHROMECAST_SEEK_REQUESTED,a[e.MUTE_REQUESTED]=b.CHROMECAST_MUTE_REQUESTED,a[e.UNMUTE_REQUESTED]=b.CHROMECAST_UNMUTE_REQUESTED,a[e.ADJUST_VOLUME_REQUESTED]=b.CHROMECAST_ADJUST_VOLUME_REQUESTED,a}function w(a){var b=p(F);return b?q(a)?G[a]:r(a)?H[a]:a:a}function x(a,b){var d=p(F);if(!d)return b;if(q(a))switch(a){case c.CHROMECAST_TIMECODE_UPDATE:return new f(b.timecode,b.duration,null,null,b.isLive);case c.CHROMECAST_MUTED:return{volume:0};case c.CHROMECAST_VOLUME_CHANGED:return{volume:s(F.statuses.getVolume())};case c.CHROMECAST_UNMUTED:return{volume:s(F.statuses.getVolume())}}else if(r(a))switch(a){case e.ADJUST_VOLUME_REQUESTED:return t(b);case e.THUMB_DRAG_ENDED:case e.SEEK_REQUESTED:return b.time}return b}var y="PlayerDispatcher(dispatcher) needs a dispatcher object.",z="No dispatcher has been provided on the player",A="Invalid Player Dispatcher API: Must have 'on' method.",B="Invalid Player Dispatcher API: Must have 'one' method.",C="Invalid Player Dispatcher API: Must have 'off' method.",D="Invalid Player Dispatcher API: Must have 'publish' method.",E="Invalid Player Dispatcher API: Must have 'removeAllListeners' method.";a.assert.object(g,y),a.assert.nonEmptyObject(g,y),a.assert.assigned(g,z),a.assert["function"](g.on,A),a.assert["function"](g.one,B),a.assert["function"](g.off,C),a.assert["function"](g.publish,D),a.assert["function"](g.removeAllListeners,E);var F,G,H,I={on:i,one:j,once:j,off:k,publish:l,removeAllListeners:o};return G=u(),H=v(),g.on(c.CHROMECAST_INITIALIZED,h),I}return g}),define("text!bam-video-players/players/ui/templates/HTML5CorePlayerControls.html",[],function(){return'<div id="{{elemId}}" class="video-controls skin-{{skin}} js-video-controls">\n    <div class="video-controls__branding"></div>\n    <div class="video-controls__wrapper">\n        {{#unless isLive}}<div class="video-controls__icon video-controls__start js-video-controls__start"></div>{{/unless}}\n        {{#if isLive}}<div class="video-controls__icon video-controls__live js-video-controls__live"></div>{{/if}}\n        <div class="video-controls__icon video-controls__play js-video-controls__play"></div>\n        <div class="video-controls__icon video-controls__pause js-video-controls__pause"></div>\n        <div class="video-controls__icon video-controls__rewind js-video-control__rewind"></div>\n        {{#unless isLive}}<div class="video-controls__icon video-controls__forward js-video-control__forward"></div>{{/unless}}\n        <div class="video-controls__icon video-controls__fullscreen js-video-controls__fullscreen"></div>\n        <div class="video-controls__icon video-controls__chromecast js-video-controls__chromecast"></div>\n        <div class="video-controls__timer js-video-controls__timer">\n            {{#unless isLive}}\n            <span class="video-timer__elapsed js-video-timer__elapsed">{{elapsed}}</span>\n            <span class="video-timer__divider"></span>\n            <span class="video-timer__duration">{{duration}}</span>\n            {{/unless}}\n        </div>\n        <div class="video-controls__icon video-controls__caption js-video-controls__caption video-controls__caption__notAvailable"></div>\n        <div class="video-controls__volume js-video-controls__volume">\n            <i class="video-controls__icon video-volume__icon js-video-volume__icon">\n                <span class="video-volume__icon--status js-video-volume__icon--status"></span>\n            </i>\n            <div class="video-volume__slider-wrapper">\n                <div class="video-volume__slider js-video-volume__slider">\n                    <div class="video-volume__slider-range js-video-volume__slider-range"></div>\n                    <div class="video-volume__slider-handle js-video-volume__slider-handle"></div>\n                </div>\n            </div>\n        </div>\n        <div class="video-controls__scrubber js-video-controls__scrubber">\n            <div class="video-scrubber__progress js-video-scrubber__progress"></div>\n            <div class="video-scrubber__buffer js-video-scrubber__buffer"></div>\n            <div class="video-scrubber__handle js-video-scrubber__handle"></div>\n        </div>\n    </div>\n</div>\n'}),function(a,b){if("function"==typeof define&&define.amd)define("bam-video-players/players/ui/controls/HTML5CorePlayerControls",["jquery","lodash/lodash","handlebars/handlebars","text!bam-video-players/players/ui/templates/HTML5CorePlayerControls.html","bam-video-players/events/PlayerEvents","bam-video-players/events/UserEvents","bam-video-players/events/ChromecastRequestEvents","bam-video-players/events/ChromecastResponseEvents","bam-video-players/utils/DateTimeHelper","jqueryui-amd/jqueryui/draggable"],b);else if("object"==typeof exports)module.exports=b(require("jquery"),require("lodash/lodash"),require("handlebars/handlebars"),require("text!bam-video-players/players/ui/templates/HTML5CorePlayerControls.html"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/UserEvents"),require("bam-video-players/events/ChromecastRequestEvents"),require("bam-video-players/events/ChromecastResponseEvents"),require("bam-video-players/utils/DateTimeHelper"),require("jqueryui-amd/jqueryui/draggable"));else{var c=$("#ControlsTemplate").html();a.HTML5CorePlayerControls=b(a.jQuery,a._,a.Handlebars,c,a.PlayerEvents,a.UserEvents,a.ChromecastRequestEvents,a.ChromecastResponseEvents,a.dateTimeHelper,null)}}(this,function(a,b,c,d,e,f,g,h,i){"use strict";function j(a,b,c,d,e,f,g,h){this.$player=a,this.$container=b,this.dispatcher=c,this.getDurationInSecs=d,this.getSeekableRange=e,this.skin=f,this.elemId="video-controls__"+h,this.timeout=null,this.controlsConfig=g,this.chromecast=null,this.isHovered=!1,this.mousePosition={x:0,y:0},k.call(this)}function k(){l.call(this,this.getDurationInSecs());var b=c.compile(d),e=i.formatDuration(0,this.timeFormat),f=i.formatDuration(this.getDurationInSecs()||0,this.timeFormat);1===this.$player.siblings("#"+this.elemId).length?this.$player.siblings("#"+this.elemId).replaceWith(b({elemId:this.elemId,skin:this.skin,elapsed:e,duration:f,isLive:this.controlsConfig.isLive})):this.$player.after(b({elemId:this.elemId,skin:this.skin,elapsed:e,duration:f,isLive:this.controlsConfig.isLive})),this.$controls=a("#"+this.elemId),this.$scrubber=this.$controls.find(".js-video-controls__scrubber"),this.$volume=this.$controls.find(".js-video-controls__volume"),J.call(this,this.$player.prop("volume"),this.$player.prop("muted")),m.call(this),R.call(this)}function l(a){this.timeFormat=a>3600?"hh:mm:ss":"mm:ss"}function m(){this.$controls.find(".js-video-controls__start").on("click",a.proxy(n,this)),this.$controls.find(".js-video-controls__play").on("click",a.proxy(o,this)),this.$controls.find(".js-video-controls__pause").on("click",a.proxy(r,this)),this.$controls.find(".js-video-controls__fullscreen").on("click",a.proxy(s,this)),this.$controls.find(".js-video-control__rewind").on("click",a.proxy(u,this)),this.$controls.find(".js-video-control__forward").on("click",a.proxy(v,this)),this.$controls.find(".js-video-controls__live").on("click",a.proxy(w,this)),this.$controls.find(".js-video-controls__chromecast").on("click",a.proxy($,this)),this.$controls.find(".js-video-controls__caption").on("click",a.proxy(x,this)),this.$volume.find(".js-video-volume__icon").on("click",G.call(this));var c=this.$volume.find(".js-video-volume__slider");this.$volume.find(".js-video-volume__slider-handle").draggable({containment:c,axis:this.controlsConfig.volumeScrubAxis,drag:a.proxy(E,this)}),this.$volume.find(".js-video-volume__slider").on("click",a.proxy(F,this)),this.$scrubber.find(".js-video-scrubber__handle").draggable({containment:this.$scrubber,axis:"x",start:a.proxy(B,this),drag:a.proxy(z,this),stop:a.proxy(A,this)}),this.$scrubber.on("click",a.proxy(C,this)),ea[this.elemId+"::_onTimeUpdate"]=a.proxy(y,this),ea[this.elemId+"::_onPlaying"]=a.proxy(p,this),ea[this.elemId+"::_onPausedEnded"]=a.proxy(q,this),ea[this.elemId+"::_onMouseMove"]=b.throttle(a.proxy(N,this),1e3),ea[this.elemId+"::_onMouseOver"]=a.proxy(O,this),ea[this.elemId+"::_onMouseOut"]=a.proxy(P,this),ea[this.elemId+"::_onBufferProgress"]=a.proxy(Q,this),ea[this.elemId+"::_onFullScreenChange"]=a.proxy(t,this),ea[this.elemId+"::_onVolumeChange"]=a.proxy(I,this),ea[this.elemId+"::_onClosedCaptionsOn"]=a.proxy(K,this),ea[this.elemId+"::_onClosedCaptionsOff"]=a.proxy(L,this),ea[this.elemId+"::_onClosedCaptionsAvail"]=a.proxy(M,this),ea[this.elemId+"::_updateScrubber"]=a.proxy(D,this),ea[this.elemId+"::_updateControls"]=a.proxy(_,this),this.dispatcher.on(e.MEDIA_TIME_UPDATE,ea[this.elemId+"::_onTimeUpdate"]),this.dispatcher.on(e.MEDIA_PLAYING,ea[this.elemId+"::_onPlaying"]),this.dispatcher.on(e.MEDIA_PAUSED,ea[this.elemId+"::_onPausedEnded"]),this.dispatcher.on(e.MEDIA_COMPLETE,ea[this.elemId+"::_onPausedEnded"]),this.dispatcher.on(e.FULLSCREEN_CHANGE,ea[this.elemId+"::_onFullScreenChange"]),this.dispatcher.on(e.MEDIA_VOLUME_CHANGED,ea[this.elemId+"::_onVolumeChange"]),this.dispatcher.on(e.CLOSED_CAPTIONS_ON,ea[this.elemId+"::_onClosedCaptionsOn"]),this.dispatcher.on(e.CLOSED_CAPTIONS_OFF,ea[this.elemId+"::_onClosedCaptionsOff"]),this.dispatcher.on(e.CLOSED_CAPTIONS_AVAILABLE,ea[this.elemId+"::_onClosedCaptionsAvail"]),this.$container.on("mouseenter",ea[this.elemId+"::_onMouseOver"]),this.$container.on("mouseleave",ea[this.elemId+"::_onMouseOut"]),this.$player.on("progress",ea[this.elemId+"::_onBufferProgress"]),this.dispatcher.on(h.CHROMECAST_TIMECODE_UPDATE,ea[this.elemId+"::_onTimeUpdate"]),this.dispatcher.on(h.CHROMECAST_INITIALIZED,ea[this.elemId+"::_updateControls"]),this.dispatcher.on(h.CHROMECAST_INITIALIZED_ERROR,ea[this.elemId+"::_updateControls"]),this.dispatcher.on(h.CHROMECAST_NO_DEVICES,ea[this.elemId+"::_updateControls"]),this.dispatcher.on(h.CHROMECAST_AVAILABLE,ea[this.elemId+"::_updateControls"]),this.dispatcher.on(h.CHROMECAST_UNAVILABLE,ea[this.elemId+"::_updateControls"]),this.dispatcher.on(h.CHROMECAST_CONNECTED,ea[this.elemId+"::_updateControls"]),this.dispatcher.on(h.CHROMECAST_CONNECTING,ea[this.elemId+"::_updateControls"]),this.dispatcher.on(h.CHROMECAST_DISCONNECTED,ea[this.elemId+"::_updateControls"])}function n(a){this.dispatcher.publish(f.GOTO_START_REQUESTED)}function o(a){ba(this.chromecast)?(this.dispatcher.publish(g.CHROMECAST_PLAY_REQUESTED),this.$controls.addClass(fa)):this.dispatcher.publish(f.PLAY_REQUESTED)}function p(a,b){aa(this.chromecast)?ca(this.chromecast,this.$controls):this.$controls.addClass(fa)}function q(a,b){aa(this.chromecast)?ca(this.chromecast,this.$controls):this.$controls.removeClass(fa)}function r(a){ba(this.chromecast)?(this.dispatcher.publish(g.CHROMECAST_PAUSE_REQUESTED),this.$controls.removeClass(fa)):this.dispatcher.publish(f.PAUSE_REQUESTED)}function s(a){this.dispatcher.publish(f.TOGGLE_FULL_SCREEN_REQUESTED)}function t(a,b){var c=this.$controls.find(".js-video-controls__fullscreen");a.isFullScreen?c.addClass("video-controls__exit-fullscreen"):c.removeClass("video-controls__exit-fullscreen")}function u(a){ba(this.chromecast)?this.dispatcher.publish(g.CHROMECAST_QUICK_REWIND):this.dispatcher.publish(f.REWIND_REQUESTED)}function v(a){ba(this.chromecast)?this.dispatcher.publish(g.CHROMECAST_QUICK_FORWARD):this.dispatcher.publish(f.FASTFORWARD_REQUESTED)}function w(a){this.dispatcher.publish(f.LIVE_REQUESTED)}function x(a){da("_onCaptionsClick"),ba(this.chromecast)?this.dispatcher.publish(g.CHROMECAST_CLOSED_CAPTIONS_TOGGLE_REQUESTED):this.dispatcher.publish(f.CLOSED_CAPTIONS_TOGGLE_REQUESTED)}function y(a,b){l.call(this,a.duration||this.getDurationInSecs());var c=i.formatDuration(a.currentTimeOffset,this.timeFormat),d=i.formatDuration(a.duration,this.timeFormat),e=a.percent||0;this.$controls.find(".js-video-timer__elapsed").text(c),this.$controls.find(".video-timer__duration").text(d),this.$scrubber.find(".js-video-scrubber__progress").attr("is-at-live-point",a.isLiveNow),D.call(this,e)}function z(a,b){var c=b.position.left/this.$scrubber.width();c*this.getDurationInSecs();D.call(this,c),this.dispatcher.publish(f.THUMB_DRAGGING,{percent:c})}function A(a,b){var c=b.position.left/this.$scrubber.width(),d=c*this.getDurationInSecs();ba(this.chromecast)?this.dispatcher.publish(g.CHROMECAST_SEEK_REQUESTED,d):this.dispatcher.publish(f.THUMB_DRAG_ENDED,{percent:c})}function B(a,b){this.dispatcher.publish(f.THUMB_DRAG_STARTED)}function C(a){var b=(a.pageX-this.$scrubber.offset().left)/this.$scrubber.width(),c=b*this.getDurationInSecs();D.call(this,b),ba(this.chromecast)?this.dispatcher.publish(g.CHROMECAST_SEEK_REQUESTED,c):this.dispatcher.publish(f.SEEK_REQUESTED,{percent:b})}function D(a){this.$scrubber.find(".js-video-scrubber__progress").css(X(a)),this.$scrubber.find(".js-video-scrubber__handle").css({left:a*this.$scrubber.width()})}function E(a,b){var c=this.$controls.find(".js-video-volume__slider");if(!c.is(":visible"))return!1;var d,e,f=c.find(".js-video-volume__slider-handle");Z.call(this)?(d=c.width()-f.outerWidth(),e=Math.abs(b.position.left)/d):(d=c.height()-f.outerHeight(),e=Math.abs(d-b.position.top)/d),H.call(this,e)}function F(a){var b,c=this.$volume.find(".js-video-volume__slider");b=Z.call(this)?1-Math.abs(c.width()+c.offset().left-a.pageX)/c.width():Math.abs(c.height()+c.offset().top-a.pageY)/c.height(),H.call(this,b)}function G(){var a=this;return function(b){0===a.currentVolume||a.$player.prop("muted")?(a.dispatcher.publish(f.UNMUTE_REQUESTED),ba(this.chromecast)&&a.dispatcher.publish(g.CHROMECAST_UNMUTE_REQUESTED)):(a.dispatcher.publish(f.MUTE_REQUESTED),ba(this.chromecast)&&a.dispatcher.publish(g.CHROMECAST_MUTE_REQUESTED))}}function H(a){J.call(this,a),ba(this.chromecast)?this.dispatcher.publish(g.CHROMECAST_ADJUST_VOLUME_REQUESTED,a):this.dispatcher.publish(f.ADJUST_VOLUME_REQUESTED,a)}function I(a){var b=a.volume/100;J.call(this,b)}function J(a,b){this.currentVolume=a;var c=this.controlsConfig.volumeScrubAxis;b&&(a=0);var d,e=this.$volume.find(".js-video-volume__slider"),f=this.$volume.find(".js-video-volume__slider-handle");d=Z.call(this)?a*(e.width()-f.outerWidth()):e.height()-f.outerHeight()-a*(e.height()-f.outerHeight()),0===a?this.$volume.find(".js-video-volume__icon--status").removeClass("video-volume__icon--half").removeClass("video-volume__icon--full").addClass("video-volume__icon--muted"):.5>a?this.$volume.find(".js-video-volume__icon--status").removeClass("video-volume__icon--muted").removeClass("video-volume__icon--full").addClass("video-volume__icon--half"):this.$volume.find(".js-video-volume__icon--status").removeClass("video-volume__icon--muted").removeClass("video-volume__icon--half").addClass("video-volume__icon--full"),e.find(".js-video-volume__slider-range").css(W(a,c)),Z.call(this)?e.find(".js-video-volume__slider-handle").css({left:d}):e.find(".js-video-volume__slider-handle").css({top:d})}function K(){da("_updateCaptionsOn"),b.set(this,"$player[0].textTracks[0].mode","showing"),this.$controls.find(".js-video-controls__caption").removeClass("video-controls__caption__captionsOff").addClass("video-controls__caption__captionsOn")}function L(){da("_updateCaptionsOff"),b.set(this,"$player[0].textTracks[0].mode","hidden"),this.$controls.find(".js-video-controls__caption").removeClass("video-controls__caption__captionsOn").addClass("video-controls__caption__captionsOff")}function M(a){var b=(a?a.hasCaptions:!1)||!1;da("_updateCaptionsAvail",b);var c=this.$controls.find(".js-video-controls__caption");b?c.removeClass("video-controls__caption__notAvailable"):c.addClass("video-controls__caption__notAvailable")}function N(a){var b=this,c=a.clientX,d=a.clientY;!this.isHovered||c===this.mousePosition.x&&d===this.mousePosition.y||(this.mousePosition={x:c,y:d},T.call(b,!0).then(function(){R.call(b)}))}function O(a){this.isHovered=!0,T.call(this,!0),this.$container.on("mousemove",ea[this.elemId+"::_onMouseMove"])}function P(a){var b=this;this.isHovered=!1,ea[this.elemId+"::_onMouseMove"].cancel(),T.call(b,!1).then(function(){S.call(b),b.$container.off("mousemove",ea[b.elemId+"::_onMouseMove"])})}function Q(a){try{var c=a.target.buffered.end(a.target.buffered.length-1),d=b.get(this.getSeekableRange(),"startTime",0),e=c-d,f=this.getDurationInSecs();if(f>0){var g=e/f;g=b.clamp(g,0,1),this.$scrubber.find(".js-video-scrubber__buffer").css(X(g))}}catch(a){da("onBufferProgress ERROR:",a.message)}}function R(a){var b=this;a=a||b.controlsConfig.decay,S.call(b),b.timeout=window.setTimeout(function(){T.call(b,!1)},a)}function S(){window.clearTimeout(this.timeout),this.timeout=null}function T(a){var b=this;this.isHovered||a||b.$container.off("mousemove",ea[b.elemId+"::_onMouseMove"]);var c=V.bind(b);return a||(c=U.bind(b)),c("video-controls--hide").then(function(){return a||window.setTimeout(function(){b.$container.on("mousemove",ea[b.elemId+"::_onMouseMove"])},150),b.dispatcher.publish(e.CONTROLS_VISIBILITY_CHANGED,{player:b,visible:a}),Promise.resolve()})}function U(a){return this.$controls.addClass(a),Promise.resolve()}function V(a){return this.$controls.removeClass(a),Promise.resolve()}function W(a,b){return"x"==b?X(a):Y(a)}function X(a){var b=100*a;return{width:b+"%"}}function Y(a){var b=100*a;return{height:b+"%"}}function Z(){return"x"==this.controlsConfig.volumeScrubAxis}function $(){this.chromecast.controls.requestSession()}function _(b){if(this.chromecast=b,this.chromecast){var c=a(".js-video-controls__chromecast");aa(this.chromecast)?(c.removeClass("chromecast-unavailable"),c.removeClass("chromecast-available"),c.addClass("chromecast-casting"),ca(this.chromecast,this.$controls)):this.chromecast.statuses.isAvailable()&&(c.removeClass("chromecast-unavailable"),c.removeClass("chromecast-casting"),c.addClass("chromecast-available"))}}function aa(a){return a&&a.statuses.isConnected()}function ba(a){return a&&a.statuses.isCasting()}function ca(a,b){var c=a.statuses.getCurrentMedia();c&&"PLAYING"===c.playerState?b.addClass(fa):b.removeClass(fa)}function da(){var a=Array.prototype.slice.call(arguments);a.unshift("[HTML5CorePlayerControls]"),console.log.apply(console,a)}var ea={},fa="video-controls--playing";return j.prototype={show:function(){this.$player.siblings("#"+this.elemId).show()},hide:function(){this.$player.siblings("#"+this.elemId).hide()},destroy:function(){this.$controls.find(".js-video-controls__play").off(),this.$controls.find(".js-video-controls__pause").off(),this.$controls.find(".js-video-controls__fullscreen").off(),this.$controls.find(".js-video-control__rewind").off(),this.$controls.find(".js-video-control__forward").off(),this.$controls.find(".js-video-controls__live").off(),this.$controls.find(".js-video-controls__caption").off(),this.$controls.find(".js-video-controls__chromecast").off(),this.$volume.find(".js-video-volume__icon").off("click",G.call(this)),this.$volume.find(".js-video-volume__slider-handle").draggable("destroy"),this.$volume.find(".js-video-volume__slider").off(),this.$scrubber.find(".js-video-scrubber__handle").draggable("destroy"),this.$scrubber.off(),this.dispatcher.off(e.MEDIA_TIME_UPDATE,ea[this.elemId+"::_onTimeUpdate"]),this.dispatcher.off(e.MEDIA_PLAYING,ea[this.elemId+"::_onPlaying"]),this.dispatcher.off(e.MEDIA_PAUSED,ea[this.elemId+"::_onPausedEnded"]),this.dispatcher.off(e.MEDIA_COMPLETE,ea[this.elemId+"::_onPausedEnded"]),this.dispatcher.off(e.FULLSCREEN_CHANGE,ea[this.elemId+"::_onFullScreenChange"]),this.dispatcher.off(e.MEDIA_VOLUME_CHANGED,ea[this.elemId+"::_onVolumeChange"]),this.dispatcher.off(e.CLOSED_CAPTIONS_ON,ea[this.elemId+"::_onClosedCaptionsOn"]),this.dispatcher.off(e.CLOSED_CAPTIONS_OFF,ea[this.elemId+"::_onClosedCaptionsOff"]),this.dispatcher.off(e.CLOSED_CAPTIONS_AVAILABLE,ea[this.elemId+"::_onClosedCaptionsAvail"]),this.$container.off("mousemove",ea[this.elemId+"::_onMouseMove"]),this.$container.off("mouseenter",ea[this.elemId+"::_onMouseOver"]),this.$container.off("mouseleave",ea[this.elemId+"::_onMouseOut"]),this.$player.off("progress",ea[this.elemId+"::_onBufferProgress"]),this.dispatcher.off(h.CHROMECAST_TIMECODE_UPDATE,ea[this.elemId+"::_onTimeUpdate"]),this.dispatcher.off(h.CHROMECAST_INITIALIZED,ea[this.elemId+"::_updateControls"]),this.dispatcher.off(h.CHROMECAST_INITIALIZED_ERROR,ea[this.elemId+"::_updateControls"]),this.dispatcher.off(h.CHROMECAST_NO_DEVICES,ea[this.elemId+"::_updateControls"]),this.dispatcher.off(h.CHROMECAST_AVAILABLE,ea[this.elemId+"::_updateControls"]),this.dispatcher.off(h.CHROMECAST_UNAVILABLE,ea[this.elemId+"::_updateControls"]),this.dispatcher.off(h.CHROMECAST_CONNECTED,ea[this.elemId+"::_updateControls"]),this.dispatcher.off(h.CHROMECAST_CONNECTING,ea[this.elemId+"::_updateControls"]),this.dispatcher.off(h.CHROMECAST_DISCONNECTED,ea[this.elemId+"::_updateControls"]),S.call(this),this.$player.siblings("#"+this.elemId).remove()}},j}),function(a,b){"function"==typeof define&&define.amd?define("bam-media-utils/ResizeSensor",b):"object"==typeof exports?module.exports=b():a.ResizeSensor=b()}(this,function(){function a(a,b){var c=Object.prototype.toString.call(a),d="[object Array]"===c||"[object NodeList]"===c||"[object HTMLCollection]"===c||"[object Object]"===c||"undefined"!=typeof jQuery&&a instanceof jQuery||"undefined"!=typeof Elements&&a instanceof Elements,e=0,f=a.length;if(d)for(;f>e;e++)b(a[e]);else b(a)}if("undefined"==typeof window)return null;var b=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(a){return window.setTimeout(a,20)},c=function(d,e){function f(){var a=[];this.add=function(b){a.push(b)};var b,c;this.call=function(){for(b=0,c=a.length;c>b;b++)a[b].call()},this.remove=function(d){var e=[];for(b=0,c=a.length;c>b;b++)a[b]!==d&&e.push(a[b]);a=e},this.length=function(){return a.length}}function g(a,b){return a.currentStyle?a.currentStyle[b]:window.getComputedStyle?window.getComputedStyle(a,null).getPropertyValue(b):a.style[b]}function h(a,c){if(a.resizedAttached){if(a.resizedAttached)return void a.resizedAttached.add(c)}else a.resizedAttached=new f,a.resizedAttached.add(c);a.resizeSensor=document.createElement("div"),a.resizeSensor.className="resize-sensor";var d="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",e="position: absolute; left: 0; top: 0; transition: 0s;";a.resizeSensor.style.cssText=d,a.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+d+'"><div style="'+e+'"></div></div><div class="resize-sensor-shrink" style="'+d+'"><div style="'+e+' width: 200%; height: 200%"></div></div>',a.appendChild(a.resizeSensor),"static"==g(a,"position")&&(a.style.position="relative");var h,i,j,k,l=a.resizeSensor.childNodes[0],m=l.childNodes[0],n=a.resizeSensor.childNodes[1],o=a.offsetWidth,p=a.offsetHeight,q=function(){m.style.width="100000px",m.style.height="100000px",l.scrollLeft=1e5,l.scrollTop=1e5,n.scrollLeft=1e5,n.scrollTop=1e5};q();var r=function(){i=0,h&&(o=j,p=k,a.resizedAttached&&a.resizedAttached.call())},s=function(){j=a.offsetWidth,k=a.offsetHeight,h=j!=o||k!=p,h&&!i&&(i=b(r)),q()},t=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c)};t(l,"scroll",s),t(n,"scroll",s)}a(d,function(a){h(a,e)}),this.detach=function(a){c.detach(d,a)}};return c.detach=function(b,c){a(b,function(a){a.resizedAttached&&"function"==typeof c&&(a.resizedAttached.remove(c),a.resizedAttached.length())||a.resizeSensor&&(a.contains(a.resizeSensor)&&a.removeChild(a.resizeSensor),delete a.resizeSensor,delete a.resizedAttached)})},c}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/ui/helpers/PlayerUIHelper",["jquery","lodash/lodash","device/device","bam-video-players/players/ui/controls/HTML5CorePlayerControls","bam-video-players/players/ui/controls/AdControls","bam-video-players/players/ui/Poster","bam-video-players/events/FullScreenEvents","bam-video-players/events/UserEvents","bam-media-utils/ResizeSensor"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("device/device"),require("bam-video-players/players/ui/controls/HTML5CorePlayerControls"),require("bam-video-players/players/ui/controls/AdControls"),require("bam-video-players/players/ui/Poster"),require("bam-video-players/events/FullScreenEvents"),require("bam-video-players/events/UserEvents"),require("bam-media-utils/ResizeSensor")):a.PlayerUIHelper=b(a.jQuery,a._,a.deviceBootstrap,a.HTML5CorePlayerControls,a.AdControls,a.Poster,a.FullScreenEvents,a.UserEvents,a.ResizeSensor)}(this,function(a,b,c,d,e,f,g,h,i){"use strict";function j(a){this.nodeName=a||"video",this.device=c(),this.boundFxns={}}function k(a,c,e,f,g){if(n(this.device)){a&&(o("Destroying Controls"),a.destroy());var h=function(){var a=c.getSeekableRange().duration||0;return a},i=function(){var a=c.getSeekableRange()||{};return a},j=b.get(c,"config.skinProps.skin",null);return a=new d(e,f,c.dispatcher,h,i,j,g,c.id),o("Adding Controls"),a}var k=e;k.attr("controls",!0)}function l(a){try{a.show()}catch(b){p("error attempting to show an element",b)}}function m(a){try{a.hide()}catch(b){p("error attempting to hide an element",b)}}function n(a){return a.is.desktop}function o(){console.log("[PlayerUIHelper]",Array.prototype.slice.call(arguments).join(" "))}function p(){console.warn("[PlayerUIHelper]",Array.prototype.slice.call(arguments).join(" "))}return j.prototype.getFullScreenDiv=function(a,b){var c="fullScreenDiv",d=b;return d||(o("getFullScreenDiv view created id=",c),d=document.createElement(c),d.id=c),d},j.prototype.showPlayer=function(a){a.removeClass("video__player--hide")},j.prototype.hidePlayer=function(a){a.addClass("video__player--hide")},j.prototype.showControls=function(b){b&&l.call(this,a(b.$controls[0]))},j.prototype.hideControls=function(b){b&&m.call(this,a(b.$controls[0]));
},j.prototype.showHTMLElement=function(a){l.call(this,a)},j.prototype.hideHTMLElement=function(a){m.call(this,a)},j.prototype.addHTMLControls=function(a,c,d,e){var f={decay:b.get(c,"config.controls.decay",8e3),isLive:!1,volumeScrubAxis:b.get(c,"config.controls.volume_scrub_axis","y")};return k.call(this,a,c,d,e,f)},j.prototype.addHTMLLiveControls=function(a,c,d,e){var f={decay:b.get(c,"config.controls.decay",8e3),isLive:!0,volumeScrubAxis:b.get(c,"config.controls.volume_scrub_axis","y")};return k.call(this,a,c,d,e,f)},j.prototype.addTextTrack=function(a,b){o("addTextTrack"),a.append('<track kind="captions" label="English Captions" src="'+b+'" default />')},j.prototype.removeTextTrack=function(a){o("removeTextTrack"),a.find('track[kind="captions"]').remove()},j.prototype.addAdControls=function(b,c){return!b&&n(this.device)?b=new e(a(c.utils.getAdVideoElement()),c.dispatcher,c.id,c.logger):void 0},j.prototype.addDOMMutationObserver=function(c,d){var e=a(c).parent()[0],f=new MutationObserver(function(c){c.forEach(function(c){var e=b.get(c,"addedNodes[0]"),f=!1;if(d&&b.isFunction(d)&&(f=d(e)),e&&!f){o("MutationObserver.addedNode",e.outerHTML||(new XMLSerializer).serializeToString(e));var g=b.get(e,"id",null);g&&a("#"+g).css("pointer-events","none")}})}),g={attributes:!1,childList:!0,characterData:!1};f.observe(e,g)},j.prototype.enterFullScreen=function(a){a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.webkitRequestFullScreen?a.webkitRequestFullScreen():a.webkitEnterFullscreen?a.webkitEnterFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():p("can not use built in methods to enter full screen")},j.prototype.exitFullScreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():p("cannot use built in methods to exit full screen")},j.prototype.isFullScreen=function(a,b){var c=!1;switch(a){case g.WEBKIT_FS_CHANGE:c=document.webkitIsFullScreen;break;case g.MOZ_FS_CHANGE:c=document.mozFullScreen;break;case g.FS_CHANGE:c=document.fullScreen;break;case g.MS_FS_CHANGE:c=document.msFullscreenElement;break;case g.WEBKIT_FS_BEGIN:c=!0;break;case g.WEBKIT_FS_END:c=!1}var d="video-player--fullscreen";return c?b.addClass(d):b.removeClass(d),c},j.prototype.resize=function(a,b,c,d){},j.prototype.addAutoPlayProp=function(a,b){a&&a.prop("autoplay",1==b)},j.prototype.destroy=function(){},j.prototype.showMidRollAndContentTogether=function(a,b){a?b.css({width:"50%"}):b.css({width:""})},j}),define("text!bam-video-players/players/ui/templates/VideoPlayersContainer.html",[],function(){return"<div class='video-players-container js-video-players-container'>\n    <div id='bam-video-player' class='video__player video-player'>\n        <video id='{{videoId}}' class='video-player__screen js-video-content'></video>\n    </div>\n    {{#if isAdsEnabled}}\n    <div id='ad-video-player' class='video__player video__player_ad video-player'>\n        <video id='{{adVideoId}}' class='video-player__screen js-video-ads'></video>\n    </div>\n    {{/if}}\n    <!-- ResizeSensor will be added here as the last child -->\n</div>\n"}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/ui/helpers/monitors/PointerMonitor",["lodash/lodash","bam-video-players/events/UserEvents"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/events/UserEvents")):a.PointerMonitor=b(a.lodash,a.UserEvents)}(this,function(a,b){function c(c,d,e){function f(a,b){d.publish(a,b)}function g(){c.addEventListener("click",j),c.addEventListener("pointerenter",i),c.addEventListener("pointerup",k),c.addEventListener("pointerdown",l),c.addEventListener("pointerleave",n),c.addEventListener("pointerout",o),c.addEventListener("pointercancel",p)}function h(){c.removeEventListener("click",j),c.removeEventListener("pointerenter",i),c.removeEventListener("pointerup",k),c.removeEventListener("pointerdown",l),c.removeEventListener("pointermove",m),c.removeEventListener("pointerleave",n),c.removeEventListener("pointerout",o),c.removeEventListener("pointercancel",p)}function i(a){w=!0,f(b.VIDEO_POINTER_ENTER,a),q()}function j(a){f(b.VIDEO_POINTER_CLICK,a)}function k(a){f(b.VIDEO_POINTER_UP,a)}function l(a){f(b.VIDEO_POINTER_DOWN,a)}function m(a){y(a)}function n(a){w=!1,r(),y.cancel(),f(b.VIDEO_POINTER_LEAVE,a)}function o(a){f(b.VIDEO_POINTER_OUT,a)}function p(a){f(b.VIDEO_POINTER_CANCEL,a)}function q(){c.addEventListener("pointermove",m)}function r(){c.removeEventListener("pointermove",m)}function s(){h()}function t(){g()}function u(){h()}var v={x:0,y:0},w=!1,x=a.get(e,"debounceInterval",400),y=a.throttle(function(a){var c=a.x===v.x&&a.y===v.y;w&&!c&&(f(b.VIDEO_POINTER_MOVE,a),v={x:a.x,y:a.y})},x,{leading:!0,trailing:!1});return t(),{destroy:u,disable:s,enable:t}}return c}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/ui/helpers/UserEventManager",["lodash/lodash","bam-video-players/events/UserEvents","bam-video-players/players/ui/helpers/monitors/PointerMonitor"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/events/UserEvents"),require("bam-video-players/players/ui/helpers/monitors/PointerMonitor")):a.UserEventManager=b(a.lodash,a.UserEvents,a.PointerMonitor)}(this,function(a,b,c){function d(d,e,f){function g(){t&&(t.destroy(),t=null)}function h(){v=0}function i(){clearInterval(u),u=null,h()}function j(){v++,e.publish(b.VIDEO_POINTER_IDLE,v)}function k(){e.on(b.VIDEO_POINTER_ENTER,n),e.on(b.VIDEO_POINTER_UP,m),e.on(b.VIDEO_POINTER_DOWN,n),e.on(b.VIDEO_POINTER_MOVE,n),e.on(b.VIDEO_POINTER_LEAVE,o),e.on(b.VIDEO_POINTER_OUT,o),e.on(b.VIDEO_POINTER_CANCEL,o)}function l(){e.off(b.VIDEO_POINTER_ENTER,n),e.off(b.VIDEO_POINTER_UP,m),e.off(b.VIDEO_POINTER_DOWN,n),e.off(b.VIDEO_POINTER_MOVE,n),e.off(b.VIDEO_POINTER_LEAVE,o),e.off(b.VIDEO_POINTER_OUT,o),e.off(b.VIDEO_POINTER_CANCEL,o)}function m(a){r()}function n(a){r()}function o(a){switch(a.pointerType){case"pen":case"touch":break;default:i()}}function p(){k()}function q(){l(),i()}function r(){i(),u=setInterval(j,w)}function s(){l(),i(),g()}var t=new c(d,e,f),u=null,v=0,w=a.get(f,"idleIntervalInMs",1e3),x={enable:p,disable:q,startIdleTimer:r,destroy:s};return Object.defineProperty(x,"pointerMonitor",{get:function(){return t}}),x.enable(),x}return d}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/ui/helpers/PlayerUIManager",["text!bam-video-players/players/ui/templates/VideoPlayersContainer.html","handlebars/handlebars","lodash/lodash","bam-media-utils/ResizeSensor","bam-video-players/events/UserEvents","bam-video-players/players/ui/helpers/UserEventManager"],b):"object"==typeof exports?module.exports=b(require("text!bam-video-players/players/ui/templates/VideoPlayersContainer.html"),require("handlebars/handlebars"),require("lodash/lodash"),require("bam-media-utils/ResizeSensor"),require("bam-video-players/events/UserEvents"),require("bam-video-players/players/ui/helpers/UserEventManager")):a.PlayerUIManager=b(null,a.Handlebars,a.lodash,a.ResizeSensor,a.UserEvents,a.UserEventManager)}(this,function(a,b,c,d,e,f){function g(a){a.publish(e.WINDOW_RESIZE)}function h(a,b){b.publish(e.VIDEO_KEY_DOWN,a)}function i(){this.logger.warn("[PlayerUIManager]",Array.prototype.slice.call(arguments).join(" "))}function j(a,b){this.boundFxns[n]=c.debounce(c.partial(g,b),150),this.resizeSensor=new d(a,this.boundFxns[n])}function k(a,b){this.boundFxns[o]=c.partialRight(h.bind(this),b),a.tabIndex=0,a.addEventListener("keydown",this.boundFxns[o]),this.userEventManager=new f(a,this.dispatcher)}function l(a,b){this.logger=a,this.dispatcher=b,this.boundFxns={}}var m={JS_VIDEO_CONTENT:".js-video-content",JS_VIDEO_ADS:".js-video-ads",JS_VIDEO_PLAYERS_CONTAINER:".js-video-players-container",VIDEO_PLAYER:".video__player",VIDEO_PLAYER_AD:".video__player_ad",JS_RESIZE_SENSOR:"js-resize-sensor"},n="resizeSensorTriggered",o="videoKeyDown";return l.prototype.generateVideoContainers=function(c,d,e){if(!c)return i.call(this,"no parent was included to create the video nodes"),{};var f=b.compile(a),g=(new Date).getTime(),h="player-"+d+"-"+g,l={videoId:"html5-"+h,adVideoId:"ad-"+h,isAdsEnabled:e};c.insertAdjacentHTML("afterbegin",f(l));var n={content:c.querySelector(m.JS_VIDEO_CONTENT),ads:c.querySelector(m.JS_VIDEO_ADS),container:{all:c.querySelector(m.JS_VIDEO_PLAYERS_CONTAINER),content:c.querySelector(m.VIDEO_PLAYER),ads:c.querySelector(m.VIDEO_PLAYER_AD)}};return c.tabIndex=0,j.call(this,n.container.all,this.dispatcher),k.call(this,c,this.dispatcher),this.parent=c,n},l.prototype.startIdleTimer=function(){this.userEventManager.startIdleTimer()},l.prototype.destroy=function(){parent.removeEventListener("keydown",this.boundFxns[o]),this.userEventManager.destroy()},l}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/helpers/PlayerStateHelper",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.PlayerStateHelper=b(a.lodash)}(this,function(a){function b(b){var d=a.includes(c,b);return d||this.warn(b+" is NOT listed as a valid key"),!0}var c={ABR_CONSTRAINTS:"abrConstraints",ADS_INITED:"adsInited",AD_PLAYING:"adPlaying",AUTORUN_PERMISSION_DENIED:"autoRunPermissionDenied",BITRATE_PROFILES:"bitrateProfiles",CLIP:"clip",CLOSED_CAPTIONS_AVAILABLE:"closedCaptionsAvailable",AUDIO_TRACKS_AVAILABLE:"audioTracksAvailable",CONTROLS_ENABLED:"controlsEnabled",CURRENT_URL:"currentUrl",CURRENT_BITRATE_WINDOW:"currentBitrateWindow",CURRENT_TIME_IN_SECS:"currentTimeInSecs",DEBUG_PANEL_SHOWING:"debugPanelShowing",HAS_AD_MANAGER:"hasAdManager",HAS_CONTROLS:"hasControls",HEIGHT:"height",FORCED_MEDIA_ATTACHED_EVENT:"forcedMediaAttachedEvent",IS_CLOSED_CAPTIONS_ENABLED:"isClosedCaptionsEnabled",IS_FULL_SCREEN:"isFullScreen",IS_LIVE:"isLive",IS_LIVE_CLIP_METADATA:"isLive_clipMetadata",IS_LIVE_STREAM:"isLive_stream",IS_PAUSED:"isPaused",IS_PLAYING:"isPlaying",IS_PRE_ROLL_PLAYING:"isPreRollPlaying",IS_PRE_ROLL_FINISHED:"isPreRollFinished",IS_SLIDING_WINDOW:"isSlidingWindow",IS_SEEKING:"isSeeking",IS_RESUMED:"isResumed",LIVE_TIME:"liveTime",LOG_LEVEL:"logLevel",MAX_BITRATE_THRESHOLD:"maxBitrateThreshold",MEDIA_ATTACHED:"mediaAttached",MIN_BITRATE_THRESHOLD:"minBitrateThreshold",MUTED:"muted",PLAYER_STATE:"playerState",SEEKABLE_RANGE:"seekableRange",SCRUBBABLE_RANGE:"scrubbableRange",SCRUBBER_END_REACHED_FIRED:"scrubberEndReachedFired",USE_PLAYER_DIMENSIONS_FOR_BITRATE_CAPS:"usePlayerDimensionsForBitrateCaps",USER_IS_SEEKING:"userIsSeeking",WIDTH:"width",VOLUME:"volume"},d=function(a,b){this.playerName=a,this.shouldThrowErrorsOnInvalidKeys=b||!1,this._state={},this.validKeys=c,this.reset()};return d.prototype.setState=function(c,d){b.call(this,c)&&a.set(this._state,c,d)},d.prototype.getState=function(c){return b.call(this,c)?a.get(this._state,c,null):void 0},d.prototype.reset=function(){this.setState(c.AD_PLAYING,!1),this.setState(c.IS_PLAYING,!1),this.setState(c.IS_PAUSED,!1),this.setState(c.IS_PRE_ROLL_FINISHED,!1),this.setState(c.IS_RESUMED,!1),this.setState(c.CLOSED_CAPTIONS_AVAILABLE,[]),this.setState(c.AUDIO_TRACKS_AVAILABLE,[]),this.setState(c.BITRATE_PROFILES,[]),this.setState(c.HAS_CONTROLS,!1),this.setState(c.IS_SLIDING_WINDOW,!1),this.setState(c.LIVE_TIME,0),this.setState(c.CURRENT_TIME_IN_SECS,0),this.setState(c.IS_LIVE_STREAM,null),this.setState(c.AUTORUN_PERMISSION_DENIED,!1)},d.prototype.log=function(){console.log("["+this.playerName+"_StateHelper]",Array.prototype.slice.call(arguments).join(" "))},d.prototype.warn=function(){var a="WARNING: ["+this.playerName+"_StateHelper]";if(a+=Array.prototype.slice.call(arguments).join(" "),console.warn(a),this.shouldThrowErrorsOnInvalidKeys)throw new Error(a)},d}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/helpers/CallbackRegistry",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.CallbackRegistry=b(a._)}(this,function(a){"use strict";function b(){}return b.prototype={xhrCallback:function(a,b){return b&&(b.indexOf("op-generateKey")>-1||b.indexOf("/keys/id/")>-1)&&(a.withCredentials=!0),a}},b}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/helpers/UserInteractionHelper",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.UserInteractionHelper=b(a.lodash)}(this,function(a){var b={getSanitizedSeekTime:function(b,c,d){if(!a.isNumber(b))return b;var e=c.startTime,f=c.endTime;if(d){var g=d.getSeekBoundaryConstraints(c);e=g.min,f=g.max}return b=a.clamp(b,e,f)}};return b}),function(a,b){"function"==typeof define&&define.amd?define("bam-hls-player/ClientAdapterStateHelper",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.ClientAdapterStateHelper=b(a.lodash)}(this,function(a){function b(b){var d=a.includes(c,b);return d||this.warn(b+" is NOT listed as a valid key"),!0}var c=["mediaHasStarted","areSubtitlesEnabled","mediaAttached","forceMediaAttachedEvent"],d=function(){this._state={}};return d.prototype.setState=function(c,d){b.call(this,c)&&a.set(this._state,c,d)},d.prototype.getState=function(c){return b.call(this,c)?a.get(this._state,c):void 0},d.prototype.reset=function(){this.setState("mediaHasStarted",!1)},d.prototype.log=function(){console.log("[ClientAdapterStateHelper]",Array.prototype.slice.call(arguments).join(" "))},d.prototype.warn=function(){var a="WARNING: [ClientAdapterStateHelper]";a+=Array.prototype.slice.call(arguments).join(" "),console.warn(a)},d}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/valueObjects/ClosedCaptionTrackVO",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.ClosedCaptionTrackVO=b(a.lodash)}(this,function(a){var b=function(a,b,c,d){this.id=a||"",this.language=b,this.isSelected=c||!1,this.label=d||this.id};return b.prototype.toString=function(){return"ClosedCaptionTrackVO:"+JSON.stringify(this)},b}),function(a,b){"function"==typeof define&&define.amd?define("bam-hls-player/SubtitleToClosedCaptionMapper",["lodash/lodash","bam-video-players/valueObjects/ClosedCaptionTrackVO"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/valueObjects/ClosedCaptionTrackVO")):a.SubtitleToClosedCaptionMapper=b(a.lodash,a.ClosedCaptionTrackVO)}(this,function(a,b){var c=function(c){console.log("SubtitleToClosedCaptionMapper",JSON.stringify(c));var d=a.get(c,"id","BAM-HLS_Default_CC_ID"),e=a.get(c,"language",""),f="showing"==a.get(c,"mode"),g=a.get(c,"label","");return new b(d,e,f,g)};return{map:c}}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/valueObjects/AudioTrackVO",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.AudioTrackVO=b(a.lodash)}(this,function(a){var b=function(b,c,d,e,f,g,h,i){this.pid=a.isNumber(b)?b:0,this.language=c||null,this.name=d||this.pid,this.isDefault=a.isBoolean(e)?e:!1,this.isForced=a.isBoolean(f)?f:!1,this.isAutoSelect=a.isBoolean(g)?g:!1,this.isSelected=h||!1,this.renditions=i||[]};return b.prototype.toString=function(){return"AudioTrackVO:"+JSON.stringify(this)},b}),function(a,b){"function"==typeof define&&define.amd?define("bam-hls-player/AudioRenditionToAudioTrackMapper",["lodash/lodash","bam-video-players/valueObjects/AudioTrackVO"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/valueObjects/AudioTrackVO")):a.AudioRenditionToAudioTrackMapper=b(a.lodash,a.AudioTrackVO)}(this,function(a,b){var c=function(c,d){var e=a.get(c,"id",-1),f=a.get(c,"lang",""),g=a.get(c,"name",""),h=a.get(c,"autoselect",!1),i=a.get(c,"default",!1),j=a.get(c,"forced",!1),k=e==d,l=a.get(c,"renditions",[]);return new b(e,f,g,i,j,h,k,l)};return{map:c}}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/valueObjects/BitrateProfileVO",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.BitrateProfileVO=b(a.lodash)}(this,function(a){var b=function(a,b,c,d,e,f,g,h,i){this.url=a||"",this.bitrate=b,this.width=c,this.height=d,this.videoCodec=e,this.audioCodec=f,this.hasClosedCaptions=g,this.frameRate=h,this.isActive=i||!1};return b.prototype.toString=function(){return"BitrateProfileVO:"+JSON.stringify(this)},b}),function(a,b){"function"==typeof define&&define.amd?define("bam-hls-player/BitrateProfileMapper",["lodash/lodash","bam-video-players/valueObjects/BitrateProfileVO"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/valueObjects/BitrateProfileVO")):a.BitrateProfileMapper=b(a.lodash,a.BitrateProfileVO)}(this,function(a,b){var c=function(c,d){var e=a.get(c,"urlId",0),f=a.get(c,"url["+e+"]"),g=a.get(c,"bitrate",-1),h=a.get(c,"width"),i=a.get(c,"height"),j=a.get(c,"videoCodec"),k=a.get(c,"audioCodec"),l=a.get(c,"attrs.CLOSED-CAPTIONS"),m=a.get(c,"attrs.FRAME-RATE");return new b(f,g,h,i,j,k,l,m,d)};return{map:c}}),function(a,b){"function"==typeof define&&define.amd?define("bam-id3-parser/util/ID3Helpers",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.ID3Helpers=b(a._)}(this,function(a){"use strict";function b(){}return b.prototype=a.extend(b.prototype,{}),b.metadataObjectToCuepointObject=function(b){var c,d,e=b.metadata;return e&&e.parameters&&(c={info:e,name:e.markerName,type:b.type,time:b.time},d={},a.forEach(e.parameters,function(a,b){d[a.name]="Number"===a.type?parseInt(a.value):a.value}),e.parameters=d),c},b.calcTagSize=function(a){return 2097152*(127&a[0])+16384*(127&a[1])+128*(127&a[2])+(127&a[3])},b.calcFrameSize=function(a){return a.length<4?0:16777216*a[0]+65536*a[1]+256*a[2]+a[3]},b}),function(a,b){"function"==typeof define&&define.amd?define("bam-id3-parser/util/StringUtils",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.StringUtils=b(a._)}(this,function(a){"use strict";function b(){}return b.prototype=a.extend(b.prototype,{}),b.readUTF=function(a,b,c){var d="",e=b,f=b+c;do d+=String.fromCharCode(a[e++]);while(f>e);return d},b.readUTF16String=function(a,b,c){var d=0,e=1,f=0;c=Math.min(c||a.length,a.length),254===a[0]&&255===a[1]?(b=!0,d=2):255===a[0]&&254===a[1]&&(b=!1,d=2),b&&(e=0,f=1);var g,h,i,j,k,l,m,n=[];for(m=0;c>d&&(g=a[d+e],h=a[d+f],k=(g<<8)+h,d+=2,0!==k);m++)216>g||g>=224?n[m]=String.fromCharCode(k):(i=a[d+e],j=a[d+f],l=(i<<8)+j,d+=2,n[m]=String.fromCharCode(k,l));return n.join("")},b.readUTF8String=function(a,b){var c=0;b=Math.min(b||a.length,a.length),239===a[0]&&187===a[1]&&191===a[2]&&(c=3);for(var d=[],e=0;b>c;e++){var f,g,h,i,j=a[c++];if(0===j)break;128>j?d[e]=String.fromCharCode(j):j>=194&&224>j?(f=a[c++],d[e]=String.fromCharCode(((31&j)<<6)+(63&f))):j>=224&&240>j?(f=a[c++],g=a[c++],d[e]=String.fromCharCode(((15&j)<<12)+((63&f)<<6)+(63&g))):j>=240&&245>j&&(f=a[c++],g=a[c++],h=a[c++],i=((7&j)<<18)+((63&f)<<12)+((63&g)<<6)+(63&h)-65536,d[e]=String.fromCharCode((i>>10)+55296,(1023&i)+56320))}return d.join("")},b.readNullTerminatedString=function(a,b){var c,d,e=[];for(b=b||a.length,c=0;b>c&&(d=a[c++],0!==d);)e[c-1]=String.fromCharCode(d);return e.join("")},b.readISO8859String=function(a,b){var c,d,e=[];for(b=b||a.length,c=0;b>c;)d=a[c++],e[c-1]=String.fromCharCode(d);return e.join("")},b.readUint8String=function(a,b,c,d){c=c||0,0>b&&(b+=a.length);for(var e="",f=c;c+b>f;f++)e+=String.fromCharCode(a[f]);return d?e:decodeURIComponent(encodeURIComponent(e))},b}),function(a,b){"function"==typeof define&&define.amd?define("bam-id3-parser/ID3MetadataWrapper",["lodash/lodash","./util/StringUtils"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("./util/StringUtils")):a.ID3MetadataWrapper=b(a._,a.StringUtils)}(this,function(a,b){"use strict";function c(a){this.initialize(a)}function d(){var a=Array.prototype.slice.call(arguments);a.unshift("[ID3MetadataWrapper]"),console.log.apply(console,a)}return c.METADATA_TYPE_CUEPOINT="com.cisco.streaming.CuePoint.0",c.METADATA_TYPE_VIDEO_CUEPOINT="com.mlbam.videodai.v2",c.METADATA_TYPE_AUDIO_CUEPOINT="com.mlbam.audiodai.v2",c.METADATA_TYPE_TIMECODE="com.cisco.streaming.Timecode.0",c.METADATA_TYPE_BLACKOUT="com.mlbam.blackout.v1",c.METADATA_TYPE_UNKNOWN="UNKNOWN",c.prototype=a.extend(c.prototype,{data:void 0,tag:void 0,time:void 0,type:void 0,metadata:void 0,initialize:function(a){this.data=a,this.type=this.determineType()},determineType:function(){try{var a=b.readUTF(this.data,0,this.data.length);if(a.indexOf(c.METADATA_TYPE_CUEPOINT)>=0)return c.METADATA_TYPE_CUEPOINT;if(a.indexOf(c.METADATA_TYPE_VIDEO_CUEPOINT)>=0)return c.METADATA_TYPE_VIDEO_CUEPOINT;if(a.indexOf(c.METADATA_TYPE_AUDIO_CUEPOINT)>=0)return c.METADATA_TYPE_AUDIO_CUEPOINT;if(a.indexOf(c.METADATA_TYPE_TIMECODE)>=0)return c.METADATA_TYPE_TIMECODE;if(a.indexOf(c.METADATA_TYPE_BLACKOUT)>=0)return c.METADATA_TYPE_BLACKOUT}catch(e){d("determineType: error parsing ByteArray, error="+e.message)}return c.METADATA_TYPE_UNKNOWN},toString:function(){return"[ID3MetadataWrapper type="+this.type+", time="+this.time+", metadata="+this.metadata+"]"}}),c}),function(a,b){"function"==typeof define&&define.amd?define("bam-id3-parser/ID3XmlParser",["lodash/lodash","./util/StringUtils"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("./util/StringUtils")):a.ID3XMLParser=b(a._,a.StringUtils)}(this,function(a,b){"use strict";function c(){}function d(b){var c=a.isPlainObject(b)&&1===a.size(b);return c?d(a.values(b)[0]):b}function e(b){var f={},g=b.nodeType===c.NODE_TYPE_TEXT,h=b.nodeType===c.NODE_TYPE_ELEMENT,i=b.textContent&&b.textContent.trim(),j=b.children&&b.children.length,k=b.attributes&&b.attributes.length;if(g)return b.nodeValue.trim();var l=b.children;return j||(l=[],a.each(b.childNodes,function(a){a.nodeType===c.NODE_TYPE_ELEMENT&&(l.push(a),j=!0)})),j||k?(!j&&i.length&&(f.text=i),h&&k&&(f.attributes=a.reduce(b.attributes,function(c,d,e){var f=b.attributes.item(e);return c[a.camelCase(f.name)]=f.value,c},{})),a.each(l,function(b){var c=a.camelCase(b.nodeName);return"markerName"===c&&(c="name"),a.has(f,c)?(a.isArray(f[c])||(f[c]=[f[c]]),void f[c].push(e(b))):void(f[c]=e(b))}),a.each(f.attributes,function(b,c){c=a.camelCase(c),null==f[c]&&(f[c]=b,delete f.attributes[c])}),a.isEmpty(f.attributes)&&delete f.attributes,d(f)):i}function f(){var a=Array.prototype.slice.call(arguments);a.unshift("[ID3XMLParser]"),console.log.apply(console,a)}return c.NODE_TYPE_TEXT=3,c.NODE_TYPE_ELEMENT=1,c.prototype=a.extend(c.prototype,{}),c.parseXml=function(a){try{var b=this.getXmlFromMetadata(a);if(b)return this.parseXmlToObject(b)}catch(c){f("ID3MetadataParser convertXmlToObject: error parsing XML, error="+c.message)}return null},c.getXmlFromMetadata=function(a){var c,d,e=b.readUTF(a,0,a.length),f=e.indexOf("<?xml");return f>-1?(e=e.substring(f),window.DOMParser?(c=new DOMParser,d=c.parseFromString(e,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async=!1,d.loadXML(e)),d):null},c.parseXmlToObject=function(a){if(!a&&a.childNodes.length>0)return null;var b={};return b=e(a)},c}),function(a,b){"function"==typeof define&&define.amd?define("bam-id3-parser/ID3ByteArrayParser",["lodash/lodash","./util/StringUtils","./ID3XmlParser"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("./util/StringUtils"),require("./ID3XmlParser")):a.ID3ByteArrayParser=b(a._,a.StringUtils,a.ID3XmlParser)}(this,function(a,b,c){"use strict";function d(){}function e(){var a=Array.prototype.slice.call(arguments);a.unshift("[ID3ByteArrayParser]"),console.log.apply(console,a)}return d.prototype=a.extend(d.prototype,{}),d.parseByteArray=function(a){e("ID3MetadataParser parseByteArray:");try{e("ID3MetadataParser parseByteArray: Clean the ByteArray of any null values");var b,f=d.stripNullFromByteArray(a);return b=d.parseByteArrayAsJSON(f),b||(b=c.parseXml(f)),b||(b=d.parseByteArrayAsString(f)),b}catch(g){e("ID3MetadataParser parseByteArray: error parsing byteArray, error="+g.message)}return null},d.parseByteArrayAsJSON=function(a){try{var c=b.readUTF(a,0,a.length);e("ID3MetadataParser parseByteArrayAsJSON: byteArrayAsString="+c);var d=c.substring(c.indexOf("{"),c.lastIndexOf("}")+1),f="unknown";try{var g=c.substring(0,c.indexOf("{"));e("ID3MetadataParser parseByteArrayAsJSON: payloadDescriptor=["+g+"]"),f=g}catch(h){e("ID3MetadataParser parseByteArrayAsJSON: error parsing name from byteArray, error="+h.message),f="unknown"}var i=new Object;i.payload=d;var j=new Object;return j.name=f,j.parameters=i,j}catch(h){e("ID3MetadataParser parseByteAr rayAsJSON: error parsing byteArray, error="+h.message)}return null},d.parseByteArrayAsString=function(a){try{var b=StringUtil.readUTF(a,0,a.length),c=escape(b),d=new Object;d.payload=c;var f=new Object;return f.name="unknown",f.parameters=d,f}catch(g){e("ID3MetadataParser parseByteArrayAsString: error parsing byteArray, error="+g.message)}return null},d.stripNullFromByteArray=function(a){e("ID3MetadataParser stripNullFromByteArray:");try{for(var b,c=[],d="",f=a.length,g=0,h=0;f>h;++h)b=parseInt(a[g]),g+=1,b>15&&(d+=b.toString(),c.push(b));return e("ID3MetadataParser stripNullFromByteArray: output="+d),new Uint8Array(c)}catch(i){e("ID3MetadataParser stripNullFromByteArray: error parsing ByteArray, error="+i.message)}return null},d}),function(a,b){"function"==typeof define&&define.amd?define("bam-id3-parser/ID3TimecodeParser",["lodash/lodash","./util/StringUtils"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("./util/StringUtils")):a.ID3TimecodeParser=b(a._,a.StringUtils)}(this,function(a,b){"use strict";function c(){}function d(a){switch(a){case 0:return"GMT";case 1:return"GMT-1:00";case 2:return"GMT-2:00";case 3:return"GMT-3:00";case 4:return"GMT-4:00";case 5:return"GMT-5:00";case 6:return"GMT-6:00";case 7:return"GMT-7:00";case 8:return"GMT-8:00";case 9:return"GMT-9:00";case 10:return"GMT+0:30";case 11:return"GMT-1:30";case 12:return"GMT-2:30";case 13:return"GMT-3:30";case 14:return"GMT-4:30";case 15:return"GMT-5:30";case 16:return"GMT-10:00";case 17:return"GMT-11:00";case 18:return"GMT-12:00";case 19:return"GMT+13:00";case 20:return"GMT+12:00";case 21:return"GMT+11:00";case 22:return"GMT+10:00";case 23:return"GMT+9:00";case 24:return"GMT+8:00";case 25:return"GMT+7:00";case 26:return"GMT-6:30";case 27:return"GMT-7:30";case 28:return"GMT-8:30";case 29:return"GMT-9:30";case 30:return"GMT-10:30";case 31:return"GMT-11:30";case 32:return"GMT+6:00";case 33:return"GMT+5:00";case 34:return"GMT+4:00";case 35:return"GMT+3:00";case 36:return"GMT+2:00";case 37:return"GMT+1:00";case 42:return"GMT+11:30";case 43:return"GMT+10:30";case 44:return"GMT+9:30";case 45:return"GMT+8:30";case 46:return"GMT+7:30";case 47:return"GMT+6:30";case 58:return"GMT+5:30";case 59:return"GMT+4:30";case 60:return"GMT+3:30";case 61:return"GMT+2:30";case 62:return"GMT+1:30";case 63:return"GMT+0:30";case 50:return"GMT+12:45";default:return null}}function e(a,b,c){return(isNaN(a)||isNaN(b)||isNaN(c)?"":10>a?"0"+a.toString()+":":a.toString()+":")+(10>b?"0"+b.toString():b.toString())+":"+(10>c?"0"+c.toString():c.toString())}function f(){var a=Array.prototype.slice.call(arguments);a.unshift("[ID3TimecodeParser]"),console.log.apply(console,a)}return c.prototype=a.extend(c.prototype,{}),c.parseTimecode=function(a){var c=10;if("com.cisco.streaming.Timecode.0"===b.readUTF(a,c,30)){c+=30,c++;var g=a[c++];if(177!==g)return;var h="",i="",j="";c+=2;var k=a[c];if(128==(128&k)){var l=63&a[c],m=63&a[c+1],n=63&a[c+2],o=63&a[c+3];c+=4,h=e(o,n,m)+";"+l}if(64==(64&k)){var p=d(63&a[c]),q=31&a[c+1],r=15&a[c+2],s=(127&a[c+3])+2e3;0!=q&&0!=r&&2e3!=s?(i=s+"-"+r+"-"+q+"T",j=p,h=i+h+" "+j):f("parseTimecode(): parsed timecode for day, month or year is invalid, not appending to timestamp")}}else if("com.apple.streaming.transportStreamTimestamp"===b.readUTF(a,c,44)){c+=44,c+=4;var t=1&a[c++];h=((a[c++]<<23)+(a[c++]<<15)+(a[c++]<<7)+a[c++])/45,t&&(h+=47721858.84),h=Math.round(h)}return h},c}),function(a,b){"function"==typeof define&&define.amd?define("bam-id3-parser/ID3JsonParser",["lodash/lodash","./util/StringUtils"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("./util/StringUtils")):a.ID3JsonParser=b(a._,a.StringUtils)}(this,function(a,b){"use strict";function c(){}function d(){var a=Array.prototype.slice.call(arguments);a.unshift("[ID3JsonParser]"),console.log.apply(console,a)}return c.prototype=a.extend(c.prototype,{}),c.parseJson=function(a){var b=null;try{if(b=this.getJsonFromMetadata(a))return this.normalizeJson(b)}catch(c){d("ID3JsonParser.parseJson: error parsing JSON, error="+c.message),b=null}return b},c.getJsonFromMetadata=function(a){var c=null,e=b.readUTF(a,0,a.length),f=e.indexOf("{");if(f>-1){e=e.substring(f);try{c=JSON.parse(e)}catch(g){d("ID3JsonParser.getJsonFromMetadata: error parsing JSON, error="+g.message),c=null}}return c},c.normalizeJson=function(a){return{name:a.markerName,parameters:[{name:a.type,value:a.countDown,commercialFlag:a.commercialFlag,evnt:a.evnt}]}},c}),function(a,b){"function"==typeof define&&define.amd?define("bam-id3-parser/ID3MetadataParser",["lodash/lodash","./util/ID3Helpers","./util/StringUtils","./ID3MetadataWrapper","./ID3ByteArrayParser","./ID3XmlParser","./ID3TimecodeParser","./ID3JsonParser"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("./util/ID3Helpers"),require("./util/StringUtils"),require("./ID3MetadataWrapper"),require("./ID3ByteArrayParser"),require("./ID3XmlParser"),require("./ID3TimecodeParser"),require("./ID3JsonParser")):a.ID3MetadataParser=b(a._,a.ID3Helpers,a.StringUtils,a.ID3MetadataWrapper,a.ID3ByteArrayParser,a.ID3XmlParser,a.ID3TimecodeParser,a.ID3JsonParser)}(this,function(a,b,c,d,e,f,g,h){"use strict";function i(){}return i.HEADER_SIZE=10,i.prototype=a.extend(i.prototype,{header:void 0,time:void 0,parse:function(a,c){var d;if(this.header=this.parseHeader(a),this.time=c,this.header.version.flags.unsync)throw new Error("not support unsynchronisation");return d=b.calcTagSize(a.subarray(6,10)),this.parseFrames(a.subarray(this.header.headerSize,d+this.header.headerSize))},parseHeader:function(a){var d={headerSize:i.HEADER_SIZE};if(!a||a.length<10)return!1;var e,f={},g=c.readUTF(a,0,3);return"ID3"!==g?!1:(d.version=f.version={major:2},d.flags=f.version.flags={},d.version.minor=a[3],d.version.revision=a[4],e=a[5],d.flags.unsync=e&!0,d.flags.xheader=e&!0,d.flags.experimental=e&!0,d.flags.xheader&&(d.headerSize+=b.calcTagSize(a.slice(10,14))),d)},parseFrames:function(a){for(var c=0,d=this.header.version,e=[];c<a.length;){var f,g,h=b.calcFrameSize(a.subarray(c+4));if(0===h)break;if(g=a.subarray(c,c+10+h),!g.length)break;f=this.parseFrame(g,d.minor,h),f&&(f.time=this.time,e.push(f)),c+=g.length}return e},parseFrame:function(a,d){var e={tag:null,value:null},f={id:c.readUint8String(a,4,0),type:c.readUint8String(a,1,0),size:d||b.calcFrameSize(a.slice(4)),flags:[a[8],a[9]]};if(0!==f.flags[1])return!1;switch(e.tag=f.id,f.id){case"PRIV":e=this.parsePrivTag(a);break;case"TDRL":default:e=c.readUTF(a,0,a.length)}return e.tag?e:!1},parsePrivTag:function(a){var b=new d(a);switch(b.tag="PRIV",b.type){case d.METADATA_TYPE_TIMECODE:b.metadata=g.parseTimecode(a);break;case d.METADATA_TYPE_CUEPOINT:b.metadata=f.parseXml(a);break;case d.METADATA_TYPE_VIDEO_CUEPOINT:case d.METADATA_TYPE_AUDIO_CUEPOINT:b.metadata=h.parseJson(a);break;case d.METADATA_TYPE_BLACKOUT:case d.METADATA_TYPE_UNKNOWN:default:b.metadata=e.parseByteArray(a)}return b}}),i}),function(a,b){"function"==typeof define&&define.amd?define("bam-id3-parser/ID3PlayerEventHelper",["lodash/lodash","./ID3MetadataParser"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("./ID3MetadataParser")):a.ID3PlayerEventHelper=b(a._,a.ID3MetadataParser);
}(this,function(a,b){"use strict";function c(){}function d(a,b){var c=a.samples[0],d=c.data||c.unit,f=e(d,b);return f}function e(a,c){var d=new b,e=d.parse(a,c);return e}function f(){var a=Array.prototype.slice.call(arguments);a.unshift("[ID3PlayerEventHelper]"),console.log.apply(console,a)}return c.prototype=a.extend(c.prototype,{}),c.onMetadataParsed=function(b,c){var e=a.get(c,"samples[0].pts",0),g=d(c,e);return f("onMetadataParsed",g),g},c.onTimedMetadataReached=function(b,c,e){var g=a.get(c,"time",e),h=d(c,g);return f("onTimedMetadataReached",h),h},c}),function(a,b){"function"==typeof define&&define.amd?define("bam-media-utils/id3/ID3ReaderToEvents",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.ID3ReaderToEvents=b(a.lodash,a.moment)}(this,function(a){function b(b){var d=a.get(b,"type","");return d.indexOf("Timecode")>0?e.TIMECODE:/CuePoint|videodai|audiodai/gi.test(d)?c(b):e.UNKNOWN}function c(b){var c=a.get(b,"metadata.parameters"),d=a.get(c,"[0].name",a.get(c,"name")),f=e.UNKNOWN;switch(d){case"begin":f=e.MIDROLL_START;break;case"mid":f=e.MIDROLL_MID;break;case"clear":f=e.MIDROLL_CLEAR}return f}function d(a,b){var c={};return c[e.TIMECODE]=b.TIME_CODE,c[e.MIDROLL_CLEAR]=b.PLAYBACK_COMMERCIAL_BREAK_END,c[e.MIDROLL_MID]=b.PLAYBACK_COMMERCIAL_BREAK_SET_STATE,c[e.MIDROLL_START]=b.PLAYBACK_COMMERCIAL_BREAK_START,c[a]||null}var e={TIMECODE:"id3metadata.timecode",MIDROLL_START:"id3metadata.midroll_start",MIDROLL_MID:"id3metadata.midroll_mid",MIDROLL_CLEAR:"id3metadata.midroll_clear",UNKNOWN:"id3metadata.unknown"},f=function(){};f.prototype.toString=function(){return"ID3ReaderToEvents"},f.prototype.getEventName=function(c,e){var f=c;a.isArray(c)&&(f=c[0]);var g=b(f);return e?d(g,e):g},f.prototype.getEventPayload=function(c){var d=c;a.isArray(c)&&(d=c[0]);var f=b(d),g=null;switch(f){case e.TIMECODE:g={timecode:a.get(d,"metadata")};break;case e.MIDROLL_MID:g={timeRemaining:a.get(d,"metadata.parameters[0].value")};break;case e.MIDROLL_START:g={duration:a.get(d,"metadata.parameters[0].value")}}return g};var f=new f;return f}),function(a,b){"function"==typeof define&&define.amd?define("bam-hls-player/BamHLSPlayerClient",["jquery","lodash/lodash","bandwagon/bandwagon","bam-hls-player/node_modules/bam-hls/dist/browser_browser_es5/bam-hls.debug","bam-video-players/events/PlayerEvents","bam-video-players/events/ErrorEvents","bam-hls-player/ClientAdapterStateHelper","bam-hls-player/SubtitleToClosedCaptionMapper","bam-hls-player/AudioRenditionToAudioTrackMapper","bam-hls-player/BitrateProfileMapper","bam-id3-parser/ID3PlayerEventHelper","bam-media-utils/logging/logLevel","bam-media-utils/logging/logger","bam-media-utils/id3/ID3ReaderToEvents"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bandwagon/bandwagon"),require("bam-hls/dist/browser_browser_es5/bam-hls.debug"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/ErrorEvents"),require("./ClientAdapterStateHelper"),require("./SubtitleToClosedCaptionMapper"),require("./AudioRenditionToAudioTrackMapper"),require("./BitrateProfileMapper"),require("bam-id3-parser/ID3PlayerEventHelper"),require("bam-media-utils/logging/logLevel"),require("bam-media-utils/logging/logger"),require("bam-media-utils/id3/ID3ReaderToEvents")):a.BamHLSPlayerClient=b(a.jQuery,a._,a.Bandwagon,a.bam-hls,a.PlayerEvents,a.ErrorEvents,a.ClientAdapterStateHelper,a.SubtitleToClosedCaptionMapper,a.AudioRenditionToAudioTrackMapper,a.BitrateProfileMapper,a.ID3PlayerEventHelper,a.MediaLogLevel,a.MediaLogger,a.ID3ReaderToEvents)}(this,function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";function o(c,d,e){var f=b.get(d,"logging.level","warn"),h=l[f]<l.info;this.baseConfig={debug:h},this.clipReader=e,this.stateHelper=new g,this.getPlayerEventDispatcher(),this.video=c,this.$video=a(c),this.boundFxns={},this.logger=new m(l[f]),ha.call(this,"instantiated")}function p(a){var c=a;return b.isFinite(a)&&a>0&&(c=1e3*a),c}function q(a,b,c,d){var e=this,f=function(){try{return e.player.setConstraints({minBitrate:a,maxBitrate:b,maxWidth:c,maxHeight:d}),!0}catch(f){return ha.call(e,"setConstraints failed",f.message),!1}},g=function(){var f=e.player;try{return f.minimumBitrate=a,f.maximumBitrate=b,f.maxWidth=c,f.maxHeight=d,!0}catch(g){return ha.call(e,"setConstraints properties failed",g.message),!1}};f()||g()||ja.call(e,"failed to set constraints")}function r(a){var c=this.clipReader.getPath(a);return 0==b.size(c)&&(c=null),ha.call(this,"getUrlFromClip:","'"+c+"'"),c}function s(a){ha.call(this,"applyClipProperties",JSON.stringify(a));var c=!1,d=this.clipReader.getStartDate(a);if(d)this.player.startTimeByPdt=d,c=!0;else{var e=this.clipReader.getStartTimeInSecs(a);b.isFinite(e)&&e>=0&&(this.player.startTime=e,c=!0)}this.player.liveStreamsStartAtLiveTime=!c;var f=this.clipReader.getInitialAudioLanguage(a);f&&(this.player.initialAudioLanguage=f);var g=this.clipReader.getInitialAudioName(a);g&&(this.player.initialAudioName=g),this.setAdaptiveBitrateConstraints(this.clipReader.getBitrateWindow(a))}function t(){ha.call(this,"reapplyState"),this.enableClosedCaptions(u.call(this,"areSubtitlesEnabled"))}function u(a){return this.stateHelper.getState(a)}function v(a,b){this.stateHelper.setState(a,b)}function w(a){ha.call(this,"mergeConfig",JSON.stringify(a)),b.merge(this.player,a)}function x(){if(!u.call(this,"mediaHasStarted")){ha.call(this,"hasMediaStarted");var a=this.player.basePdt;this.dispatcher.dispatchEvent(e.MEDIA_START,{programDateTime:a}),v.call(this,"mediaHasStarted",!0)}}function y(){var a=u.call(this,"mediaAttached"),b=u.call(this,"forceMediaAttachedEvent");return a&&!b}function z(){x.call(this),this.dispatcher.dispatchEvent(e.MEDIA_PLAYING)}function A(){this.player.off(d.Events.MEDIA_ATTACHED,this.boundFxns._onMediaAttached),this.player.off(d.Events.MANIFEST_PARSED,this.boundFxns._onManifestParsed),this.player.off(d.Events.STREAM_ERROR,this.boundFxns._onError),this.player.off(d.Events.STREAM_SUBTITLERENDITIONS_CHANGED,this.boundFxns._onSubtitleRenditionsChanged),this.player.off(d.Events.STREAM_AUDIORENDITION_CHANGED,this.boundFxns._onCurrentAudioRenditionChanged),this.player.off(d.Events.STREAM_AUDIORENDITIONS_CHANGED,this.boundFxns._onAudioRenditionsChanged),this.player.off(d.Events.TIMED_METADATA_UPDATE,this.boundFxns._onMetadataParsed),this.player.off(d.Events.TIMED_METADATA_PTS_REACHED,this.boundFxns._onTimedMetadataReached),this.player.off(d.Events.STREAM_STATE_CHANGED,this.boundFxns._onStreamStateChanged),this.player.off(d.Events.STREAM_BASEPDT_CHANGED,this.boundFxns._onStreamPDTChanged),this.player.off(d.Events.STREAM_DATERANGE_UPDATE,this.boundFxns._onStreamDateRangeUpdated),this.player.off(d.Events.PLAYBACK_ENDED,this.boundFxns._onEnded),this.player.off(d.Events.PLAYBACK_PAUSED,this.boundFxns._onPause),this.player.off(d.Events.PLAYBACK_PLAYING,this.boundFxns._onPlaying),this.player.off(d.Events.STREAM_TIMEUPDATE,this.boundFxns._onPlayerTimeChanged),this.player.off(d.Events.STREAM_DURATION_CHANGED,this.boundFxns._onStreamDurationChanged),this.player.off(d.Events.STREAM_PLAY,this.boundFxns._onPlay),this.player.off(d.Events.STREAM_PLAYBACK,this.boundFxns._onMediaStart),this.player.off(d.Events.PLAYBACK_SEEKING,this.boundFxns._onSeekBegin),this.player.off(d.Events.STREAM_SEEKING_FINISHED,this.boundFxns._onSeekEnd),this.player.off(d.Events.STREAM_PLAYBACKSTATE_CHANGED,this.boundFxns._onPlaybackStateChanged),this.player.off(d.Events.STREAM_PLAYBACKRATE_CHANGED,this.boundFxns._onPlaybackRateChanged)}function B(){b.merge(this.boundFxns,{_onMediaAttached:E.bind(this),_onManifestParsed:G.bind(this),_onError:fa.bind(this),_onSubtitleRenditionsChanged:V.bind(this),_onCurrentAudioRenditionChanged:Y.bind(this),_onAudioRenditionsChanged:X.bind(this),_onMetadataParsed:H.bind(this),_onTimedMetadataReached:I.bind(this),_onChoosenVariantChanged:Z.bind(this),_onIsLiveChanged:$.bind(this),_onLiveTimeChanged:_.bind(this),_onSlidingWindowChanged:aa.bind(this),_onStreamStateChanged:da.bind(this),_onStreamPDTChanged:J.bind(this),_onPlaybackStateChanged:L.bind(this),_onPlaybackRateChanged:M.bind(this),_onStreamDateRangeUpdated:K.bind(this)}),this.player.on(d.Events.MEDIA_ATTACHED,this.boundFxns._onMediaAttached),this.player.on(d.Events.STREAM_ISLIVE_CHANGED,this.boundFxns._onIsLiveChanged),this.player.on(d.Events.STREAM_LIVETIME_CHANGED,this.boundFxns._onLiveTimeChanged),this.player.on(d.Events.STREAM_ERROR,this.boundFxns._onError),this.player.on(d.Events.STREAM_ISSLIDINGWINDOW_CHANGED,this.boundFxns._onSlidingWindowChanged),this.player.on(d.Events.STREAM_SUBTITLERENDITIONS_CHANGED,this.boundFxns._onSubtitleRenditionsChanged),this.player.on(d.Events.STREAM_AUDIORENDITION_CHANGED,this.boundFxns._onCurrentAudioRenditionChanged),this.player.on(d.Events.STREAM_AUDIORENDITIONS_CHANGED,this.boundFxns._onAudioRenditionsChanged),this.player.on(d.Events.STREAM_CHOSENVARIANT_CHANGED,this.boundFxns._onChoosenVariantChanged),this.player.on(d.Events.TIMED_METADATA_UPDATE,this.boundFxns._onMetadataParsed),this.player.on(d.Events.TIMED_METADATA_PTS_REACHED,this.boundFxns._onTimedMetadataReached),this.player.on(d.Events.STREAM_STATE_CHANGED,this.boundFxns._onStreamStateChanged),this.player.on(d.Events.STREAM_BASEPDT_CHANGED,this.boundFxns._onStreamPDTChanged),this.player.on(d.Events.STREAM_PLAYBACKSTATE_CHANGED,this.boundFxns._onPlaybackStateChanged),this.player.on(d.Events.STREAM_PLAYBACKRATE_CHANGED,this.boundFxns._onPlaybackRateChanged),this.player.on(d.Events.STREAM_DATERANGE_UPDATE,this.boundFxns._onStreamDateRangeUpdated),C.call(this)}function C(){var a=this,c=[d.Events.STREAM_TIMEUPDATE,d.Events.MEDIA_TIMEUPDATE,d.Events.STREAM_METADATA_UPDATE,d.Events.CHUNK_LOADED],e=[d.Events.STREAM_SUBTITLERENDITIONS_CHANGED,d.Events.STREAM_AUDIORENDITION_CHANGED,d.Events.STREAM_AUDIORENDITIONS_CHANGED,d.Events.STREAM_PLAY,d.Events.STREAM_VARIANTS_CHANGED,d.Events.STREAM_CHOSENVARIANT_CHANGED,d.Events.STREAM_ISSLIDINGWINDOW_CHANGED,d.Events.STREAM_DATERANGE_UPDATE];b.each(d.Events,function(d){var f=!0;b.includes(c,d)&&(f=!1),b.size(e)>0&&!b.includes(e,d)&&(f=!1),f&&a.player.on(d,function(c){try{ha.call(a,"EVENT",d,JSON.stringify(c))}catch(c){ha.call(a,"EVENT",d,"could not output payload",b.keys(c).join(","))}})})}function D(){b.merge(this.boundFxns,{_onMediaStart:F.bind(this),_onEnded:N.bind(this),_onPause:Q.bind(this),_onPlaying:P.bind(this),_onPlay:O.bind(this),_onMetadataParsed:H.bind(this),_onPlayerTimeChanged:R.bind(this),_onStreamDurationChanged:S.bind(this),_onVariantDurationChanged:T.bind(this),_onSeekBegin:ba.bind(this),_onSeekEnd:ca.bind(this)}),this.player.on(d.Events.PLAYBACK_ENDED,this.boundFxns._onEnded),this.player.on(d.Events.PLAYBACK_PAUSED,this.boundFxns._onPause),this.player.on(d.Events.PLAYBACK_PLAYING,this.boundFxns._onPlaying),this.player.on(d.Events.STREAM_TIMEUPDATE,this.boundFxns._onPlayerTimeChanged),this.player.on(d.Events.STREAM_DURATION_CHANGED,this.boundFxns._onStreamDurationChanged),this.player.on(d.Events.STREAM_PLAY,this.boundFxns._onPlay),this.player.on(d.Events.STREAM_PLAYBACK,this.boundFxns._onMediaStart),this.player.on(d.Events.PLAYBACK_SEEKING,this.boundFxns._onSeekBegin),this.player.on(d.Events.STREAM_SEEKING_FINISHED,this.boundFxns._onSeekEnd)}function E(a){ha.call(this,"_onMediaAttached"),v.call(this,"mediaAttached",!0),this.dispatcher.dispatchEvent(e.MEDIA_ATTACHED)}function F(a){ha.call(this,"_onMediaStart"),x.call(this)}function G(a){ha.call(this,"_onManifestParsed"),this.dispatcher.dispatchEvent(e.META_DATA_LOADED)}function H(a){var b=k.onMetadataParsed(a,a,this.video.currentTime);this.dispatcher.dispatchEvent(e.META_DATA_PARSED,b)}function I(a){var c={samples:[a.sample]},d=k.onMetadataParsed(a,c,this.video.currentTime),f=n.getEventName(d,e),g=n.getEventPayload(d);ha.call(this,"_onTimedMetadataReached",f,JSON.stringify(g)),f&&this.dispatcher.dispatchEvent(f,b.merge(g,{data:d})),this.dispatcher.dispatchEvent(e.META_DATA_PT_REACHED,{tags:d})}function J(a){this.player.off(d.Events.STREAM_BASEPDT_CHANGED,this.boundFxns._onStreamPDTChanged);var c=b.get(a,"basePdt",null),f=b.get(a,"oldBasePdt",null),g=c?c.getTime():-5,h=f?f.getTime():-10;g!==h&&(ha.call(this,"_onStreamPDTChanged.dispatchTimecode",c),this.dispatcher.dispatchEvent(e.TIME_CODE,{timecode:c}))}function K(a){var c=b.clone(a);this.dispatcher.dispatchEvent(e.EXT_META_DATA_REACHED,c)}function L(a){var b=a.playbackState,c=a.lastPlaybackState;"BUFFERING"===b?this.dispatcher.dispatchEvent(e.BUFFERING_STARTED):"BUFFERING"===c&&this.dispatcher.dispatchEvent(e.BUFFERING_ENDED)}function M(a){ha.call(this,"_onPlaybackRateChanged"),this.dispatcher.dispatchEvent(e.STREAM_PLAYBACK_RATE_CHANGED,a)}function N(a){ha.call(this,"_onEnded"),this.dispatcher.dispatchEvent(e.MEDIA_COMPLETE)}function O(a){ha.call(this,"_onPlay")}function P(a){ha.call(this,"_onPlaying"),z.call(this)}function Q(a){ha.call(this,"_onPause"),this.dispatcher.dispatchEvent(e.MEDIA_PAUSED)}function R(a){U.call(this)}function S(a){U.call(this)}function T(a){U.call(this)}function U(){var a=this.getCurrentTimeInSecs(),b=this.getSeekableRange();this.dispatcher.dispatchEvent(e.MEDIA_TIME_UPDATE,{timeInSecs:a,duration:b.duration,startTime:b.start,endTime:b.end})}function V(a){var c=b.map(this.player.subtitleRenditions,function(a){return h.map(a)});ha.call(this,"_onSubtitleRenditionsChanged",JSON.stringify(c)),this.dispatcher.dispatchEvent(e.CLOSED_CAPTIONS_TRACKS_CHANGED,c)}function W(){if(ha.call(this,"_getAvailableAudioTracks"),this.player){var a=this.player.currentAudioRendition,c=b.map(this.player.audioRenditions,function(b){return i.map(b,a)});return c}return[]}function X(a){ha.call(this,"_onAudioRenditionsChanged evt=",JSON.stringify(a));var b=W.call(this);ha.call(this,"_onAudioRenditionsChanged",JSON.stringify(b)),this.dispatcher.dispatchEvent(e.AUDIO_TRACKS_CHANGED,b)}function Y(a){ha.call(this,"_onCurrentAudioRenditionChanged currentAudioRendition =",this.player.currentAudioRendition),this.dispatcher.dispatchEvent(e.CURRENT_AUDIO_TRACK_CHANGED,this.player.currentAudioRendition),X.call(this)}function Z(a){var c=b.get(a,"chosenVariant"),d=b.map(this.player.variants,function(a,b){var d=b==c;return j.map(a,d)}.bind(this));ha.call(this,"_onVariantsChanged"),this.dispatcher.dispatchEvent(e.BITRATE_PROFILES_CHANGED,d)}function $(a){this.dispatcher.dispatchEvent(e.ISLIVE_CHANGED,this.player.isLive)}function _(a){this.dispatcher.dispatchEvent(e.LIVETIME_CHANGED,this.player.liveTime)}function aa(a){ha.call(this,"_onSlidingWindowChanged",a.slidingWindow),this.dispatcher.dispatchEvent(e.IS_SLIDING_WINDOW_CHANGED,a.slidingWindow)}function ba(a){ha.call(this,"_onSeekBegin",a),this.dispatcher.dispatchEvent(e.MEDIA_SEEK)}function ca(a){ha.call(this,"_onSeekEnd",a),this.dispatcher.dispatchEvent(e.SEEK_COMPLETE)}function da(a){var c=b.get(a,"state");switch(c){case d.States.LOADED:return void z.call(this)}}function ea(a){var b=a.message||a;ha.call(this,"_onVideoError: Video Error >",b,"<"),this.dispatcher.dispatchEvent(e.MEDIA_ERROR,{message:b})}function fa(a,c){var d=b.get(a,"messageDetailed","There are no details about this error"),f=1==a.fatal,g=b.omit(a,"_data");if(g.message=d,f){var h=JSON.stringify(g);ja.call(this,"_onError",h),this.dispatcher.dispatchEvent(e.MEDIA_ERROR,g)}else ga.call(this,g)}function ga(a){var c=JSON.stringify(a);ia.call(this,"_onWarning",c),this.dispatcher.dispatchEvent(e.MEDIA_WARNING,a);var d=35;b.get(a,"errorObj.code")===d&&this.dispatcher.dispatchEvent(e.PLAYBACK_FAILED_PERMISSION_DENIED,a)}function ha(){this.logger.info("[BamHLSPlayerClient]",Array.prototype.slice.call(arguments).join(" "))}function ia(){this.logger.warn("[BamHLSPlayerClient] !WARNING!",Array.prototype.slice.call(arguments).join(" "))}function ja(){this.logger.error("[BamHLSPlayerClient] !ERROR!",Array.prototype.slice.call(arguments).join(" "))}o.prototype.toString=function(){return"BamHLSPlayerClient"},o.prototype.clientLibraryName=function(){return"bam-hls.js"},o.prototype.create=function(a,c){ha.call(this,"create"),this.reset();try{if(this.player=this.createPlayer(),!this.player)throw new Error("failed to create BamHlsStream");ha.call(this,"created",this.player),w.call(this,c),B.call(this),D.call(this),t.call(this),this.player.attachMedia(a);var e=b.has(this.player,"isSupportedDuringTesting")?this.player.isSupportedDuringTesting:d.isSupported();return ha.call(this,"create.isSupported",e),e?!0:(this.dispatcher.dispatchEvent(f.BROWSER_SUPPORT_ERROR,{message:"Browser does not support Media Source Extensions. HLS Media playback is unavailable."}),!1)}catch(g){ja.call(this,g.message),ea.call(this,g.message)}},o.prototype.destroy=function(){var a=this,b=Promise.resolve();return this.player&&(b=new Promise(function(b){return ha.call(a,"destroy"),A.call(a),ha.call(a,"destroy.getState(mediaAttached)",u.call(a,"mediaAttached")),y.call(a)?(ha.call(a,"destroy -> detachMedia && player.dispose()"),a.player.once(d.Events.STREAM_DISPOSED,function(){return a.player=null,b()}),a.player.dispose(),void 0):b()})),b},o.prototype.createPlayer=function(){return ha.call(this,"createPlayer"),new d},o.prototype.getPlayerEventDispatcher=function(){if(!this.dispatcher){var a=c.getInstanceByKey("BamHLSjsPlayer"+Date.now());this.dispatcher={addEventListener:function(b,c){a.on(b,c)},removeEventListener:function(b,c){a.off(b,c)},dispatchEvent:function(b,c){a.publish(b,c)},removeAllListeners:function(){a.removeAllListeners()}}}return this.dispatcher},o.prototype.reset=function(){this.stateHelper.reset(),this.lastSeekTime=null},o.prototype.play=function(){if(this.player)this.player.play();else try{this.video.play()}catch(a){ha.call(this,"ERROR with play(). It is unlikely that this will happen anywhere outside of a test. Error msg = ",a.message)}},o.prototype.pause=function(){if(this.player)this.player.pause();else try{this.video.pause()}catch(a){ha.call(this,"ERROR with pause(). It is unlikely that this will happen anywhere outside of a test. Error msg = ",a.message)}},o.prototype.load=function(){if(this.video)try{this.video.load()}catch(a){ha.call(this,"ERROR with load(). It is unlikely that this will happen anywhere outside of a test. Error msg = ",a.message)}},o.prototype.setVolume=function(a){ha.call(this,"setVolume",a),this.player&&(this.player.volume=a/100)},o.prototype.seek=function(a){ha.call(this,"seek: timeInSecs =",a),this.isSeeking?this.lastSeekTime=a:(this.lastSeekTime=null,null!=a&&(this.player.seek(a),R.call(this)))},o.prototype.seekToDate=function(a){ha.call(this,"seekToDate: seekDate="+a),this.player.seekByPdt(a)},o.prototype.mute=function(){this.player&&(this.player.isMuted=!0)},o.prototype.unmute=function(){this.player&&(this.player.isMuted=!1)},o.prototype.seekToLive=function(){ha.call(this,"seekToLive: player.liveTime =",this.player.liveTime),this.player.isLive?this.player.seekToLive():ia.call(this,"seekToLive: stream is not live so not calling player.seekToLive()")},o.prototype.getDurationInSecs=function(){var a=this.getSeekableRange();return a.duration},o.prototype.getSeekableRange=function(){var a=this.player.seekableRange;if(!a){var b=0,c=this.player.duration;a={start:b,end:c,duration:c}}return a},o.prototype.getClientMetrics=function(){return{getPlaybackMetrics:ka.call(this),isMultithreaded:la.call(this)}};var ka=function(){var a;return this.player&&(a=this.player.getPlaybackMetrics()),a||(a={}),a},la=function(){var a;return this.player&&(a=this.player.isMultithreaded),b.isBoolean(a)||(a=!1),a};return o.prototype.applyConfig=function(a,c){ha.call(this,"applyConfig",a,"=",c),this.player&&y.call(this)&&("timeouts"===a?(ha.call(this,"applyConfig.player.timeouts",this.player),this.player.setTimeouts(c)):(b.set(this.baseConfig,a,c),ha.call(this,"applyConfig.player",this.player),this.player[a]=c))},o.prototype.setClip=function(a){var c=r.call(this,a);if(c){try{var d=!1;d=this.player?!0:this.create(this.video,this.baseConfig),d&&(s.call(this,a),this.player.loadSource(c))}catch(e){ja.call(this,e.message),ea.call(this,e.message)}b.get(a,"forceMediaAttachedEvent")&&(ha.call(this,"forceMediaAttachedEvent"),v.call(this,"forceMediaAttachedEvent",!0),E.call(this))}},o.prototype.setAdaptiveBitrateConstraints=function(a){if(this.player){ha.call(this,"setAdaptiveBitrateConstraints",a);var c=b.get(a,"minBitrateKbps"),d=b.get(a,"maxBitrateKbps"),e=b.get(a,"maxWidth");b.isFinite(e)&&!b.isInteger(e)&&(e=b.toInteger(e));var f=b.get(a,"maxHeight");b.isFinite(f)&&!b.isInteger(f)&&(f=b.toInteger(f));var g=p(c),h=p(d);q.call(this,g,h,e,f)}},o.prototype.getCurrentTimeInSecs=function(){return this.player.currentTime},o.prototype.getLiveTime=function(){return this.player.liveTime},o.prototype.isLiveRightNow=function(a){var c=!1;if(this.player.isLive){var d=a||8,e=this.getCurrentTimeInSecs(),f=this.getLiveTime(),g=f-e,h=b.inRange(g,d,0),i=0>g,j=e>0;c=j&&(h||i)}return c},o.prototype.enableClosedCaptions=function(a){ha.call(this,"enableClosedCaptions",a),v.call(this,"areSubtitlesEnabled",a),b.set(this.baseConfig,"areSubtitlesEnabled",a),this.player&&(ha.call(this,"enableClosedCaptions/areSubtitlesEnabled (acutally applied)",a),this.player.areSubtitlesEnabled=a,V.call(this,null))},o.prototype.setSelectedAudioTrackByLanguage=function(a){if(ha.call(this,"setSelectedAudioTrackByLanguage",a),this.player){var c=W.call(this),d=b.findIndex(c,b.find(c,{language:a}));b.isNil(d)||(this.player.currentAudioRendition=d,ha.call(this,"setSelectedAudioTrackByLanguage.success",d))}},o.prototype.clientLibraryVersion=function(){return d.version},o.prototype.setAuthenticationCallback=function(a){this.applyConfig("xhrSetupCallback",a)},o}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/events/VideoNodeEvents",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.VideoNodeEvents=b(a.lodash)}(this,function(a){var b={ABORT:"abort",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",EMPTIED:"emtied",ENDED:"ended",ERROR:"error",LOAD:"load",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATE_CHANGE:"ratechange",RESIZE:"resize",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",WAITING:"waiting",TOUCHEND:"touchend"};return b}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/ui/helpers/VideoMediaErrorHelper",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.VideoNodeEvents=b(a.lodash)}(this,function(a){return{decode:function(a){switch(a){case 1:return{name:"MEDIA_ERR_ABORTED",description:"The fetching of the associated resource has been aborted by the user"};case 2:return{name:"MEDIA_ERR_NETWORK",description:"A network error caused the resource to stop being fetched."};case 3:return{name:"MEDIA_ERR_DECODE",description:"A decoding error caused the resource to stop being fetched."};case 4:return{name:"MEDIA_ERR_SRC_NOT_SUPPORTED",description:"The associated resource has been detected to be not suitable."}}return{name:"UNKNOWN",description:"Unknown media error occured"}}}}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/clients/MediaElementClient",["jquery","lodash/lodash","bandwagon/bandwagon","bam-video-players/events/PlayerEvents","bam-video-players/events/VideoNodeEvents","bam-video-players/events/UserEvents","bam-video-players/players/ui/helpers/VideoMediaErrorHelper"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bandwagon/bandwagon"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/VideoNodeEvents"),require("bam-video-players/events/UserEvents"),require("bam-video-players/players/ui/helpers/VideoMediaErrorHelper")):a.MediaElementClient=b(a.jQuery,a._,a.bandwagon,a.PlayerEvents,a.VideoNodeEvents,a.UserEvents,a.VideoMediaErrorHelper)}(this,function(a,b,c,d,e,f,g){"use strict";function h(b,c,d){this.video=b,this.$video=a(b),this.clipReader=d,t("created",b,d),this.getPlayerEventDispatcher(),i.call(this)}function i(){if(t("addVideoListeners",this.listenersAdded),!this.listenersAdded){this.boundFunctions={_onMediaStart:l.bind(this)},this.$video.on(e.ENDED,m.bind(this)),this.$video.on(e.PAUSE,o.bind(this)),this.$video.on(e.PLAYING,n.bind(this)),this.$video.on(e.PLAY,this.boundFunctions._onMediaStart),this.$video.on(e.TIME_UPDATE,p.bind(this)),this.$video.on(e.TOUCHEND,q.bind(this)),this.$video.on(e.VOLUME_CHANGE,r.bind(this)),this.listenersAdded=!0}}function j(a){t("_onLoad"),i.call(this)}function k(a){t("_onMetaDataLoaded"),this.dispatcher.dispatchEvent(d.META_DATA_LOADED)}function l(){t("_onMediaStart"),this.$video.off(e.PLAY,this.boundFunctions._onMediaStart),this.dispatcher.dispatchEvent(d.MEDIA_START)}function m(a){t("_onEnded"),this.dispatcher.dispatchEvent(d.MEDIA_COMPLETE)}function n(a){t("_onPlaying"),this.dispatcher.dispatchEvent(d.MEDIA_PLAYING)}function o(a){t("_onPause"),this.dispatcher.dispatchEvent(d.MEDIA_PAUSED)}function p(a){var b=this.video.currentTime,c=this.getDurationInSecs();this.dispatcher.dispatchEvent(d.MEDIA_TIME_UPDATE,{timeInSecs:b,duration:c})}function q(a){this.dispatcher.dispatchEvent(new Event(f.TOUCHEND))}function r(a){var b=this.video.volume;0!==b&&this.unmute()}function s(a){var b=g.decode(this.video.error.code),c=b.name+": "+b.description;t("Video Error",c),this.dispatcher.dispatchEvent(d.MEDIA_ERROR,{message:c})}function t(){console.log("[VideoClient]",Array.prototype.slice.call(arguments).join(" "))}return h.prototype.getPlayerEventDispatcher=function(){if(!this.dispatcher){var a=c.getInstanceByKey("HTML5Video"+Date.now());this.dispatcher={addEventListener:function(b,c){a.on(b,c)},removeEventListener:function(b,c){a.off(b,c)},dispatchEvent:function(b,c){a.publish(b,c)},removeAllListeners:function(){a.removeAllListeners()}}}return this.dispatcher},h.prototype.reset=function(){this.lastSeekTime=null},h.prototype.play=function(){t("play","trigger");try{this.video.play()["catch"](function(a){t("play.failed.promise",a.message),this.dispatcher.dispatchEvent(d.PLAYBACK_FAILED_PERMISSION_DENIED)}.bind(this))}catch(a){this.$video.trigger(e.PLAY)}},h.prototype.pause=function(){t("pause","trigger"),this.$video.trigger(e.PAUSE)},h.prototype.load=function(){t("load");try{this.video.load()}catch(a){t("load failed",a.message)}},h.prototype.setVolume=function(a){this.video.volume=a/100},h.prototype.mute=function(){this.$video.prop("muted",!0),this.setVolume(0)},h.prototype.unmute=function(){this.$video.prop("muted",!1)},h.prototype.seek=function(a){this.isSeeking?this.lastSeekTime=a:(this.lastSeekTime=null,null!=a&&(this.video.currentTime=a))},h.prototype.seekToDate=function(a){},h.prototype.seekToLive=function(){},h.prototype.getDurationInSecs=function(){return this.video.readyState>0?this.video.duration:(t("getDurationInSecs. Video is not ready yet"),0)},h.prototype.applyConfig=function(a,b){t("applyConfig",a,"=",b),"autoPlay"==a&&this.$video.prop(a,b)},h.prototype.setClip=function(a){var b=this.clipReader.getPath(a);this.listenersAdded=!1,t("setClip",b),this.$video.off().one(e.LOAD,j.bind(this)).one(e.LOADED_METADATA,k.bind(this)).on(e.ERROR,s.bind(this)).attr("src",b).trigger(e.LOAD)},h.prototype.getCurrentTimeInSecs=function(){return this.video.currentTime},h.prototype.setAdaptiveBitrateConstraints=function(){b.noop()},h.prototype.enableClosedCaptions=function(a){b.noop()},h.prototype.setSelectedAudioTrackByLanguage=function(a){b.noop()},h.prototype.destroy=function(){return this.reset(),Promise.resolve()},h.prototype.toString=function(){return"MediaElementClient"},h.prototype.clientLibraryName=function(){return""},h.prototype.create=function(a,c){b.noop()},h.prototype.getLiveTime=function(){return this.getDurationInSecs()},h.prototype.isLiveRightNow=function(){return!1},h.prototype.clientLibraryVersion=function(){return""},h.prototype.setAuthenticationCallback=function(a){b.noop()},h.prototype.createPlayer=function(){b.noop()},h.prototype.getSeekableRange=function(){var a=this.getDurationInSecs();return{start:0,end:a,duration:a}},h.prototype.getClientMetrics=function(){return{}},h}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/clients/VideoClientFactory",["lodash/lodash","bam-video-players/utils/VideoUtils","bam-video-players/players/helpers/ClipReader","bam-hls-player/BamHLSPlayerClient","bam-video-players/players/clients/MediaElementClient"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/utils/VideoUtils"),require("bam-video-players/players/helpers/ClipReader"),require("bam-hls-player/BamHLSPlayerClient"),require("bam-video-players/players/clients/MediaElementClient")):a.VideoClientFactory=b(a.lodash,a.VideoUtils,a.ClipReader,a.BAMHLSPlayerClient,a.VideoClient)}(this,function(a,b,c,d,e){function f(a,b,c){var d=i(a,c);return g(a,b,c,d)}function g(b,c,d,e){var f=null,g=null;if(0==a.size(b)&&e==r.UNKNOWN)return Promise.resolve(null);var h=l(e);return h?g=j(e,c,d):(f=s.NOT_SUPPORTED,g=Promise.resolve(null)),g.then(function(a){return!a&&h&&(f=s.UNKNOWN),{type:e,player:a,error:f}})}function h(a,b){var c=r.NATIVE,d=k(c,a,b);return{type:c,player:d,error:null}}function i(b,c){var d=a.get(c,"playerType",null);if(!d){var e=n(b);switch(e){case p.HLS:d=r.HLS;break;case p.MP4:d=r.NATIVE;break;default:d=r.UNKNOWN}d=m(d)}return o("_getPlayerType",d),d}function j(a,b,d){return new Promise(function(e,f){try{var g=k(a,b,d,c);return g&&(g.type=a),e(g)}catch(h){return f(h)}return e(null)})}function k(a,b,f){var g=null,h=null;switch(a){case r.HLS:g=d;break;case r.NATIVE:g=e;break;case"UnitTestFailingConstructor":g=function(){throw new Error("Constructor failure")}}if(g){var h=new g(b,f,c);return h.type=a,h}}function l(a){if(a==r.HLS){var c=b.getVideoSupport();return c.mse}return!0}function m(a){return!b.is.desktop()&&a==r.HLS&&b.browserNativelySupportsHls()?(o("swapPlayerTypeIfNativelySupported",!0),r.NATIVE):a}function n(b){var c=/\.([0-9a-z\/]+)(?:[\?#]|$)/i,d=a.toString(b).match(c),e=a.get(d,1),f=a.first(a.split(e,"/")),g=p.UNKNOWN;switch(f){case q.MP4:g=p.MP4;break;case q.M3U8:g=p.HLS}return o("getVideoType",g,f,e),g}function o(){console.log("[VideoClientFacory]",Array.prototype.slice.call(arguments).join(" "))}var p={HLS:"HLS",MP4:"MP4",UNKNOWN:"UNKNOWN"},q={MP4:"mp4",M3U8:"m3u8",MPD:"mpd"},r={HLS:"HLSPlayer",NATIVE:"HTMLCorePlayer",UNKNOWN:"UNKNOWN_PLAYER"},s={NOT_SUPPORTED:"Browser does not support Media Source Extensions. Media playback is unavailable.",UNKNOWN:"Unknown player type requested"};return{getPlayerClient:f,getPlayerClientByType:g,getPlayerType:i,getNativeClient:h,enums:{players:r,errors:s}}}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/api/PaidInterruptionAPI",["lodash/lodash","bam-video-paid-interruptions/plugins/PaidInterruptionPluginFactory","bam-video-paid-interruptions/models/CuePointVO","bam-video-players/players/clients/VideoClientFactory"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-paid-interruptions/plugins/PaidInterruptionPluginFactory"),require("bam-video-paid-interruptions/models/CuePointVO"),require("bam-video-players/players/clients/VideoClientFactory")):a.PaidInterruptionAPI=b(a.lodash,a.PaidInterruptionPluginFactory,a.CuePointVO,a.VideoClientFactory)}(this,function(a,b,c,d){"use strict";function e(a,b){this.dispatcher.publish(a,b)}function f(){this.adManager&&(this.adManager.dispatcher.off(this.adEvents.AD_START,this.boundFxns.prerollStart),this.adManager.dispatcher.off(this.adEvents.AD_COMPLETE,this.boundFxns.prerollEnd),this.adManager.dispatcher.off(this.adEvents.AD_ERROR,this.boundFxns.prerollError),this.adManager.dispatcher.off(this.adEvents.AD_TIME_UPDATE_ELAPSED,this.boundFxns.timeUpdateElapsed),this.adManager.dispatcher.off(this.adEvents.AD_TIME_UPDATE_REMAINING,this.boundFxns.timeUpdateRemaining),
this.adManager.dispatcher.off(this.adEvents.AD_START,this.boundFxns.midrollStart),this.adManager.dispatcher.off(this.adEvents.AD_COMPLETE,this.boundFxns.midrollEnd),this.adManager.dispatcher.off(this.adEvents.AD_ERROR,this.boundFxns.midrollError),this.adManager.dispatcher.off(this.adEvents.AD_TIME_UPDATE_ELAPSED,this.boundFxns.timeUpdateElapsed),this.adManager.dispatcher.off(this.adEvents.AD_TIME_UPDATE_REMAINING,this.boundFxns.timeUpdateRemaining),this.adManager.dispatcher.off(this.adEvents.AD_START,this.boundFxns.adStartRecurse),this.adManager.dispatcher.off(this.adEvents.AD_AUTOPLAY_BLOCKED,this.boundFxns.adAutoPlayBlocked))}function g(b){var c=a.get(b,"duration");return(!c||!a.isFinite(c)||0>c)&&(c=x),c}function h(a){this.adManager&&(v.call(this,"setVolume"),this.adManager.setVolume(a))}function i(){this.adManager&&(v.call(this,"mute"),this.adManager.mute())}function j(){this.adManager&&(v.call(this,"unmute"),this.adManager.unmute())}function k(){this.adManager&&this.adManager.getCurrentTimeInSecs()}function l(){this.adManager&&this.adManager.getDurationInSecs()}function m(){var a=this.adPlugInState==w.LOADED||this.adPlugInState==w.LOADING;return v.call(this,"isAdPluginLoaded",null!=this.adManager,a),this.adManager&&a}function n(){v.call(this,"_onAdPluginLoaded"),this.ready=!0,this.adPlugInState=w.LOADED}function o(){v.call(this,"_onAdPluginError"),this.ready=null,this.adPlugInState=w.ERROR,this.errFxn&&(this.errFxn.call(),this.errFxn=null)}function p(b,c,d){this.adDuration=a.get(d,"duration",0),this.lastCurrentTime=this.actualTime,this.currentTime=0,b&&(e.call(this,b,{type:c,duration:this.adDuration,currentTime:this.currentTime}),c==this.getAdTypes().PRE?this.errFxn=this.boundFxns.prerollError:c==this.getAdTypes().MID&&(this.errFxn=this.boundFxns.midrollError)),this.adManager.dispatcher.one(this.adEvents.AD_START,this.boundFxns.adStartRecurse)}function q(a,b,c){this.currentTime=0,e.call(this,a,{type:b,duration:this.adDuration,currentTime:this.currentTime})}function r(a,b,c){v.call(this,"_onAdErr",b),e.call(this,a,{type:b})}function s(b,c){this.currentTime=a.get(c,"currentTime",0),this.actualTime=Math.max(this.actualTime,this.lastCurrentTime+this.currentTime),this.dispatcher.publish(this.adEvents.AD_TIME_UPDATE_ELAPSED,{player:this.player,currentTime:this.actualTime,duration:this.adDuration}),this.adManager.dispatcher.one(this.adEvents.AD_TIME_UPDATE_ELAPSED,this.boundFxns.timeUpdateElapsed)}function t(b,c){var d=a.get(c,"remainingTime",0);this.currentTime=this.adDuration-d,this.dispatcher.publish(b,{player:this.player,currentTime:this.currentTime,duration:this.adDuration}),this.adManager.dispatcher.one(this.adEvents.AD_TIME_UPDATE_REMAINING,this.boundFxns.timeUpdateRemaining)}function u(a){v.call(this,"_onAdAutoPlayBlocked",a),this.dispatcher.publish(this.adEvents.AD_AUTOPLAY_BLOCKED)}function v(){this.logger.info("[AbstractHTMLPlayer-PaidInterruptionAPI]",Array.prototype.slice.call(arguments).join(" "))}var w={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",ERROR:"ERROR"},x=96,y=function(b){this.player=b,this.config=b.config,this.eventBus=b.eventBus,this.dispatcher=b.dispatcher,this.logger=b.logger,this.isPreRollAdsEnabled=a.get(this,"config.advertising.preRollAdsEnabled"),this.isMidRollAdsEnabled=a.get(this,"config.advertising.midRollAdsEnabled"),this.isAdsEnabled=this.isPreRollAdsEnabled||this.isMidRollAdsEnabled,this.ready=!1,this.adPlugInState=w.NOT_LOADED,this.errFxn,this.currentTime=0,this.actualTime=0,this.adDuration=0,this.lastCurrentTime=0,this.adEvents=this.eventBus.getRegisteredEventsByKey("AD_EVENTS");var c=this.getEvents(),d=this.getAdTypes();this.boundFxns={},this.boundFxns.prerollStart=a.bind(p,this,c.PREROLL_AD_IS_PLAYING,d.PRE),this.boundFxns.prerollEnd=a.bind(q,this,c.PREROLL_AD_IS_NOT_PLAYING,d.PRE),this.boundFxns.prerollError=a.bind(r,this,c.PREROLL_AD_IS_NOT_PLAYING,d.PRE),this.boundFxns.timeUpdateElapsed=a.bind(s,this,this.adEvents.AD_TIME_UPDATE_ELAPSED),this.boundFxns.timeUpdateRemaining=a.bind(t,this,this.adEvents.AD_TIME_UPDATE_REMAINING),this.boundFxns.midrollStart=a.bind(p,this,c.MIDROLL_AD_IS_PLAYING,d.MID),this.boundFxns.midrollEnd=a.bind(q,this,c.MIDROLL_AD_IS_NOT_PLAYING,d.MID),this.boundFxns.midrollError=a.bind(r,this,c.MIDROLL_AD_IS_NOT_PLAYING,d.MID),this.boundFxns.adStartRecurse=a.bind(p,this,null),this.boundFxns.adAutoPlayBlocked=a.bind(u,this)};return y.prototype.getAdVideoClient=function(b){var c=d.getNativeClient(b),e=c.player,f=this,g={player:{setVolume:function(a){e.setVolume(a),h.call(f,a)},mute:function(){e.mute(),i.call(f)},unmute:function(){e.unmute(),j.call(f)},getCurrentTimeInSecs:function(){var b=e.getCurrentTimeInSecs(),c=k.call(f);return a.max([b,c])},getDurationInSecs:function(){var b=e.getDurationInSecs(),c=l.call(f);return a.max([b,c])},play:function(){e.play()},pause:function(){e.pause()},toString:function(){return e.toString()+"-AdProxy"},load:function(){e.load()}}};return g},y.prototype.getEvents=function(){return{PREROLL_AD_IS_PLAYING:"player.adsApi.prerollAdIsPlaying",PREROLL_AD_IS_NOT_PLAYING:"player.adsApi.prerollsAdIsNotPlaying",MIDROLL_AD_IS_PLAYING:"player.adsApi.midrollAdIsPlaying",MIDROLL_AD_IS_NOT_PLAYING:"player.adsApi.midrollsAdIsNotPlaying"}},y.prototype.getAdTypes=function(){return{PRE:"pre",MID:"mid",POST:"post"}},y.prototype.one=function(a,b){this.dispatcher.one(a,b)},y.prototype.destroy=function(){this.adManager&&(v.call(this,"destroy"),this.adManager.destroy())},y.prototype.reset=function(){this.currentTime=0,this.actualTime=0,this.adDuration=0,this.lastCurrentTime=0},y.prototype.addAdManager=function(c){var d,e=!1;if(this.config&&(this.isPreRollAdsEnabled||this.isMidRollAdsEnabled)){v.call(this,"addAdManager");try{d=c.get(0)}catch(f){d=$(c).get(0)}if(!d)throw new Error("Could not find ad video node");var g=a.get(this.config,"property_state"),h=a.get(this.config,"advertising"),i=a.merge({},g,h);this.adManager=b.getPlugin(d,i),this.adManager&&(this.adManager.attachLogger(this.logger),this.adPlugInState=w.LOADING,this.adManager.dispatcher.one(this.adEvents.AD_PLUGIN_LOADED,n.bind(this)),this.adManager.dispatcher.one(this.adEvents.AD_PLUGIN_ERROR,o.bind(this)),e=!0)}else v.call(this,"did not addAdManager",this.isPreRollAdsEnabled,this.isMidRollAdsEnabled);return e},y.prototype.startPreRoll=function(a,b,c){if(this.isPreRollAdsEnabled&&m.call(this)){v.call(this,"startPreRoll"),this.reset(),f.call(this),this.errFxn=this.boundFxns.prerollError;this.getEvents();return this.adManager.dispatcher.one(this.adEvents.AD_START,this.boundFxns.prerollStart),this.adManager.dispatcher.one(this.adEvents.AD_COMPLETE,this.boundFxns.prerollEnd),this.adManager.dispatcher.one(this.adEvents.AD_ERROR,this.boundFxns.prerollError),this.adManager.dispatcher.one(this.adEvents.AD_TIME_UPDATE_ELAPSED,this.boundFxns.timeUpdateElapsed),this.adManager.dispatcher.one(this.adEvents.AD_TIME_UPDATE_REMAINING,this.boundFxns.timeUpdateRemaining),this.adManager.dispatcher.one(this.adEvents.AD_AUTOPLAY_BLOCKED,this.boundFxns.adAutoPlayBlocked),this.adManager.setClip(a),this.adManager.requestAd(b,c),!0}return this.boundFxns.prerollError(),!1},y.prototype.startMidRoll=function(a,b,d,e){if(this.isMidRollAdsEnabled&&m.call(this)){v.call(this,"startMidRoll"),this.reset(),this.errFxn=this.boundFxns.midrollError;this.getEvents();this.adManager.dispatcher.one(this.adEvents.AD_START,this.boundFxns.midrollStart),this.adManager.dispatcher.one(this.adEvents.AD_COMPLETE,this.boundFxns.midrollEnd),this.adManager.dispatcher.one(this.adEvents.AD_ERROR,this.boundFxns.midrollError),this.adManager.dispatcher.one(this.adEvents.AD_TIME_UPDATE_ELAPSED,this.boundFxns.timeUpdateElapsed),this.adManager.dispatcher.one(this.adEvents.AD_TIME_UPDATE_REMAINING,this.boundFxns.timeUpdateRemaining),this.adManager.setClip(a);var f=g(e),h=new c(f);return this.adManager.startMidRoll(b,d,h),!0}return this.boundFxns.midrollError(),!1},y.prototype.endMidRoll=function(){this.isMidRollAdsEnabled&&this.adManager.endMidRoll()},y.prototype.endPreRoll=function(){this.isPreRollAdsEnabled&&this.adManager.endPreRoll()},y.prototype.setSize=function(a,b,c){this.adManager&&(v.call(this,"setSize",a,b),this.adManager.setSize(a,b,c))},y.prototype.resumeAd=function(){this.adManager&&(v.call(this,"resumeAd"),this.adManager.resumeAd())},y}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/state/playerState",[],b):"object"==typeof module&&module.exports?module.exports=b():a.PlayerState=b()}(this,function(){return{UNKNOWN:"__media_player_state_unknown",EMPTY:"__media_player_state_empty",CLIP_SET:"__media_player_state_clip_set",SLATE_PLAYING:"__media_player_state_slate_playing",MIDROLL_PLAYING:"__media_player_state_midroll_playing",PLAYING:"__media_player_state_playing",PREROLL_PLAYING:"__media_player_state_preroll_playing",PAUSED:"__media_player_state_paused",ENDED:"__media_player_state_ended",MEDIA_ERROR:"__media_player_state_media_error",BUFFERING:"__media_player_state_buffering"}}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/state/sharedStateAPI",[],b):"object"==typeof module&&module.exports?module.exports=b():a.SharedStateAPI=b()}(this,function(){function a(a){this.context=a.context,this.state=a}return a.prototype.getSeekBoundaryConstraints=function(a){var b=10,c=a.startTime,d=a.endTime;return a.isLive||(d-=b),{min:c,max:d}},a.prototype.seek=function(a){this.context.videoClient.seek(a)},a.prototype.seekToDate=function(a){this.context.videoClient.seekToDate(a)},a}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/state/baseState",["require","bam-video-players/players/state/sharedStateAPI","bam-video-players/players/state/emptyState"],b):"object"==typeof module&&module.exports?module.exports=b(require,require("bam-video-players/players/state/sharedStateAPI"),require("bam-video-players/players/state/emptyState")):a.BaseState=b(null,a.SharedStateAPI,a.EmptyState)}(this,function(a,b,c){function d(d){c=c||a("bam-video-players/players/state/emptyState"),this.context=d,this.logger=d?d.logger:null,this.previousState=null,this.sharedAPI=new b(this);var e=this;this.transitions&&!this.clearMedia&&(this.transitions.clearMedia=c),this.transitions&&Object.keys(this.transitions).length&&Object.keys(this.transitions).forEach(function(a){e[a]=function(){var b=Array.prototype.slice.call(arguments),c=e.transitions[a];c||e.warn("State not found for transition:"+a," from state: "+e.key);var d=new c(e.context),f=e.context.dispatcher,g=e.context.events.getEventList();return d.previousState=e,e.context.playerStateHelper.setState(e.context.playerStateKeys.PLAYER_STATE,d),f.publish(g.PlayerEvents.PLAYER_STATE_CHANGED,{currentState:d.key,previousState:e.key,player:e.context}),d.invoke.apply(d,b)}})}function e(a){this.logger?this.logger.warn("[PlayerState]["+this.key+"]",a):console.warn("[PlayerState]["+this.key+"]",a)}return d.prototype.setClip=function(){e.call(this,"PlayerState#setClip is not an available transition for the current state")},d.prototype.startPreroll=function(){e.call(this,"PlayerState#startPreroll is not an available transition for the current state")},d.prototype.startMidroll=function(){e.call(this,"PlayerState#startMidroll is not an available transition for the current state")},d.prototype.endMidroll=function(){e.call(this,"PlayerState#endMidroll is not an available transition for the current state")},d.prototype.play=function(){e.call(this,"PlayerState#play is not an available transition for the current state")},d.prototype.playContent=function(){e.call(this,"PlayerState#playContent is not an available transition for the current state")},d.prototype.pause=function(){e.call(this,"PlayerState#pause is not an available transition for the current state")},d.prototype.seek=function(){e.call(this,"PlayerState#seek is not an available transition for the current state")},d.prototype.seekToDate=function(){e.call(this,"PlayerState#seekToDate is not an available transition for the current state")},d.prototype.buffering=function(){e.call(this,"PlayerState#buffering is not an available transition for the current state")},d.prototype.endBuffering=function(){e.call(this,"PlayerState#endBuffering is not an available transition for the current state")},d.prototype.error=function(){e.call(this,"PlayerState#error is not an available transition for the current state")},d.prototype.getSeekBoundaryConstraints=function(a){return{min:a.startTime,max:a.endTime}},d.prototype.areMetricsAvailable=function(){return!0},d.prototype.isPlaying=function(){return!0},d}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/state/errorState",["require","bam-video-players/players/state/baseState","bam-video-players/players/state/clipSetState","bam-video-players/players/state/playingState"],b):"object"==typeof module&&module.exports?module.exports=b(require,require("bam-video-players/players/state/baseState"),require("bam-video-players/players/state/clipSetState"),require("bam-video-players/players/state/playingState")):a.ErrorState=b(null,a.BaseState,a.ClipSetState,a.PlayingState)}(this,function(a,b,c,d){function e(b){c=c||a("bam-video-players/players/state/clipSetState"),d=d||a("bam-video-players/players/state/playingState"),this.key="MEDIA_ERROR",this.transitions={setClip:c,play:d,error:e},e.prototype["super"].constructor.call(this,b)}return e.prototype=Object.create(b.prototype),e.prototype.constructor=e,e.prototype["super"]=b.prototype,e.prototype.invoke=function(){},e.prototype.isPlaying=function(){return!1},e}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/state/endedState",["require","bam-video-players/players/state/baseState","bam-video-players/players/state/clipSetState","bam-video-players/players/state/errorState","bam-video-players/players/state/playingState"],b):"object"==typeof module&&module.exports?module.exports=b(require,require("bam-video-players/players/state/baseState"),require("bam-video-players/players/state/clipSetState"),require("bam-video-players/players/state/errorState"),require("bam-video-players/players/state/playingState")):a.EndedState=b(null,a.BaseState,a.ClipSetState,a.ErrorState,a.PlayingState)}(this,function(a,b,c,d,e){function f(b){c=c||a("bam-video-players/players/state/clipSetState"),e=e||a("bam-video-players/players/state/playingState"),this.key="ENDED",this.transitions={setClip:c,error:d,restart:e},f.prototype["super"].constructor.call(this,b),this.getSeekBoundaryConstraints=this.sharedAPI.getSeekBoundaryConstraints}return f.prototype=Object.create(b.prototype),f.prototype.constructor=f,f.prototype["super"]=b.prototype,f.prototype.invoke=function(){return!0},f.prototype.seek=function(a){this.sharedAPI.seek(a),this.restart()},f.prototype.seekToDate=function(a){this.sharedAPI.seekToDate(a),this.restart()},f.prototype.areMetricsAvailable=function(){return!1},f.prototype.isPlaying=function(){return!1},f}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/state/pausedState",["require","bam-video-players/players/state/baseState","bam-video-players/players/state/playingState","bam-video-players/players/state/clipSetState","bam-video-players/players/state/endedState","bam-video-players/players/state/errorState"],b):"object"==typeof module&&module.exports?module.exports=b(require,require("bam-video-players/players/state/baseState"),require("bam-video-players/players/state/playingState"),require("bam-video-players/players/state/clipSetState"),require("bam-video-players/players/state/endedState"),require("bam-video-players/players/state/errorState")):a.PausedState=b(null,a.BaseState,a.PlayingState,a.ClipSetState,a.EndedState,a.ErrorState)}(this,function(a,b,c,d,e,f){function g(b){c=c||a("bam-video-players/players/state/playingState"),d=d||a("bam-video-players/players/state/clipSetState"),this.key="PAUSED",this.transitions={play:c,setClip:d,error:f,ended:e},g.prototype["super"].constructor.call(this,b),this.seek=this.sharedAPI.seek}return g.prototype=Object.create(b.prototype),g.prototype.constructor=g,g.prototype["super"]=b.prototype,g.prototype.invoke=function(){this.context.videoClient.pause()},g.prototype.pause=function(){},g.prototype.isPlaying=function(){return!1},g}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/state/bufferingState",["require","bam-video-players/players/state/baseState","bam-video-players/players/state/clipSetState","bam-video-players/players/state/playingState","bam-video-players/players/state/pausedState","bam-video-players/players/state/errorState"],b):"object"==typeof module&&module.exports?module.exports=b(require,require("bam-video-players/players/state/baseState"),require("bam-video-players/players/state/clipSetState"),require("bam-video-players/players/state/playingState"),require("bam-video-players/players/state/pausedState"),require("bam-video-players/players/state/errorState")):a.BufferingState=b(null,a.BaseState,a.ClipSetState,a.PlayingState,a.PausedState,a.ErrorState)}(this,function(a,b,c,d,e,f){function g(b){c=c||a("bam-video-players/players/state/clipSetState"),d=d||a("bam-video-players/players/state/playingState"),e=e||a("bam-video-players/players/state/pausedState"),this.key="BUFFERING",this.transitions={setClip:c,play:d,pause:e,error:f},g.prototype["super"].constructor.call(this,b)}return g.prototype=Object.create(b.prototype),g.prototype.constructor=g,g.prototype["super"]=b.prototype,g.prototype.invoke=function(){},g.prototype.endBuffering=function(){this.context.playerStateHelper.setState("playerState",this.previousState)},g}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/state/midrollPlayingState",["require","lodash/lodash","bam-video-players/players/state/baseState","bam-video-players/players/state/playingState","bam-video-players/players/state/clipSetState","bam-video-players/players/state/errorState","bam-video-players/players/state/emptyState"],b):"object"==typeof module&&module.exports?module.exports=b(require,require("lodash/lodash"),require("bam-video-players/players/state/baseState"),require("bam-video-players/players/state/playingState"),require("bam-video-players/players/state/clipSetState"),require("bam-video-players/players/state/errorState"),require("bam-video-players/players/state/emptyState")):a.MidrollPlayingState=b(null,a._,a.BaseState,a.PlayingState,a.SlateState,a.ClipSetState,a.ErrorState,a.EmptyState)}(this,function(a,b,c,d,e,f,g){function h(b){e=e||a("bam-video-players/players/state/clipSetState"),g=g||a("bam-video-players/players/state/emptyState"),d=d||a("bam-video-players/players/state/playingState"),this.key="MIDROLL_PLAYING",this.transitions={playClip:d,playEmpty:g,setClip:e,error:f},this.hasClearedMedia=!1,h.prototype["super"].constructor.call(this,b)}return h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.prototype["super"]=c.prototype,h.prototype.invoke=function(){this.hasClearedMedia=!1,this.context.playerUIHelper.showHTMLElement(this.context.$htmlAdViewContainer)},h.prototype.shouldPlayThroughOnClear=function(){return b.get(this,"context.config.advertising.adPlayThroughOnClear.midroll",!1)},h.prototype.clearMedia=function(){this.hasClearedMedia=!0,this.shouldPlayThroughOnClear()?this.context.playerStateHelper.setState(this.context.playerStateKeys.AD_PLAYING,!0):this.context.ads.endMidRoll()},h.prototype.endMidroll=function(){this.hasClearedMedia?this.playEmpty():this.playClip()},h}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/state/playingState",["require","bam-video-players/players/state/baseState","bam-video-players/players/state/pausedState","bam-video-players/players/state/clipSetState","bam-video-players/players/state/endedState","bam-video-players/players/state/bufferingState","bam-video-players/players/state/errorState","bam-video-players/players/state/midrollPlayingState"],b):"object"==typeof module&&module.exports?module.exports=b(require,require("bam-video-players/players/state/baseState"),require("bam-video-players/players/state/pausedState"),require("bam-video-players/players/state/clipSetState"),require("bam-video-players/players/state/endedState"),require("bam-video-players/players/state/bufferingState"),require("bam-video-players/players/state/errorState"),require("bam-video-players/players/state/midrollPlayingState")):a.PlayingState=b(null,a.BaseState,a.PausedState,a.ClipSetState,a.EndedState,a.BufferingState,a.ErrorState,a.MidrollPlayingState)}(this,function(a,b,c,d,e,f,g,h){function i(b){d=d||a("bam-video-players/players/state/clipSetState"),this.key="PLAYING",this.transitions={play:i,pause:c,setClip:d,ended:e,buffering:f,error:g,startMidroll:h},i.prototype["super"].constructor.call(this,b),this.getSeekBoundaryConstraints=this.sharedAPI.getSeekBoundaryConstraints,this.seek=this.sharedAPI.seek,this.seekToDate=this.sharedAPI.seekToDate}return i.prototype=Object.create(b.prototype),i.prototype.constructor=i,i.prototype["super"]=b.prototype,i.prototype.invoke=function(){this.context.videoClient.play()},i}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/helpers/SlatePlaybackHelper",["lodash/lodash","bam-video-players/events/SlateEvents"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/events/SlateEvents")):a.SlatePlaybackHelper=b(a.lodash,a.SlateEvents)}(this,function(a,b){function c(b){return a.get(b,"urls[0].href")}function d(){this.slates=[],this.slatesToPlay=[],this.currentSlate=null,this.isPaused=!1,this.isPlaying=!1,this.isComplete=!1;var a=this;this.slatePlaybackPromise=new Promise(function(b,c){a.playbackPromiseResolve=b,a.playbackPromiseReject=c})}function e(){this&&this.logger?this.logger.info("[SlatePlaybackHelper]",Array.prototype.slice.call(arguments).join(" ")):console.log("[SlatePlaybackHelper]",Array.prototype.slice.call(arguments).join(" "))}function f(){try{this.player.videoClient.pause()}catch(a){e.call(this,"unable to pause slate::",a.message),this.dispatcher.publish(b.SLATE_ERROR,{currentSlate:this.currentSlate,message:a.message})}}function g(){try{this.player.videoClient.play()}catch(a){e.call(this,"unable to play slate::",a.message),this.dispatcher.publish(b.SLATE_ERROR,{currentSlate:this.currentSlate,message:a.message}),this.playbackPromiseReject()}}function h(){var a=c(this.currentSlate);try{this.player.videoClient.setClip({path:a}),g.call(this)}catch(d){e.call(this,"unable to setClip::",d.message),this.dispatcher.publish(b.SLATE_ERROR,{currentSlate:this.currentSlate,message:d.message}),this.playbackPromiseReject()}}function i(){e.call(this,"SLATE_COMPLETE"),this.dispatcher.publish(b.SLATE_COMPLETED),this.isComplete=!0,this.playbackPromiseResolve()}function j(){this.isPaused=!1,e.call(this,"SLATE_RESUMED",a.size(this.slatesToPlay)),this.dispatcher.publish(b.SLATE_RESUMED,{currentSlate:this.currentSlate}),g.call(this)}function k(){this.isPlaying=!0;var c=null;e.call(this,"SLATE_STARTED",a.size(this.slatesToPlay)),this.currentSlate=this.slatesToPlay.shift(),this.dispatcher.publish(b.SLATE_STARTED,{currentSlate:this.currentSlate}),this.dispatcher.publish(b.SLATE_CHANGED,{currentSlate:this.currentSlate,lastSlate:c}),h.call(this)}var l=function(b){this.player=b,this.dispatcher=b.dispatcher,this.logger=a.get(b,"logger"),d.call(this)};return l.prototype.destroy=function(){},l.prototype.setSlates=function(b){d.call(this),this.slates=b,this.slatesToPlay=a.cloneDeep(b)},l.prototype.getSlates=function(){return this.slates},l.prototype.forcePlayAllForTesting=function(){var a=this,b=setInterval(function(){a.playNext()||clearInterval(b)},10);return this.play()},l.prototype.play=function(){return this.isPlaying&&!this.isPaused?this.slatePlaybackPromise:(0!==a.size(this.slatesToPlay)||this.isPaused?this.isPaused?j.call(this):k.call(this):i.call(this),this.slatePlaybackPromise)},l.prototype.pause=function(){this.isPaused=!0,e.call(this,"SLATE_PAUSED"),this.dispatcher.publish(b.SLATE_PAUSED,{currentSlate:this.currentSlate}),f.call(this)},l.prototype.playNext=function(){if(this.isComplete)return!1;e.call(this,"playNext.slates",a.size(this.slatesToPlay));var c=this.currentSlate;return this.currentSlate=this.slatesToPlay.shift(),null==this.currentSlate?i.call(this):(this.dispatcher.publish(b.SLATE_CHANGED,{currentSlate:this.currentSlate,lastSlate:c}),h.call(this)),!0},l.prototype.getSlateCount=function(){return a.size(this.slates)},l.prototype.getRemainingSlates=function(){return a.size(this.slatesToPlay)},l.prototype.getCurrentSlateUrl=function(){return c(this.currentSlate)},l}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/state/slateState",["require","lodash/lodash","bam-video-players/players/helpers/SlatePlaybackHelper","bam-video-players/players/state/baseState","bam-video-players/players/state/playingState","bam-video-players/players/state/clipSetState","bam-video-players/players/state/errorState"],b):"object"==typeof module&&module.exports?module.exports=b(require,require("lodash/lodash"),require("bam-video-players/players/helpers/SlatePlaybackHelper"),require("bam-video-players/players/state/baseState"),require("bam-video-players/players/state/playingState"),require("bam-video-players/players/state/clipSetState"),require("bam-video-players/players/state/errorState")):a.SlateState=b(null,a.lodash,a.SlatePlaybackHelper,a.BaseState,a.PlayingState,a.ClipSetState,a.ErrorState)}(this,function(a,b,c,d,e,f,g){function h(a){a&&this.clip&&this.setClip(this.clip),this.playContent()}function i(){var a=this.context.utils.getClipReader(),b=this.context.playerStateKeys;this.clip=this.context.playerStateHelper.getState(b.CLIP);var c=a.getSlates(this.clip);return c}function j(a){this.slatePlaybackHelper=new c(this.context),this.slatePlaybackHelper.setSlates(a),this.slatePlaybackHelper.play().then(function(){h.call(this,!0)}.bind(this))["catch"](function(){h.call(this,!0)}.bind(this))}function k(b){f=f||a("bam-video-players/players/state/clipSetState"),this.key="SLATE_PLAYING",this.transitions={setClip:f,playContent:e,error:g},k.prototype["super"].constructor.call(this,b),this.seek=this.sharedAPI.seek}return k.prototype=Object.create(d.prototype),k.prototype.constructor=k,k.prototype["super"]=d.prototype,k.prototype.invoke=function(){var a=i.call(this);b.size(a)>0?j.call(this,a):h.call(this,!1)},k.prototype.pause=function(){this.slatePlaybackHelper.pause()},k.prototype.play=function(){this.slatePlaybackHelper.play()},k.prototype.ended=function(){return this.slatePlaybackHelper.playNext(),!1},k}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/state/prerollPlayingState",["require","lodash/lodash","bam-video-players/players/state/baseState","bam-video-players/players/state/playingState","bam-video-players/players/state/slateState","bam-video-players/players/state/clipSetState","bam-video-players/players/state/errorState","bam-video-players/players/state/emptyState"],b):"object"==typeof module&&module.exports?module.exports=b(require,require("lodash/lodash"),require("bam-video-players/players/state/baseState"),require("bam-video-players/players/state/playingState"),require("bam-video-players/players/state/slateState"),require("bam-video-players/players/state/clipSetState"),require("bam-video-players/players/state/errorState"),require("bam-video-players/players/state/emptyState")):a.PrerollPlayingState=b(null,a._,a.BaseState,a.PlayingState,a.SlateState,a.ClipSetState,a.ErrorState,a.EmptyState)}(this,function(a,b,c,d,e,f,g,h){function i(b){f=f||a("bam-video-players/players/state/clipSetState"),e=e||a("bam-video-players/players/state/slateState"),h=h||a("bam-video-players/players/state/emptyState"),this.key="PREROLL_PLAYING",this.transitions={playClip:e,playEmpty:h,setClip:f,error:g},this.hasClearedMedia=!1,i.prototype["super"].constructor.call(this,b)}return i.prototype=Object.create(c.prototype),i.prototype.constructor=i,i.prototype["super"]=c.prototype,i.prototype.invoke=function(){this.hasClearedMedia=!1,this.context.ui.showPlayer(),this.context.playerUIHelper.showHTMLElement(this.context.$htmlAdViewContainer),this.context.playerUIHelper.hideHTMLElement(this.context.$video),this.context.videoClient.pause()},i.prototype.shouldPlayThroughOnClear=function(){return b.get(this,"context.config.advertising.adPlayThroughOnClear.preroll",!0)},i.prototype.clearMedia=function(){this.hasClearedMedia=!0,this.shouldPlayThroughOnClear()?this.context.playerStateHelper.setState(this.context.playerStateKeys.AD_PLAYING,!0):this.context.ads.endPreRoll()},i.prototype.play=function(){this.hasClearedMedia?this.playEmpty():this.playClip()},i}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/state/clipSetState",["bam-video-players/players/state/baseState","bam-video-players/players/state/prerollPlayingState","bam-video-players/players/state/playingState","bam-video-players/players/state/slateState","bam-video-players/players/state/errorState"],b):"object"==typeof module&&module.exports?module.exports=b(require("bam-video-players/players/state/baseState"),require("bam-video-players/players/state/prerollPlayingState"),require("bam-video-players/players/state/playingState"),require("bam-video-players/players/state/slateState"),require("bam-video-players/players/state/errorState")):a.ClipSetState=b(a.BaseState,a.PrerollPlayingState,a.PlayingState,a.SlateState,a.ErrorState)}(this,function(a,b,c,d,e){function f(a){this.key="CLIP_SET",this.transitions={startPreroll:b,play:d,setClip:f,error:e},f.prototype["super"].constructor.call(this,a)}function g(a){this.logger?this.logger.info("[PlayerState]["+this.key+"]",a):console.log("[PlayerState]["+this.key+"]",a)}return f.prototype=Object.create(a.prototype),f.prototype.constructor=f,f.prototype["super"]=a.prototype,f.prototype.invoke=function(a){return this.context.videoClient.setClip(a)},f.prototype.seek=function(a,b){g.call(this,"seek. Setting startTime to "+a+". Then calling play()");var c=this.context.playerStateHelper.getState(this.context.playerStateHelper.validKeys.CLIP),d=0!==a?a:b;c&&(c.startTime={offset:d,useSecs:!0}),this.context.play()},f.prototype.seekToDate=function(a){g.call(this,"seekToDate. Setting startdate to "+a+". Then calling play()");var b=this.context.playerStateHelper.getState(this.context.playerStateHelper.validKeys.CLIP);b&&(b.startTime={date:a}),this.context.play()},f.prototype.isPlaying=function(){return!1},f}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/state/emptyState",["bam-video-players/players/state/baseState","bam-video-players/players/state/clipSetState","bam-video-players/players/state/errorState"],b):"object"==typeof module&&module.exports?module.exports=b(require("bam-video-players/players/state/baseState"),require("bam-video-players/players/state/clipSetState"),require("bam-video-players/players/state/errorState")):a.EmptyState=b(a.BaseState,a.ClipSetState,a.ErrorState)}(this,function(a,b,c){function d(a){this.key="EMPTY",this.transitions={setClip:b,error:c},d.prototype["super"].constructor.call(this,a)}return d.prototype=Object.create(a.prototype),d.prototype.constructor=d,d.prototype["super"]=a.prototype,d.prototype.invoke=function(){try{this.context.videoClient.setClip({path:null}),this.context.events.publish(this.context.events.getEventList().PlayerEvents.MEDIA_CLEARED)}catch(a){this.logger?this.logger.info("[PlayerState]["+this.key+"]",a):console.warn("[PlayerState]["+this.key+"]",a)}},d.prototype.clearMedia=function(){return!0},d.prototype.areMetricsAvailable=function(){return!1},d.prototype.isPlaying=function(){return!1},d}),function(a,b){"function"==typeof define&&define.amd?define("intent-registry/RegistryDefaults",["lodash/lodash","bam-media-utils/logging/logLevel","bam-media-utils/logging/logger"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-media-utils/logging/logLevel"),require("bam-media-utils/logging/logger")):a.RegistryDefaults=b(a.lodash,a.MediaLogLevel,a.MediaLogEvent);
}(this,function(a,b,c){"use strict";function d(a){f.info("[RegistryDefaults].setupDefaultIntents")}var e=a.get(window.mediaConfig,"videocore.logging.level","info"),f=new c(b[e]);return{apply:d}}),function(a,b){"function"==typeof define&&define.amd?define("intent-registry/IntentRegistry",["lodash/lodash","bandwagon/bandwagon","intent-registry/RegistryDefaults","bam-media-utils/logging/logLevel","bam-media-utils/logging/logger"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bandwagon/bandwagon"),require("intent-registry/RegistryDefaults"),require("bam-media-utils/logging/logLevel"),require("bam-media-utils/logging/logger")):a.IntentRegistry=b(a.lodash,a.Bandwagon,a.RegistryDefaults,a.MediaLogLevel,a.MediaLogger)}(this,function(a,b,c,d,e){"use strict";function f(){this.debugID="IntentRegistry"+Date.now(),this.registeredIntents={},this.defaultIntents={},this.dispatcher=b.getInstanceByKey(t),p("create",this)}function g(){return q||(p("getInstance"),q=new f,q.addListeners(u.enums),o()),q}function h(b,c){var d=c.type,e=a.endsWith(d,"_default");e&&(d=a.replace(d,"_default","")),i(d,b,e)}function i(a,b,c){g().setIntent(a,b,c)}function j(b){return a.isNull(b)?b:a.isArray(b)?b:[b]}function k(a,b){return new Promise(function(c,d){try{b=j(b);var e=g().executeIntent(a,b);return c(e)}catch(f){var h=new Error;return h.message=f.message,h.stack=f.stack,d(h)}})}function l(a,b){b=j(b);var c=g().executeIntent(a,b);return c}function m(){p("clearAll");var a=g();a&&a.removeListeners(u.enums),a.registeredIntents={},a.defaultIntents={},a.addListeners(u.enums)}function n(){p("clearIntents"),g().registeredIntents={}}function o(){s.info("applyDefaultIntents"),c.apply(u)}function p(){s.info("[IntentRegistry]",Array.prototype.slice.call(arguments).join(" "))}var q,r=a.get(window.mediaConfig,"videocore.logging.level","info"),s=new e(d[r]),t="PROPERTY_INTENTIONS";f.prototype={addListeners:function(c){b.registerEvents(t,c),a.each(c,function(a){this.dispatcher.on(a,h)}.bind(this))},removeListeners:function(b){a.each(b,function(a){this.dispatcher.off(a,h)}.bind(this))},setIntent:function(b,c,d){p("setIntent",b,d);var e=d?this.defaultIntents:this.registeredIntents;a.set(e,b,c)},executeIntent:function(a,b){p("executeIntent",a,this);var c=this.getIntent(a),d=this.getIntent(a,!0),e=null;try{e=c.apply(null,b)}catch(f){p("switching to default intent("+a+"). Error processing intent:",f.message);var g=this.getRegistryError(a,f);if(g)throw g;e=d.apply(null,b)}return e},getRegistryError:function(a,b){var c=this.getIntent(a),d=this.getIntent(a,!0);return d?null:c?b:new Error('There is no registered intent named "'+a+'"')},getIntent:function(b,c){var d=a.get(this.registeredIntents,b);return(!d||c)&&(d=a.get(this.defaultIntents,b)),d},toString:function(){return"IntentRegistry."+this.debugID}};var u={set:{intent:{property:a.partialRight(i,!1),"default":a.partialRight(i,!0)}},get:{intent:{async:k,sync:l}},enums:{freewheel:"freewheelIntention",freewheel_default:"freewheelIntention_default",xhrCallback:"xhrCallbackIntention",xhrCallback_default:"xhrCallbackIntention_default"},bandwagonKey:t,clear:{all:m,intents:n},applyDefaults:o},q=g();return u}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/AbstractHTMLPlayer",["jquery","lodash/lodash","bandwagon/bandwagon","check-types/src/check-types.min","bam-video-players/valueObjects/MediaClipVO","bam-video-players/players/helpers/ClipReader","bam-video-players/players/helpers/TimeCodeHelper","bam-video-players/utils/PlayerInfoHelper","bam-video-players/players/VideoPlayerFactory","bam-video-players/events/PlayerEvents","bam-video-players/events/ErrorEvents","bam-video-players/events/UserEvents","bam-video-players/events/SlateEvents","bam-video-players/events/FullScreenEvents","bam-video-players/events/VideoClientEvents","bam-video-players/events/ChromecastRequestEvents","bam-video-players/events/ChromecastResponseEvents","bam-video-players/players/events/PlayerDispatcher","bam-video-players/players/ui/helpers/PlayerUIHelper","bam-video-players/players/ui/helpers/PlayerUIManager","bam-video-players/players/helpers/PlayerStateHelper","bam-video-players/players/helpers/CallbackRegistry","bam-video-players/players/helpers/UserInteractionHelper","bam-video-players/utils/VideoQualityManager","bam-video-players/players/helpers/MediaMetricsManager","bam-video-players/valueObjects/SeekableRangeVO","bam-video-players/valueObjects/ScrubbableRangeVO","bam-video-players/valueObjects/ABRConstraintsVO","bam-video-players/players/api/PaidInterruptionAPI","bam-video-players/players/state/playerState","bam-video-players/players/state/emptyState","intent-registry/IntentRegistry","bam-media-utils/logging/logLevel","bam-media-utils/logging/logger","device/device","bam-video-players/utils/DateTimeHelper"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bandwagon/bandwagon"),require("check-types/src/check-types.min"),require("bam-video-players/valueObjects/MediaClipVO"),require("bam-video-players/players/helpers/ClipReader"),require("bam-video-players/players/helpers/TimeCodeHelper"),require("bam-video-players/utils/PlayerInfoHelper"),require("bam-video-players/players/VideoPlayerFactory"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/ErrorEvents"),require("bam-video-players/events/UserEvents"),require("bam-video-players/events/SlateEvents"),require("bam-video-players/events/FullScreenEvents"),require("bam-video-players/events/VideoClientEvents"),require("bam-video-players/events/ChromecastRequestEvents"),require("bam-video-players/events/ChromecastResponseEvents"),require("bam-video-players/players/events/PlayerDispatcher"),require("bam-video-players/players/ui/helpers/PlayerUIHelper"),require("bam-video-players/players/ui/helpers/PlayerUIManager"),require("bam-video-players/players/helpers/PlayerStateHelper"),require("bam-video-players/players/helpers/CallbackRegisty"),require("bam-video-players/players/helpers/UserInteractionHelper"),require("bam-video-players/utils/VideoQualityManager"),require("bam-video-players/players/helpers/MediaMetricsManager"),require("bam-video-players/valueObjects/SeekableRangeVO"),require("bam-video-players/valueObjects/ScrubbableRangeVO"),require("bam-video-players/valueObjects/ABRConstraintsVO"),require("bam-video-players/players/api/PaidInterruptionAPI"),require("bam-video-players/players/state/playerState"),require("bam-video-players/players/state/emptyState"),require("intent-registry/IntentRegistry"),require("bam-media-utils/logging/logLevel"),require("bam-media-utils/logging/logger"),require("device/device"),require("bam-video-players/utils/DateTimeHelper")):a.AbstractHTMLPlayer=b(a.jQuery,a._,a.Bandwagon,a.check,a.MediaClipVO,a.ClipReader,a.TimeCodeHelper,a.PlayerInfoHelper,a.VideoPlayerFactory,a.PlayerEvents,a.ErrorEvents,a.UserEvents,a.SlateEvents,a.FullScreenEvents,a.VideoClientEvents,a.ChromecastRequestEvents,a.ChromecastResponseEvents,a.PlayerDispatcher,a.PlayerUIHelper,a.PlayerUIManager,a.PlayerStateHelper,a.CallbackRegistry,a.UserInteractionHelper,a.VideoQualityManager,a.MediaMetricsManager,a.SeekableRangeVO,a.ScrubbableRangeVO,a.ABRConstraintsVO,a.PaidInterruptionAPI,a.PlayerState,a.EmptyState,a.IntentRegistry,a.MediaLogLevel,a.MediaLogger,a.deviceBootstrap,a.DateTimeHelper)}(this,function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J){"use strict";function K(a,c,d,e,f){Hc=b.get(a,"controls.offset_in_sec_jump_ff",10),Ic=b.get(a,"controls.offset_in_sec_jump_rw",10),L.call(this,a,c);var g=b.get(a,"logging.level","warn");this._errorMsg=Jc,d&&(Dc.call(this,"constructor: constructed videoClient"),this.videoClient=d),e&&(this.dispatcher=e),this.logger=f||new H(G[g]),this.playerStateHelper=new u(this.toString(),!0),this.playerStateKeys=this.playerStateHelper.validKeys,this.mediaMetricsManager=new y(this.id,this),this.api={},this.api.ads=ja.call(this),this.api.bitrates=Ua.call(this),this.api.debug=N.call(this),this.api.events=Q.call(this),this.api.meta=S.call(this),this.api.captions=Na.call(this),this.api.audioTracks=Ra.call(this),this.api.metrics=Ca.call(this),this.api.state=Ea.call(this),this.api.timecode=Ma.call(this),this.api.ui=X.call(this),this.api.utils=ia.call(this),b.each(this.api,function(a,b){this[b]=a}.bind(this)),Dc.call(this,"constructor",this.id),P.call(this,G[g]),Fa.call(this,this.playerStateKeys.PLAYER_STATE,new E(this)),Cb.call(this,j.PLAYER_INITIALIZING),b.get(a,"html5.callInitOnCreation",!0)&&this.init.call(this)}function L(d,e){this.id="player"+(new Date).getTime(),this.config=d;var f=b.get(d,"property_state.container",null);this.$container=a(f),this.$document=a(e),this.eventBus=c;var g=f||this.id;this.dispatcher=new r(c.getInstanceByKey(g)),this.overlays={},this.isInitialized=!1}function M(a,c,d){var e=a;b.isFinite(a)||(e=null);var f=c;b.isFinite(c)||(f=null);var g=d;b.isUndefined(d)&&(g=!0);var h=new A(e,f,g);Fa.call(this,this.playerStateKeys.SCRUBBABLE_RANGE,h),Fa.call(this,this.playerStateKeys.SCRUBBER_END_REACHED_FIRED,!1),Dc.call(this,"_setScrubbableRange:","scrubbableRange","=>",h)}function N(){var a=this;return{disableLogging:function(){P.call(a,G.warn)},enableLogging:function(){P.call(a,G.info)},getLogLevel:function(){return Ga.call(a,a.playerStateKeys.LOG_LEVEL)},toggleDebugPanel:function(){O.call(a)}}}function O(){var a=Ga.call(this,this.playerStateKeys.DEBUG_PANEL_SHOWING)||!1;a?(Cb.call(this,j.OVERLAY_DEBUG_HIDE),Fa.call(this,this.playerStateKeys.DEBUG_PANEL_SHOWING,!1)):(this.metrics.getMediaMetrics(),Cb.call(this,j.OVERLAY_DEBUG_SHOW),Fa.call(this,this.playerStateKeys.DEBUG_PANEL_SHOWING,!0))}function P(a){Fa.call(this,this.playerStateKeys.LOG_LEVEL,a),this.logger.setLogLevel(a)}function Q(){var a=this;return{getEventList:function(){return R.call(a)},publish:Cb.bind(a)}}function R(){return{PlayerEvents:j,VideoClientEvents:o,AdEvents:this.eventBus.getRegisteredEventsByKey("AD_EVENTS"),UserEvents:l,SlateEvents:m,ChromecastRequestEvents:p,ChromecastResponseEvents:q,ErrorEvents:k}}function S(){var a=this;return{getVideoClientType:T.bind(a),getVideoClientAdapterName:U.bind(a),getVideoClientLibraryName:V.bind(a),getVideoClientLibraryVersion:W.bind(a)}}function T(){return this.currentVideoClientType}function U(){var a="";try{a=this.currentVideoClient&&this.currentVideoClient.toString?this.currentVideoClient.toString():""}catch(b){Ec("_getVideoClientAdapterName: could not find currentVideoClient.toString")}return a}function V(){var a="";try{a=this.currentVideoClient&&this.currentVideoClient.clientLibraryName?this.currentVideoClient.clientLibraryName():""}catch(b){Ec("_getVideoClientLibraryName: could not find currentVideoClient.clientLibraryName")}return a}function W(){var a="";try{a=this.currentVideoClient&&this.currentVideoClient.clientLibraryVersion?this.currentVideoClient.clientLibraryVersion():""}catch(b){Ec.call(this,"_getVideoClientLibraryVersion: could not find currentVideoClient.version")}return a}function X(){var a=this;return{showPlayer:function(){Dc.call(a,"showPlayer:"),a.playerUIHelper.showPlayer(a.$container),Cc.call(a)},hidePlayer:function(){Dc.call(a,"hidePlayer"),a.playerUIHelper&&a.playerUIHelper.hidePlayer(a.$container)},enterFullScreen:$.bind(a),exitFullScreen:_.bind(a),showPoster:function(b){ba.call(a,b)},showOverlay:Y.bind(a),hideOverlay:Z.bind(a),showControls:wb.bind(a),hideControls:vb.bind(a),resetControlsVisibility:ha.bind(a),destroyControls:zb.bind(a),getHeight:fa.bind(a),getWidth:ga.bind(a)}}function Y(a){var c=this,d=b.get(this,"overlays",{});b.each(b.keys(d),function(d){(null==a||b.includes(a,d))&&c.overlays[d].show()})}function Z(a){var c=this,d=b.get(this,"overlays",{});b.each(b.keys(d),function(d){(null==a||b.includes(a,d))&&c.overlays[d].hide()})}function $(){var a=this.$fullScreenDiv.get(0);Ga.call(this,this.playerStateKeys.IS_FULL_SCREEN);Dc.call(this,"enterFullScreen:",a),a&&!this.isFullScreen&&this.playerUIHelper.enterFullScreen(a)}function _(){Dc.call(this,"exitFullScreen:");var a=Ga.call(this,this.playerStateKeys.IS_FULL_SCREEN);a&&this.playerUIHelper.exitFullScreen()}function aa(b,c){Dc.call(this,"_resize: width="+b+", height="+c),b&&c&&Xa.call(this,b,c);var d=Ga.call(this,this.playerStateKeys.WIDTH),e=Ga.call(this,this.playerStateKeys.HEIGHT);Za.call(this,d,e),this.playerUIHelper&&this.playerUIHelper.resize(d,e,this.$container,a(this.htmlView)),Cb.call(this,j.MEDIA_RESIZE)}function ba(a){da.call(this),this.pause(),Cb.call(this,j.SHOW_POSTER,{url:a})}function ca(){ea.call(this);var a=Ga.call(this,this.playerStateKeys.AUTORUN_PERMISSION_DENIED)===!0;a||(jb.call(this,this.adVideoClient),jb.call(this,this.videoClient)),this.play()}function da(){Dc.call(this,"_adjustUIforShowPoster"),vb.call(this,!0),this.ui.hidePlayer()}function ea(){Dc.call(this,"_adjustUIforHidePoster"),wb.call(this,!0),this.ui.showPlayer()}function fa(){return Dc.call(this,"_getHeight"),b.get(this,"htmlView.clientHeight",void 0)}function ga(){return Dc.call(this,"_getWidth"),b.get(this,"htmlView.clientWidth",void 0)}function ha(){Cb.call(this,l.RESET_CONTROLS_VISIBILITY)}function ia(){var a=this;return{xhrSetupCallback:function(c){b.isFunction(c)?(Dc.call(a,"configSetXHRCredentials"),a.callbackRegistry.xhrCallback=c):Ec.call(a,"configSetXHRCredentials was not called with a valid function:",c.toString())},getVideoElement:function(){return a.$video||a.htmlNode},getAdVideoElement:function(){return a.htmlAdView},getDevice:function(){return I()},getClipReader:function(){return f},getEventList:function(){return R.call(a)}}}function ja(){var a=this;return this.adsAPI=new C(this),{adIsPlaying:na.bind(a),endMidRoll:wa.bind(a),endPreRoll:xa.bind(a),startMidRoll:va.bind(a),viewMidRollAndContentDebugToggle:function(b){Dc.call(a,"viewMidRollAndContentDebugToggle",b),a.$htmlAdViewContainer&&a.playerUIHelper.showMidRollAndContentTogether(b,a.$htmlAdViewContainer)}}}function ka(){Dc.call(this,"prepForAds",this.adsAPI.isAdsEnabled,"inited =",Ga.call(this,this.playerStateKeys.ADS_INITED)),Ga.call(this,this.playerStateKeys.ADS_INITED)||this.adsAPI.isAdsEnabled&&(Dc.call(this,"prepForAds.initializing..."),Fa.call(this,this.playerStateKeys.ADS_INITED,!0),ma.call(this,this.htmlAdView),this.adVideoClient=this.adsAPI.getAdVideoClient(this.htmlAdView).player,this.adsAPI.isPreRollAdsEnabled?this.playerUIHelper.showHTMLElement(this.$htmlAdViewContainer):this.playerUIHelper.hideHTMLElement(this.$htmlAdViewContainer))}function la(a){Dc.call(this,"setAdvertisingProps:"),a=a||{},a.freewheelProps=F.get.intent.sync(F.enums.freewheel,[a])}function ma(a){if(!Ga.call(this,this.playerStateKeys.HAS_AD_MANAGER))if(this.adsAPI.addAdManager(a)){Dc.call(this,"addAdManager"),Fa.call(this,this.playerStateKeys.HAS_AD_MANAGER,!0),this.adControls&&this.adControls.destroy();var c=b.get(this.config,"html5.useLegacyControls",!0);c&&(this.adControls=this.playerUIHelper.addAdControls(this.adControls,this)),Ba.call(this)}else Fa.call(this,this.playerStateKeys.HAS_AD_MANAGER,!1)}function na(){return 1==Ga.call(this,this.playerStateKeys.AD_PLAYING)}function oa(){var a=Ga.call(this,this.playerStateKeys.HAS_AD_MANAGER),b=Ga.call(this,this.playerStateKeys.IS_RESUMED),c=this.adsAPI.isPreRollAdsEnabled,d=Ga.call(this,this.playerStateKeys.IS_PRE_ROLL_FINISHED),e=(a&&!b&&c&&!d)===!0;return Dc.call(this,"shouldPlayPreroll: shouldPlayAd=",e,"adManager=",a,"!isResumed=",!b,"preRollAdsEnabled=",c,"isPrerollComplete=",d),e}function pa(){return Ga.call(this,this.playerStateKeys.IS_PRE_ROLL_PLAYING)}function qa(){Dc.call(this,"setInitialAdVolume. isAdPlaying:",Ga.call(this,this.playerStateKeys.AD_PLAYING)),Bb.call(this)}function ra(a){Dc.call(this,"startPreRoll"),Fa.call(this,this.playerStateKeys.AD_PLAYING,!0),Fa.call(this,this.playerStateKeys.IS_PRE_ROLL_PLAYING,!0),Fa.call(this,this.playerStateKeys.IS_PRE_ROLL_FINISHED,!1),qa.call(this);var b=this.adsAPI.getEvents();this.adsAPI.one(b.PREROLL_AD_IS_PLAYING,ta.bind(this)),this.adsAPI.one(b.PREROLL_AD_IS_NOT_PLAYING,ua.bind(this)),this.adsAPI.one(this.utils.getEventList().AdEvents.AD_AUTOPLAY_BLOCKED,yc.bind(this,{errorObj:{message:"AD_AUTOPLAY_BLOCKED"}})),this.adsAPI.startPreRoll(a,this.htmlAdView,this.$htmlAdViewContainer.get(0))}function sa(){Dc.call(this,"resumePreRoll"),this.adsAPI.resumeAd()}function ta(a){Dc.call(this,"_onPreRollAdStart",JSON.stringify(a)),vb.call(this,!0);var b=Ga.call(this,this.playerStateKeys.PLAYER_STATE);b.startPreroll(),Cb.call(this,this.utils.getEventList().AdEvents.AD_START,a),Cb.call(this,j.OVERLAY_LOADING_HIDE)}function ua(a){Dc.call(this,"_onPreRollAdNotPlaying"),Fa.call(this,this.playerStateKeys.AD_PLAYING,!1),Fa.call(this,this.playerStateKeys.IS_PRE_ROLL_PLAYING,!1),Fa.call(this,this.playerStateKeys.IS_PRE_ROLL_FINISHED,!0),Cb.call(this,this.utils.getEventList().AdEvents.AD_COMPLETE,a),this.playerUIHelper.hideHTMLElement(this.$htmlAdViewContainer),this.playerUIHelper.showHTMLElement(this.$video),wb.call(this,!0),db.call(this)}function va(a){if(this.adsAPI.isAdsEnabled&&(Dc.call(this,"startMidRoll"),!Ga.call(this,this.playerStateKeys.AD_PLAYING))){Fa.call(this,this.playerStateKeys.AD_PLAYING,!0),qa.call(this);var b=Ga.call(this,this.playerStateKeys.CLIP),c=this.adsAPI.getEvents();this.adsAPI.one(c.MIDROLL_AD_IS_PLAYING,ya.bind(this)),this.adsAPI.one(c.MIDROLL_AD_IS_NOT_PLAYING,za.bind(this)),this.adsAPI.startMidRoll(b,this.htmlAdView,this.$htmlAdViewContainer.get(0),a)}}function wa(){Dc.call(this,"endMidRoll"),this.adsAPI.endMidRoll()}function xa(){Dc.call(this,"endPreRoll"),this.adsAPI.endPreRoll()}function ya(a){Dc.call(this,"_onMidRollAdStart",b.keys(a)),Ga.call(this,this.playerStateKeys.MUTED)||bb.call(this,this.videoClient),vb.call(this,!0);var c=Ga.call(this,this.playerStateKeys.PLAYER_STATE);c.startMidroll(),Cb.call(this,this.utils.getEventList().AdEvents.AD_START,a)}function za(a){Dc.call(this,"_onMidRollAdNotPlaying"),Fa.call(this,this.playerStateKeys.AD_PLAYING,!1),this.playerUIHelper.hideHTMLElement(this.$htmlAdViewContainer),wb.call(this,!0),Ga.call(this,this.playerStateKeys.MUTED)||this.unmute(),Cb.call(this,this.utils.getEventList().AdEvents.AD_COMPLETE,a);var b=Ga.call(this,this.playerStateKeys.PLAYER_STATE);b.endMidroll()}function Aa(a){Dc.call(this,"_updateMidRollState"),this.ads.startMidRoll(a)}function Ba(){Dc.call(this,"updateAdSize");var a=Ga.call(this,this.playerStateKeys.WIDTH),b=Ga.call(this,this.playerStateKeys.HEIGHT),c=Ga.call(this,this.playerStateKeys.IS_FULL_SCREEN);this.adsAPI.setSize(a,b,c)}function Ca(){var a=this,b=1e3;return{areMetricsAvailable:Da.bind(a),getMediaMetrics:function(){return a.mediaMetricsManager.update()},getClientMetrics:function(){if(a.videoClient)try{return a.videoClient.getClientMetrics()}catch(b){Gc.call(a,b,"getClientMetrics:")}return{}},enablePolling:function(c,d){var e=c||b,f=d||!0;return a.mediaMetricsManager.schedule(e,f)},disablePolling:function(){return a.mediaMetricsManager.unschedule()}}}function Da(){var a=Ga.call(this,this.playerStateKeys.PLAYER_STATE);return a.areMetricsAvailable()}function Ea(){var a=this;return{isInitialized:function(){return a.isInitialized},isLive:Ia.bind(a),isLiveRightNow:Ja.bind(a),isSlidingWindow:function(){return Ga.call(a,a.playerStateKeys.IS_SLIDING_WINDOW)||!1},getPlayerState:Ka.bind(a),isPlaying:La.bind(a)}}function Fa(a,b){this.playerStateHelper.setState(a,b)}function Ga(a){return this.playerStateHelper?this.playerStateHelper.getState(a):null}function Ha(){this.playerStateHelper.reset(),oc.call(this,[])}function Ia(a){var c=Ga.call(this,this.playerStateKeys.IS_LIVE_CLIP_METADATA),d=Ga.call(this,this.playerStateKeys.IS_LIVE),e=Ga.call(this,this.playerStateKeys.IS_LIVE_STREAM);return b.isNil(c)?b.isNil(d)?b.isNil(e)?a?null:!1:e:d:c}function Ja(){if(this.state.isLive())try{if(!this.videoClient)return!1;var a=Ic-2;return this.videoClient.isLiveRightNow(a)}catch(b){Gc.call(this,b,"isLiveRightNow")}return!1}function Ka(){var a=Ga.call(this,this.playerStateKeys.PLAYER_STATE),b=D.UNKNOWN;return a&&(b=D[a.key]),b}function La(){var a=Ga.call(this,this.playerStateKeys.PLAYER_STATE);return a.isPlaying()}function Ma(){var a=this;return{getLastDispatchedTimeCode:function(){return a.timeCodeHelper.getLastDispatchedTimeCode()},enableHeartbeat:function(c){return(b.isNil(c)||b.isEmpty(c.toString()))&&(c=b.get(this.config,"html5.timecodeHearbeatInterval",1)),a.timeCodeHelper.setHeartbeatInSecs(c)},disableHeartbeat:function(){return a.timeCodeHelper.setHeartbeatInSecs(0)},getHeartbeatInterval:function(){return a.timeCodeHelper.getHeartbeatDuration()},getTimeCode:function(b){if(b)var c=a.timeCodeHelper.getTimeNow();else var c=a.timeCodeHelper.getAndDispatchTimeCode();return c},getTimeCodeAt:function(b){return a.timeCodeHelper.getTimeAt(b)}}}function Na(){var a=this;return{areCaptionsEnabled:function(){return Ga.call(a,a.playerStateKeys.IS_CLOSED_CAPTIONS_ENABLED)||!1},disableCaptions:function(){Oa.call(a,!1)},enableCaptions:function(){Oa.call(a,!0)},getAvailableCaptionTracks:function(){return Ga.call(a,a.playerStateKeys.CLOSED_CAPTIONS_AVAILABLE)},hasCaptions:function(){return b.size(a.captions.getAvailableCaptionTracks())>0},getSelectedCaptionTrack:function(){return b.get(b.filter(Ga.call(a,a.playerStateKeys.CLOSED_CAPTIONS_AVAILABLE),"isSelected"),"[0]",null)},getSelectedCaptionLanguage:function(){return b.get(b.filter(Ga.call(a,a.playerStateKeys.CLOSED_CAPTIONS_AVAILABLE),"isSelected"),"[0].language",null)}}}function Oa(a){var b=1==a?!0:!1;Dc.call(this,"enable closed captions:",b),Fa.call(this,this.playerStateKeys.IS_CLOSED_CAPTIONS_ENABLED,b),Pa.call(this),Qa.call(this)}function Pa(){try{if(!this.videoClient)return;this.videoClient.enableClosedCaptions(Ga.call(this,this.playerStateKeys.IS_CLOSED_CAPTIONS_ENABLED))}catch(a){Gc.call(this,a,"enableClosedCaptions")}}function Qa(){Dc.call(this,"dispatchClosedCaptionState"),Cb.call(this,j.CLOSED_CAPTIONS_AVAILABLE,{hasCaptions:this.captions.hasCaptions()}),this.captions.hasCaptions()&&(this.captions.areCaptionsEnabled()?Cb.call(this,j.CLOSED_CAPTIONS_ON):Cb.call(this,j.CLOSED_CAPTIONS_OFF))}function Ra(){var a=this;return{getAvailableAudioTracks:function(){return Ga.call(a,a.playerStateKeys.AUDIO_TRACKS_AVAILABLE)},hasAudioTracks:function(){return b.size(a.audioTracks.getAvailableAudioTracks())>0},getSelectedAudioTrack:function(){return b.get(b.filter(Ga.call(a,a.playerStateKeys.AUDIO_TRACKS_AVAILABLE),"isSelected"),"[0]",null)},getSelectedAudioTrackLanguage:function(){return b.get(b.filter(Ga.call(a,a.playerStateKeys.AUDIO_TRACKS_AVAILABLE),"isSelected"),"[0].language",null)},setSelectedAudioTrackByLanguage:function(b){Ta.call(a,b)}}}function Sa(){Dc.call(this,"dispatchAudioTrackState");var a=this.audioTracks.getAvailableAudioTracks(),b=this.audioTracks.hasAudioTracks();Cb.call(this,j.AUDIO_TRACKS_AVAILABLE,{hasAudioTracks:b,tracks:a})}function Ta(a){try{this.videoClient&&this.videoClient.setSelectedAudioTrackByLanguage(a)}catch(b){Gc.call(this,b,"setSelectedAudioTrackByLanguage")}}function Ua(){var a=this;return{getBitrateWindow:function(){return Ga.call(a,a.playerStateKeys.CURRENT_BITRATE_WINDOW)},getABRConstraints:function(){return Ga.call(a,a.playerStateKeys.ABR_CONSTRAINTS)},getCurrentKbps:function(){return b.get(b.find(Ga.call(a,a.playerStateKeys.BITRATE_PROFILES),{isActive:!0}),"bitrate",0)/1e3},getCurrentProfile:function(){return b.find(Ga.call(a,a.playerStateKeys.BITRATE_PROFILES),{isActive:!0})},getProfiles:function(){return Ga.call(a,a.playerStateKeys.BITRATE_PROFILES)},setMaxThreshold:function(b){Va.call(a,b)},getMaxThreshold:function(){return Ga.call(a,a.playerStateKeys.MAX_BITRATE_THRESHOLD)},setMinThreshold:function(b){Wa.call(a,b)},getMinThreshold:function(){return Ga.call(a,a.playerStateKeys.MIN_BITRATE_THRESHOLD)},setUsePlayerDimensionsForBitrateCaps:function(b){Fa.call(a,a.playerStateKeys.USE_PLAYER_DIMENSIONS_FOR_BITRATE_CAPS,b),Ya.call(a)},getUsePlayerDimensionsForBitrateCaps:function(){var c=Ga.call(a,a.playerStateKeys.USE_PLAYER_DIMENSIONS_FOR_BITRATE_CAPS);return b.isBoolean(c)||(c=b.get(a.config,"bitrateCaps.usePlayerDimensionsForBitrateCaps",!0)),c},setManualBitrate:function(b){Dc.call(a,"setManualBitrate",b),Fa.call(a,a.playerStateKeys.MAX_BITRATE_THRESHOLD,b),Fa.call(a,a.playerStateKeys.MIN_BITRATE_THRESHOLD,b),Ya.call(a)}}}function Va(a){var c=a;(!b.isFinite(a)||0>=a)&&(c=null),Fa.call(this,this.playerStateKeys.MAX_BITRATE_THRESHOLD,c),Dc.call(this,"bitrateSetMaxThreshold",a,"=>",c),Ya.call(this)}function Wa(a){var c=a;(!b.isFinite(a)||0>=a)&&(c=null),Fa.call(this,this.playerStateKeys.MIN_BITRATE_THRESHOLD,c),Dc.call(this,"bitrateSetMinThreshold",a,"=>",c),Ya.call(this)}function Xa(a,b){Fa.call(this,this.playerStateKeys.WIDTH,a),Fa.call(this,this.playerStateKeys.HEIGHT,b),Ba.call(this)}function Ya(){Dc.call(this,"updateAdaptiveBitrateConstraintsForCurrentSize:");var a=Ga.call(this,this.playerStateKeys.WIDTH),b=Ga.call(this,this.playerStateKeys.HEIGHT);Za.call(this,a,b)}function Za(a,b){var c=this.bitrates.getUsePlayerDimensionsForBitrateCaps();Dc.call(this,"setBitrateWindowBySize: width="+a+", height="+b,"usePlayerDimensionsForBitrateCaps=",c);var d,e=new x(this.config,c),f=Ga.call(this,this.playerStateKeys.MAX_BITRATE_THRESHOLD),g=Ga.call(this,this.playerStateKeys.MIN_BITRATE_THRESHOLD),h=e.getBitrateWindowByLimitAndWidth(a,d,f,g),i=null;f||(i=e.getDimensionConstraint(a,b));var j=e.getABRConstraints(h,i);$a.call(this,h,j)}function $a(a,b){Dc.call(this,"setAdaptiveBitrateConstraints: bitrateWindow="+a,"abrConstraints="+b),Fa.call(this,this.playerStateKeys.CURRENT_BITRATE_WINDOW,a),Fa.call(this,this.playerStateKeys.ABR_CONSTRAINTS,b),_a.call(this,b)}function _a(a){if(this.videoClient)try{Dc.call(this,"updateVideoClientAdaptiveBitrateConstraints >",this.videoClient,"<",a),this.videoClient.setAdaptiveBitrateConstraints(a)}catch(b){Fc.call(this,"updateVideoClientAdaptiveBitrateConstraints: error calling videoClient.setAdaptiveBitrateConstraints() with abrConstraint="+a+", error=",b),Gc.call(this,b,"updateVideoClientAdaptiveBitrateConstraints")}}function ab(){return Ga.call(this,this.playerStateKeys.AD_PLAYING)?this.adVideoClient:this.videoClient}function bb(a){try{Dc.call(this,"mute:",a.toString()),a.mute()}catch(b){Gc.call(this,b,"mute")}}function cb(b,c){var d=null,e=null;if(d=b.$video,e=b.video,d||(d=a(c).find("video"),e=d[0]),d&&e){var f=b.getPlayerEventDispatcher();f.dispatchEvent(o.VIDEO_CLIENT_CREATED,{$videoNode:d,videoNode:e}),f.dispatchEvent(o.VIDEO_NODE_ADDED,{$videoNode:d,videoNode:e})}}function db(a){var b=Ga.call(this,this.playerStateKeys.CLIP),c=""==Ga.call(this,this.playerStateKeys.CURRENT_URL),d=Ga.call(this,this.playerStateKeys.IS_PLAYING);if(d)return void Dc.call(this,"_internalPlay. Already Playing");Dc.call(this,"_internalPlay:"),!b||a&&!c||ub.call(this);var e=Ga.call(this,this.playerStateKeys.CLIP),f=Ga.call(this,this.playerStateKeys.AUTORUN_PERMISSION_DENIED)===!0;a?(f&&fb.call(this),Cb.call(this,j.MEDIA_RESUME),kb.call(this)):eb.call(this,e),lb.call(this,"internalPlay")}function eb(a){Cb.call(this,j.PLAYLIST_START,{data:a}),Cb.call(this,j.MEDIA_PRE_PLAY,{type:"content"}),Cb.call(this,j.PLAY_CONTENT_CALLED,{data:a})}function fb(){!this.adsAPI.isPreRollAdsEnabled&&this.adsAPI.isMidRollAdsEnabled&&ib.call(this,this.adVideoClient)}function gb(){if(pa.call(this))hb.call(this);else{var a=Ga.call(this,this.playerStateKeys.CLIP);Cb.call(this,j.MEDIA_PRE_PLAY,{type:"ad"}),Cb.call(this,j.OVERLAY_LOADING_SHOW),ra.call(this,a)}}function hb(){ib.call(this,this.videoClient)?sa.call(this):Ec.call(this,"Preroll ads should be playing, but are not")}function ib(a){var b=Ga.call(this,this.playerStateKeys.AUTORUN_PERMISSION_DENIED)===!0;return Dc.call(this,"_triggerAutoPlayEnabledAfterPermissionDenied() autoPlayFailed=",b),b?(jb.call(this,a),Fa.call(this,this.playerStateKeys.AUTORUN_PERMISSION_DENIED,!1),!0):!1}function jb(a){a&&(Dc.call(this,"_triggerAutoPlayEnabledViaUserEvent",a),a.load())}function kb(){var a=this.getSeekableRange(),c=a.currentTime<a.startTime;if(c){Cb.call(this,j.MEDIA_RESUME_OUTSIDE_SEEKABLE_RANGE,{player:this,seekableRange:a});var d=b.get(this.config,"playback.slidingWindow.resumeAction");if(d||(d="seekToLive"),this[d])this[d].call(this);else{var e=Fc,f="There appears to be an invalid config value for playback.slidingWindow.resumeAction of "+d;"none"===d&&(e=Ec,f="Media is outside seekable range. Action should be taken by the client app"),e.call(this,"_internalPlay:",f)}}}function lb(a){try{var b=Ga.call(this,this.playerStateKeys.PLAYER_STATE);b.play()}catch(c){Gc.call(this,c,a)}Fa.call(this,this.playerStateKeys.IS_PLAYING,!0),Fa.call(this,this.playerStateKeys.IS_PAUSED,!1)}function mb(a){return f.getIsLive(a)}function nb(a){Dc.call(this,"_applyClipProperties: clip =",JSON.stringify(a)),Fa.call(this,this.playerStateKeys.IS_LIVE_CLIP_METADATA,mb(a)),ob.call(this,a)}function ob(a){var b=f.getScrubbableRangeStartTime(a),c=f.getScrubbableRangeEndTime(a),d=f.getScrubbableRangeEnforceBoundaries(a);M.call(this,b,c,d)}function pb(a){qb(a)}function qb(a){var c=f.getScrubbableRangeStartTime();if(!isNaN(c)&&c>=0){var d=f.getStartTimeInSecs(a);!isNaN(d)&&d>=0&&c>d&&b.set(a,"startTime.offset",c)}}function rb(a,c){if(Array.isArray(a)&&a.length&&(a=a[0]),a&&!d.instanceStrict(a,e)){var g="_setClip(clip) should ideally take a MediaClipVO instance";Ec.call(this,"_setClip: "+g)}a&&(a.bitrateWindow=Ga.call(this,this.playerStateKeys.CURRENT_BITRATE_WINDOW)),pb.call(this,a),nb.call(this,a),Dc.call(this,"_setClip:",JSON.stringify(a)),this.clearMedia(),Fa.call(this,this.playerStateKeys.CLIP,a||null);var h=f.getVttFile(a);h&&Fa.call(this,this.playerStateKeys.CLOSED_CAPTIONS_AVAILABLE,[h]),la.call(this,a);var i;try{var k=Ga.call(this,this.playerStateKeys.PLAYER_STATE);i=k.setClip({path:null}),i||(i=Promise.resolve())}catch(l){Gc.call(this,l,"setClip"),i&&(i=Promise.reject(l))}var m=b.get(a,"path"),n=!b.isNil(m)&&b.size(m)>0;if(n){var o=!pa.call(this)&&!c;Cb.call(this,j.MEDIA_SET,{clip:a,showPoster:o})}return i}function sb(){Dc.call(this,"_addTrackTag");var a=Ga.call(this,this.playerStateKeys.CLOSED_CAPTIONS_AVAILABLE)[0];this.playerUIHelper.addTextTrack(this.$video,a)}function tb(){Dc.call(this,"_removeTrackTag"),this.playerUIHelper.removeTextTrack(this.$video)}function ub(){Dc.call(this,"_loadClip:");var a=this,c=Ga.call(this,this.playerStateKeys.CURRENT_URL),d=Ga.call(this,this.playerStateKeys.CLIP);if(!b.get(d,"path"))throw Fc.call(this,"NO_PATH_DEFINED"),new Error(Jc.NO_PATH_DEFINED);var e=f.getPath(d);if(d&&c!=e){Fa.call(this,this.playerStateKeys.CURRENT_URL,e),Cb.call(this,j.OVERLAY_LOADING_SHOW);try{this.videoClient.setClip(d),this.captions.hasCaptions()&&(tb.call(a),sb.call(a,d))}catch(g){Gc.call(this,g,"loadClip/setClip")}}}function vb(a){var b=this.playerUIHelper,c=this.controls;Fa.call(this,this.playerStateKeys.CONTROLS_ENABLED,!1),b.hideControls(c),a||Cb.call(this,l.HIDE_CONTROLS)}function wb(a){var b=this.playerUIHelper,c=this.controls;Fa.call(this,this.playerStateKeys.CONTROLS_ENABLED,!0),b.showControls(c),a||Cb.call(this,l.SHOW_CONTROLS)}function xb(){if(!Ga.call(this,this.playerStateKeys.HAS_CONTROLS)){var a=b.get(this.config,"html5.useLegacyControls",!0);a&&(Fa.call(this,this.playerStateKeys.HAS_CONTROLS,!0),yb.call(this),this.playerUIHelper.addDOMMutationObserver(this.htmlView,Db.bind(this)))}}function yb(){if(Ga.call(this,this.playerStateKeys.HAS_CONTROLS)){var a=this.utils.getVideoElement();if(!a)throw new Error("$video is not avail, fix this");var b=this.controls;this.state.isLive()?(Dc.call(this,"swapControls.isLive()"),this.controls=this.playerUIHelper.addHTMLLiveControls(this.controls,this,a,this.$container)):(Dc.call(this,"swapControls.!isLive()"),this.controls=this.playerUIHelper.addHTMLControls(this.controls,this,a,this.$container)),Cb.call(this,j.CONTROLS_CHANGED,{controls:this.controls,lastControls:b}),wb.call(this,!0),Qa.call(this)}}function zb(){this.controls&&(this.controls.destroy(),this.controls=null),this.adControls&&(this.adControls.destroy(),this.adControls=null),
Fa.call(this,"hasControls",!1),Fa.call(this,"controlsEnabled",!1)}function Ab(){Dc.call(this,"setInitialPlayerState"),Bb.call(this)}function Bb(){var a=b.get(this.config,"volume",Kc),c=Ga.call(this,this.playerStateKeys.VOLUME),d=Ga.call(this,this.playerStateKeys.MUTED),e=c||a;Dc.call(this,"setInitialVolume",e),0==e?(Fa.call(this,this.playerStateKeys.VOLUME,Kc),this.setVolume(Kc),this.mute()):d?this.mute():this.setVolume(e)}function Cb(a,c){var d=c||{},e={player:this};b.set(e,"player.clip",Ga.call(this,this.playerStateKeys.CLIP)),b.isObject(d)||(d={data:d}),b.merge(d,e),this.dispatcher.publish(a,d)}function Db(a){var b=!1;return this.controls&&(b=a===this.controls.$controls.get(0)),b}function Eb(){var a=b.get(this.config,"html5.timecodeHearbeatInterval",0);this.timecode.enableHeartbeat(a)}function Fb(a){this.dispatcher.removeAllListeners(),this.$container.off(),this.$document.off(n.ALL_string,zc.bind(this));try{a.removeAllListeners()}catch(b){Fc.call(this,this.toString(),b)}}function Gb(a){Dc.call(this,"addListeners"),a.addEventListener(k.BROWSER_SUPPORT_ERROR,lc.bind(this)),a.addEventListener(k.UNKNOWN_ERROR,mc.bind(this)),a.addEventListener(j.MEDIA_COMPLETE,nc.bind(this)),a.addEventListener(j.MEDIA_ERROR,jc.bind(this)),a.addEventListener(j.MEDIA_WARNING,kc.bind(this)),a.addEventListener(j.MEDIA_PAUSED,fc.bind(this)),a.addEventListener(j.MEDIA_PLAYING,ec.bind(this)),a.addEventListener(j.MEDIA_START,dc.bind(this)),a.addEventListener(j.MEDIA_SEEK,gc.bind(this)),a.addEventListener(j.SEEK_COMPLETE,hc.bind(this)),a.addEventListener(j.MEDIA_TIME_UPDATE,ic.bind(this)),a.addEventListener(j.META_DATA_LOADED,Xb.bind(this)),a.addEventListener(j.META_DATA_PARSED,Yb.bind(this)),a.addEventListener(j.META_DATA_PT_REACHED,Zb.bind(this)),a.addEventListener(j.EXT_META_DATA_REACHED,$b.bind(this)),a.addEventListener(j.CLOSED_CAPTIONS_TRACKS_CHANGED,oc.bind(this)),a.addEventListener(j.AUDIO_TRACKS_CHANGED,pc.bind(this)),a.addEventListener(j.CURRENT_AUDIO_TRACK_CHANGED,qc.bind(this)),a.addEventListener(j.BITRATE_PROFILES_CHANGED,rc.bind(this)),a.addEventListener(j.ISLIVE_CHANGED,sc.bind(this)),a.addEventListener(j.STREAM_PLAYBACK_RATE_CHANGED,tc.bind(this)),a.addEventListener(j.LIVETIME_CHANGED,uc.bind(this)),a.addEventListener(j.IS_SLIDING_WINDOW_CHANGED,vc.bind(this)),a.addEventListener(j.PLAYBACK_COMMERCIAL_BREAK_START,va.bind(this)),a.addEventListener(j.PLAYBACK_COMMERCIAL_BREAK_END,wa.bind(this)),a.addEventListener(j.PLAYBACK_COMMERCIAL_BREAK_SET_STATE,Aa.bind(this)),a.addEventListener(j.PLAYBACK_FAILED_PERMISSION_DENIED,yc.bind(this)),a.addEventListener(j.TIME_CODE,ac.bind(this)),a.addEventListener(j.BUFFERING_STARTED,bc.bind(this)),a.addEventListener(j.BUFFERING_ENDED,cc.bind(this)),a.addEventListener(o.VIDEO_CLIENT_CREATED,Hb.bind(this)),a.addEventListener(o.VIDEO_NODE_ADDED,Ib.bind(this)),a.addEventListener(o.VIDEO_NODE_REMOVED,Jb.bind(this)),a.addEventListener(o.VIDEO_NODE_REUSED,Kb.bind(this)),this.dispatcher.on(l.ADJUST_BITRATE_THRESHOLD_REQUESTED,this.bitrates.setMaxThreshold.bind(this)),this.dispatcher.on(l.ADJUST_VOLUME_REQUESTED,this.setVolume.bind(this)),this.dispatcher.on(l.AUDIO_RENDITION_REQUESTED,Vb.bind(this)),this.dispatcher.on(l.CLOSED_CAPTIONS_TOGGLE_REQUESTED,Ub.bind(this)),this.dispatcher.on(l.FASTFORWARD_REQUESTED,Sb.bind(this)),this.dispatcher.on(l.GOTO_START_REQUESTED,Mb.bind(this)),this.dispatcher.on(l.LIVE_REQUESTED,this.seekToLive.bind(this)),this.dispatcher.on(l.MUTE_REQUESTED,this.mute.bind(this)),this.dispatcher.on(l.PAUSE_REQUESTED,this.pause.bind(this)),this.dispatcher.on(l.PLAY_REQUESTED,this.play.bind(this)),this.dispatcher.on(l.REWIND_REQUESTED,Rb.bind(this)),this.dispatcher.on(l.SEEK_REQUESTED,Ob.bind(this)),this.dispatcher.on(l.THUMB_DRAGGING,Qb.bind(this)),this.dispatcher.on(l.THUMB_DRAG_ENDED,Pb.bind(this)),this.dispatcher.on(l.THUMB_DRAG_STARTED,Nb.bind(this)),this.dispatcher.on(l.TOGGLE_DEBUG_PANEL,O.bind(this)),this.dispatcher.on(l.TOGGLE_FULL_SCREEN_REQUESTED,Tb.bind(this)),this.dispatcher.on(l.TOUCHEND,Bc.bind(this)),this.dispatcher.on(l.UNMUTE_REQUESTED,this.unmute.bind(this)),this.dispatcher.on(l.CONTAINER_RESIZE,Cc.bind(this)),this.dispatcher.on(l.WINDOW_RESIZE,Cc.bind(this)),this.dispatcher.on(l.POSTER_CLICKED,wc.bind(this)),this.dispatcher.on(l.VIDEO_KEY_DOWN,Wb.bind(this)),this.dispatcher.on(j.POSTER_SHOWN,da.bind(this)),this.dispatcher.on(j.POSTER_HIDDEN,ea.bind(this)),this.dispatcher.on(j.PLAYER_STATE_CHANGED,xc.bind(this)),this.$document.on(n.ALL_string,zc.bind(this)),this.$container.on("contextmenu",Ac.bind(this))}function Hb(a){var c=a.$videoNode;Dc.call(this,"_onVideoClientCreated",b.keys(a)),c&&(this.$video=c,Cb.call(this,o.VIDEO_CLIENT_CREATED,a),ka.call(this))}function Ib(a){var c=a.$videoNode;Dc.call(this,"_onVideoClientNodeAdded:",b.keys(a)),c?(this.$video=c,Cb.call(this,o.VIDEO_NODE_ADDED,a),Lb.call(this,a.videoClient,a.$videoNode),ka.call(this),Ab.call(this)):Ec.call(this,"WARNING _onVideoClientNodeAdded.$videoNode is not available")}function Jb(a){Dc.call(this,"_onVideoClientNodeRemoved:"),Cb.call(this,o.VIDEO_NODE_REMOVED,{videoClient:a.videoClient,type:a.type})}function Kb(a){Dc.call(this,"_onVideoNodeReused:"),Cb.call(this,o.VIDEO_NODE_REUSED,a)}function Lb(a,c){if(Dc.call(this,"addConfigPropsToVideoClient:",a),a){a.applyConfig("timeouts",{streamTimeout:b.get(this,"config.html5.streamTimeout",3e4)}),a.applyConfig("autoPlay",b.get(this,"config.autoPlay",!1)===!0),a.applyConfig("debug",b.get(this,"config.debugMode",!1)===!0);var d=this.callbackRegistry.xhrCallback;a.setAuthenticationCallback(d),Pa.call(this)}}function Mb(){Dc.call(this,"gotoStart:",this,this.videoClient),this.seek.call(this,0)}function Nb(){Fa.call(this,this.playerStateKeys.USER_IS_SEEKING,!0),Dc.call(this,"userSeekStarted: userIsSeeking=",Ga.call(this,this.playerStateKeys.USER_IS_SEEKING))}function Ob(a){var c=b.get(a,"percent",0),d=this.getSeekableRange(),e=c*b.get(d,"duration",0),f=b.get(d,"startTime",0)+e;Dc.call(this,"userSeekByPercent",c,e,f),this.seek(f)}function Pb(a){Fa.call(this,this.playerStateKeys.USER_IS_SEEKING,!1),Dc.call(this,"userSeekEnded: userIsSeeking=",Ga.call(this,this.playerStateKeys.USER_IS_SEEKING)),Ob.call(this,a)}function Qb(a){}function Rb(a){var b=a||Ic,c=this.getCurrentTimeInSecs()-b;Dc.call(this,"rewind:",c),this.seek(c),Cb.call(this,j.QUICK_REWIND,{offset:c})}function Sb(a){var b=a||Hc,c=this.getCurrentTimeInSecs()+b;Dc.call(this,"fastforward:",c),this.seek(c),Cb.call(this,j.QUICK_FORWARD,{offset:c})}function Tb(){var a=Ga.call(this,this.playerStateKeys.IS_FULL_SCREEN);a?this.ui.exitFullScreen():this.ui.enterFullScreen()}function Ub(){this.captions.areCaptionsEnabled()?this.captions.disableCaptions():this.captions.enableCaptions()}function Vb(a){Dc.call(this,"onAudioRenditionRequested",a),this.audioTracks.setSelectedAudioTrackByLanguage(a)}function Wb(a){var b=a.ctrlKey,c=a.shiftKey,d=190==a.which;b&&c&&d&&O.call(this)}function Xb(a){Dc.call(this,"onMetaDataLoaded:"),this.duration=this.getDurationInSecs(),Cb.call(this,j.META_DATA_LOADED)}function Yb(a){}function Zb(a){Dc.call(this,"onMetaDataPtReached"),Cb.call(this,j.META_DATA_PT_REACHED,a)}function $b(a){Dc.call(this,"onExtDataReached"),Cb.call(this,j.EXT_META_DATA_REACHED,a)}function _b(a,b){var c=a;if(Lc){var d=f.getStartDate(b),e=1e3*f.getStartTimeInSecs(b);e>0&&c?c.setTime(c.getTime()+e):d&&(c=d),c&&(Lc=!1)}return c}function ac(a){var c=b.get(a,"timecode"),d=_b(c,this.clip);Dc.call(this,"onTimeCode",d),this.timeCodeHelper.saveAndDispatchTimeCode(d,this.getCurrentTimeInSecs(),f.getId(this.clip))}function bc(){var a=Ga.call(this,this.playerStateKeys.PLAYER_STATE);a.buffering(),Cb.call(this,j.BUFFERING_STARTED)}function cc(){var a=Ga.call(this,this.playerStateKeys.PLAYER_STATE);a.endBuffering(),Cb.call(this,j.BUFFERING_ENDED)}function dc(a){if(Lc=!0,!na.call(this)){Dc.call(this,"onMediaStart:"),this.ui.showPlayer(),xb.call(this),this.playerUIManager.startIdleTimer(),Cb.call(this,j.MEDIA_START),Fa.call(this,this.playerStateKeys.IS_PLAYING,!0),Fa.call(this,this.playerStateKeys.IS_PAUSED,!1);var c=b.get(a,"programDateTime"),d=_b(c,this.clip);this.timeCodeHelper.saveAndDispatchTimeCode(d,this.getCurrentTimeInSecs(),f.getId(this.clip))}}function ec(a){Dc.call(this,"_onMediaPlaying:"),na.call(this)||(Fa.call(this,this.playerStateKeys.IS_PLAYING,!0),Fa.call(this,this.playerStateKeys.IS_PAUSED,!1),Cb.call(this,j.MEDIA_PLAYING),Cb.call(this,j.OVERLAY_LOADING_HIDE))}function fc(a){na.call(this)||(Fa.call(this,this.playerStateKeys.IS_PLAYING,!1),Fa.call(this,this.playerStateKeys.IS_PAUSED,!0),this.pause(),Cb.call(this,j.MEDIA_PAUSED))}function gc(a){Cb.call(this,j.OVERLAY_LOADING_SHOW),Fa.call(this,this.playerStateKeys.IS_SEEKING,!0),Dc.call(this,"_onMediaSeek: isSeeking=",Ga.call(this,this.playerStateKeys.IS_SEEKING))}function hc(a){Cb.call(this,j.OVERLAY_LOADING_HIDE),Fa.call(this,this.playerStateKeys.IS_SEEKING,!1),Dc.call(this,"_onSeekComplete: isSeeking=",Ga.call(this,this.playerStateKeys.IS_SEEKING)),this.timecode.getTimeCode(),Cb.call(this,j.SEEK_COMPLETE)}function ic(a){if(!na.call(this)&&!Ga.call(this,this.playerStateKeys.IS_SEEKING)&&!Ga.call(this,this.playerStateKeys.USER_IS_SEEKING)){0==this.duration&&(this.duration=this.getDurationInSecs());var c=b.get(a,"timeInSecs",b.get(a,"detail.timeInSecs",0)),d=b.get(a,"duration",b.get(a,"detail.duration",0)),e=b.get(a,"startTime",b.get(a,"detail.startTime",0)),f=this.state.isLiveRightNow(),g=this.state.isLive(),h=new z(c,d,e,f,g,this.getScrubbableRange()),i=b.get(h,"scrubbableRange.endTime",d),k=c>=i&&0!=d,l=!Ga.call(this,this.playerStateKeys.SCRUBBER_END_REACHED_FIRED);Fa.call(this,this.playerStateKeys.CURRENT_TIME_IN_SECS,c),Fa.call(this,this.playerStateKeys.SEEKABLE_RANGE,b.clone(h)),k&&l&&(Cb.call(this,j.SCRUBBER_END_REACHED,h),Fa.call(this,this.playerStateKeys.SCRUBBER_END_REACHED_FIRED,!0)),Cb.call(this,j.MEDIA_TIME_UPDATE,h)}}function jc(a){var c=b.get(a,"message")||b.get(a,"detail.message")||"unknown media error";a||(a={}),a.message||(a.message=c),Fc.call(this,"_onMediaError",c,JSON.stringify(a));var d=Ga.call(this,this.playerStateKeys.PLAYER_STATE);d.error(),Cb.call(this,j.MEDIA_ERROR,a)}function kc(a){var c=b.get(a,"message")||b.get(a,"detail.message")||"unknown media warning";a||(a={}),a.message||(a.message=c),Ec.call(this,"_onMediaWarning",c,JSON.stringify(a)),Cb.call(this,j.MEDIA_WARNING,a)}function lc(a){var c=b.get(a,"message");Fc.call(this,"_onBrowserSupportError",c);var d=Ga.call(this,this.playerStateKeys.PLAYER_STATE);d.error(),Cb.call(this,k.BROWSER_SUPPORT_ERROR,{message:c})}function mc(a){var c=b.get(a,"message");Fc.call(this,"_onUnknownError",c);var d=Ga.call(this,this.playerStateKeys.PLAYER_STATE);d.error(),Cb.call(this,k.UNKNOWN_ERROR,{message:c})}function nc(a){if(Dc.call(this,"_onMediaComplete"),!na.call(this)){Fa.call(this,this.playerStateKeys.IS_PLAYING,!1),Fa.call(this,this.playerStateKeys.IS_PAUSED,!1);var b=Ga.call(this,this.playerStateKeys.PLAYER_STATE);try{b.ended()&&(Cb.call(this,j.MEDIA_COMPLETE),Cb.call(this,j.PLAYLIST_COMPLETE))}catch(c){Gc.call(this,c,"ended")}}}function oc(a){Fa.call(this,this.playerStateKeys.CLOSED_CAPTIONS_AVAILABLE,a),Dc.call(this,"_onClosedCaptionsTracksChanged",this.captions.hasCaptions(),a),Qa.call(this)}function pc(a){Fa.call(this,this.playerStateKeys.AUDIO_TRACKS_AVAILABLE,a),Dc.call(this,"_onAudioTracksChanged"),Sa.call(this)}function qc(a){Dc.call(this,"_onCurrentAudioTrackChanged"),Cb.call(this,j.CURRENT_AUDIO_TRACK_CHANGED,a)}function rc(a){Fa.call(this,this.playerStateKeys.BITRATE_PROFILES,a),Dc.call(this,"_onBitrateProfilesChanged"),Cb.call(this,j.BITRATE_PROFILES_CHANGED,a)}function sc(a){var c=this.state.isLive(!0),d=this.state.isLive()!=a;if(d&&b.isNil(c)){Dc.call(this,"_onIsLiveChanged:",a),Fa.call(this,this.playerStateKeys.IS_LIVE_STREAM,a),yb.call(this);var e=this.getSeekableRange(),f=new z(e.currentTime,e.duration,e.startTime,this.state.isLiveRightNow(),this.state.isLive(),e.scubbableRange);Fa.call(this,this.playerStateKeys.SEEKABLE_RANGE,f),Cb.call(this,j.ISLIVE_CHANGED,this.state.isLive())}else Dc.call(this,"_onisLiveChanged. Did NOT change to "+a+". IsLiveChanged:",d,"; Exisiting value:",c)}function tc(a){var b=a;Dc.call(this,"_onStreamPlaybackRateChanged",b),Cb.call(this,j.STREAM_PLAYBACK_RATE_CHANGED,b)}function uc(a){var b=a;Dc.call(this,"_onLiveTimeChanged",b),Fa.call(this,this.playerStateKeys.LIVE_TIME,b),Cb.call(this,j.LIVETIME_CHANGED,b)}function vc(a){var b=a;Dc.call(this,"_onIsSlidingWindowChanged",b),Fa.call(this,this.playerStateKeys.IS_SLIDING_WINDOW,b),Cb.call(this,j.IS_SLIDING_WINDOW_CHANGED,b)}function wc(a){Dc.call(this,"_onPosterClick"),ca.call(this)}function xc(a){Dc.call(this,"_onPlayerStateChanged to ",a.currentState,"from",a.previousState)}function yc(a){Dc.call(this,"_playbackFailedPermissionDenied"),Dc.call(this,"_playbackFailedPermissionDenined");var c={showPoster:!0,errorObj:b.get(a,"errorObj",{})};c.disablePoster=function(){c.showPoster=!1},Fa.call(this,this.playerStateKeys.AUTORUN_PERMISSION_DENIED,!0),Cb.call(this,j.PLAYBACK_FAILED_PERMISSION_DENIED,c),b.get(c,"showPoster",!0)&&this.ui.showPoster()}function zc(a){Dc.call(this,"_onFullScreenChange",a);var b=this.playerUIHelper.isFullScreen(a.type,this.$fullScreenDiv);Fa.call(this,this.playerStateKeys.IS_FULL_SCREEN,b),Cb.call(this,j.FULLSCREEN_CHANGE,{isFullScreen:this.isFullScreen}),b?Cb.call(this,j.FULLSCREEN_START):Cb.call(this,j.FULLSCREEN_END)}function Ac(a){a.preventDefault(),Dc.call(this,"_onContextMenu: PlayerType = ",JSON.stringify(this.getPlayerInfo()))}function Bc(a){var b=Ga.call(this,this.playerStateKeys.MUTED);b&&this.unmute()}function Cc(){var a=this.$vpp.width(),b=this.$vpp.height();Dc.call(this,"_onContainerResize",a,b),aa.call(this,a,b)}function Dc(){this.logger.info("[AbstractHTMLPlayer]",Array.prototype.slice.call(arguments).join(" "))}function Ec(){this.logger.warn("[AbstractHTMLPlayer]",Array.prototype.slice.call(arguments).join(" "))}function Fc(){this.logger.error("[AbstractHTMLPlayer]",Array.prototype.slice.call(arguments).join(" "))}function Gc(a,c){var d=b.get(this,"config.html5.showDeveloperErrors",!1),e="DEV ERROR >> "+c+":"+a.message;if(!d)throw a;Fc.call(this,e),Cb.call(this,j.DEVELOPER_ERROR,{message:e})}var Hc,Ic,Jc={NO_PATH_DEFINED:"The clip needs to have a path property"},Kc=100,Lc=!0;return K.prototype.play=function(a){Dc.call(this,"play()");var b=this;Dc.call(this,"play.setClipPromise",this.setClipPromise);var c=this.setClipPromise||Promise.resolve("clip_already_loaded... like resuming"),d=a&&a.length?a[0]:null;d&&(c=b.setClip(d,!0));var e=Ga.call(b,b.playerStateKeys.IS_PAUSED),f=!1;return e&&(Fa.call(b,b.playerStateKeys.IS_RESUMED,!0),f=!0),c.then(function(a){if(!a)return Dc.call(b,"play.clipPromise resolved with a blank player"),Promise.resolve();Dc.call(b,"play.clipPromiseResolved"),b.setClipPromise=null;var c=oa.call(b);return c?gb.call(b):db.call(b,f),Promise.resolve()})["catch"](function(a){return Fc.call(b,"ERROR: play():",a.message),Promise.reject(new Error(a.message))})},K.prototype.pause=function(){Dc.call(this,"pause()");try{var a=Ga.call(this,this.playerStateKeys.PLAYER_STATE);a.pause()}catch(b){Gc.call(this,b,"pause")}},K.prototype.resume=function(){na.call(this)||0==Ga.call(this,this.playerStateKeys.IS_PLAYING)&&(Dc.call(this,"resume:"),Fa.call(this,this.playerStateKeys.IS_RESUMED,!0),Cb.call(this,j.MEDIA_RESUME),lb.call(this,"resume/play"))},K.prototype.setVolume=function(a){isNaN(a)&&(a=Kc);var c=a;1>=a&&(c=100*a),c=b.clamp(c,0,100),Fa.call(this,this.playerStateKeys.VOLUME,c),Ga.call(this,this.playerStateKeys.MUTED)&&this.unmute();try{var d=ab.call(this);Dc.call(this,"setVolume on "+d.toString()+" to "+c),d.setVolume(c)}catch(e){Gc.call(this,e,"setVolume:"+c)}Cb.call(this,j.MEDIA_VOLUME_CHANGED,{volume:c})},K.prototype.mute=function(){Fa.call(this,this.playerStateKeys.MUTED,!0);var a=ab.call(this);bb.call(this,a),Cb.call(this,j.MEDIA_VOLUME_CHANGED,{volume:0})},K.prototype.unmute=function(){Fa.call(this,this.playerStateKeys.MUTED,!1);try{var a=ab.call(this);Dc.call(this,"unmute:",a.toString()),a.unmute()}catch(c){Gc.call(this,c,"unmute")}var d=Ga.call(this,this.playerStateKeys.VOLUME)||b.get(this.config,"volume",Kc);this.setVolume(d),Cb.call(this,j.MEDIA_VOLUME_CHANGED,{volume:d})},K.prototype.seek=function(a){var b=Ga.call(this,this.playerStateKeys.PLAYER_STATE),c=w.getSanitizedSeekTime(a,this.getSeekableRange(),b);Dc.call(this,"seek: timeInSecs="+a,"sanitizedTimeInSecs="+c);try{b.seek(c,a)}catch(d){Gc.call(this,d,"seek")}},K.prototype.setScrubbableRange=function(a,b,c){M.call(this,a,b,c)},K.prototype.getScrubbableRange=function(){var a=Ga.call(this,this.playerStateKeys.SCRUBBABLE_RANGE);return a?b.clone(a):new A},K.prototype.seekToDate=function(a){Dc.call(this,"seekToDate: seekDate="+a);var b=J.getValidDate(a);if(J.isValidDate(b))try{var c=Ga.call(this,this.playerStateKeys.PLAYER_STATE);c.seekToDate(b)}catch(d){Gc.call(this,d,"seekToDate")}else Ec.call(this,"seekToDate: seekDate type not supported",a)},K.prototype.seekToLive=function(){Dc.call(this,"seekToLive:");try{this.videoClient.seekToLive()}catch(a){Gc.call(this,a,"seekToLive")}},K.prototype.seekToStart=function(){Dc.call(this,"seekToStart:");var a=this.getSeekableRange();this.seek(a.startTime)},K.prototype.setClip=function(a,b){return this.setClipPromise=rb.call(this,a,b),this.setClipPromise},K.prototype.getDurationInSecs=function(){try{var a=ab.call(this);return a.getDurationInSecs()}catch(b){Ec.call(this,"getDurationInSecs() not available. It is possible that the media is not loaded yet")}return 0},K.prototype.getCurrentTimeInSecs=function(){try{var a=ab.call(this);return a.getCurrentTimeInSecs()}catch(b){Ec.call(this,"getCurrentTimeInSecs() not available. It is possible that the media is not loaded yet")}return 0},K.prototype.getCurrentTimeInPDT=function(a){var b=this.timecode.getTimeCode(a);return Dc.call(this,"getCurrentTimeInPDT",b),b},K.prototype.getSeekableRange=function(){var a=Ga.call(this,this.playerStateKeys.SEEKABLE_RANGE);if(!a)try{a=new z(this.getCurrentTimeInSecs(),this.getDurationInSecs(),0,this.state.isLiveRightNow(),this.state.isLive())}catch(b){a=new z}return a},K.prototype.clearMedia=function(){Dc.call(this,"clearMedia"),Fa.call(this,this.playerStateKeys.CLIP,null),Ha.call(this),Fa.call(this,this.playerStateKeys.CURRENT_URL,""),this.timeCodeHelper.reset();var a=Ga.call(this,this.playerStateKeys.PLAYER_STATE);a.clearMedia()},K.prototype.toString=function(){return"AbstractHTMLPlayer"},K.prototype.resize=function(a,c){Dc.call(this,"resize: NOOP because CSS will drive the resize now","width="+a+", height="+c),b.noop()},K.prototype.createVideoClient=function(a,b){return null},K.prototype.destroy=function(){Dc.call(this,"destroy:",this.id),Cb.call(this,j.PLAYER_DESTROYING),this.metrics.disablePolling(),this.videoClient&&Fb.call(this,this.videoClient.getPlayerEventDispatcher()),this.playerUIHelper&&this.playerUIHelper.destroy(),this.playerUIManager&&this.playerUIManager.destroy(),zb.call(this),this.timeCodeHelper&&this.timeCodeHelper.destroy(),this.adsAPI&&this.adsAPI.destroy(),b.each(this.overlays,function(a){a.destroy()})},K.prototype.getPlayerInfo=function(){return h.getPlayerInfo(this)},K.prototype.getConfig=function(){return this.config},K.prototype.init=function(c){if(this.isInitialized)return void Dc.call(this,"init: can't initialize twice");this.playerUIHelper=new s(c,this.dispatcher),this.playerUIManager=new t(this.logger,this.dispatcher),this.callbackRegistry=new v,this.timeCodeHelper=new g(this);var d=this.playerUIManager.generateVideoContainers(this.$container[0],this.toString(),this.adsAPI.isAdsEnabled),e=b.get(d,"content");if(e&&!this.videoClient){this.$fullScreenDiv=this.playerUIHelper.getFullScreenDiv(this.config,this.$container),this.$vpp=a(b.get(d,"container.all")),this.videoClient=this.createVideoClient(e,this.$fullScreenDiv),this.htmlView=e;var f=b.get(d,"ads");f&&(this.htmlAdView=f,this.$htmlAdViewContainer=a(b.get(d,"container.ads"))),Dc.call(this,"init: mediaPlayer created")}else this.videoClient&&Dc.call(this,"init: client already exists, just adding listeners");var h=this.$container.outerWidth(),i=this.$container.outerHeight();Xa.call(this,h,i),Za.call(this,h,i),this.videoClient&&(Gb.call(this,this.videoClient.getPlayerEventDispatcher()),cb.call(this,this.videoClient,e)),Eb.call(this),Dc.call(this,"init: PLAYER_LOADED"),Cb.call(this,j.PLAYER_LOADED),this.isInitialized=!0},i.registerPlayer(K),K}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/BamHTMLPlayer",["jquery","lodash/lodash","bandwagon/bandwagon","bam-video-players/players/AbstractHTMLPlayer","bam-video-players/players/VideoPlayerFactory","bam-video-players/players/clients/MediaElementClient","bam-video-players/events/VideoClientEvents","bam-video-players/events/PlayerEvents","bam-video-players/events/ErrorEvents","bam-video-players/players/clients/VideoClientFactory"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bandwagon/bandwagon"),require("bam-video-players/players/AbstractHTMLPlayer"),require("bam-video-players/players/VideoPlayerFactory"),require("bam-video-players/players/clients/MediaElementClient"),require("bam-video-players/events/VideoClientEvents"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/ErrorEvents"),require("bam-video-players/players/clients/VideoClientFactory")):a.BamHTMLPlayer=b(a.jQuery,a._,a.bandwagon,a.AbstractHTMLPlayer,a.VideoPlayerFactory,a.MediaElementClient,a.VideoClientEvents,a.PlayerEvents,a.ErrorEvents,a.VideoClientFactory)}(this,function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a,b,c,d){p.call(this),this.savedProxyRequests=[],this.savedProxyStates=[],k.prototype["super"].constructor.call(this,a,b,c,d),D.call(this,"constructor"),this.supportsHls=!0}function l(a,b){if(this.addingVideoClient)D.call(this,"Client not ready. saving request",a),this.savedProxyRequests.push({fxn:a,arg:b,type:this.addingVideoClient});else{if(this.currentVideoClient)return this.currentVideoClient[a](b);D.call(this,"delegateToProxy. UNKNOWN PATH - this.currentVideoClient DNE so fxn="+a+"() call fails")}}function m(a,b){return this.currentVideoClient?(D.call(this,"Client ready(",this.currentVideoClientType,"), calling request",a,b),this.currentVideoClient[a](b)):(D.call(this,"Client not ready. saving state request",a),void this.savedProxyStates.push({fxn:a,arg:b}))}function n(a){var c=this;b.each(this.savedProxyRequests,function(b){a==b.type&&(D.call(c,"replaying",b.fxn,JSON.stringify(b.arg)),c.currentVideoClient[b.fxn](b.arg))}),this.savedProxyRequests=[]}function o(){var a=this;b.each(this.savedProxyStates,function(b){D.call(a,"replaying state",b.fxn,JSON.stringify(b.arg)),a.currentVideoClient[b.fxn](b.arg)}),this.savedProxyStates=[]}function p(){this.currentVideoClient&&(this.currentVideoClient.destroy(),this.currentVideoClient=null,this.currentVideoClientType=null,delete this.currentVideoClient)}function q(a){var c=a.path;return 0==b.size(b.get(a,"path"))&&(c=b.get(this.playerStateHelper.getState("clip"),"path"),D.call(this,"determinePath",c)),c}function r(a,c,d){var e=this,f=d;f||(f=j.getPlayerType(a,this.config));var h=this.currentVideoClientType!=f;return h?(0!=b.size(a)&&(this.addingVideoClient=f),D.call(this,"addVideoClient Type =",f),j.getPlayerClientByType(a,c,this.config,f).then(function(a){return D.call(e,"addVideoClient",JSON.stringify(b.omit(a,"player"))),t.call(e,a)})["catch"](function(a){throw v.call(e,a),a}).then(function(a){return s.call(e,a)})):(D.call(this,"addVideoClient VIDEO_NODE_REUSED",f),x.call(this,g.VIDEO_NODE_REUSED),Promise.resolve(f))}function s(a){if(D.call(this,"finishAddingVideoClient",JSON.stringify(b.omit(a,"player"))),b.get(a,"player")&&b.get(a,"type")==this.addingVideoClient){var c=this.addingVideoClient;return this.addingVideoClient=!1,o.call(this),n.call(this,c),b.get(a,"type")}}function t(a){var c=b.get(a,"player");return D.call(this,"processAddedPlayer",c),c?A.call(this,this.currentVideoClient,this.currentVideoClientType).then(function(){var b=w.call(this,a);return Promise.resolve(b)}.bind(this)):(u.call(this,a),Promise.resolve(null))}function u(a){var c=!b.isNull(a);c&&(D.call(this,"processsExpectedError",a.error),this.clientDispatcher.dispatchEvent(i.BROWSER_SUPPORT_ERROR,{message:a.error}))}function v(a){D.call(this,"processsUnexpectedError",a),this.clientDispatcher.dispatchEvent(i.UNKNOWN_ERROR,{message:a})}function w(a){return D.call(this,"replaceVideoClient",a.type),this.currentVideoClient=a.player,this.currentVideoClientType=a.type,x.call(this,g.VIDEO_CLIENT_CREATED),this.currentVideoClientType==j.enums.players.NATIVE?x.call(this,g.VIDEO_NODE_ADDED):y.call(this,this.currentVideoClient),z.call(this,this.currentVideoClient),a}function x(a){this.clientDispatcher.dispatchEvent(a,{$videoNode:this.currentVideoClient.$video,videoClientType:this.currentVideoClientType,videoClient:this.currentVideoClient})}function y(a){var c=a.getPlayerEventDispatcher(),d=this,e=function(){D.call(d,"_onMediaAttached"),x.call(d,g.VIDEO_NODE_ADDED)};b.set(F,h.MEDIA_ATTACHED,e),D.call(this,"adding MEDIA_ATTACHED listener"),c.addEventListener(h.MEDIA_ATTACHED,e)}function z(a){D.call(this,"addVideoClientListeners",a);var c=a.getPlayerEventDispatcher(),d=this;b.each(G,function(a){var e=b.bind(B,d,a);b.set(F,a,e),c.addEventListener(a,e)}),b.each(h,function(a){if(!b.includes(G,a)){var e=function(a){E.call(d,"WARNING! EVENT :"+a+" is not redispatched")};c.addEventListener(a,b.partial(e,a))}})}function A(a,c){if(!a)return Promise.resolve(null);D.call(this,"removeVideoClient",c);var d=a.getPlayerEventDispatcher();return b.each(G,function(a){var c=b.get(F,a,c);d.removeEventListener(a,c)}),this.clientDispatcher.dispatchEvent(g.VIDEO_NODE_REMOVED,{videoClient:a,type:c}),a.destroy()}function B(a,b){this.clientDispatcher.dispatchEvent(a,b)}function C(){var a=c.getInstanceByKey("BamHTMLPlayer"+Date.now()),b={addEventListener:function(b,c){a.on(b,c)},removeEventListener:function(b,c){a.off(b,c)},dispatchEvent:function(b,c){a.publish(b,c)},removeAllListeners:function(){a.removeAllListeners()}};return b}function D(){this.logger.info("[BamHTMLPlayer]",Array.prototype.slice.call(arguments).join(" "))}function E(){this.logger.warn("[BamHTMLPlayer]",Array.prototype.slice.call(arguments).join(" "))}var F={};k.prototype=Object.create(d.prototype),k.prototype.constructor=k,k.prototype["super"]=d.prototype,k.prototype.toString=function(){return"BamHTMLPlayer"},k.prototype.init=function(){this.clientDispatcher=C(),k.prototype["super"].init.call(this,"video")},k.prototype.destroy=function(){k.prototype["super"].destroy.call(this),p.call(this)},k.prototype.createVideoClient=function(a,b){D.call(this,"createVideoClient");var c=this;return{toString:function(){return"BamProxyHTMLClient"},getPlayerEventDispatcher:function(){return c.clientDispatcher},setClip:function(b){var d=q.call(c,b),e=r.call(c,d,a);return l.call(c,"setClip",b),D.call(c,"proxiedClient",e),e},mute:function(){l.call(c,"mute")},pause:function(){l.call(c,"pause")},play:function(){l.call(c,"play")},reset:function(){l.call(c,"reset")},unmute:function(){l.call(c,"unmute")},load:function(){l.call(c,"load")},seek:function(a){l.call(c,"seek",a)},seekToDate:function(a){l.call(c,"seekToDate",a)},seekToLive:function(){l.call(c,"seekToLive")},setVolume:function(a){l.call(c,"setVolume",a)},create:function(){return l.call(c,"create")},destroy:function(){return l.call(c,"destroy")},getCurrentTimeInSecs:function(){return l.call(c,"getCurrentTimeInSecs")},getDurationInSecs:function(){return l.call(c,"getDurationInSecs")},getLiveTime:function(){return l.call(c,"getLiveTime")},getSeekableRange:function(){return l.call(c,"getSeekableRange")},isLiveRightNow:function(){return l.call(c,"isLiveRightNow")},applyConfig:function(a,b){return l.call(c,"applyConfig",a,b)},enableClosedCaptions:function(a){m.call(c,"enableClosedCaptions",a)},setSelectedAudioTrackByLanguage:function(a){m.call(c,"setSelectedAudioTrackByLanguage",a)},setAdaptiveBitrateConstraints:function(a){m.call(c,"setAdaptiveBitrateConstraints",a)},getClientMetrics:function(){return l.call(c,"getClientMetrics")},clientLibraryName:function(){return l.call(c,"clientLibraryName")},clientLibraryVersion:function(){return l.call(c,"clientLibraryVersion")},createPlayer:function(){return l.call(c,"createPlayer")},setAuthenticationCallback:function(){return l.call(c,"setAuthenticationCallback")}}};var G=[h.MEDIA_COMPLETE,h.MEDIA_ERROR,h.MEDIA_PAUSED,h.MEDIA_PLAYING,h.MEDIA_START,h.MEDIA_SEEK,h.MEDIA_WARNING,h.SEEK_COMPLETE,h.MEDIA_TIME_UPDATE,h.META_DATA_LOADED,h.META_DATA_PARSED,h.META_DATA_PT_REACHED,h.EXT_META_DATA_REACHED,h.CLOSED_CAPTIONS_TRACKS_CHANGED,h.AUDIO_TRACKS_CHANGED,h.CURRENT_AUDIO_TRACK_CHANGED,h.BITRATE_PROFILES_CHANGED,h.ISLIVE_CHANGED,h.LIVETIME_CHANGED,h.IS_SLIDING_WINDOW_CHANGED,h.STREAM_PLAYBACK_RATE_CHANGED,h.PLAYBACK_COMMERCIAL_BREAK_END,h.PLAYBACK_COMMERCIAL_BREAK_SET_STATE,h.PLAYBACK_COMMERCIAL_BREAK_START,h.PLAYBACK_FAILED_PERMISSION_DENIED,h.TIME_CODE,h.BUFFERING_STARTED,h.BUFFERING_ENDED,i.BROWSER_SUPPORT_ERROR,i.UNKNOWN_ERROR];return e.registerPlayer(k),k}),function(a,b){require&&require.config&&require.config({paths:{jquery:"jquery/jquery","jquery-ui":"jquery-ui/index",text:"requirejs-text/text"}}),"function"==typeof define&&define.amd?define("bam-video-players/VideoPlayerManager",["bam-video-players/players/VideoPlayerFactory","bam-video-players/events/PlayerEvents","bam-video-players/players/AbstractPlayer","bam-video-players/players/HTML5Player","bam-video-players/players/BamHTMLPlayer"],b):"object"==typeof exports?module.exports=b(require("bam-video-players/players/VideoPlayerFactory"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/players/AbstractPlayer"),require("bam-video-players/players/HTML5Player"),require("bam-video-players/players/BamHTMLPlayer")):a.VideoPlayerManager=b(a.VideoPlayerFactory,a.PlayerEvents,a.AbstractPlayer,a.HTML5Player,a.BamHTMLPlayer)}(this,function(a,b){"use strict";var c={PlayerEvents:b,getPlayer:function(b,c){var d=a.getPlayer(b,c);return window.this_is_not_a_player=d,d}};return window.VideoPlayerManager=c,c});var Conviva=Conviva||{};(Conviva.r=function(){"use strict";if("undefined"==typeof Conviva.PrivateLoader){var a=Conviva.PrivateLoader={};!function(){var b=a.Client=function(a,f){function h(a,b){if(!(a instanceof c))throw new Error("clientSettings parameter should be an instance of ClientSettings.");if(!(b instanceof e))throw new Error("systemFactory parameter should be an instance of SystemFactory.");this._settings=a.clone(),this._systemFactory=b,this._systemFactory.configure("SDK",this._settings),this._exceptionCatcher=this._systemFactory.buildExceptionCatcher(),this._exceptionCatcher.runProtected("Client.init",function(){i._id=E.uinteger32(),i._logger=i._systemFactory.buildLogger(),i._logger.setModuleName("Client"),i._logger.info("init(): url="+i._settings.gatewayUrl+" customerKey="+i._settings.customerKey),i._config=i._systemFactory.buildConfig(),i._config.load(),i._sessionFactory=i._systemFactory.buildSessionFactory(i,i._settings,i._config),i._logger.info("init(): done.")},function(a){throw new Error("Client constructor failed: "+a.message)})}var i=this;this._logger=null,this._sessionFactory=null,this._systemFactory=null,this._globalSessionKey=-1,this._settings=null,this._systemSettings=null,this._exceptionCatcher=null,this._config=null,this._id=-1,this._released=!1,h.apply(this,arguments),this.release=function(){this._released||this._exceptionCatcher.runProtected("Client.release",function(){i._logger.info("release()"),i._sessionFactory.cleanup(),i._sessionFactory=null,i._globalSessionKey=-1,i._logger=null,i._id=-1,i._exceptionCatcher=null,i._settings=null,i._systemSettings=null,i._systemFactory=null,i._released=!0})},this.createSession=function(a){var c=b.NO_SESSION_KEY;return this._released?c:null==a||a instanceof d?(this._exceptionCatcher.runProtected("Client.createSession",function(){
c=i._sessionFactory.makeVideoSession(a)}),c):(i._logger.error("createSession(): expecting an instance of ContentMetadata for contentMetadata parameter"),c)},this.reportError=function(a,b,c){return this._released?void 0:B.isValidString(b)?c!==Conviva.Client.ErrorSeverity.FATAL&&c!==Conviva.Client.ErrorSeverity.WARNING?void this._logger.error("reportError(): invalid error severity: "+c):void this._exceptionCatcher.runProtected("Client.reportError",function(){var d=i._sessionFactory.getVideoSession(a);null!=d&&d.reportError(b,c)}):void this._logger.error("reportError(): invalid error message string: "+b)},this.updateContentMetadata=function(a,b){return this._released?void 0:b instanceof d?void this._exceptionCatcher.runProtected("Client.updateContentMetadata",function(){var c=i._sessionFactory.getVideoSession(a);if(null!=c){var d=b.clone();c.updateContentMetadata(d)}}):void i._logger.error("updateContentMetadata(): expecting an instance of ContentMetadata for contentMetadata parameter")},this.detachPlayer=function(a){this._released||this._exceptionCatcher.runProtected("Client.detachPlayer",function(){var b=i._sessionFactory.getVideoSession(a);null!=b&&b.detachPlayer()})},this.attachPlayer=function(a,b){return this._released?void 0:b instanceof g?void this._exceptionCatcher.runProtected("Client.attachPlayer",function(){var c=i._sessionFactory.getVideoSession(a);null!=c&&c.attachPlayer(b)}):void i._logger.error("attachPlayer(): expecting an instance of PlayerStateManager for playerStateManager parameter")},this.contentPreload=function(a){this._released||this._exceptionCatcher.runProtected("Client.contentPreload",function(){var b=i._sessionFactory.getVideoSession(a);null!=b&&b.contentPreload()})},this.contentStart=function(a){this._released||this._exceptionCatcher.runProtected("Client.contentStart",function(){var b=i._sessionFactory.getVideoSession(a);null!=b&&b.contentStart()})},this.sendCustomEvent=function(a,c,e){return this._released?void 0:B.isValidString(c)?void this._exceptionCatcher.runProtected("Client.sendCustomEvent",function(){if(a==b.NO_SESSION_KEY){if(i._globalSessionKey<0){var f=new d;i._globalSessionKey=i._sessionFactory.makeGlobalSession(f,null)}a=i._globalSessionKey}var g=B.ObjectShallowCopy(e),h=i._sessionFactory.getSession(a);null!=h&&h.sendCustomEvent(c,g)}):void i._logger.error("sendCustomEvent(): eventName parameter must be a valid string.")},this.adStart=function(a,c,d,e){return this._released?void 0:c!==b.AdStream.CONTENT&&c!==b.AdStream.SEPARATE?void this._logger.error("adStart(): ignored, invalid value for adStream parameter: "+c):d!==b.AdPlayer.CONTENT&&d!==b.AdPlayer.SEPARATE?void this._logger.error("adStart(): ignored, invalid value for adPlayer parameter: "+d):e!==b.AdPosition.PREROLL&&e!==b.AdPosition.MIDROLL&&e!==b.AdPosition.POSTROLL?void this._logger.error("adStart(): ignored, invalid value for adPosition parameter: "+e):void this._exceptionCatcher.runProtected("Client.adStart",function(){var b=i._sessionFactory.getVideoSession(a);null!=b&&b.adStart(c,d,e)})},this.adEnd=function(a){this._released||this._exceptionCatcher.runProtected("Client.adEnd",function(){var b=i._sessionFactory.getVideoSession(a);null!=b&&b.adEnd()})},this.cleanupSession=function(a){return this._released?void 0:a===b.NO_SESSION_KEY?void this._logger.warning("cleanupSession(): ignored, can't cleanup Client.NO_SESSION_KEY"):void this._exceptionCatcher.runProtected("Client.cleanupSession",function(){var b=i._sessionFactory.getVideoSession(a);null!=b&&i._sessionFactory.cleanupSession(a)})},this.getPlayerStateManager=function(){if(this._released)throw new Error("This instance of Conviva.Client has been released.");return new g(this._systemFactory)},this.releasePlayerStateManager=function(a){if(this._released)throw new Error("This instance of Conviva.Client has been released.");this._exceptionCatcher.runProtected("Client.releasePlayerStateManager",function(){a instanceof g&&a.release()})},this.getSettings=function(){return this._settings},this.getId=function(){return this._id}};b.version="2.117.0.31658",b.NO_SESSION_KEY=-2,b.AdPosition={PREROLL:"PREROLL",MIDROLL:"MIDROLL",POSTROLL:"POSTROLL"},b.AdStream={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},b.AdPlayer={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},b.ErrorSeverity={FATAL:0,WARNING:1},b.DeviceType={DESKTOP:"DESKTOP",CONSOLE:"Console",SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV",UNKNOWN:"Unknown"};var c=a.ClientSettings=function(a){function b(a){if(!B.isValidString(a))throw new Error("customerKey must be valid");this.customerKey=a}this._customerKey=null,B.defGet(this,"customerKey",function(){return this._customerKey}),B.defSet(this,"customerKey",function(a){B.isValidString(a)&&(this._customerKey=a)}),this._heartbeatInterval=c.defaultProductionHeartbeatInterval,B.defGet(this,"heartbeatInterval",function(){return this._heartbeatInterval}),B.defSet(this,"heartbeatInterval",function(a){if("number"==typeof a){var b=B.NumberToUnsignedInt(a);b===a&&(this._heartbeatInterval=b)}}),this._gatewayUrl=c.defaultProductionGatewayUrl,B.defGet(this,"gatewayUrl",function(){return this._gatewayUrl}),B.defSet(this,"gatewayUrl",function(a){B.isValidString(a)&&(this._gatewayUrl=a)}),b.apply(this,arguments),this.equals=function(a){return this.customerKey===a.customerKey&&this.gatewayUrl===a.gatewayUrl&&this.heartbeatInterval===a.heartbeatInterval},this.clone=function(){var a=new c(this.customerKey);return a.gatewayUrl=this.gatewayUrl,a.heartbeatInterval=this.heartbeatInterval,a}};c.defaultDevelopmentGatewayUrl="https://conviva.testonly.conviva.com",c.defaultProductionGatewayUrl="https://cws.conviva.com",c.defaultDevelopmentHeartbeatInterval=5,c.defaultProductionHeartbeatInterval=20;var d=a.ContentMetadata=function(){function a(){return this._custom}function b(a){return null!=a&&"undefined"!=a&&"null"!=a&&""!=a}function c(a){if("object"==typeof a){var c={};for(var d in a)if(b(d)){var e=a[d];b(e)&&(c[d]=e)}this._custom=c}}function e(){return this._defaultBitrateKbps}function f(a){this._defaultBitrateKbps=F.sanitizeSpecialIntegerValue(a)}function g(){return this._streamType}function h(a){(a===d.StreamType.UNKNOWN||a===d.StreamType.VOD||a===d.StreamType.LIVE)&&(this._streamType=a)}function i(){return this._duration}function j(a){this._duration=F.sanitizeSpecialIntegerValue(a)}function k(){return this._encodedFrameRate}function l(a){this._encodedFrameRate=F.sanitizeSpecialIntegerValue(a)}function m(){}this.assetName=null,this._custom={},B.defGet(this,"custom",a),B.defSet(this,"custom",c),this._defaultBitrateKbps=-2,B.defGet(this,"defaultBitrateKbps",e),B.defSet(this,"defaultBitrateKbps",f),this.defaultResource=null,this.viewerId=null,this.applicationName=null,this.streamUrl=null,this._streamType=d.StreamType.UNKNOWN,B.defGet(this,"streamType",g),B.defSet(this,"streamType",h),this._duration=-1,B.defGet(this,"duration",i),B.defSet(this,"duration",j),this._encodedFrameRate=-1,B.defGet(this,"encodedFrameRate",k),B.defSet(this,"encodedFrameRate",l),m.apply(this,arguments),this.clone=function(){var a=new d;a.assetName=this.assetName,a.applicationName=this.applicationName,a.streamUrl=this.streamUrl,a.viewerId=this.viewerId,a.defaultBitrateKbps=this.defaultBitrateKbps,a.defaultResource=this.defaultResource,a.streamType=this.streamType,a.duration=this.duration,a.encodedFrameRate=this.encodedFrameRate;for(var b in this.custom)a.custom[b]=this.custom[b];return a}};d.StreamType={UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"};var e=a.SystemFactory=function(a,b){function c(a,b){if(!(a instanceof l))throw new Error("systemInterface parameter should be an instance of SystemInterface.");this._systemInterface=a,this._timeInterface=this._systemInterface._timeInterface,this._timerInterface=this._systemInterface._timerInterface,this._httpInterface=this._systemInterface._httpInterface,this._storageInterface=this._systemInterface._storageInterface,this._metadataInterface=this._systemInterface._metadataInterface,this._loggingInterface=this._systemInterface._loggingInterface,b instanceof f?this._settings=b.clone():this._settings=new f}var d=this;c.apply(this,arguments),this.configure=function(a,b){this._packageName=a,this._clientSettings=b},this.release=function(){this._systemInterface.release(),this._systemInterface=null,this._packageName=null,this._settings=null,this._logBuffer=null};var e={build:function(){return new H(d._loggingInterface,d._timeInterface,d.getSettings(),d._logBuffer,d._packageName)}};this.buildLogger=function(){return e.build()},this.buildSessionFactory=function(a,b,c){return new v(a,b,c,this)},this.buildPing=function(){return new D(this.buildLogger(),this.buildHttpClient(),this._clientSettings)},this.buildCallbackWithTimeout=function(){return new w(this.buildTimer())},this.buildCallbackWithTimeoutNoPing=function(){var a=null,b=new z(this.buildLogger(),a,this.getSettings()),c=new L(this.buildLogger(),this._timerInterface,b);return new w(c)},this.buildHttpClient=function(){return new G(this.buildLogger(),this._httpInterface,this.buildCallbackWithTimeoutNoPing(),this.getSettings())},this.buildExceptionCatcher=function(){return new z(this.buildLogger(),this.buildPing(),this.getSettings())},this.buildTime=function(){return new K(this._timeInterface,this.buildLogger())},this.buildTimer=function(){return new L(this.buildLogger(),this._timerInterface,this.buildExceptionCatcher())},this.buildStorage=function(){return new I(this.buildLogger(),this._storageInterface,this.buildCallbackWithTimeout(),this.getSettings())},this.buildConfig=function(){return new x(this.buildLogger(),this.buildStorage(),this.buildJsonInterface())},this.buildSystemMetadata=function(){return new J(this.buildLogger(),this._metadataInterface,this.buildExceptionCatcher())},this.buildCwsProtocol=function(){return new q},this.buildGatewayControl=function(a){return new A(a,this.buildLogger(),this.buildHttpClient(),this.buildJsonInterface())},this.buildCwsSession=function(a,b,c){var d=this.buildGatewayControl(b);return new t(this.buildEventQueue(),a,b,this.buildLogger(),this.buildExceptionCatcher(),this.buildTimer(),d,this.buildCwsProtocol(),this.buildTime(),this.getLogBuffer(),c)},this.buildSession=function(a,b,c,d,e,f){var g=this.buildExceptionCatcher(),h=this.buildLogger(),i=this.buildCwsSession(a,b,c);return new u(d,e,f,c,this.buildSystemMetadata(),i,g,h)},this.buildEventQueue=function(){return new y},this.buildJsonInterface=function(){return new r},this.getLogBuffer=function(){return this._logBuffer},this.getSettings=function(){return this._settings},this._logBuffer=new C},f=a.SystemSettings=function(){function a(){}this._logLevel=f.defaultProductionLogLevel,B.defGet(this,"logLevel",function(){return this._logLevel}),B.defSet(this,"logLevel",function(a){if("number"==typeof a){var b=B.NumberToUnsignedInt(a);b===a&&b>=f.LogLevel.DEBUG&&b<=f.LogLevel.ERROR&&(this._logLevel=b)}}),this._allowUncaughtExceptions=f.defaultProductionAllowUncaughtExceptions,B.defGet(this,"allowUncaughtExceptions",function(){return this._allowUncaughtExceptions}),B.defSet(this,"allowUncaughtExceptions",function(a){B.isBoolean(a)&&(this._allowUncaughtExceptions=a)}),this._storageTimeout=f.defaultStorageTimeout,B.defGet(this,"storageTimeout",function(){return this._storageTimeout}),B.defSet(this,"storageTimeout",function(a){if("number"==typeof a){var b=B.NumberToUnsignedInt(a);b===a&&(this._storageTimeout=b)}}),this._httpTimeout=f.defaultHttpTimeout,B.defGet(this,"httpTimeout",function(){return this._httpTimeout}),B.defSet(this,"httpTimeout",function(a){if("number"==typeof a){var b=B.NumberToUnsignedInt(a);b===a&&(this._httpTimeout=b)}}),a.apply(this,arguments),this.equals=function(a){return this.logLevel===a.logLevel&&this.allowUncaughtExceptions===a.allowUncaughtExceptions&&this.storageTimeout===a.storageTimeout&&this.httpTimeout===a.httpTimeout},this.clone=function(){var a=new f;return a.logLevel=this.logLevel,a.allowUncaughtExceptions=this.allowUncaughtExceptions,a.storageTimeout=this.storageTimeout,a.httpTimeout=this.httpTimeout,a}};f.LogLevel={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},f.defaultDevelopmentLogLevel=f.LogLevel.DEBUG,f.defaultProductionLogLevel=f.LogLevel.ERROR,f.defaultDevelopmentAllowUncaughtExceptions=!0,f.defaultProductionAllowUncaughtExceptions=!1,f.defaultStorageTimeout=10,f.defaultHttpTimeout=10;var g=a.PlayerStateManager=function(a){function b(a){c._systemFactory=a,c._logger=c._systemFactory.buildLogger(),c._logger.setModuleName("PlayerStateManager"),c._exceptionCatcher=c._systemFactory.buildExceptionCatcher()}var c=this;c._monitorNotifier=null,c._bitrateKbps=-2,c._playerState=g.PlayerState.UNKNOWN,c._currentMetadata={},c._renderedFrameRate=-2,c._encodedFrameRate=-2,c._duration=-2,c._playheadTimeMs=-1,c._bufferLengthMs=-1,c._playerVersion=null,c._playerType=null,c._streamUrl=null,c._lastError=null,c._pendingErrors=[],c._released=!1,this.release=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.release",function(){null!=c._monitorNotifier&&c._monitorNotifier.onRelease(),c.removeMonitoringNotifier(),c._systemFactory=null,c._logger=null,c._exceptionCatcher=null,c._released=!0})},this.getPlayheadTime=function(){return c._playheadTimeMs},this.setPlayheadTime=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setPlayheadTime",function(){c._playheadTimeMs=F.Integer(a,-1,null,-1),null!=c._monitorNotifier&&c._monitorNotifier.onPlayheadTimeChange(c._playheadTimeMs)})},this.getBufferLength=function(){return c._bufferLengthMs},this.setBufferLength=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setBufferLength",function(){c._bufferLengthMs=F.Integer(a,-1,null,-1),null!=c._monitorNotifier&&c._monitorNotifier.onBufferLengthChange(c._bufferLengthMs)})},this.getRenderedFrameRate=function(){return c._renderedFrameRate},this.setRenderedFrameRate=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setRenderedFrameRate",function(){c._renderedFrameRate=F.Integer(a,-1,null,-1),null!=c._monitorNotifier&&c._monitorNotifier.onRenderedFrameRateChange(c._renderedFrameRate)})},this.getEncodedFrameRate=function(){return c._encodedFrameRate},this.setEncodedFrameRate=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setEncodedFrameRate",function(){var b=F.sanitizeSpecialIntegerValue(a);b>=-1&&(c._encodedFrameRate=b,null!=c._monitorNotifier&&c._monitorNotifier.onEncodedFrameRateChange(c._encodedFrameRate))})},this.getDuration=function(){return c._duration},this.setDuration=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setDuration",function(){var b=F.sanitizeSpecialIntegerValue(a);b>=-1&&(c._duration=b,null!=c._monitorNotifier&&c._monitorNotifier.onContentLengthChange(c._duration))})},this.getStreamUrl=function(){return c._streamUrl},this.setStreamUrl=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setStreamUrl",function(){c._streamUrl=a,null!=c._monitorNotifier&&c._monitorNotifier.onStreamUrlChange(c._streamUrl)})},this.getPlayerType=function(){return c._playerType},this.setPlayerType=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setPlayerType",function(){c._playerType=a,null!=c._monitorNotifier&&c._monitorNotifier.onPlayerTypeChange(c._playerType)})},this.getPlayerVersion=function(){return c._playerVersion},this.setPlayerVersion=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setPlayerVersion",function(){c._playerVersion=a,null!=c._monitorNotifier&&c._monitorNotifier.onPlayerVersionChange(c._playerVersion)})},this.setMonitoringNotifier=function(a,b){return c._released?void 0:null!=c._monitorNotifier?!1:(c._monitorNotifier=a,c._logger.setSessionId(b),!0)},this.removeMonitoringNotifier=function(){c._released||(c._monitorNotifier=null,c._logger.setSessionId(null))},this.pushCurrentState=function(){c.setPlayerState(c.getPlayerState()),c.setBitrateKbps(c.getBitrateKbps()),c.setDuration(c.getDuration()),c.setEncodedFrameRate(c.getEncodedFrameRate()),c.setPlayheadTime(c.getPlayheadTime()),c.setBufferLength(c.getBufferLength()),c.setStreamUrl(c.getStreamUrl()),c.setPlayerType(c.getPlayerType()),c.setPlayerVersion(c.getPlayerVersion());for(var a=0;a<c._pendingErrors.length;a++){var b=c._pendingErrors[a];c.setError(b)}c._pendingErrors=[]},this.getPlayerState=function(){return c._playerState},this.setPlayerState=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setPlayerState",function(){g.isValidPlayerState(a)?(c._playerState=a,null!=c._monitorNotifier&&c._monitorNotifier.onPlayerStateChange(c._playerState)):c._logger.error("PlayerStateManager.SetPlayerState(): invalid state: "+a)})},this.getBitrateKbps=function(){return c._bitrateKbps},this.setBitrateKbps=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setBitrateKbps",function(){var b=F.sanitizeSpecialIntegerValue(a);b>=-1&&(c._bitrateKbps=b,null!=c._monitorNotifier&&c._monitorNotifier.onBitrateChange(c._bitrateKbps))})},this.setSeekStart=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setSeekStart()",function(){null!=c._monitorNotifier&&c._monitorNotifier.onSeekEvent(g.SEEK_ACTIONS_TYPE.SEEK_START,a)})},this.setSeekEnd=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setSeekEnd()",function(){null!=c._monitorNotifier&&c._monitorNotifier.onSeekEvent(g.SEEK_ACTIONS_TYPE.SEEK_END,-1)})},this.setUserSeekButtonUp=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setUserSeekButtonUp()",function(){null!=c._monitorNotifier&&c._monitorNotifier.onSeekEvent(g.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)})},this.setUserSeekButtonDown=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setUserSeekButtonDown()",function(){null!=c._monitorNotifier&&c._monitorNotifier.onSeekEvent(g.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)})},this.setError=function(a){if(c._lastError=a,null!=c._monitorNotifier){var b=a.errorCode,d=a.severity;c._monitorNotifier.onError(b,d)}else c._pendingErrors.push(a)},this.sendError=function(a,b){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.sendError",function(){var d=new Conviva.PrivateLoader.StreamerError(a,b);c.setError(d)})},this.reset=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.reset",function(){c._bitrateKbps=-2,c._playerState=g.PlayerState.UNKNOWN,c._currentMetadata={},c._renderedFrameRate=-1,c._encodedFrameRate=-1,c._duration=-1,c._playheadTimeMs=-1,c._bufferLengthMs=-1,c._playerVersion=null,c._playerType=null,c._streamUrl=null,c._lastError=null,c._pendingErrors=[]})},this.getError=function(){return c._lastError},b.apply(c,arguments)};g.PlayerState={STOPPED:"STOPPED",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},g.isValidPlayerState=function(a){return a===g.PlayerState.STOPPED||a===g.PlayerState.PLAYING||a===g.PlayerState.BUFFERING||a===g.PlayerState.PAUSED||a===g.PlayerState.UNKNOWN||a===g.PlayerState.NOT_MONITORED?!0:!1},g.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"};var h=a.HttpInterface=function(){this.makeRequest=function(a,b,c,d,e,f){},this.release=function(){}},i=a.LoggingInterface=function(){this.consoleLog=function(a,b){},this.release=function(){}},j=a.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},this.getDeviceModel=function(){},this.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},this.getOperatingSystemVersion=function(){},this.release=function(){}},k=a.StorageInterface=function(){this.saveData=function(a,b,c,d){},this.loadData=function(a,b,c){},this.release=function(){}},l=a.SystemInterface=function(a,b,c,d,e,f){function g(a,b,c,d,e,f){B.validateInterface(a,new m,"TimeInterface"),B.validateInterface(b,new n,"TimerInterface"),B.validateInterface(c,new h,"HttpInterface"),B.validateInterface(d,new k,"StorageInterface"),B.validateInterface(e,new j,"MetadataInterface"),B.validateInterface(f,new i,"LoggingInterface"),this._timeInterface=a,this._timerInterface=b,this._httpInterface=c,this._storageInterface=d,this._metadataInterface=e,this._loggingInterface=f}g.apply(this,arguments),this.release=function(){this._timeInterface.release(),this._timeInterface=null,this._timerInterface.release(),this._timerInterface=null,this._httpInterface.release(),this._httpInterface=null,this._storageInterface.release(),this._storageInterface=null,this._metadataInterface.release(),this._metadataInterface=null,this._loggingInterface.release(),this._loggingInterface=null}},m=a.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},n=a.TimerInterface=function(){this.createTimer=function(a,b,c){},this.release=function(){}},o=a.JSON2={};!function(){function a(a){return 10>a?"0"+a:a}function b(a){return d.lastIndex=0,d.test(a)?'"'+a.replace(d,function(a){var b=g[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,d){var g,i,j,k,l,m=e,n=d[a];switch(n&&"object"==typeof n&&"function"==typeof n.toJSON&&(n=n.toJSON(a)),"function"==typeof h&&(n=h.call(d,a,n)),typeof n){case"string":return b(n);case"number":return isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";if(e+=f,l=[],Object.prototype.toString.apply(n)===Object.prototype.toString.apply([])){for(k=n.length,g=0;k>g;g+=1)l[g]=c(g,n)||"null";return j=0===l.length?"[]":e?"[\n"+e+l.join(",\n"+e)+"\n"+m+"]":"["+l.join(",")+"]",e=m,j}if(h&&"object"==typeof h)for(k=h.length,g=0;k>g;g+=1)"string"==typeof h[g]&&(i=h[g],j=c(i,n),j&&l.push(b(i)+(e?": ":":")+j));else for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(j=c(i,n),j&&l.push(b(i)+(e?": ":":")+j));return j=0===l.length?"{}":e?"{\n"+e+l.join(",\n"+e)+"\n"+m+"}":"{"+l.join(",")+"}",e=m,j}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d,e,f,g,h;"function"!=typeof o.stringify&&(d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},o.stringify=function(a,b,d){var g;if(e="",f="","number"==typeof d)for(g=0;d>g;g+=1)f+=" ";else"string"==typeof d&&(f=d);if(h=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON2.stringify");return c("",{"":a})})}();var p=a.JsonParse=function(){var a,b,c,d,e={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},f=function(b){throw{name:"SyntaxError",message:b,at:a,text:c}},g=function(d){return d&&d!==b&&f("Expected '"+d+"' instead of '"+b+"'"),b=c.charAt(a),a+=1,b},h=function(){var a,c="";for("-"===b&&(c="-",g("-"));b>="0"&&"9">=b;)c+=b,g();if("."===b)for(c+=".";g()&&b>="0"&&"9">=b;)c+=b;if("e"===b||"E"===b)for(c+=b,g(),("-"===b||"+"===b)&&(c+=b,g());b>="0"&&"9">=b;)c+=b,g();return a=+c,isNaN(a)?void f("Bad number"):a},i=function(){var a,c,d,h="";if('"'===b)for(;g();){if('"'===b)return g(),h;if("\\"===b)if(g(),"u"===b){for(d=0,c=0;4>c&&(a=parseInt(g(),16),isFinite(a));c+=1)d=16*d+a;h+=String.fromCharCode(d)}else{if("string"!=typeof e[b])break;h+=e[b]}else h+=b}f("Bad string")},j=function(){for(;b&&" ">=b;)g()},k=function(){switch(b){case"t":return g("t"),g("r"),g("u"),g("e"),!0;case"f":return g("f"),g("a"),g("l"),g("s"),g("e"),!1;case"n":return g("n"),g("u"),g("l"),g("l"),null}f("Unexpected '"+b+"'")},l=function(){var a=[];if("["===b){if(g("["),j(),"]"===b)return g("]"),a;for(;b;){if(a.push(d()),j(),"]"===b)return g("]"),a;g(","),j()}}f("Bad array")},m=function(){var a,c={};if("{"===b){if(g("{"),j(),"}"===b)return g("}"),c;for(;b;){if(a=i(),j(),g(":"),Object.hasOwnProperty.call(c,a)&&f('Duplicate key "'+a+'"'),c[a]=d(),j(),"}"===b)return g("}"),c;g(","),j()}}f("Bad object")};return d=function(){switch(j(),b){case"{":return m();case"[":return l();case'"':return i();case"-":return h();default:return b>="0"&&"9">=b?h():k()}},function(e,g){var h;return c=e,a=0,b=" ",h=d(),j(),b&&f("Syntax error"),"function"==typeof g?function i(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.hasOwnProperty.call(e,c)&&(d=i(e,c),void 0!==d?e[c]=d:delete e[c]);return g.call(a,b,e)}({"":h},""):h}}(),q=a.CwsProtocol=function(){this.generateEvent=function(a,b,c,d){return d.seq=a,d.st=b,d.t=c,d},this.generateSessionEndEvent=function(a,b){var c=q.EVENT_TYPE_SESSION_END,d={};return this.generateEvent(a,b,c,d)}};q.version="2.2",q.gatewayPath="/0/wsg",q.DEFAULT_CLIENT_ID="0",q.DEFAULT_MAX_HEARTBEAT_INFOS=0,q.DEFAULT_PLAYHEAD_TIME=-1,q.DEFAULT_BUFFER_LENGTH=-1,q.SDK_METADATA_SCHEMA="sdk.js.1",q.EVENT_TYPE_STATE_CHANGE="CwsStateChangeEvent",q.EVENT_TYPE_ERROR="CwsErrorEvent",q.EVENT_TYPE_SESSION_END="CwsSessionEndEvent",q.EVENT_TYPE_CUSTOM="CwsCustomEvent",q.EVENT_TYPE_SEEK="CwsSeekEvent",q.RESPONSE_STATUS_NO_ERRORS="ok",q.RESPONSE_KEY_STATUS="err",q.RESPONSE_KEY_CLIENT_ID="clid",q.RESPONSE_KEY_CONFIG="cfg",q.RESPONSE_KEY_EVENTS="evs",q.RESPONSE_CONFIG_KEY_MAX_HEARTBEAT_INFOS="maxhbinfos",q.RESPONSE_CONFIG_KEY_SEND_LOGS="slg",q.RESPONSE_CONFIG_KEY_HEARTBEAT_INTERVAL="hbi",q.RESPONSE_CONFIG_KEY_GATEWAY_URL="gw",q.MESSAGE_TYPE_SESSION_HEARTBEAT="CwsSessionHb",q.REQUEST_KEY_MESSAGE_TYPE="t",q.REQUEST_KEY_SESSION_TIME="st",q.REQUEST_KEY_SESSION_START_TIME="sst",q.REQUEST_KEY_IS_LIVE="lv",q.REQUEST_KEY_SEQUENCE_NUMBER="seq",q.REQUEST_KEY_CUSTOMER_KEY="cid",q.REQUEST_KEY_CLIENT_ID="clid",q.REQUEST_KEY_CLIENT_VERSION="clv",q.REQUEST_KEY_PROTOCOL_VERSION="pver",q.REQUEST_KEY_INSTANCE_ID="iid",q.REQUEST_KEY_SESSION_ID="sid",q.REQUEST_KEY_VIEWER_ID="vid",q.REQUEST_KEY_ASSET_NAME="an",q.REQUEST_KEY_PLAYER_NAME="pn",q.REQUEST_KEY_TAGS="tags",q.REQUEST_KEY_SESSION_FLAGS="sf",q.REQUEST_KEY_EVENTS="evs",q.REQUEST_KEY_LOGS="lg",q.REQUEST_KEY_HEARTBEAT_INFOS="hbinfos",q.REQUEST_KEY_IS_SDK_CLIENT="sdk",q.REQUEST_KEY_PAUSE_JOIN="pj",q.REQUEST_KEY_PLAYER_STATE="ps",q.REQUEST_KEY_BITRATE="br",q.REQUEST_KEY_CONTENT_LENGTH="cl",q.REQUEST_KEY_ENCODED_FRAME_RATE="efps",q.REQUEST_KEY_AVERAGE_FRAME_RATE="afps",q.REQUEST_KEY_RESOURCE="rs",q.REQUEST_KEY_PLAYHEAD_TIME="pht",q.REQUEST_KEY_BUFFER_LENGTH="bl",q.REQUEST_KEY_STREAM_URL="url",q.REQUEST_KEY_CAPABILITIES="caps",q.REQUEST_KEY_PLATFORM_METADATA="pm",q.REQUEST_PLATFORM_METADATA_KEY_SCHEMA="sch",q.REQUEST_PLATFORM_METADATA_KEY_BROWSER_NAME="br",q.REQUEST_PLATFORM_METADATA_KEY_BROWSER_VERSION="brv",q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_BRAND="dvb",q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MANUFACTURER="dvma",q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MODEL="dvm",q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_TYPE="dvt",q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_VERSION="dvv",q.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME="fw",q.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION="fwv",q.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME="os",q.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION="osv",q.REQUEST_KEY_PROTOCOL_CAPP="caps",q.REQUEST_EVENT_KEY_TYPE="t",q.REQUEST_EVENT_KEY_SEQUENCE_NUMBER="seq",q.REQUEST_EVENT_KEY_SESSION_TIME="st",q.REQUEST_EVENT_KEY_SEEK_ACT_TYPE="act",q.REQUEST_EVENT_KEY_SEEK_TO_POS="skto",q.REQUEST_ERROR_EVENT_KEY_MESSAGE="err",q.REQUEST_ERROR_EVENT_KEY_FATAL="ft",q.REQUEST_STATE_CHANGE_EVENT_KEY_NEW="new",q.REQUEST_STATE_CHANGE_EVENT_KEY_OLD="old",q.REQUEST_CUSTOM_EVENT_KEY_NAME="name",q.REQUEST_CUSTOM_EVENT_KEY_ATTRIBUTES="attr",q.REQUEST_HEARTBEAT_INFO_KEY_SEQUENCE_NUMBER="seq",q.REQUEST_HEARTBEAT_INFO_KEY_STATUS="err",q.REQUEST_HEARTBEAT_INFO_KEY_ROUNDTRIP_TIME="rtt",q.convertPlayerState=function(a){switch(a){case g.PlayerState.STOPPED:return q.eStopped;case g.PlayerState.PLAYING:return q.ePlaying;case g.PlayerState.BUFFERING:return q.eBuffering;case g.PlayerState.PAUSED:return q.ePaused;case g.PlayerState.NOT_MONITORED:return q.eNotMonitored;default:return q.eUnknown}},q.eStopped=1,q.ePlaying=3,q.eBuffering=6,q.ePaused=12,q.eNotMonitored=98,q.eUnknown=100,q.SessionFlags={GLOBAL:0,VIDEO:1,QUALITY_METRICS:2,BITRATE_METRICS:4},q.Capabilities={INSIGHTS:0};var r=(a.JSONInterface=function(){this.encode=function(a){},this.decode=function(a){}},a.LibJSONInterface=function(){this.encode=function(a){var b=null;try{b=o.stringify(a)}catch(c){}return b},this.decode=function(a){var b=null;try{b=p(a)}catch(c){}return B.isObject(b)||(b=null),b}}),s=a.CwsHeartbeat=function(){function a(){}this._data={},a.apply(this,arguments),this.get=function(){return this._data},this.setField=function(a,b){this._data[a]=b},this.setInnerField=function(a,b,c){this._data[a]||(this._data[a]={}),this._data[a][b]=c},this.setMessageType=function(a){this.setField(q.REQUEST_KEY_MESSAGE_TYPE,a)},this.setSessionTime=function(a){this.setField(q.REQUEST_KEY_SESSION_TIME,a)},this.setSessionStartTime=function(a){this.setField(q.REQUEST_KEY_SESSION_START_TIME,a)},this.setIsLive=function(a){this.setField(q.REQUEST_KEY_IS_LIVE,a)},this.setSequenceNumber=function(a){this.setField(q.REQUEST_KEY_SEQUENCE_NUMBER,a)},this.setCustomerKey=function(a){this.setField(q.REQUEST_KEY_CUSTOMER_KEY,a)},this.setClientId=function(a){this.setField(q.REQUEST_KEY_CLIENT_ID,a)},this.setClientVersion=function(a){this.setField(q.REQUEST_KEY_CLIENT_VERSION,a)},this.setProtocolVersion=function(a){this.setField(q.REQUEST_KEY_PROTOCOL_VERSION,a)},this.setCapfield=function(a){this.setField(q.REQUEST_KEY_PROTOCOL_CAPP,a)},this.setSessionId=function(a){this.setField(q.REQUEST_KEY_SESSION_ID,a)},this.setInstanceId=function(a){this.setField(q.REQUEST_KEY_INSTANCE_ID,a)},this.setViewerId=function(a){this.setField(q.REQUEST_KEY_VIEWER_ID,a)},this.setAssetName=function(a){this.setField(q.REQUEST_KEY_ASSET_NAME,a)},this.setPlayerName=function(a){this.setField(q.REQUEST_KEY_PLAYER_NAME,a)},this.setTags=function(a){this.setField(q.REQUEST_KEY_TAGS,a)},this.setSessionFlags=function(a){this.setField(q.REQUEST_KEY_SESSION_FLAGS,a)},this.setCapabilities=function(a){this.setField(q.REQUEST_KEY_CAPABILITIES,a)},this.setEvents=function(a){this.setField(q.REQUEST_KEY_EVENTS,a)},this.setIsSdkClient=function(a){this.setField(q.REQUEST_KEY_IS_SDK_CLIENT,a)},this.setLogs=function(a){this.setField(q.REQUEST_KEY_LOGS,a)},this.setHeartbeatInfos=function(a){this.setField(q.REQUEST_KEY_HEARTBEAT_INFOS,a)},this.setPlayerState=function(a){this.setField(q.REQUEST_KEY_PLAYER_STATE,a)},this.setPauseJoin=function(a){this.setField(q.REQUEST_KEY_PAUSE_JOIN,a)},this.setContentLength=function(a){this.setField(q.REQUEST_KEY_CONTENT_LENGTH,a)},this.setBitrate=function(a){this.setField(q.REQUEST_KEY_BITRATE,a)},this.setResource=function(a){this.setField(q.REQUEST_KEY_RESOURCE,a)},this.setEncodedFrameRate=function(a){this.setField(q.REQUEST_KEY_ENCODED_FRAME_RATE,a)},this.setAverageFrameRate=function(a){this.setField(q.REQUEST_KEY_AVERAGE_FRAME_RATE,a)},this.setPlatformMetadataSchema=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_SCHEMA,a)},this.setBrowserName=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_BROWSER_NAME,a)},this.setBrowserVersion=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_BROWSER_VERSION,a)},this.setDeviceBrand=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_BRAND,a)},this.setDeviceManufacturer=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MANUFACTURER,a);
},this.setDeviceModel=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MODEL,a)},this.setDeviceType=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_TYPE,a)},this.setDeviceVersion=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_VERSION,a)},this.setFrameworkName=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME,a)},this.setFrameworkVersion=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION,a)},this.setOperatingSystemName=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME,a)},this.setOperatingSystemVersion=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION,a)},this.setPlayheadTime=function(a){this.setField(q.REQUEST_KEY_PLAYHEAD_TIME,a)},this.setBufferLength=function(a){this.setField(q.REQUEST_KEY_BUFFER_LENGTH,a)},this.setStreamUrl=function(a){this.setField(q.REQUEST_KEY_STREAM_URL,a)}},t=a.CwsSession=function(a,c,d,e,f,h,i,j,k,l,m){function n(a,b,c,d,e,f,g,h,i,j,k){this._eventQueue=a,this._client=b,this._clientSettings=c,this._logger=d,this._logger.setModuleName("CwsSession"),this._exceptionCatcher=e,this._timer=f,this._gatewayControl=g,this._cwsProtocol=h,this._time=i,this._logBuffer=j,this._clientConfig=k}var o=this;o._heartbeatTimerCancel=null,o._startTimeMs=0,o._heartbeatSequenceNumber=0,o._sessionFlags=q.SessionFlags.GLOBAL,o._capabilities=q.Capabilities.INSIGHTS,o._heartbeatInfos=[],o._lastRequestSentMs=-1,o._bitrateKbps=-2,o._resource=null,o._playerState=g.PlayerState.NOT_MONITORED,o._encodedFrameRate=-1,o._contentLengthSec=-1,o._bufferLengthMs=q.DEFAULT_BUFFER_LENGTH,o._playheadTimeMs=q.DEFAULT_PLAYHEAD_TIME,o._streamUrl=null,o._averageFrameRate=-1,o._assetName=null,o._viewerId=null,o._playerName=null,o._isLive=null,o._tags={},o._browserName=null,o._browserVersion=null,o._deviceBrand=null,o._deviceManufacturer=null,o._deviceModel=null,o._deviceType=null,o._deviceVersion=null,o._frameworkName=null,o._frameworkVersion=null,o._operatingSystemName=null,o._operatingSystemVersion=null,o._pauseJoin=!1,o._hasJoined=!1,o._cleanedUp=!1,o._willEndSoon=!1,n.apply(this,arguments),this.cleanup=function(){this._clientConfig=null,this._logBuffer=null,this._systemSettings=null,this._time=null,this._cwsProtocol=null,this._gatewayControl=null,this._timer=null,this._exceptionCatcher=null,this._logger=null,this._clientSettings=null,this._client=null,this._eventQueue.flush(),this._eventQueue=null,this._cleanedUp=!0},this.start=function(a){this._session=a,this._global=this._session._global,this._logger.setSessionId(this._session._id),this._startTimeMs=this._time.current(),this.isVideoSession()&&(this._sessionFlags+=t.DEFAULT_VIDEO_SESSION_FLAGS)},this.willEndSoon=function(){this._willEndSoon=!0},this.initialize=function(){this._logger.debug("initialize()")},this.end=function(){this.isVideoSession()&&(this._logger.debug("end(): schedule the last hb before session cleanup"+o.sessionTypeTag()),this.enqueueSessionEndEvent()),this.cancelHeartbeatTimer(),this.sendHeartbeat()},this.startSendingHeartbeats=function(){this._willEndSoon||(this.sendHeartbeat(),this.resetHeartbeatTimer())},this.setBrowserName=function(a){o._logger.debug("setBrowserName(): "+a);var b=o._browserName;b!==a&&null!=a&&(o._logger.debug("Change browserName from "+b+" to "+a),o._browserName=a)},this.setBrowserVersion=function(a){o._logger.debug("setBrowserVersion(): "+a);var b=o._browserVersion;b!==a&&null!=a&&(o._logger.debug("Change browserVersion from "+b+" to "+a),o._browserVersion=a)},this.setDeviceBrand=function(a){o._logger.debug("setDeviceBrand(): "+a);var b=o._deviceBrand;b!==a&&null!=a&&(o._logger.debug("Change deviceBrand from "+b+" to "+a),o._deviceBrand=a)},this.setDeviceManufacturer=function(a){o._logger.debug("setDeviceManufacturer(): "+a);var b=o._deviceManufacturer;b!==a&&null!=a&&(o._logger.debug("Change deviceManufacturer from "+b+" to "+a),o._deviceManufacturer=a)},this.setDeviceModel=function(a){o._logger.debug("setDeviceModel(): "+a);var b=o._deviceModel;b!==a&&null!=a&&(o._logger.debug("Change deviceModel from "+b+" to "+a),o._deviceModel=a)},this.setDeviceType=function(a){o._logger.debug("setDeviceBrand(): "+a);var b=o._deviceType;b!==a&&null!=a&&(o._logger.debug("Change deviceType from "+b+" to "+a),o._deviceType=a)},this.setDeviceVersion=function(a){o._logger.debug("setDeviceVersion(): "+a);var b=o._deviceVersion;b!==a&&null!=a&&(o._logger.debug("Change deviceVersion from "+b+" to "+a),o._deviceVersion=a)},this.setOperatingSystemName=function(a){o._logger.debug("setOperatingSystemName(): "+a);var b=o._operatingSystemName;b!==a&&null!=a&&(o._logger.debug("Change operatingSystemName from "+b+" to "+a),o._operatingSystemName=a)},this.setOperatingSystemVersion=function(a){o._logger.debug("setOperatingSystemVersion(): "+a);var b=o._operatingSystemVersion;b!==a&&null!=a&&(o._logger.debug("Change operatingSystemVersion from "+b+" to "+a),o._operatingSystemVersion=a)},this.setBufferLengthMs=function(a){var b=o._bufferLengthMs;b!==a&&a>=-1&&(o._logger.debug("Change buffer length from "+b+" to "+a),o._bufferLengthMs=a)},this.getFrameworkName=function(){return o._frameworkName},this.setFrameworkName=function(a){o._logger.debug("setFrameworkName(): "+a);var b=o._frameworkName;b!==a&&null!=a&&(o._logger.debug("Change frameworkName from "+b+" to "+a),o._frameworkName=a)},this.getFrameworkVersion=function(){return o._frameworkVersion},this.setFrameworkVersion=function(a){o._logger.debug("setFrameworkVersion(): "+a);var b=o._frameworkVersion;b!==a&&null!=a&&(o._logger.debug("Change frameworkVersion from "+b+" to "+a),o._frameworkVersion=a)},this.setPlayheadTimeMs=function(a){var b=o._playheadTimeMs;b!==a&&a>=-1&&(o._logger.debug("Change playhead time from "+b+" to "+a),o._playheadTimeMs=a)},this.setStreamUrl=function(a){o._logger.debug("setStreamUrl(): "+a);var b=o._streamUrl;b!==a&&null!=a&&(o._logger.debug("Change stream url from "+b+" to "+a),o.enqueueStreamUrlChangeEvent(b,a),o._streamUrl=a)},this.setBitrateKbps=function(a){o._logger.debug("setBitrateKbps(): "+a);var b=o._bitrateKbps;b!==a&&a>=-1&&(o._logger.info("Change bitrate from "+b+" to "+a),o.enqueueBitrateChangeEvent(b,a),o._bitrateKbps=a)},this.setResource=function(a){o._logger.debug("setResource(): "+a);var b=o._resource;b!==a&&null!=a&&(o._logger.info("Change resource from "+b+" to "+a),o.enqueueResourceChangeEvent(b,a),o._resource=a)},this.setAssetName=function(a){o._logger.debug("setAssetName(): "+a);var b=o._assetName;b!==a&&null!=a&&(o._logger.info("Change assetName from "+b+" to "+a),o.enqueueAssetNameChangeEvent(b,a),o._assetName=a)},this.setIsLive=function(a){o._logger.debug("setIsLive(): "+a);var b=o._isLive;b!==a&&null!=a&&(o._logger.info("Change isLive from "+b+" to "+a),o._isLive=a)},this.setViewerId=function(a){o._logger.debug("setViewerId(): "+a);var b=o._viewerId;b!==a&&null!=a&&(o._logger.info("Change viewerId from "+b+" to "+a),o._viewerId=a)},this.setPlayerName=function(a){o._logger.debug("setPlayerName(): "+a);var b=o._playerName;b!==a&&null!=a&&(o._logger.info("Change playerName from "+b+" to "+a),o._playerName=a)},this.setTags=function(a){o._logger.debug("setTags()");var b=o._tags;B.ObjectShallowEquals(b,a)||null==a||(o._logger.info("Change tags from "+B.ObjectToString(b)+" to "+B.ObjectToString(a)),o.enqueueTagsChangeEvent(b,a),o._tags=a)},this.setEncodedFrameRate=function(a){o._logger.debug("setEncodedFrameRate(): "+a),o._encodedFrameRate=a},this.setAverageFrameRate=function(a){o._logger.debug("setAverageFrameRate(): "+a),o._averageFrameRate=a},this.setContentLength=function(a){o._logger.debug("setContentLength(): "+a),o._contentLengthSec=a},this.setPlayerState=function(a){o._logger.debug("setPlayerState(): "+a),o._hasJoined||a!=g.PlayerState.PLAYING||(o.togglePauseJoin(!1),o._hasJoined=!0);var b=o._playerState;o._logger.info("setPlayerState(): changing player state from "+b+" to "+a),o.enqueuePlayerStateChangeEvent(b,a),o._playerState=a},this.togglePauseJoin=function(a){if(o._logger.debug("togglePauseJoin()"),o._pauseJoin===a)return void o._logger.debug("togglePauseJoin(): same value, ignoring");var b=o._pauseJoin,c=!o._pauseJoin;o.enqueuePauseJoinChangeEvent(b,c),o._pauseJoin=!o._pauseJoin},this.sendError=function(a,b){o.enqueueErrorEvent(a,b)},this.enqueueEvent=function(a,b){b[q.REQUEST_EVENT_KEY_TYPE]=a,b[q.REQUEST_EVENT_KEY_SESSION_TIME]=this.getSessionTime(),b[q.REQUEST_EVENT_KEY_SEQUENCE_NUMBER]=this._eventQueue.getNumber(),this._eventQueue.enqueue(b)},this.enqueueSessionEndEvent=function(){var a=this.getSessionTime(),b=this.getNextEventNumber(),c=this._cwsProtocol.generateSessionEndEvent(b,a);this._eventQueue.enqueue(c)},this.enqueueTagsChangeEvent=function(a,b){var c=null;B.dictCount(a)>0&&(c={},c[q.REQUEST_KEY_TAGS]=a);var d={};d[q.REQUEST_KEY_TAGS]=b,this.declareStateChange(d,c)},this.enqueueAssetNameChangeEvent=function(a,b){var c={};c[q.REQUEST_KEY_ASSET_NAME]=b,this.declareStateChange(c,null)},this.enqueueErrorEvent=function(a,b){var c={};c[q.REQUEST_ERROR_EVENT_KEY_MESSAGE]=a,c[q.REQUEST_ERROR_EVENT_KEY_FATAL]=b,this.enqueueEvent(q.EVENT_TYPE_ERROR,c)},this.enqueueBitrateChangeEvent=function(a,b){var c={},d={};-1>a&&(a=-1),d[q.REQUEST_KEY_BITRATE]=a,c[q.REQUEST_KEY_BITRATE]=b,this.declareStateChange(c,d)},this.enqueueSeekEvent=function(a,b){var c={};c[q.REQUEST_EVENT_KEY_SEEK_ACT_TYPE]=a,b>=0&&(c[q.REQUEST_EVENT_KEY_SEEK_TO_POS]=b),this.enqueueEvent(q.EVENT_TYPE_SEEK,c)},this.enqueueResourceChangeEvent=function(a,b){var c={},d={};null!==a&&(d[q.REQUEST_KEY_RESOURCE]=a),c[q.REQUEST_KEY_RESOURCE]=b,this.declareStateChange(c,d)},this.enqueueStreamUrlChangeEvent=function(a,b){var c={},d={};null!==a&&(d[q.REQUEST_KEY_STREAM_URL]=a),c[q.REQUEST_KEY_STREAM_URL]=b,this.declareStateChange(c,d)},this.enqueuePauseJoinChangeEvent=function(a,b){var c={},d={};d[q.REQUEST_KEY_PAUSE_JOIN]=a,c[q.REQUEST_KEY_PAUSE_JOIN]=b,this.declareStateChange(c,d)},this.enqueuePlayerStateChangeEvent=function(a,b){var c={},d={};c[q.REQUEST_KEY_PLAYER_STATE]=q.convertPlayerState(b),d[q.REQUEST_KEY_PLAYER_STATE]=q.convertPlayerState(a),this.declareStateChange(c,d)},this.declareStateChange=function(a,b){var c={};c[q.REQUEST_STATE_CHANGE_EVENT_KEY_NEW]=a,null!=b&&B.dictCount(b)>0&&(c[q.REQUEST_STATE_CHANGE_EVENT_KEY_OLD]=b),this.enqueueEvent(q.EVENT_TYPE_STATE_CHANGE,c)},this.enqueueCustomEvent=function(a,b){var c={};c[q.REQUEST_CUSTOM_EVENT_KEY_NAME]=a,c[q.REQUEST_CUSTOM_EVENT_KEY_ATTRIBUTES]=b,this.enqueueEvent(q.EVENT_TYPE_CUSTOM,c)},this.cancelHeartbeatTimer=function(){null!=o._heartbeatTimerCancel&&(o._heartbeatTimerCancel(),o._heartbeatTimerCancel=null)},this.resetHeartbeatTimer=function(){o.cancelHeartbeatTimer();var a=1e3*o._clientSettings.heartbeatInterval;o._heartbeatTimerCancel=o._timer.create(o.sendHeartbeat,a,"Session.sendHeartbeat")},this.createHeartbeatInfo=function(){var a={};a.err="pending",a.seq=o._heartbeatSequenceNumber-1,a.sentAt=o.getSessionTime(),a.rtt=-1,o._heartbeatInfos.push(a)},this.updateHeartbeatInfoOnFailure=function(a,b){for(var c=0;c<o._heartbeatInfos.length;c++){var d=o._heartbeatInfos[c],e=d.seq;e===a&&(d.rtt=o.getSessionTime()-d.sentAt,d.err=b)}},this.updateHeartbeatInfoOnSuccess=function(a){for(var b=0;b<o._heartbeatInfos.length;b++){var c=o._heartbeatInfos[b],d=c.seq;d===a&&(c.rtt=o.getSessionTime()-c.sentAt,c.err="ok")}},this.removeOutdatedHeartbeatInfos=function(){for(var a,b,c=o._clientConfig.get(x.CONFIG_KEY_MAX_HEARTBEAT_INFOS),d=[],e=0;e<o._heartbeatInfos.length;e++)b=o._heartbeatInfos[e],a=b.seq,a<o._heartbeatSequenceNumber-c&&d.push(e);for(var f=[],g=0;g<o._heartbeatInfos.length;g++)b=o._heartbeatInfos[g],a=b.seq,d.indexOf(g)<0&&f.push(o._heartbeatInfos[g]);o._heartbeatInfos=f},this.compileHeartbeatInfos=function(){o.removeOutdatedHeartbeatInfos();for(var a=[],b=0;b<o._heartbeatInfos.length;b++){var c=o._heartbeatInfos[b],d={};d[q.REQUEST_HEARTBEAT_INFO_KEY_SEQUENCE_NUMBER]=c.seq,d[q.REQUEST_HEARTBEAT_INFO_KEY_ROUNDTRIP_TIME]=c.rtt,d[q.REQUEST_HEARTBEAT_INFO_KEY_STATUS]=c.err,a.push(d)}return a},this.makeHeartbeat=function(){var a=new s;if(a.setMessageType(q.MESSAGE_TYPE_SESSION_HEARTBEAT),a.setCustomerKey(o._clientSettings.customerKey),a.setClientId(o._clientConfig.get(x.CONFIG_KEY_CLIENT_ID)),a.setSessionId(o._session._id),a.setSequenceNumber(o._heartbeatSequenceNumber),a.setProtocolVersion(q.version),a.setClientVersion(b.version),a.setInstanceId(o._client.getId()),a.setCapfield(0),a.setPlatformMetadataSchema(q.SDK_METADATA_SCHEMA),null!=o._browserName&&a.setBrowserName(o._browserName),null!=o._browserVersion&&a.setBrowserVersion(o._browserVersion),null!=o._deviceBrand&&a.setDeviceBrand(o._deviceBrand),null!=o._deviceManufacturer&&a.setDeviceManufacturer(o._deviceManufacturer),null!=o._deviceModel&&a.setDeviceModel(o._deviceModel),null!=o._deviceType&&a.setDeviceType(o._deviceType),null!=o._deviceVersion&&a.setDeviceVersion(o._deviceVersion),null!=o._frameworkName&&a.setFrameworkName(o._frameworkName),null!=o._frameworkVersion&&a.setFrameworkVersion(o._frameworkVersion),null!=o._operatingSystemName&&a.setOperatingSystemName(o._operatingSystemName),null!=o._operatingSystemVersion&&a.setOperatingSystemVersion(o._operatingSystemVersion),null!=o._viewerId&&a.setViewerId(o._viewerId),null!=o._playerName&&a.setPlayerName(o._playerName),B.dictCount(o._tags)>0&&a.setTags(o._tags),o.isVideoSession()){null!=o._assetName&&a.setAssetName(o._assetName),null!=o._isLive&&a.setIsLive(o._isLive),a.setSessionFlags(o._sessionFlags);var c=q.convertPlayerState(o._playerState);a.setPlayerState(c),a.setPauseJoin(o._pauseJoin),o._contentLengthSec>0&&a.setContentLength(o._contentLengthSec),o._bitrateKbps>0&&a.setBitrate(o._bitrateKbps),null!==o._resource&&a.setResource(o._resource),o._encodedFrameRate>0&&a.setEncodedFrameRate(o._encodedFrameRate),o._averageFrameRate>=0&&a.setAverageFrameRate(o._averageFrameRate),a.setPlayheadTime(o._playheadTimeMs),a.setBufferLength(o._bufferLengthMs),null!=o._streamUrl&&a.setStreamUrl(o._streamUrl)}else a.setSessionFlags(q.SessionFlags.GLOBAL);a.setCapabilities(o._capabilities);var d=o._eventQueue.flush();if(o.isGlobalSession()&&0===d.length)return null;if(a.setEvents(d),a.setIsSdkClient(!0),o._clientConfig.get(x.CONFIG_KEY_SEND_LOGS)&&a.setLogs(o._logBuffer.flush()),o._clientConfig.get(x.CONFIG_KEY_MAX_HEARTBEAT_INFOS)>0){var e=o.compileHeartbeatInfos();e.length>0&&a.setHeartbeatInfos(e)}return a.setSessionStartTime(o._startTimeMs),a.setSessionTime(o.getSessionTime()),o._heartbeatSequenceNumber++,a.get()},this.sendHeartbeat=function(){if(!o._cleanedUp){var a=o.makeHeartbeat();null!=a&&o.postHeartbeat(a)}},this.postHeartbeat=function(a){o.createHeartbeatInfo();var b=o._heartbeatSequenceNumber-1;o._logger.info("postHeartbeat(): Send HB["+b+"]"+o.sessionTypeTag());var c=function(a,c){o.onHeartbeatResponse(a,c,b)};o._gatewayControl.send(a,c)},this.onHeartbeatResponse=function(a,b,c){o._cleanedUp||o._exceptionCatcher.runProtected("onHeartbeatResponse",function(){if(a){var d=b;if(null!=d){o._logger.debug("onHeartbeatResponse(): received valid response for HB["+c+"]"),o.updateHeartbeatInfoOnSuccess(c);var e=d[q.RESPONSE_KEY_CLIENT_ID];null!=e&&e!=o._clientConfig.get(x.CONFIG_KEY_CLIENT_ID)&&(o._logger.debug("onHeartbeatResponse(): setting the client id to "+e+" (from gateway)"),o._clientConfig.set(x.CONFIG_KEY_CLIENT_ID,e),o._clientConfig.save());var f=d[q.RESPONSE_KEY_STATUS];null!=f&&f!=q.RESPONSE_STATUS_NO_ERRORS&&o._logger.error("onHeartbeatResponse(): error from gateway: "+f);var g=d[q.RESPONSE_KEY_CONFIG];if("object"==typeof g){var h=g[q.RESPONSE_CONFIG_KEY_MAX_HEARTBEAT_INFOS];null!=h&&o._clientConfig.get(x.CONFIG_KEY_MAX_HEARTBEAT_INFOS)!==h&&(o._logger.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+h+" (from gateway)"),o._clientConfig.set(x.CONFIG_KEY_MAX_HEARTBEAT_INFOS,h));var i=g[q.RESPONSE_CONFIG_KEY_SEND_LOGS],j=null!=i?B.AsBoolean(i):!1;j!==o._clientConfig.get(x.CONFIG_KEY_SEND_LOGS)&&(o._logger.debug("onHeartbeatResponse(): turning "+(j?"on":"off")+" sending of logs"),o._clientConfig.set(x.CONFIG_KEY_SEND_LOGS,j));var k=g[q.RESPONSE_CONFIG_KEY_HEARTBEAT_INTERVAL];if(null!=k){var l=B.Int32.Cast(k),m=l;m!=o._clientSettings.heartbeatInterval&&(o._logger.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+m),o._clientSettings.heartbeatInterval=m,null!=o._heartbeatTimerCancel&&o.resetHeartbeatTimer())}var n=g[q.RESPONSE_CONFIG_KEY_GATEWAY_URL];null!=n&&n!=o._clientSettings.gatewayUrl&&(o._logger.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+n),o._clientSettings.gatewayUrl=n)}}else o._logger.warning("onHeartbeatResponse(): decoded heartbeat response is null.")}else{var p=b;B.isValidString(p)?B.stringStartsWith(p,"HTTP timeout")?o._logger.warning("onHeartbeatResponse(): "+p):o._logger.error("onHeartbeatResponse(): failed to send heartbeat: "+p):(p=u.DEFAULT_HEARTBEAT_ERROR_MESSAGE,o._logger.error("onHeartbeatResponse(): "+p)),o.updateHeartbeatInfoOnFailure(c,p)}})},this.getSessionTime=function(){var a=B.Int32.Cast(o._time.current()-o._startTimeMs);return a},this.getNextEventNumber=function(){return this._eventQueue.getNumber()},this.sessionTypeTag=function(){return this.isGlobalSession()?" (global session)":""},this.isGlobalSession=function(){return this._global},this.isVideoSession=function(){return!this._global}};t.DEFAULT_VIDEO_SESSION_FLAGS=q.SessionFlags.VIDEO+q.SessionFlags.QUALITY_METRICS+q.SessionFlags.BITRATE_METRICS;var u=(a.IMonitor=function(){this.onPlayerStateChange=function(a){},this.onBitrateChange=function(a){},this.onSeekEvent=function(a,b){},this.onEncodedFrameRateChange=function(a){},this.onRenderedFrameRateChange=function(a){},this.onContentLengthChange=function(a){},this.onPlayheadTimeChange=function(a){},this.onStreamUrlChange=function(a){},this.onBufferLengthChange=function(a){},this.onPlayerTypeChange=function(a){},this.onPlayerVersionChange=function(a){},this.onError=function(a,b){},this.onRelease=function(){}},a.Session=function(){function a(a,b,c,d,e,f,g,h){this._id=a,this._global=b,this._contentMetadata=c,this._clientConfig=d,this._systemMetadata=e,this._cwsSession=f,this._exceptionCatcher=g,this._logger=h,this._logger.setModuleName("Session"),this._logger.setSessionId(B.ToString(this._id))}var b=this;b._contentMetadata=null,b._playerStateManager=null,b._id=0,b._global=!1,b._cleaningUp=!1,b._cleanedUp=!1,b._adPlaying=!1,b._adStream=null,b._adPlayer=null,b._adPosition=null,b._ignorePlayerState=!1,b._pooledPlayerState=g.PlayerState.NOT_MONITORED,b._ignoreBitrateAndResource=!1,b._ignorePlayheadTimeandBufferLength=!1,b._ignoreEncodedFrameRateAndDuration=!1,b._ignoreError=!1,b._playingFpsObservationCount=0,b._playingFpsTotal=0,a.apply(b,arguments),this.start=function(){if(b.isVideoSession()?b._logger.info("start(): assetName="+b._contentMetadata.assetName):b._logger.info("start()"+b.sessionTypeTag()),b._cwsSession.start(this),b._clientConfig.isReady())b.initiateSession();else{var a=function(){b.initiateSession()};b._clientConfig.register(a)}},this.cleanup=function(){if(b._logger.info("cleanup()"+b.sessionTypeTag()),b._cleaningUp=!0,b._cwsSession.willEndSoon(),b._clientConfig.isReady())b.endCwsSessionAndCleanupAll();else{var a=function(){b.endCwsSessionAndCleanupAll()};b._clientConfig.register(a)}},this.cleanupAll=function(){b._logger.debug("cleanupAll()"+b.sessionTypeTag()),b.isVideoSession()&&null!=b._playerStateManager&&b.detachPlayer(),b._contentMetadata=null,b._logger.setSessionId(null),b._logger=null,b._exceptionCatcher=null,b._client=null,b._clientConfig=null,b._systemMetadata=null,b._cwsSession.cleanup(),b._cwsSession=null,b._cleanedUp=!0},this.endCwsSessionAndCleanupAll=function(){b._cwsSession.end(),b.cleanupAll()},this.initiateSession=function(){b._cwsSession.initialize(),b.setStatesFromSystemMetadata(),b.isVideoSession()&&b.setStatesFromContentMetadata(),b._cwsSession.startSendingHeartbeats()},this.setStatesFromSystemMetadata=function(){b._logger.debug("setStatesFromSystemMetadata()");var a=b._systemMetadata.get(),c=a[J.BROWSER_NAME];null!=c&&b._cwsSession.setBrowserName(c);var d=a[J.BROWSER_VERSION];null!=d&&b._cwsSession.setBrowserVersion(d);var e=a[J.DEVICE_BRAND];null!=e&&b._cwsSession.setDeviceBrand(e);var f=a[J.DEVICE_MANUFACTURER];null!=f&&b._cwsSession.setDeviceManufacturer(f);var g=a[J.DEVICE_MODEL];null!=g&&b._cwsSession.setDeviceModel(g);var h=a[J.DEVICE_TYPE];null!=h&&b._cwsSession.setDeviceType(h);var i=a[J.DEVICE_VERSION];null!=i&&b._cwsSession.setDeviceVersion(i);var j=a[J.FRAMEWORK_NAME];null!=j&&b._cwsSession.setFrameworkName(j);var k=a[J.FRAMEWORK_VERSION];null!=k&&b._cwsSession.setFrameworkVersion(k);var l=a[J.OPERATING_SYSTEM_NAME];null!=l&&b._cwsSession.setOperatingSystemName(l);var m=a[J.OPERATING_SYSTEM_VERSION];null!=m&&b._cwsSession.setOperatingSystemVersion(m)},this.setStatesFromContentMetadata=function(){if(b._logger.debug("setStatesFromContentMetadata()"),b._contentMetadata.defaultBitrateKbps>0&&b._cwsSession._bitrateKbps<0&&b._cwsSession.setBitrateKbps(b._contentMetadata.defaultBitrateKbps),null!=b._contentMetadata.defaultResource&&null==b._cwsSession._resource&&b._cwsSession.setResource(b._contentMetadata.defaultResource),null!=b._contentMetadata.streamUrl&&null==b._cwsSession._streamUrl&&b._cwsSession.setStreamUrl(b._contentMetadata.streamUrl),b._contentMetadata.duration>0&&b._cwsSession.setContentLength(b._contentMetadata.duration),b._contentMetadata.encodedFrameRate>0&&b._cwsSession.setEncodedFrameRate(b._contentMetadata.encodedFrameRate),b._contentMetadata.streamType!==d.StreamType.UNKNOWN){var a=b._contentMetadata.streamType===d.StreamType.LIVE;b._cwsSession.setIsLive(a)}null!=b._contentMetadata.assetName&&b._cwsSession.setAssetName(b._contentMetadata.assetName),null!=b._contentMetadata.viewerId&&b._cwsSession.setViewerId(b._contentMetadata.viewerId),null!=b._contentMetadata.applicationName&&b._cwsSession.setPlayerName(b._contentMetadata.applicationName),B.dictCount(b._contentMetadata.custom)>0&&b._cwsSession.setTags(b._contentMetadata.custom)},this.setRenderedFrameRate=function(a){b._renderedFrameRate=a,b.updateAverageFrameRate()},this.updateAverageFrameRate=function(){if(b._cwsSession._playerState===g.PlayerState.PLAYING){var a=b._renderedFrameRate;if(a>=0){b._playingFpsTotal+=a,b._playingFpsObservationCount++;var c=B.Int32.Cast(1*b._playingFpsTotal/b._playingFpsObservationCount);b._cwsSession.setAverageFrameRate(c)}}},this.onPlayerStateChange=function(a){return b._logger.debug("onPlayerStateChange(): "+a),b._cwsSession._playerState!=a?(b._cwsSession._playerState==g.PlayerState.NOT_MONITORED&&a!=g.PlayerState.NOT_MONITORED&&(b._pooledPlayerState=a),b._ignorePlayerState?void b._logger.debug("onPlayerStateChange(): "+a+" (pooled, "+(b._adPlaying?"ad playing":"preloading")+")"):void b._cwsSession.setPlayerState(a)):void 0},this.onBitrateChange=function(a){return b._logger.debug("onBitrateChange(): "+a),b._ignoreBitrateAndResource?void b._logger.info("onBitrateChange(): ignored"):void b._cwsSession.setBitrateKbps(a)},this.onSeekEvent=function(a,c){b._cwsSession.enqueueSeekEvent(a,c)},this.onRenderedFrameRateChange=function(a){b._logger.debug("onRenderedFrameRateChange(): "+a),b._ignoreEncodedFrameRateAndDuration?b._logger.info("onRenderedFrameRateChange(): Ignored rendered frame rate data: "+a+" (ads)"):(b.setRenderedFrameRate(a),b._logger.info("onRenderedFrameRateChange(): Received rendered frame rate data: "+a))},this.onEncodedFrameRateChange=function(a){b._logger.debug("onEncodedFrameRateChange(): "+a),b._contentMetadata.encodedFrameRate>0||(a>0?b._ignoreEncodedFrameRateAndDuration?b._logger.info("onEncodedFrameRateChange(): Ignored encoded frame rate data: "+a+" (ads)"):(b._cwsSession.setEncodedFrameRate(a),b._logger.info("onEncodedFrameRateChange(): Received encoded frame rate data: "+a)):b._logger.warning("onEncodedFrameRateChange(): Ignored invalid encoded frame rate data: "+a))},this.onContentLengthChange=function(a){b._logger.debug("onContentLengthChange(): "+a),b._contentMetadata.duration>0||(a>0?b._ignoreEncodedFrameRateAndDuration?b._logger.info("setContentLength(): Ignored content length data: "+a+" (ads)"):(b._cwsSession.setContentLength(a),b._logger.info("setContentLength(): Received content length data: "+a)):b._logger.warning("setContentLength(): Ignored invalid content length data: "+a))},this.onStreamUrlChange=function(a){b._logger.debug("onStreamUrlChange(): "+a),b._cwsSession.setStreamUrl(a)},this.onPlayheadTimeChange=function(a){b._ignorePlayheadTimeandBufferLength||b._cwsSession.setPlayheadTimeMs(a)},this.onBufferLengthChange=function(a){b._ignorePlayheadTimeandBufferLength||b._cwsSession.setBufferLengthMs(a)},this.onPlayerTypeChange=function(a){b._logger.debug("onPlayerTypeChange(): "+a),null==b._cwsSession.getFrameworkName()&&b._cwsSession.setFrameworkName(a)},this.onPlayerVersionChange=function(a){b._logger.debug("onPlayerVersionChange(): "+a),null==b._cwsSession.getFrameworkVersion()&&b._cwsSession.setFrameworkVersion(a)},this.onError=function(a,c){b._logger.debug("onError(): "+a+" ("+c+")"),b.reportError(a,c)},this.onRelease=function(){b._logger.debug("onRelease()"),b.detachPlayer()},this.adStart=function(a,c,d){return b._logger.debug("adStart(): adStream="+a+" adPlayer="+c+" adPosition="+d),b._adPlaying?void b._logger.warning("adStart(): multiple adStart calls, ignoring"):(b._adPlaying=!0,b._adStream=a,b._adPlayer=c,b._adPosition=d,b._cwsSession._hasJoined||b._cwsSession.togglePauseJoin(!0),void(b._adStream==Conviva.Client.AdStream.CONTENT||b._adPlayer==Conviva.Client.AdPlayer.SEPARATE?(b._cwsSession._playerState!==g.PlayerState.NOT_MONITORED&&(b._pooledPlayerState=b._cwsSession._playerState),b._cwsSession.setPlayerState(g.PlayerState.NOT_MONITORED),b._ignorePlayerState=!0):b._adStream==Conviva.Client.AdStream.SEPARATE&&b._adPlayer==Conviva.Client.AdPlayer.CONTENT&&(b._cwsSession._playerState!==g.PlayerState.NOT_MONITORED&&(b._pooledPlayerState=b._cwsSession._playerState),b._cwsSession.setPlayerState(g.PlayerState.NOT_MONITORED),b._ignorePlayerState=!0,b._ignoreBitrateAndResource=!0,b._ignoreEncodedFrameRateAndDuration=!0,b._ignorePlayheadTimeandBufferLength=!0,b._ignoreError=!0)))},this.adEnd=function(){return b._logger.debug("adEnd()"),b._adPlaying?(b._cwsSession._hasJoined||b._cwsSession.togglePauseJoin(!1),b._adStream==Conviva.Client.AdStream.CONTENT||b._adPlayer==Conviva.Client.AdPlayer.SEPARATE?b._preloading||(b._ignorePlayerState=!1,b._cwsSession.setPlayerState(b._pooledPlayerState)):b._adStream==Conviva.Client.AdStream.SEPARATE&&b._adPlayer==Conviva.Client.AdPlayer.CONTENT&&(b._ignoreBitrateAndResource=!1,b._ignoreEncodedFrameRateAndDuration=!1,b._ignorePlayheadTimeandBufferLength=!1,b._ignoreError=!1,b._preloading||(b._ignorePlayerState=!1,b._cwsSession.setPlayerState(b._pooledPlayerState))),b._adPlaying=!1,void(b._adStream=b._adPlayer=b._adPosition=null)):void b._logger.debug("adEnd(): called before adStart, ignoring")},this.detachPlayer=function(){b._logger.debug("detachPlayer()"),null!==b._playerStateManager&&(b._exceptionCatcher.runProtected("Session.detachPlayer",function(){b._playerStateManager.removeMonitoringNotifier()}),b._playerStateManager=null,b._cwsSession.setPlayerState(g.PlayerState.NOT_MONITORED))},this.attachPlayer=function(a){return b._logger.debug("attachPlayer()"),null!=b._playerStateManager?void b._logger.error("attachPlayer(): detach current PlayerStateManager first"):void b._exceptionCatcher.runProtected("Session.attachPlayer()",function(){a.setMonitoringNotifier(b,b._id)?(a.pushCurrentState(),b._playerStateManager=a):b._logger.error("attachPlayer(): instance of PlayerStateManager is already attached to a session")})},this.contentPreload=function(){return b._logger.debug("contentPreload()"),b._preloading?void b._logger.debug("contentPreload(): called twice, ignoring"):(b._preloading=!0,void(b._ignorePlayerState=!0))},this.contentStart=function(){return b._logger.debug("contentStart()"),b._preloading?(b._preloading=!1,void(b._adPlaying||(b._ignorePlayerState=!1,b._cwsSession.setPlayerState(b._pooledPlayerState)))):void b._logger.warning("contentStart(): called without contentPreload, ignoring")},this.reportError=function(a,c){if(b._logger.info("reportError(): "+a),!B.isValidString(a))return void b._logger.error("reportError(): invalid error message string: "+a);if(c!==Conviva.Client.ErrorSeverity.FATAL&&c!==Conviva.Client.ErrorSeverity.WARNING)return void b._logger.error("reportError(): invalid error severity: "+c);if(b._ignoreError)return void b._logger.debug("reportError(): ignored");var d=c===Conviva.Client.ErrorSeverity.FATAL;b._cwsSession.sendError(a,d)},this.updateContentMetadata=function(a){b._logger.debug("updateContentMetadata(): enter"),b._exceptionCatcher.runProtected("Session.updateContentMetadata",function(){b.mergeContentMetadata(a),b.setStatesFromContentMetadata()})},this.sendCustomEvent=function(a,c){b._logger.info("sendEvent(): eventName="+a+b.sessionTypeTag()),b._cwsSession.enqueueCustomEvent(a,c)},this.mergeContentMetadata=function(a){null==b._contentMetadata.assetName?B.isValidString(a.assetName)&&(b._contentMetadata.assetName=a.assetName,b._cwsSession.enqueueAssetNameChangeEvent(b._contentMetadata.assetName)):b._logger.warning("mergeContentMetadata(): assetName was already set."),null==b._contentMetadata.applicationName?B.isValidString(a.applicationName)&&(b._contentMetadata.applicationName=a.applicationName):b._logger.warning("mergeContentMetadata(): applicationName was already set."),null==b._contentMetadata.streamUrl?B.isValidString(a.streamUrl)&&(b._contentMetadata.streamUrl=a.streamUrl):b._logger.warning("mergeContentMetadata(): streamUrl was already set."),null==b._contentMetadata.viewerId?B.isValidString(a.viewerId)&&(b._contentMetadata.viewerId=a.viewerId):b._logger.warning("mergeContentMetadata(): viewerId was already set."),b._contentMetadata.defaultBitrateKbps<=0?a.defaultBitrateKbps>0&&(b._contentMetadata.defaultBitrateKbps=a.defaultBitrateKbps):b._logger.warning("mergeContentMetadata(): defaultBitrateKbps was already set."),null==b._contentMetadata.defaultResource?B.isValidString(a.defaultResource)&&(b._contentMetadata.defaultResource=a.defaultResource):b._logger.warning("mergeContentMetadata(): defaultResource was already set."),b._contentMetadata.duration<=0?a.duration>0&&(b._contentMetadata.duration=a.duration):b._logger.warning("mergeContentMetadata(): duration was already set."),b._contentMetadata.encodedFrameRate<=0?a.encodedFrameRate>0&&(b._contentMetadata.encodedFrameRate=a.encodedFrameRate):b._logger.warning("mergeContentMetadata(): encodedFrameRate was already set."),b._contentMetadata.streamType==d.StreamType.UNKNOWN?a.streamType!=d.StreamType.UNKNOWN&&(b._contentMetadata.streamType=a.streamType):b._logger.warning("mergeContentMetadata(): streamType was already set.");var c={};for(var e in a.custom){var f=b._contentMetadata.custom[e];null==f?c[e]=a.custom[e]:b._logger.warning("mergeContentMetadata(): custom."+e+" was already set.")}if(B.dictCount(c)>0){var g={};for(e in b._contentMetadata.custom)g[e]=b._contentMetadata.custom[e];for(e in c)g[e]=c[e];b._contentMetadata.custom=g}},this.isGlobalSession=function(){return b._global},this.isVideoSession=function(){return!b._global},this.sessionTypeTag=function(){return b.isGlobalSession()?" (global session)":""}});u.DEFAULT_HEARTBEAT_ERROR_MESSAGE="received no response (or a bad response) to heartbeat POST request";var v=a.SessionFactory=function(){function a(a,c,d,e){b._client=a,b._clientSettings=c,b._clientConfig=d,b._systemFactory=e,b._logger=b._systemFactory.buildLogger(),b._logger.setModuleName("SessionFactory"),b._nextSessionKey=0,b._sessionsByKey={}}var b=this;b._logger=null,b._logBuffer=null,b._nextSessionKey=0,b._sessionsByKey=null,
a.apply(b,arguments),this.cleanup=function(){b._logger=null,b._logBuffer=null;for(var a in b._sessionsByKey){var c=b._sessionsByKey[a];c.cleanup()}b._sessionsByKey=null,b._nextSessionKey=0},this.newSessionKey=function(){var a=b._nextSessionKey;return b._nextSessionKey++,a},this.makeVideoSession=function(a){return null==a&&(a=new d),b.makeSession(a,!1)},this.makeGlobalSession=function(a){return b.makeSession(a,!0)},this.generateSessionId=function(){return E.integer32()},this.makeSession=function(a,c){var d=a.clone(a),e=b.generateSessionId(),f=b._systemFactory.buildSession(b._client,b._clientSettings,b._clientConfig,e,c,d),g=b.newSessionKey();return b.addSession(g,f),f.start(),g},this.getSession=function(a){var c=b._sessionsByKey[a];return null==c&&b._logger.error("Client: invalid sessionKey. Did you cleanup that session previously?"),c},this.getVideoSession=function(a){var c=this.getSession(a);return null!=c&&(c.isVideoSession()||(b._logger.error("Client: invalid sessionKey. Did you cleanup that session previously?"),c=null)),c},this.addSession=function(a,c){b._sessionsByKey[a]=c},this.removeSession=function(a){delete b._sessionsByKey[a]},this.cleanupSession=function(a){var c=b.getSession(a);b.removeSession(a),c.cleanup()}},w=a.CallbackWithTimeout=function(a){this._timer=a,this.getWrapperCallback=function(a,b,c){var d=!1,e=function(){d||(d=!0,a(!1,c+" ("+b+" ms)"))};this._timer.createOnce(e,b,"CallbackWithTimeout.wrap");var f=function(b,c){d||(d=!0,a(b,c))};return f}},x=a.Config=function(a,b,c){var d=this;this._logger=a,this._logger.setModuleName("Config"),this._storage=b,this._jsonInterface=c,this._defaultConfig={clientId:q.DEFAULT_CLIENT_ID,sendLogs:!1,maxHbInfos:q.DEFAULT_MAX_HEARTBEAT_INFOS},this._config=B.ObjectShallowCopy(this._defaultConfig),this._loaded=!1,this._loadedEmpty=!1,this._waitingConsumers=[],this.isReady=function(){return this._loaded},this.load=function(){var a=function(a,b){a?(d._parse(b),d._logger.debug("load(): configuration successfully loaded from local storage"+(d._loadedEmpty?" (was empty)":"")+".")):d._logger.error("load(): error loading configuration from local storage: "+b),d._loaded=!0,d._notify()};this._storage.load(x.STORAGE_KEY,a)},this._parse=function(a){var b=this._jsonInterface.decode(a);if(null==b)return void(this._loadedEmpty=!0);var c=b[x.CONFIG_STORAGE_KEY_CLIENT_ID];null!=c&&c!=q.DEFAULT_CLIENT_ID&&""!=c&&"null"!=c&&(this._config[x.CONFIG_KEY_CLIENT_ID]=c,this._logger.debug("parse(): loaded clientId="+c+" (from local storage)"))},this._marshall=function(){var a={};return a[x.CONFIG_STORAGE_KEY_CLIENT_ID]=this._config.clientId,this._logger.debug("_marshall(): saving clientId="+this._config.clientId+" (to local storage)"),this._jsonInterface.encode(a)},this.save=function(){var a=function(a,b){a?d._logger.debug("save(): configuration successfully saved to local storage."):d._logger.error("save(): error saving configuration to local storage: "+b)};this._storage.save(x.STORAGE_KEY,this._marshall(),a)},this.register=function(a){return this.isReady()?void a():void this._waitingConsumers.push(a)},this.get=function(a){return this._loaded?this._config[a]:null},this.set=function(a,b){this._loaded&&(this._config[a]=b)},this._notify=function(){for(var a;null!=(a=this._waitingConsumers.shift());)a()}};x.STORAGE_KEY="sdkConfig",x.CONFIG_STORAGE_KEY_CLIENT_ID="clId",x.CONFIG_KEY_CLIENT_ID="clientId",x.CONFIG_KEY_SEND_LOGS="sendLogs",x.CONFIG_KEY_MAX_HEARTBEAT_INFOS="maxHbInfos";var y=a.EventQueue=function(){this._events=[],this._nextEventNumber=0,this.enqueue=function(a){this._events.push(a)},this.getNumber=function(){var a=this._nextEventNumber;return this._nextEventNumber++,a},this.flush=function(){var a=this._events;return this._events=[],a}},z=a.ExceptionCatcher=function(a,b,c){this._logger=a,this._logger.setModuleName("ExceptionCatcher"),this._ping=b,this._systemSettings=c,this.runProtected=function(a,b,c){try{b()}catch(d){if(null!=c)c(d);else{if(this._systemSettings.allowUncaughtExceptions)throw d;this.onUncaughtException(a,d)}}},this.onUncaughtException=function(a,b){var c="Uncaught exception: "+a+": "+b.toString();if(null!=this._ping)try{this._ping.send(c)}catch(d){this._logger.error("Caught exception while sending ping: "+d.toString())}this._logger.error(c)}},A=a.GatewayControl=function(a,b,c,d){var e=this;this._clientSettings=a,this._logger=b,this._logger.setModuleName("GatewayControl"),this._httpClient=c,this._jsonInterface=d,this.send=function(a,b){var c=this._jsonInterface.encode(a),d=this._clientSettings.gatewayUrl+q.gatewayPath,f=function(a,c){if(a){var d=e._jsonInterface.decode(c);b(a,d)}else{var f=c;b(a,f)}};this._httpClient.request("POST",d,c,"application/json",f)}},B=a.Lang={};B.validateInterface=function(a,b,c){if(null==a)throw new Error("Expected "+c+" implementation is null.");for(var d in b)if("function"!=typeof a[d])throw new Error("Expected method "+d+" in "+c+" implementation.")},B.dictCount=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},B.ToString=function(a){return""+a},B.NumberToInt=function(a){return Math.floor(a)},B.NumberToUnsignedInt=function(a){return Math.abs(B.NumberToInt(a))},B.AsBoolean=function(a){return Boolean(a)},B.isValidString=function(a){return"string"==typeof a&&""!==a},B.stringStartsWith=function(a,b){return"string"!=typeof a||"string"!=typeof b?!1:"function"==typeof a.indexOf?0===a.indexOf(b):!1},B.isBoolean=function(a){return"boolean"==typeof a},B.UrlEncodeString=function(a){return escape(a)},B.isObject=function(a){return"object"==typeof a},B.ObjectToString=function(a){var b="";for(var c in a){var d=a[c],e=d;b+=c+"="+e}return"Object{"+b+"}"},B.ObjectShallowCopyOmitNull=function(a){var b=B.ObjectShallowCopy(a);for(var c in b)null==b[c]&&delete b[c];return b},B.ObjectShallowCopy=function(a){var b={};for(var c in a)b[c]=a[c];return b},B.ObjectShallowEquals=function(a,b){if(typeof a!=typeof b)return!1;if(a instanceof Object&&b instanceof Object){if(B.dictCount(a)!==B.dictCount(b))return!1;var c=!0;for(var d in a)if(c=a[d]===b[d],!c)return!1;return!0}return a===b},B.isInteger=function(a){if("number"!=typeof a)return!1;var b=Math.round(a);return b===a},B.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},B.ArrayEquals=function(a,b){if(a===b)return!0;if(null==a||null==b)return!1;if(a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(B.isArray(a[c])&&B.isArray(b[c])){if(!B.ArrayEquals(a[c],b[c]))return!1}else if(a[c]!==b[c])return!1;return!0},B.isObjectDefinePropertyPresent=function(){return"undefined"!=typeof Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(a){return!1}}()},B.defGet=function(a,b,c){if(B.isObjectDefinePropertyPresent())Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:c});else{if("undefined"==typeof a.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");a.__defineGetter__(b,c)}},B.defSet=function(a,b,c){if(B.isObjectDefinePropertyPresent())Object.defineProperty(a,b,{configurable:!0,set:c});else{if("undefined"==typeof a.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");a.__defineSetter__(b,c)}},function(){var a={};a.two32=4294967296,a.MaxValue=a.two32-1,a.MinValue=0,B.UInt32=a,B.UInt32.Cast=function(b){var c=parseInt(b,10);return c>a.MaxValue?c%=a.two32:c<a.MinValue&&(c=-c%a.two32,c=a.two32-c),c},B.UInt32.InRange=function(b){var c=parseInt(b,10);return c<=a.MaxValue&&c>=a.MinValue};var b={};b.MaxValue=2147483647,b.MinValue=-2147483648,B.Int32=b,B.Int32.Cast=function(a){var c=parseInt(a,10);return c>b.MaxValue?c%=b.MaxValue:c<b.MinValue&&(c=-c%b.MaxValue,c=b.MaxValue-c),c},B.Int32.InRange=function(a){var c=parseInt(a,10);return c<=b.MaxValue&&c>=b.MinValue}}();var C=a.LogBuffer=function(){var a=32;this._buffer=[],this.add=function(b){this._buffer.length>=a&&this._buffer.shift(),this._buffer.push(b)},this.flush=function(){var a=this._buffer;return this._buffer=[],a}},D=a.Ping=function(a,c,d){this._isSendingPing=!1,this._cachedBasePingUrl=null,this._logger=a,this._logger.setModuleName("Ping"),this._httpClient=c,this._clientSettings=d,this.send=function(a){if(!this._isSendingPing){this._isSendingPing=!0;var b=this.getBasePingUrl()+"&d="+B.UrlEncodeString(a.toString());this._logger.error("send(): "+b),this._httpClient.request("GET",b,null,null,null),this._isSendingPing=!1}},this.getBasePingUrl=function(){if(!this._cachedBasePingUrl){var a=D.SERVICE_URL+"?comp="+D.COMPONENT_NAME+"&clv="+b.version;if(this._clientSettings&&(a+="&cid="+this._clientSettings.customerKey),a+="&sch="+q.SDK_METADATA_SCHEMA,!this._clientSettings)return a;this._cachedBasePingUrl=a}return this._cachedBasePingUrl}};D.COMPONENT_NAME="sdkjs",D.SERVICE_URL="https://pings.conviva.com/ping.ping";var E=a.Random={};E.maxUInt32=4294967295,E.maxInt32=2147483647,E.minInt32=-2147483648,E.integer32=function(){return Math.floor(Math.random()*E.maxUInt32)+E.minInt32},E.uinteger32=function(){return Math.floor(Math.random()*E.maxUInt32)};var F=a.Sanitize={};F.Integer=function(a,b,c,d){if(isNaN(a))return d;if("number"!=typeof a)return d;if(a==d)return d;var e=B.NumberToInt(a);return F.EnforceBoundaries(e,b,c)},F.EnforceBoundaries=function(a,b,c){return null!=c&&a>c?a=c:null!=b&&b>a&&(a=b),a},F.sanitizeSpecialIntegerValue=function(a){return-1==a||-2==a?a:a=F.Integer(a,0,null,-1)};var G=(a.StreamerError=function(){function a(a,b){c.errorCode=a,c.severity=b}var c=this;c.errorCode=null,c.severity=b.ErrorSeverity.FATAL,a.apply(c,arguments)},a.HttpClient=function(a,b,c,d){this._logger=a,this._logger.setModuleName("HttpClient"),this._httpInterface=b,this._callbackWithTimeout=c,this._systemSettings=d,this.request=function(a,b,c,d,e){var f=1e3*this._systemSettings.httpTimeout,g=this._callbackWithTimeout.getWrapperCallback(e,f,"HTTP timeout");this._logger.debug("request(): calling HttpInterface.makeRequest"),this._httpInterface.makeRequest(a,b,c,d,f,g)}}),H=a.Logger=function(a,b,c,d,e){this._loggingInterface=a,this._timeInterface=b,this._settings=c,this._logBuffer=d,this._packageName=e,this.debug=function(a){this.log(a,f.LogLevel.DEBUG)},this.info=function(a){this.log(a,f.LogLevel.INFO)},this.warning=function(a){this.log(a,f.LogLevel.WARNING)},this.error=function(a){this.log(a,f.LogLevel.ERROR)},this.log=function(a,b){var c=this.formatMessage(a,b);this._logBuffer.add(c),this._settings.logLevel<=b&&this._loggingInterface.consoleLog(c,b)},this.prependModuleName=function(a){var b=a;return b="["+this._moduleName+"] "+b},this.prependPackageName=function(a){var b=a;return b="["+this._packageName+"] "+b},this.prependConvivaNamespace=function(a){var b=a;return b="[Conviva] "+b},this.prependTime=function(a){var b=this._timeInterface.getEpochTimeMs(),c=(b/1e3).toFixed(3).toString();return"["+c+"] "+a},this.prependLogLevel=function(a,b){var c=H.getLogLevelString(b),d=a;return d="["+c+"] "+d},this.prependSessionId=function(a){var b=a;return null!=this._sessionId&&(b="sid="+this._sessionId+" "+b),b},this.setSessionId=function(a){this._sessionId=a},this.setModuleName=function(a){this._moduleName=a},this.formatMessage=function(a,b){return this.prependConvivaNamespace(this.prependTime(this.prependLogLevel(this.prependPackageName(this.prependModuleName(this.prependSessionId(a))),b)))}};H.getLogLevelString=function(a){var b;switch(a){case f.LogLevel.ERROR:b="ERROR";break;case f.LogLevel.WARNING:b="WARNING";break;case f.LogLevel.INFO:b="INFO";break;case f.LogLevel.DEBUG:b="DEBUG"}return b};var I=a.Storage=function(a,b,c,d){this._logger=a,this._logger.setModuleName("Storage"),this._storageInterface=b,this._callbackWithTimeout=c,this._systemSettings=d,this.load=function(a,b){var c=this._callbackWithTimeout.getWrapperCallback(b,1e3*this._systemSettings.storageTimeout,"storage load timeout");this._logger.debug("load(): calling StorageInterface.loadData"),this._storageInterface.loadData(I.STORAGE_SPACE,a,c)},this.save=function(a,b,c){var d=this._callbackWithTimeout.getWrapperCallback(c,1e3*this._systemSettings.storageTimeout,"storage save timeout");this._logger.debug("save(): calling StorageInterface.saveData"),this._storageInterface.saveData(I.STORAGE_SPACE,a,b,d)}};I.STORAGE_SPACE="Conviva";var J=a.SystemMetadata=function(a,c,d){this._logger=a,this._logger.setModuleName("SystemMetadata"),this._metadataInterface=c,this._exceptionCatcher=d,this._cachedMetadata=null,this.get=function(){return this._cachedMetadata||this.retrieve(),this._cachedMetadata},this.retrieve=function(){function a(a,b){d._exceptionCatcher.runProtected("Session.getSystemMetadataSchema(): "+a,function(){var c=b[a];b[a]=c.call(d._metadataInterface)})}var c={};c[J.BROWSER_NAME]=this._metadataInterface.getBrowserName,c[J.BROWSER_VERSION]=this._metadataInterface.getBrowserVersion,c[J.DEVICE_BRAND]=this._metadataInterface.getDeviceBrand,c[J.DEVICE_MANUFACTURER]=this._metadataInterface.getDeviceManufacturer,c[J.DEVICE_MODEL]=this._metadataInterface.getDeviceModel,c[J.DEVICE_TYPE]=this._metadataInterface.getDeviceType,c[J.DEVICE_VERSION]=this._metadataInterface.getDeviceVersion,c[J.FRAMEWORK_NAME]=this._metadataInterface.getFrameworkName,c[J.FRAMEWORK_VERSION]=this._metadataInterface.getFrameworkVersion,c[J.OPERATING_SYSTEM_NAME]=this._metadataInterface.getOperatingSystemName,c[J.OPERATING_SYSTEM_VERSION]=this._metadataInterface.getOperatingSystemVersion;var d=this;this._logger.debug("retrieve(): calling MetadataInterface methods");for(var e in c)a(e,c),B.isValidString(c[e])||delete c[e];c[J.DEVICE_TYPE]!==b.DeviceType.DESKTOP&&c[J.DEVICE_TYPE]!==b.DeviceType.CONSOLE&&c[J.DEVICE_TYPE]!==b.DeviceType.SETTOP&&c[J.DEVICE_TYPE]!==b.DeviceType.MOBILE&&c[J.DEVICE_TYPE]!==b.DeviceType.TABLET&&c[J.DEVICE_TYPE]!==b.DeviceType.SMARTTV&&delete c[J.DEVICE_TYPE],this._cachedMetadata=B.ObjectShallowCopyOmitNull(c)}};J.BROWSER_NAME="browserName",J.BROWSER_VERSION="browserVersion",J.DEVICE_BRAND="deviceBrand",J.DEVICE_MANUFACTURER="deviceManufacturer",J.DEVICE_MODEL="deviceModel",J.DEVICE_TYPE="deviceType",J.DEVICE_VERSION="deviceVersion",J.FRAMEWORK_NAME="frameworkName",J.FRAMEWORK_VERSION="frameworkVersion",J.OPERATING_SYSTEM_NAME="operatingSystemName",J.OPERATING_SYSTEM_VERSION="operatingSystemVersion";var K=a.Time=function(a,b){this._timeInterface=a,this._logger=b,this._logger.setModuleName("Time"),this.current=function(){var a=this._timeInterface.getEpochTimeMs();return B.isInteger(a)||this._logger.error("current(): TimeInterface.getEpochTimeMs() did not return an integer ("+a+")"),a}},L=a.Timer=function(a,b,c){var d=this;this._logger=a,this._logger.setModuleName("Timer"),this._timerInterface=b,this._exceptionCatcher=c,this.create=function(a,b,c){var e=function(){d._exceptionCatcher.runProtected(c,function(){a()})},f=this.createTimer(e,b,c);return f},this.createOnce=function(a,b,c){var e={cancel:null},f=function(){d._exceptionCatcher.runProtected(c,function(){e&&"function"==typeof e.cancel&&(e.cancel(),e.cancel=null,e=null),a()})},g=this.createTimer(f,b,c);return e.cancel=g,g},this.createTimer=function(a,b,c){return this._logger.debug("createTimer(): calling TimerInterface.create"),this._timerInterface.createTimer(a,b,c)}}}(),Conviva.Client=a.Client,Conviva.ContentMetadata=a.ContentMetadata,Conviva.PlayerStateManager=a.PlayerStateManager,Conviva.SystemSettings=a.SystemSettings,Conviva.ClientSettings=a.ClientSettings,Conviva.SystemInterface=a.SystemInterface,Conviva.HttpInterface=a.HttpInterface,Conviva.TimeInterface=a.TimeInterface,Conviva.TimerInterface=a.TimerInterface,Conviva.LoggingInterface=a.LoggingInterface,Conviva.MetadataInterface=a.MetadataInterface,Conviva.StorageInterface=a.StorageInterface,Conviva.SystemFactory=a.SystemFactory}})(),define("conviva_library",function(a){return function(){var b;return b||a.Conviva}}(this)),Html5PlayerInterface.POLL_STREAMER_INTERVAL_MS=500,Html5PlayerInterface.PAUSED_STATE_ON_CONSTANT_PHT_POLL_COUNT=4e3/Html5PlayerInterface.POLL_STREAMER_INTERVAL_MS,Html5PlayerInterface.PLAY_STATE_ON_MOVING_PHT_POLL_COUNT=2e3/Html5PlayerInterface.POLL_STREAMER_INTERVAL_MS,Html5PlayerInterface.PHT_PLAY_EXPECTED_SPEED=1,Html5PlayerInterface.PHT_PAUSED_EXPECTED_SPEED=0,Html5PlayerInterface.PHT_PLAY_TOLERANCE=.25;var Html5SystemInterfaceFactory=function(){this.build=function(){return new Conviva.SystemInterface(new Html5Time,new Html5Timer,new Html5Http,new Html5Storage,new Html5Metadata,new Html5Logging)}},ConvivaRequire=new _ConvivaRequire;define("conviva",["conviva_library"],function(a){return function(){var b;return b||a.ConvivaRequire}}(this)),function(a,b){"function"==typeof define&&define.amd?define("bam-media-conviva/ConvivaClipReader",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.ConvivaClipReader=b(a.lodash)}(this,function(a){var b=function(a){this.clipReader=a};return b.prototype.toString=function(){return"ConvivaClipReader"},b.prototype.getConvivaTrackingProps=function(b){return a.get(b,"convivaTrackingProps",{})},b.prototype.getAssetName=function(b){return a.get(b,"convivaTrackingProps.assetName",a.get(b,"content_id","UNKNOWN"))},b.prototype.getViewerId=function(b){var c=a.get(b,"convivaTrackingProps",{}),d=c["c3.viewer.id"],e=c.userid,f=a.get(b,"uid"),g=a.get(b,"user_id"),h="NA";return a.first(a.compact([d,f,g,e,h]))},new b}),function(a,b){"function"==typeof define&&define.amd?define("bam-media-conviva/ConvivaStreamer",["lodash/lodash","conviva_library","conviva","bam-media-conviva/ConvivaClipReader"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("conviva_library"),require("conviva"),require("bam-media-conviva/ConvivaClipReader")):a.ConvivaStreamer=b(a.lodash,a.Conviva,a.ConvivaRequire,a.ConvivaClipReader)}(this,function(a,b,c,d){"use strict";function e(b){return a.omit(b,["assetName","c3.viewer.id"])}function f(){console.log("[ConvivaStreamer]("+this.player.id+")",Array.prototype.slice.call(arguments).join(" "))}function g(){console.error("[ConvivaStreamer]("+this.player.id+")",Array.prototype.slice.call(arguments).join(" "))}var h=function(a,d,e){this.player=e,this.systemSettings=new b.SystemSettings,this.systemInterface=(new c.Html5SystemInterfaceFactory).build(),this.systemFactory=new b.SystemFactory(this.systemInterface,this.systemSettings),this.clientSettings=new b.ClientSettings(a),d&&(this.clientSettings.gatewayUrl=d),this.client=new b.Client(this.clientSettings,this.systemFactory),this.playerStateManager=this.client.getPlayerStateManager(),this.sessionKey=null,this.metadata=new b.ContentMetadata};return h.prototype.hasSession=function(){return!a.isNull(this.sessionKey)},h.prototype.setVideoNode=function(a){if(this.videoNode=a,this.playerStateManager&&this.videoNode){f.call(this,"setVideoNode");new c.Html5PlayerInterface(this.playerStateManager,a)}else g.call(this,"setVideoNode failed")},h.prototype.attachPlayer=function(){this.hasSession()&&(f.call(this,"attachPlayer"),this.client.attachPlayer(this.sessionKey,this.playerStateManager))},h.prototype.detachPlayer=function(){this.hasSession()&&(f.call(this,"detachPlayer"),this.client.detachPlayer(this.sessionKey))},h.prototype.cleanupSession=function(){return a.isNull(this.sessionKey)?!1:(f.call(this,"cleanupSession()"),this.client.detachPlayer(this.sessionKey),this.client.releasePlayerStateManager(this.sessionKey),this.client.cleanupSession(this.sessionKey),this.sessionKey=null,!0)},h.prototype.setMetadata=function(a,c){var g=this.player.utils.getClipReader();this.metadata.assetName=d.getAssetName(a),this.metadata.streamUrl=g.getPath(a),this.metadata.streamType=b.ContentMetadata.StreamType.UNKNOWN,this.metadata.defaultBitrateKbps=g.getBitrateWindow(a).initialBitrateKbps,this.metadata.applicationName=c,this.metadata.viewerId=d.getViewerId(a),this.metadata.custom=e(d.getConvivaTrackingProps(a)),f.call(this,"setMetadata()",JSON.stringify(this.metadata))},h.prototype.createSession=function(){f.call(this,"createSession"),this.sessionKey=this.client.createSession(this.metadata)},h.prototype.isLiveChanged=function(){f.call(this,"isLiveChanged"),this.hasSession()&&(this.metadata.streamType=this.player.state.isLive()?b.ContentMetadata.StreamType.LIVE:b.ContentMetadata.StreamType.VOD,this.client.updateContentMetadata(this.sessionKey,this.metadata))},h.prototype.bitrateChanged=function(){f.call(this,"bitrateChanged()",this.player.bitrates.getCurrentKbps()),this.playerStateManager.setBitrateKbps(this.player.bitrates.getCurrentKbps())},h.prototype.reportError=function(a){f.call(this,"reportError",a),this.client.reportError(this.sessionKey,a,b.Client.ErrorSeverity.FATAL)},h}),function(a,b){"function"==typeof define&&define.amd?define("bam-media-conviva/ConvivaManager",["lodash/lodash","bam-media-conviva/ConvivaStreamer"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-media-conviva/ConvivaStreamer")):a.ConvivaManager=b(a.lodash,a.ConvivaStreamer)}(this,function(a,b){"use strict";function c(b){return a.get(b,"convivaTrackingEnabled",!1)}function d(c,d){var g=e(d),h=g.key,i=g.url;a.isNull(h)?t("Could not determine conviva key. Cannot monitor this player"):(s("enableTracking for player:",c.id," for ",g.accountType),a.set(this.playersDictionary,c.id,new b(h,i,c)),f.call(this,c))}function e(b){var c=null,d=null,e=null,f=a.get(b,"convivaTestNetwork",!0),g=!f,h=!1;return h?{key:u,url:v,accountType:"DEV"}:(g?(c=a.get(b,"convivaCustomerKey"),e="PROD"):f&&(c=a.get(b,"convivaCustomerKeyTest"),e="QA"),{key:c,url:d,accountType:e})}function f(a){h.call(this,a,"on")}function g(a){h.call(this,a,"off")}function h(a,b){var c=a.utils.getEventList(),d=c.VideoClientEvents,e=c.PlayerEvents;a.dispatcher[b](d.VIDEO_NODE_ADDED,this.boundFxns._onVideoNodeAdded),a.dispatcher[b](e.MEDIA_SET,this.boundFxns._onMediaSet),a.dispatcher[b](e.PLAY_CONTENT_CALLED,this.boundFxns._onPlayContentCalled),a.dispatcher[b](e.ISLIVE_CHANGED,this.boundFxns._onIsLiveChanged),a.dispatcher[b](e.BITRATE_PROFILES_CHANGED,this.boundFxns._onBitrateChanged),a.dispatcher[b](e.PLAYER_DESTROYING,this.boundFxns._onPlayerDestroying),a.dispatcher[b](e.MEDIA_ERROR,this.boundFxns._onMediaError),a.dispatcher[b](e.MEDIA_COMPLETE,this.boundFxns._onMediaComplete)}function i(a){if(this.hasPlayer(a)){var b=this.getStreamer(a.player.id),c=a.$videoNode.get(0);b.setVideoNode(c),b.attachPlayer()}}function j(b){if(this.hasPlayer(b)){var c=this.getStreamer(b.player.id),d=b.clip,e=a.get(b.player,"config.property");c.cleanupSession(),c.setMetadata(d,e)}}function k(a){if(this.hasPlayer(a)){var b=this.getStreamer(a.player.id);b.hasSession()?s("Active Session exists for this player. Did not create a new session for "+a.player.id):b.createSession()}}function l(a){if(this.hasPlayer(a)){var b=this.getStreamer(a.player.id);b.isLiveChanged()}}function m(a){if(this.hasPlayer(a)){var b=this.getStreamer(a.player.id);b.bitrateChanged()}}function n(a){if(this.hasPlayer(a)){s("_onAdStart");var b=this.getStreamer(a.player.id);b.detachPlayer()}}function o(a){if(this.hasPlayer(a)){s("_onAdComplete");var b=this.getStreamer(a.player.id);b.attachPlayer()}}function p(a){if(this.hasPlayer(a)){s("_onPlayerDestroying");var b=this.getStreamer(a.player.id);b.cleanupSession(),g.call(this,a.player)}}function q(a){if(this.hasPlayer(a)){s("_onMediaError",a.message);var b=this.getStreamer(a.player.id);b.reportError(a.message)}}function r(a){if(this.hasPlayer(a)){s("_onMediaComplete");var b=this.getStreamer(a.player.id);b.cleanupSession(),g.call(this,a.player)}}function s(){console.log("[ConvivaManager]",Array.prototype.slice.call(arguments).join(" "))}function t(){console.warn("[ConvivaManager]",Array.prototype.slice.call(arguments).join(" "))}var u="36c5a9412da1c521ff9a432d0161c15839224313",v="https://mlb-test.testonly.conviva.com",w=function(){this.playersDictionary={},this.boundFxns={_onVideoNodeAdded:i.bind(this),_onMediaSet:j.bind(this),_onPlayContentCalled:k.bind(this),_onIsLiveChanged:l.bind(this),_onBitrateChanged:m.bind(this),_onAdStart:n.bind(this),_onAdComplete:o.bind(this),_onPlayerDestroying:p.bind(this),_onMediaError:q.bind(this),_onMediaComplete:r.bind(this)}};return w.prototype.getProperty=function(b,c,d){return a.get(this.playersDictionary,b.id+"."+c,d)},w.prototype.setProperty=function(b,c,d){a.set(this.playersDictionary,b.id+"."+c,d)},w.prototype.getStreamer=function(b){return a.get(this.playersDictionary,b)},w.prototype.hasPlayer=function(b){var c=a.get(b,"player",{id:"DNE"}),d=a.has(this.playersDictionary,c.id);return"DNE"==c.id?s("ERROR: player is not part of the event payload"):d||s("WARNING: player has not been registered"),d},w.prototype.registerPlayer=function(b){if(a.has(this.playersDictionary,b.id))error.call(this,b.id+" is already registered");else{var e=a.get(b.config,"tracking.conviva",{}),f=c(e);f&&d.call(this,b,e)}},new w}),define("../scripts/mlbtv-app",["jquery","bam-video-players/VideoPlayerManager","bam-video-players/valueObjects/MediaClipVO","bam-video-paid-interruptions/events/PaidInterruptionEvents","bam-browser-sdk","bam-media-conviva/ConvivaManager","intent-registry/IntentRegistry","bam-web-media-platform/dist/browser_browser_es5/bam-web-media-platform.debug","legacy-user-profile-service/dist/prod/amg","message-service/message-service","app/index","app/src/js/events/ViewEvents"],function(a,b,c,d,e,f,g,h,i,j,k,l){const m={VideoPlayerManager:b,MediaClipVO:c,PaidInterruptionEvents:d,SDK:e,ConvivaManager:f,IntentRegistry:g,MediaPlatform:h,MessageService:j,AuthenticatedMediaGateway:i};window.mlbtvApp=m,window.mediaConfig.app.siteAssetsUri=document.querySelector('meta[name="siteAssetsUri"]').getAttribute("content"),window.dispatchEvent(new CustomEvent("BMP_MEDIA_PLAYER_READY")),a("#mlbtv_index").on("click",".gd-testlinks li",function(){var b=a(this);b.hasClass("scoreboard")?j.publish(l.SHOW_SCORDBOARD):b.hasClass("rightpanel")?j.publish(l.SHOW_RIGHTPANEL):b.hasClass("chyron")?j.publish(l.SHOW_CHYRON):b.hasClass("strikezone")&&j.publish(l.SHOW_STRIKEZONE)}),a("#mlbtv_index").on("click",".gd-testlinks-hide li",function(){var b=a(this);b.hasClass("scoreboard")?j.publish(l.HIDE_SCORDBOARD):b.hasClass("rightpanel")?j.publish(l.HIDE_RIGHTPANEL):b.hasClass("chyron")?j.publish(l.HIDE_CHYRON):b.hasClass("strikezone")&&j.publish(l.HIDE_STRIKEZONE)}),j.on(l.SCORDBOARD.DATA.UPDATED,function(a){console.log(l.SCORDBOARD.DATA.UPDATED,a)}),j.on(l.SCORDBOARD.GAME.CLICK,function(a){console.log(l.SCORDBOARD.GAME.CLICK,a)}),j.on(l.GAMEDAY.DATA.UPDATED,function(a){console.log(l.GAMEDAY.DATA.UPDATED,a)}),j.on(l.GAMEDAY.GAME.SWITCH,function(a){console.log(l.GAMEDAY.GAME.SWITCH,a)}),j.on(l.CHYRON.LINESCORE.CLICK,function(a){console.log(l.CHYRON.LINESCORE.CLICK,a)})}),define("mlbtv-index-startup",["require","../scripts/external-scripts","../scripts/mlbtv-app"],function(a){a("../scripts/external-scripts"),a("../scripts/mlbtv-app")}),require(["mlbtv-index-startup"]);